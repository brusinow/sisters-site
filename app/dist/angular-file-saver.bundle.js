!function(root,factory){if("object"==typeof exports&&"object"==typeof module)module.exports=factory();else if("function"==typeof define&&define.amd)define([],factory);else{var a=factory();for(var i in a)("object"==typeof exports?exports:root)[i]=a[i]}}(this,function(){return function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:!1};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.loaded=!0,module.exports}var installedModules={};return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.p="",__webpack_require__(0)}([function(module,exports,__webpack_require__){"use strict";module.exports="ngFileSaver",angular.module("ngFileSaver",[]).factory("FileSaver",["Blob","SaveAs","FileSaverUtils",__webpack_require__(1)]).factory("FileSaverUtils",[__webpack_require__(2)]).factory("Blob",["$window",__webpack_require__(3)]).factory("SaveAs",[__webpack_require__(5)])},function(module,exports){"use strict";module.exports=function(Blob,SaveAs,FileSaverUtils){function save(blob,filename,disableAutoBOM){try{SaveAs(blob,filename,disableAutoBOM)}catch(err){FileSaverUtils.handleErrors(err.message)}}return{saveAs:function(data,filename,disableAutoBOM){return FileSaverUtils.isBlobInstance(data)||FileSaverUtils.handleErrors("Data argument should be a blob instance"),FileSaverUtils.isString(filename)||FileSaverUtils.handleErrors("Filename argument should be a string"),save(data,filename,disableAutoBOM)}}}},function(module,exports){"use strict";module.exports=function(){return{handleErrors:function(msg){throw new Error(msg)},isString:function(obj){return"string"==typeof obj||obj instanceof String},isUndefined:function(obj){return void 0===obj},isBlobInstance:function(obj){return obj instanceof Blob}}}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(4),module.exports=function($window){return $window.Blob}},function(module,exports){!function(view){"use strict";if(view.URL=view.URL||view.webkitURL,view.Blob&&view.URL)try{return void new Blob}catch(e){}var BlobBuilder=view.BlobBuilder||view.WebKitBlobBuilder||view.MozBlobBuilder||function(view){var get_class=function(object){return Object.prototype.toString.call(object).match(/^\[object\s(.*)\]$/)[1]},FakeBlobBuilder=function(){this.data=[]},FakeBlob=function(data,type,encoding){this.data=data,this.size=data.length,this.type=type,this.encoding=encoding},FBB_proto=FakeBlobBuilder.prototype,FB_proto=FakeBlob.prototype,FileReaderSync=view.FileReaderSync,FileException=function(type){this.code=this[this.name=type]},file_ex_codes="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),file_ex_code=file_ex_codes.length,real_URL=view.URL||view.webkitURL||view,real_create_object_URL=real_URL.createObjectURL,real_revoke_object_URL=real_URL.revokeObjectURL,URL=real_URL,btoa=view.btoa,atob=view.atob,ArrayBuffer=view.ArrayBuffer,Uint8Array=view.Uint8Array,origin=/^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/;for(FakeBlob.fake=FB_proto.fake=!0;file_ex_code--;)FileException.prototype[file_ex_codes[file_ex_code]]=file_ex_code+1;return real_URL.createObjectURL||(URL=view.URL=function(uri){var uri_origin,uri_info=document.createElementNS("http://www.w3.org/1999/xhtml","a");return uri_info.href=uri,"origin"in uri_info||("data:"===uri_info.protocol.toLowerCase()?uri_info.origin=null:(uri_origin=uri.match(origin),uri_info.origin=uri_origin&&uri_origin[1])),uri_info}),URL.createObjectURL=function(blob){var data_URI_header,type=blob.type;return null===type&&(type="application/octet-stream"),blob instanceof FakeBlob?(data_URI_header="data:"+type,"base64"===blob.encoding?data_URI_header+";base64,"+blob.data:"URI"===blob.encoding?data_URI_header+","+decodeURIComponent(blob.data):btoa?data_URI_header+";base64,"+btoa(blob.data):data_URI_header+","+encodeURIComponent(blob.data)):real_create_object_URL?real_create_object_URL.call(real_URL,blob):void 0},URL.revokeObjectURL=function(object_URL){"data:"!==object_URL.substring(0,5)&&real_revoke_object_URL&&real_revoke_object_URL.call(real_URL,object_URL)},FBB_proto.append=function(data){var bb=this.data;if(Uint8Array&&(data instanceof ArrayBuffer||data instanceof Uint8Array)){for(var str="",buf=new Uint8Array(data),i=0,buf_len=buf.length;i<buf_len;i++)str+=String.fromCharCode(buf[i]);bb.push(str)}else if("Blob"===get_class(data)||"File"===get_class(data)){if(!FileReaderSync)throw new FileException("NOT_READABLE_ERR");var fr=new FileReaderSync;bb.push(fr.readAsBinaryString(data))}else data instanceof FakeBlob?"base64"===data.encoding&&atob?bb.push(atob(data.data)):"URI"===data.encoding?bb.push(decodeURIComponent(data.data)):"raw"===data.encoding&&bb.push(data.data):("string"!=typeof data&&(data+=""),bb.push(unescape(encodeURIComponent(data))))},FBB_proto.getBlob=function(type){return arguments.length||(type=null),new FakeBlob(this.data.join(""),type,"raw")},FBB_proto.toString=function(){return"[object BlobBuilder]"},FB_proto.slice=function(start,end,type){var args=arguments.length;return args<3&&(type=null),new FakeBlob(this.data.slice(start,args>1?end:this.data.length),type,this.encoding)},FB_proto.toString=function(){return"[object Blob]"},FB_proto.close=function(){this.size=0,delete this.data},FakeBlobBuilder}(view);view.Blob=function(blobParts,options){var type=options?options.type||"":"",builder=new BlobBuilder;if(blobParts)for(var i=0,len=blobParts.length;i<len;i++)Uint8Array&&blobParts[i]instanceof Uint8Array?builder.append(blobParts[i].buffer):builder.append(blobParts[i]);var blob=builder.getBlob(type);return!blob.slice&&blob.webkitSlice&&(blob.slice=blob.webkitSlice),blob};var getPrototypeOf=Object.getPrototypeOf||function(object){return object.__proto__};view.Blob.prototype=getPrototypeOf(new view.Blob)}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content||this)},function(module,exports,__webpack_require__){"use strict";module.exports=function(){return __webpack_require__(6).saveAs||function(){}}},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__,saveAs=saveAs||function(view){"use strict";if(!(void 0===view||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var doc=view.document,get_URL=function(){return view.URL||view.webkitURL||view},save_link=doc.createElementNS("http://www.w3.org/1999/xhtml","a"),can_use_save_link="download"in save_link,click=function(node){var event=new MouseEvent("click");node.dispatchEvent(event)},is_safari=/constructor/i.test(view.HTMLElement),is_chrome_ios=/CriOS\/[\d]+/.test(navigator.userAgent),throw_outside=function(ex){(view.setImmediate||view.setTimeout)(function(){throw ex},0)},revoke=function(file){var revoker=function(){"string"==typeof file?get_URL().revokeObjectURL(file):file.remove()};setTimeout(revoker,4e4)},dispatch=function(filesaver,event_types,event){event_types=[].concat(event_types);for(var i=event_types.length;i--;){var listener=filesaver["on"+event_types[i]];if("function"==typeof listener)try{listener.call(filesaver,event||filesaver)}catch(ex){throw_outside(ex)}}},auto_bom=function(blob){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(blob.type)?new Blob([String.fromCharCode(65279),blob],{type:blob.type}):blob},FileSaver=function(blob,name,no_auto_bom){no_auto_bom||(blob=auto_bom(blob));var object_url,filesaver=this,type=blob.type,force="application/octet-stream"===type,dispatch_all=function(){dispatch(filesaver,"writestart progress write writeend".split(" "))};if(filesaver.readyState=filesaver.INIT,can_use_save_link)return object_url=get_URL().createObjectURL(blob),void setTimeout(function(){save_link.href=object_url,save_link.download=name,click(save_link),dispatch_all(),revoke(object_url),filesaver.readyState=filesaver.DONE});!function(){if((is_chrome_ios||force&&is_safari)&&view.FileReader){var reader=new FileReader;return reader.onloadend=function(){var url=is_chrome_ios?reader.result:reader.result.replace(/^data:[^;]*;/,"data:attachment/file;");view.open(url,"_blank")||(view.location.href=url),url=void 0,filesaver.readyState=filesaver.DONE,dispatch_all()},reader.readAsDataURL(blob),void(filesaver.readyState=filesaver.INIT)}if(object_url||(object_url=get_URL().createObjectURL(blob)),force)view.location.href=object_url;else{view.open(object_url,"_blank")||(view.location.href=object_url)}filesaver.readyState=filesaver.DONE,dispatch_all(),revoke(object_url)}()},FS_proto=FileSaver.prototype,saveAs=function(blob,name,no_auto_bom){return new FileSaver(blob,name||blob.name||"download",no_auto_bom)};return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(blob,name,no_auto_bom){return name=name||blob.name||"download",no_auto_bom||(blob=auto_bom(blob)),navigator.msSaveOrOpenBlob(blob,name)}:(FS_proto.abort=function(){},FS_proto.readyState=FS_proto.INIT=0,FS_proto.WRITING=1,FS_proto.DONE=2,FS_proto.error=FS_proto.onwritestart=FS_proto.onprogress=FS_proto.onwrite=FS_proto.onabort=FS_proto.onerror=FS_proto.onwriteend=null,saveAs)}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);void 0!==module&&module.exports?module.exports.saveAs=saveAs:null!==__webpack_require__(7)&&null!==__webpack_require__(8)&&(__WEBPACK_AMD_DEFINE_ARRAY__=[],void 0!==(__WEBPACK_AMD_DEFINE_RESULT__=function(){return saveAs}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__))&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},function(module,exports){module.exports=function(){throw new Error("define cannot be used indirect")}},function(module,exports){(function(__webpack_amd_options__){module.exports=__webpack_amd_options__}).call(exports,{})}])});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFuZ3VsYXItZmlsZS1zYXZlci5idW5kbGUuanMiXSwibmFtZXMiOlsicm9vdCIsImZhY3RvcnkiLCJleHBvcnRzIiwibW9kdWxlIiwiZGVmaW5lIiwiYW1kIiwiYSIsImkiLCJ0aGlzIiwibW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImluc3RhbGxlZE1vZHVsZXMiLCJpZCIsImxvYWRlZCIsImNhbGwiLCJtIiwiYyIsInAiLCJhbmd1bGFyIiwiQmxvYiIsIlNhdmVBcyIsIkZpbGVTYXZlclV0aWxzIiwic2F2ZSIsImJsb2IiLCJmaWxlbmFtZSIsImRpc2FibGVBdXRvQk9NIiwiZXJyIiwiaGFuZGxlRXJyb3JzIiwibWVzc2FnZSIsInNhdmVBcyIsImRhdGEiLCJpc0Jsb2JJbnN0YW5jZSIsImlzU3RyaW5nIiwibXNnIiwiRXJyb3IiLCJvYmoiLCJTdHJpbmciLCJpc1VuZGVmaW5lZCIsIiR3aW5kb3ciLCJ2aWV3IiwiVVJMIiwid2Via2l0VVJMIiwiZSIsIkJsb2JCdWlsZGVyIiwiV2ViS2l0QmxvYkJ1aWxkZXIiLCJNb3pCbG9iQnVpbGRlciIsImdldF9jbGFzcyIsIm9iamVjdCIsIk9iamVjdCIsInByb3RvdHlwZSIsInRvU3RyaW5nIiwibWF0Y2giLCJGYWtlQmxvYkJ1aWxkZXIiLCJGYWtlQmxvYiIsInR5cGUiLCJlbmNvZGluZyIsInNpemUiLCJsZW5ndGgiLCJGQkJfcHJvdG8iLCJGQl9wcm90byIsIkZpbGVSZWFkZXJTeW5jIiwiRmlsZUV4Y2VwdGlvbiIsImNvZGUiLCJuYW1lIiwiZmlsZV9leF9jb2RlcyIsInNwbGl0IiwiZmlsZV9leF9jb2RlIiwicmVhbF9VUkwiLCJyZWFsX2NyZWF0ZV9vYmplY3RfVVJMIiwiY3JlYXRlT2JqZWN0VVJMIiwicmVhbF9yZXZva2Vfb2JqZWN0X1VSTCIsInJldm9rZU9iamVjdFVSTCIsImJ0b2EiLCJhdG9iIiwiQXJyYXlCdWZmZXIiLCJVaW50OEFycmF5Iiwib3JpZ2luIiwiZmFrZSIsInVyaSIsInVyaV9vcmlnaW4iLCJ1cmlfaW5mbyIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudE5TIiwiaHJlZiIsInByb3RvY29sIiwidG9Mb3dlckNhc2UiLCJkYXRhX1VSSV9oZWFkZXIiLCJkZWNvZGVVUklDb21wb25lbnQiLCJlbmNvZGVVUklDb21wb25lbnQiLCJvYmplY3RfVVJMIiwic3Vic3RyaW5nIiwiYXBwZW5kIiwiYmIiLCJzdHIiLCJidWYiLCJidWZfbGVuIiwiZnJvbUNoYXJDb2RlIiwicHVzaCIsImZyIiwicmVhZEFzQmluYXJ5U3RyaW5nIiwidW5lc2NhcGUiLCJnZXRCbG9iIiwiYXJndW1lbnRzIiwiam9pbiIsInNsaWNlIiwic3RhcnQiLCJlbmQiLCJhcmdzIiwiY2xvc2UiLCJibG9iUGFydHMiLCJvcHRpb25zIiwiYnVpbGRlciIsImxlbiIsImJ1ZmZlciIsIndlYmtpdFNsaWNlIiwiZ2V0UHJvdG90eXBlT2YiLCJfX3Byb3RvX18iLCJzZWxmIiwid2luZG93IiwiY29udGVudCIsIl9fV0VCUEFDS19BTURfREVGSU5FX0FSUkFZX18iLCJfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXyIsIm5hdmlnYXRvciIsInRlc3QiLCJ1c2VyQWdlbnQiLCJkb2MiLCJnZXRfVVJMIiwic2F2ZV9saW5rIiwiY2FuX3VzZV9zYXZlX2xpbmsiLCJjbGljayIsIm5vZGUiLCJldmVudCIsIk1vdXNlRXZlbnQiLCJkaXNwYXRjaEV2ZW50IiwiaXNfc2FmYXJpIiwiSFRNTEVsZW1lbnQiLCJpc19jaHJvbWVfaW9zIiwidGhyb3dfb3V0c2lkZSIsImV4Iiwic2V0SW1tZWRpYXRlIiwic2V0VGltZW91dCIsInJldm9rZSIsImZpbGUiLCJyZXZva2VyIiwicmVtb3ZlIiwiZGlzcGF0Y2giLCJmaWxlc2F2ZXIiLCJldmVudF90eXBlcyIsImNvbmNhdCIsImxpc3RlbmVyIiwiYXV0b19ib20iLCJGaWxlU2F2ZXIiLCJub19hdXRvX2JvbSIsIm9iamVjdF91cmwiLCJmb3JjZSIsImRpc3BhdGNoX2FsbCIsInJlYWR5U3RhdGUiLCJJTklUIiwiZG93bmxvYWQiLCJET05FIiwiRmlsZVJlYWRlciIsInJlYWRlciIsIm9ubG9hZGVuZCIsInVybCIsInJlc3VsdCIsInJlcGxhY2UiLCJvcGVuIiwibG9jYXRpb24iLCJ1bmRlZmluZWQiLCJyZWFkQXNEYXRhVVJMIiwiRlNfcHJvdG8iLCJtc1NhdmVPck9wZW5CbG9iIiwiYWJvcnQiLCJXUklUSU5HIiwiZXJyb3IiLCJvbndyaXRlc3RhcnQiLCJvbnByb2dyZXNzIiwib253cml0ZSIsIm9uYWJvcnQiLCJvbmVycm9yIiwib253cml0ZWVuZCIsImFwcGx5IiwiX193ZWJwYWNrX2FtZF9vcHRpb25zX18iXSwibWFwcGluZ3MiOiJDQUFBLFNBQTJDQSxLQUFNQyxTQUNoRCxHQUFzQixnQkFBWkMsVUFBMEMsZ0JBQVhDLFFBQ3hDQSxPQUFPRCxRQUFVRCxjQUNiLElBQXFCLGtCQUFYRyxTQUF5QkEsT0FBT0MsSUFDOUNELFVBQVdILGFBQ1AsQ0FDSixHQUFJSyxHQUFJTCxTQUNSLEtBQUksR0FBSU0sS0FBS0QsSUFBdUIsZ0JBQVpKLFNBQXVCQSxRQUFVRixNQUFNTyxHQUFLRCxFQUFFQyxLQUVyRUMsS0FBTSxXQUNULE1BQWdCLFVBQVVDLFNBS2hCLFFBQVNDLHFCQUFvQkMsVUFHNUIsR0FBR0MsaUJBQWlCRCxVQUNuQixNQUFPQyxrQkFBaUJELFVBQVVULE9BR25DLElBQUlDLFFBQVNTLGlCQUFpQkQsV0FDN0JULFdBQ0FXLEdBQUlGLFNBQ0pHLFFBQVEsRUFVVCxPQU5BTCxTQUFRRSxVQUFVSSxLQUFLWixPQUFPRCxRQUFTQyxPQUFRQSxPQUFPRCxRQUFTUSxxQkFHL0RQLE9BQU9XLFFBQVMsRUFHVFgsT0FBT0QsUUF2QmYsR0FBSVUsb0JBcUNKLE9BVEFGLHFCQUFvQk0sRUFBSVAsUUFHeEJDLG9CQUFvQk8sRUFBSUwsaUJBR3hCRixvQkFBb0JRLEVBQUksR0FHakJSLG9CQUFvQixLQUsvQixTQUFTUCxPQUFRRCxRQUFTUSxxQkFFL0IsWUFXQVAsUUFBT0QsUUFBVSxjQUVqQmlCLFFBQVFoQixPQUFPLGtCQUNaRixRQUFRLGFBQWMsT0FBUSxTQUFVLGlCQUFrQlMsb0JBQW9CLEtBQzlFVCxRQUFRLGtCQUFtQlMsb0JBQW9CLEtBQy9DVCxRQUFRLFFBQVMsVUFBV1Msb0JBQW9CLEtBQ2hEVCxRQUFRLFVBQVdTLG9CQUFvQixNQUtyQyxTQUFTUCxPQUFRRCxTQUV0QixZQUVBQyxRQUFPRCxRQUFVLFNBQW1Ca0IsS0FBTUMsT0FBUUMsZ0JBRWhELFFBQVNDLE1BQUtDLEtBQU1DLFNBQVVDLGdCQUM1QixJQUNFTCxPQUFPRyxLQUFNQyxTQUFVQyxnQkFDdkIsTUFBTUMsS0FDTkwsZUFBZU0sYUFBYUQsSUFBSUUsVUFJcEMsT0FnQkVDLE9BQVEsU0FBU0MsS0FBTU4sU0FBVUMsZ0JBVS9CLE1BUktKLGdCQUFlVSxlQUFlRCxPQUNqQ1QsZUFBZU0sYUFBYSwyQ0FHekJOLGVBQWVXLFNBQVNSLFdBQzNCSCxlQUFlTSxhQUFhLHdDQUd2QkwsS0FBS1EsS0FBTU4sU0FBVUMsb0JBUTdCLFNBQVN2QixPQUFRRCxTQUV0QixZQUVBQyxRQUFPRCxRQUFVLFdBQ2YsT0FDRTBCLGFBQWMsU0FBU00sS0FDckIsS0FBTSxJQUFJQyxPQUFNRCxNQUVsQkQsU0FBVSxTQUFTRyxLQUNqQixNQUFzQixnQkFBUkEsTUFBb0JBLGNBQWVDLFNBRW5EQyxZQUFhLFNBQVNGLEtBQ3BCLFdBQXNCLEtBQVJBLEtBRWhCSixlQUFnQixTQUFTSSxLQUN2QixNQUFPQSxlQUFlaEIsVUFRdkIsU0FBU2pCLE9BQVFELFFBQVNRLHFCQUUvQixZQUVBQSxxQkFBb0IsR0FFcEJQLE9BQU9ELFFBQVUsU0FBY3FDLFNBQzdCLE1BQU9BLFNBQVFuQixPQU1aLFNBQVNqQixPQUFRRCxVQWtCckIsU0FBVXNDLE1BQ1YsWUFJQSxJQUZBQSxLQUFLQyxJQUFNRCxLQUFLQyxLQUFPRCxLQUFLRSxVQUV4QkYsS0FBS3BCLE1BQVFvQixLQUFLQyxJQUNyQixJQUVDLFdBREEsSUFBSXJCLE1BRUgsTUFBT3VCLElBS1YsR0FBSUMsYUFBY0osS0FBS0ksYUFBZUosS0FBS0ssbUJBQXFCTCxLQUFLTSxnQkFBbUIsU0FBU04sTUFDaEcsR0FDR08sV0FBWSxTQUFTQyxRQUN0QixNQUFPQyxRQUFPQyxVQUFVQyxTQUFTcEMsS0FBS2lDLFFBQVFJLE1BQU0sc0JBQXNCLElBRXpFQyxnQkFBa0IsV0FDbkI3QyxLQUFLdUIsU0FFSnVCLFNBQVcsU0FBY3ZCLEtBQU13QixLQUFNQyxVQUN0Q2hELEtBQUt1QixLQUFPQSxLQUNadkIsS0FBS2lELEtBQU8xQixLQUFLMkIsT0FDakJsRCxLQUFLK0MsS0FBT0EsS0FDWi9DLEtBQUtnRCxTQUFXQSxVQUVmRyxVQUFZTixnQkFBZ0JILFVBQzVCVSxTQUFXTixTQUFTSixVQUNwQlcsZUFBaUJyQixLQUFLcUIsZUFDdEJDLGNBQWdCLFNBQVNQLE1BQzFCL0MsS0FBS3VELEtBQU92RCxLQUFLQSxLQUFLd0QsS0FBT1QsT0FFNUJVLGNBQWdCLDhIQUdoQkMsTUFBTSxLQUNOQyxhQUFlRixjQUFjUCxPQUM3QlUsU0FBVzVCLEtBQUtDLEtBQU9ELEtBQUtFLFdBQWFGLEtBQ3pDNkIsdUJBQXlCRCxTQUFTRSxnQkFDbENDLHVCQUF5QkgsU0FBU0ksZ0JBQ2xDL0IsSUFBTTJCLFNBQ05LLEtBQU9qQyxLQUFLaUMsS0FDWkMsS0FBT2xDLEtBQUtrQyxLQUVaQyxZQUFjbkMsS0FBS21DLFlBQ25CQyxXQUFhcEMsS0FBS29DLFdBRWxCQyxPQUFTLHdDQUdaLEtBREF2QixTQUFTd0IsS0FBT2xCLFNBQVNrQixNQUFPLEVBQ3pCWCxnQkFDTkwsY0FBY1osVUFBVWUsY0FBY0UsZUFBaUJBLGFBQWUsQ0FrSHZFLE9BL0dLQyxVQUFTRSxrQkFDYjdCLElBQU1ELEtBQUtDLElBQU0sU0FBU3NDLEtBQ3pCLEdBRUdDLFlBREFDLFNBQVdDLFNBQVNDLGdCQUFnQiwrQkFBZ0MsSUFZdkUsT0FUQUYsVUFBU0csS0FBT0wsSUFDVixVQUFZRSxZQUN1QixVQUFwQ0EsU0FBU0ksU0FBU0MsY0FDckJMLFNBQVNKLE9BQVMsTUFFbEJHLFdBQWFELElBQUkzQixNQUFNeUIsUUFDdkJJLFNBQVNKLE9BQVNHLFlBQWNBLFdBQVcsS0FHdENDLFdBR1R4QyxJQUFJNkIsZ0JBQWtCLFNBQVM5QyxNQUM5QixHQUVHK0QsaUJBREFoQyxLQUFPL0IsS0FBSytCLElBTWYsT0FIYSxRQUFUQSxPQUNIQSxLQUFPLDRCQUVKL0IsZUFBZ0I4QixXQUNuQmlDLGdCQUFrQixRQUFVaEMsS0FDTixXQUFsQi9CLEtBQUtnQyxTQUNEK0IsZ0JBQWtCLFdBQWEvRCxLQUFLTyxLQUNmLFFBQWxCUCxLQUFLZ0MsU0FDUitCLGdCQUFrQixJQUFNQyxtQkFBbUJoRSxLQUFLTyxNQUNsRDBDLEtBQ0VjLGdCQUFrQixXQUFhZCxLQUFLakQsS0FBS08sTUFFekN3RCxnQkFBa0IsSUFBTUUsbUJBQW1CakUsS0FBS08sT0FFOUNzQyx1QkFDSEEsdUJBQXVCdEQsS0FBS3FELFNBQVU1QyxVQUR2QyxJQUlSaUIsSUFBSStCLGdCQUFrQixTQUFTa0IsWUFDSyxVQUEvQkEsV0FBV0MsVUFBVSxFQUFHLElBQWtCcEIsd0JBQzdDQSx1QkFBdUJ4RCxLQUFLcUQsU0FBVXNCLGFBR3hDL0IsVUFBVWlDLE9BQVMsU0FBUzdELE1BQzNCLEdBQUk4RCxJQUFLckYsS0FBS3VCLElBRWQsSUFBSTZDLGFBQWU3QyxlQUFnQjRDLGNBQWU1QyxlQUFnQjZDLGFBQWEsQ0FPOUUsSUFOQSxHQUNHa0IsS0FBTSxHQUNOQyxJQUFNLEdBQUluQixZQUFXN0MsTUFDckJ4QixFQUFJLEVBQ0p5RixRQUFVRCxJQUFJckMsT0FFVm5ELEVBQUl5RixRQUFTekYsSUFDbkJ1RixLQUFPekQsT0FBTzRELGFBQWFGLElBQUl4RixHQUVoQ3NGLElBQUdLLEtBQUtKLFNBQ0YsSUFBd0IsU0FBcEIvQyxVQUFVaEIsT0FBd0MsU0FBcEJnQixVQUFVaEIsTUFBa0IsQ0FDcEUsSUFBSThCLGVBS0gsS0FBTSxJQUFJQyxlQUFjLG1CQUp4QixJQUFJcUMsSUFBSyxHQUFJdEMsZUFDYmdDLElBQUdLLEtBQUtDLEdBQUdDLG1CQUFtQnJFLFdBS3JCQSxnQkFBZ0J1QixVQUNKLFdBQWxCdkIsS0FBS3lCLFVBQXlCa0IsS0FDakNtQixHQUFHSyxLQUFLeEIsS0FBSzNDLEtBQUtBLE9BQ1UsUUFBbEJBLEtBQUt5QixTQUNmcUMsR0FBR0ssS0FBS1YsbUJBQW1CekQsS0FBS0EsT0FDSixRQUFsQkEsS0FBS3lCLFVBQ2ZxQyxHQUFHSyxLQUFLbkUsS0FBS0EsT0FHTSxnQkFBVEEsUUFDVkEsTUFBUSxJQUdUOEQsR0FBR0ssS0FBS0csU0FBU1osbUJBQW1CMUQsVUFHdEM0QixVQUFVMkMsUUFBVSxTQUFTL0MsTUFJNUIsTUFIS2dELFdBQVU3QyxTQUNkSCxLQUFPLE1BRUQsR0FBSUQsVUFBUzlDLEtBQUt1QixLQUFLeUUsS0FBSyxJQUFLakQsS0FBTSxRQUUvQ0ksVUFBVVIsU0FBVyxXQUNwQixNQUFPLHdCQUVSUyxTQUFTNkMsTUFBUSxTQUFTQyxNQUFPQyxJQUFLcEQsTUFDckMsR0FBSXFELE1BQU9MLFVBQVU3QyxNQUlyQixPQUhJa0QsTUFBTyxJQUNWckQsS0FBTyxNQUVELEdBQUlELFVBQ1I5QyxLQUFLdUIsS0FBSzBFLE1BQU1DLE1BQU9FLEtBQU8sRUFBSUQsSUFBTW5HLEtBQUt1QixLQUFLMkIsUUFDbERILEtBQ0EvQyxLQUFLZ0QsV0FHVEksU0FBU1QsU0FBVyxXQUNuQixNQUFPLGlCQUVSUyxTQUFTaUQsTUFBUSxXQUNoQnJHLEtBQUtpRCxLQUFPLFFBQ0xqRCxNQUFLdUIsTUFFTnNCLGlCQUNOYixLQUVGQSxNQUFLcEIsS0FBTyxTQUFTMEYsVUFBV0MsU0FDL0IsR0FBSXhELE1BQU93RCxRQUFXQSxRQUFReEQsTUFBUSxHQUFNLEdBQ3hDeUQsUUFBVSxHQUFJcEUsWUFDbEIsSUFBSWtFLFVBQ0gsSUFBSyxHQUFJdkcsR0FBSSxFQUFHMEcsSUFBTUgsVUFBVXBELE9BQVFuRCxFQUFJMEcsSUFBSzFHLElBQzVDcUUsWUFBY2tDLFVBQVV2RyxZQUFjcUUsWUFDekNvQyxRQUFRcEIsT0FBT2tCLFVBQVV2RyxHQUFHMkcsUUFHNUJGLFFBQVFwQixPQUFPa0IsVUFBVXZHLEdBSTVCLElBQUlpQixNQUFPd0YsUUFBUVYsUUFBUS9DLEtBSTNCLFFBSEsvQixLQUFLaUYsT0FBU2pGLEtBQUsyRixjQUN2QjNGLEtBQUtpRixNQUFRakYsS0FBSzJGLGFBRVozRixLQUdSLElBQUk0RixnQkFBaUJuRSxPQUFPbUUsZ0JBQWtCLFNBQVNwRSxRQUN0RCxNQUFPQSxRQUFPcUUsVUFFZjdFLE1BQUtwQixLQUFLOEIsVUFBWWtFLGVBQWUsR0FBSTVFLE1BQUtwQixPQUM3QixtQkFBVGtHLE9BQXdCQSxNQUEwQixtQkFBWEMsU0FBMEJBLFFBQVUvRyxLQUFLZ0gsU0FBV2hILE9BSy9GLFNBQVNMLE9BQVFELFFBQVNRLHFCQUUvQixZQUVBUCxRQUFPRCxRQUFVLFdBQ2YsTUFBT1EscUJBQW9CLEdBQUdvQixRQUFVLGVBTXJDLFNBQVMzQixPQUFRRCxRQUFTUSxxQkFFL0IsR0FBSStHLDhCQUE4QkMsOEJBZTlCNUYsT0FBU0EsUUFBVyxTQUFTVSxNQUNoQyxZQUVBLFVBQW9CLEtBQVRBLE1BQTZDLG1CQUFkbUYsWUFBNkIsZUFBZUMsS0FBS0QsVUFBVUUsWUFBckcsQ0FHQSxHQUNHQyxLQUFNdEYsS0FBSzBDLFNBRVg2QyxRQUFVLFdBQ1gsTUFBT3ZGLE1BQUtDLEtBQU9ELEtBQUtFLFdBQWFGLE1BRXBDd0YsVUFBWUYsSUFBSTNDLGdCQUFnQiwrQkFBZ0MsS0FDaEU4QyxrQkFBb0IsWUFBY0QsV0FDbENFLE1BQVEsU0FBU0MsTUFDbEIsR0FBSUMsT0FBUSxHQUFJQyxZQUFXLFFBQzNCRixNQUFLRyxjQUFjRixRQUVsQkcsVUFBWSxlQUFlWCxLQUFLcEYsS0FBS2dHLGFBQ3JDQyxjQUFlLGVBQWViLEtBQUtELFVBQVVFLFdBQzdDYSxjQUFnQixTQUFTQyxLQUN6Qm5HLEtBQUtvRyxjQUFnQnBHLEtBQUtxRyxZQUFZLFdBQ3RDLEtBQU1GLEtBQ0osSUFLRkcsT0FBUyxTQUFTQyxNQUNuQixHQUFJQyxTQUFVLFdBQ08sZ0JBQVRELE1BQ1ZoQixVQUFVdkQsZ0JBQWdCdUUsTUFFMUJBLEtBQUtFLFNBR1BKLFlBQVdHLFFBVGlCLE1BVzNCRSxTQUFXLFNBQVNDLFVBQVdDLFlBQWFoQixPQUM3Q2dCLGVBQWlCQyxPQUFPRCxZQUV4QixLQURBLEdBQUk3SSxHQUFJNkksWUFBWTFGLE9BQ2JuRCxLQUFLLENBQ1gsR0FBSStJLFVBQVdILFVBQVUsS0FBT0MsWUFBWTdJLEdBQzVDLElBQXdCLGtCQUFiK0ksVUFDVixJQUNDQSxTQUFTdkksS0FBS29JLFVBQVdmLE9BQVNlLFdBQ2pDLE1BQU9SLElBQ1JELGNBQWNDLE9BS2hCWSxTQUFXLFNBQVMvSCxNQUdyQixNQUFJLDZFQUE2RW9HLEtBQUtwRyxLQUFLK0IsTUFDbkYsR0FBSW5DLE9BQU1pQixPQUFPNEQsYUFBYSxPQUFTekUsT0FBUStCLEtBQU0vQixLQUFLK0IsT0FFM0QvQixNQUVOZ0ksVUFBWSxTQUFTaEksS0FBTXdDLEtBQU15RixhQUM3QkEsY0FDSmpJLEtBQU8rSCxTQUFTL0gsTUFHakIsSUFJR2tJLFlBSEFQLFVBQVkzSSxLQUNaK0MsS0FBTy9CLEtBQUsrQixLQUNab0csTUEzQ29CLDZCQTJDWnBHLEtBRVJxRyxhQUFlLFdBQ2hCVixTQUFTQyxVQUFXLHFDQUFxQ2pGLE1BQU0sTUF1Q2pFLElBRkFpRixVQUFVVSxXQUFhVixVQUFVVyxLQUU3QjdCLGtCQVVILE1BVEF5QixZQUFhM0IsVUFBVXpELGdCQUFnQjlDLFVBQ3ZDcUgsWUFBVyxXQUNWYixVQUFVNUMsS0FBT3NFLFdBQ2pCMUIsVUFBVStCLFNBQVcvRixLQUNyQmtFLE1BQU1GLFdBQ040QixlQUNBZCxPQUFPWSxZQUNQUCxVQUFVVSxXQUFhVixVQUFVYSxRQTVDckIsV0FDWixJQUFLdkIsZUFBa0JrQixPQUFTcEIsWUFBZS9GLEtBQUt5SCxXQUFZLENBRS9ELEdBQUlDLFFBQVMsR0FBSUQsV0FXakIsT0FWQUMsUUFBT0MsVUFBWSxXQUNsQixHQUFJQyxLQUFNM0IsY0FBZ0J5QixPQUFPRyxPQUFTSCxPQUFPRyxPQUFPQyxRQUFRLGVBQWdCLHdCQUNwRTlILE1BQUsrSCxLQUFLSCxJQUFLLFlBQ2hCNUgsS0FBS2dJLFNBQVNwRixLQUFPZ0YsS0FDaENBLFFBQUlLLEdBQ0p0QixVQUFVVSxXQUFhVixVQUFVYSxLQUNqQ0osZ0JBRURNLE9BQU9RLGNBQWNsSixXQUNyQjJILFVBQVVVLFdBQWFWLFVBQVVXLE1BT2xDLEdBSEtKLGFBQ0pBLFdBQWEzQixVQUFVekQsZ0JBQWdCOUMsT0FFcENtSSxNQUNIbkgsS0FBS2dJLFNBQVNwRixLQUFPc0UsZUFDZixDQUNPbEgsS0FBSytILEtBQUtiLFdBQVksWUFHbENsSCxLQUFLZ0ksU0FBU3BGLEtBQU9zRSxZQUd2QlAsVUFBVVUsV0FBYVYsVUFBVWEsS0FDakNKLGVBQ0FkLE9BQU9ZLGdCQW9CUmlCLFNBQVduQixVQUFVdEcsVUFDckJwQixPQUFTLFNBQVNOLEtBQU13QyxLQUFNeUYsYUFDL0IsTUFBTyxJQUFJRCxXQUFVaEksS0FBTXdDLE1BQVF4QyxLQUFLd0MsTUFBUSxXQUFZeUYsYUFJOUQsT0FBeUIsbUJBQWQ5QixZQUE2QkEsVUFBVWlELGlCQUMxQyxTQUFTcEosS0FBTXdDLEtBQU15RixhQU0zQixNQUxBekYsTUFBT0EsTUFBUXhDLEtBQUt3QyxNQUFRLFdBRXZCeUYsY0FDSmpJLEtBQU8rSCxTQUFTL0gsT0FFVm1HLFVBQVVpRCxpQkFBaUJwSixLQUFNd0MsUUFJMUMyRyxTQUFTRSxNQUFRLGFBQ2pCRixTQUFTZCxXQUFhYyxTQUFTYixLQUFPLEVBQ3RDYSxTQUFTRyxRQUFVLEVBQ25CSCxTQUFTWCxLQUFPLEVBRWhCVyxTQUFTSSxNQUNUSixTQUFTSyxhQUNUTCxTQUFTTSxXQUNUTixTQUFTTyxRQUNUUCxTQUFTUSxRQUNUUixTQUFTUyxRQUNUVCxTQUFTVSxXQUNSLEtBRU12SixVQUVZLG1CQUFUd0YsT0FBd0JBLE1BQ2IsbUJBQVhDLFNBQTBCQSxRQUNqQy9HLEtBQUtnSCxhQU1hLEtBQVhySCxRQUEwQkEsT0FBT0QsUUFDMUNDLE9BQU9ELFFBQVE0QixPQUFTQSxPQUMyQyxPQUEzQnBCLG9CQUFvQixJQUE0QyxPQUEzQkEsb0JBQW9CLEtBQy9GK0csb0NBRWdGZ0QsTUFGN0MvQyw4QkFBZ0MsV0FDbkUsTUFBTzVGLFNBQ1B3SixNQUFNcEwsUUFBU3VILGlDQUErRXRILE9BQU9ELFFBQVV3SCxpQ0FNOUcsU0FBU3ZILE9BQVFELFNBRXRCQyxPQUFPRCxRQUFVLFdBQWEsS0FBTSxJQUFJaUMsT0FBTSxvQ0FLekMsU0FBU2hDLE9BQVFELFVBRU0sU0FBU3FMLHlCQUEwQnBMLE9BQU9ELFFBQVVxTCwwQkFFbkR4SyxLQUFLYiIsImZpbGUiOiJhbmd1bGFyLWZpbGUtc2F2ZXIuYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoW10sIGZhY3RvcnkpO1xuXHRlbHNlIHtcblx0XHR2YXIgYSA9IGZhY3RvcnkoKTtcblx0XHRmb3IodmFyIGkgaW4gYSkgKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyA/IGV4cG9ydHMgOiByb290KVtpXSA9IGFbaV07XG5cdH1cbn0pKHRoaXMsIGZ1bmN0aW9uKCkge1xucmV0dXJuIC8qKioqKiovIChmdW5jdGlvbihtb2R1bGVzKSB7IC8vIHdlYnBhY2tCb290c3RyYXBcbi8qKioqKiovIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4vKioqKioqLyBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4vKioqKioqLyBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuLyoqKioqKi8gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuLyoqKioqKi8gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuLyoqKioqKi8gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG5cbi8qKioqKiovIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuLyoqKioqKi8gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbi8qKioqKiovIFx0XHRcdGV4cG9ydHM6IHt9LFxuLyoqKioqKi8gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuLyoqKioqKi8gXHRcdFx0bG9hZGVkOiBmYWxzZVxuLyoqKioqKi8gXHRcdH07XG5cbi8qKioqKiovIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbi8qKioqKiovIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuLyoqKioqKi8gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbi8qKioqKiovIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcblxuLyoqKioqKi8gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4vKioqKioqLyBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuLyoqKioqKi8gXHR9XG5cblxuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbi8qKioqKiovIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuLyoqKioqKi8gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8qKioqKiovIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oMCk7XG4vKioqKioqLyB9KVxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKioqKiovIChbXG4vKiAwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdC8qXG5cdCpcblx0KiBBIEFuZ3VsYXJKUyBtb2R1bGUgdGhhdCBpbXBsZW1lbnRzIHRoZSBIVE1MNSBXM0Mgc2F2ZUFzKCkgaW4gYnJvd3NlcnMgdGhhdFxuXHQqIGRvIG5vdCBuYXRpdmVseSBzdXBwb3J0IGl0XG5cdCpcblx0KiAoYykgMjAxNSBQaGlsaXBwIEFsZmVyb3Zcblx0KiBMaWNlbnNlOiBNSVRcblx0KlxuXHQqL1xuXG5cdG1vZHVsZS5leHBvcnRzID0gJ25nRmlsZVNhdmVyJztcblxuXHRhbmd1bGFyLm1vZHVsZSgnbmdGaWxlU2F2ZXInLCBbXSlcblx0ICAuZmFjdG9yeSgnRmlsZVNhdmVyJywgWydCbG9iJywgJ1NhdmVBcycsICdGaWxlU2F2ZXJVdGlscycsIF9fd2VicGFja19yZXF1aXJlX18oMSldKVxuXHQgIC5mYWN0b3J5KCdGaWxlU2F2ZXJVdGlscycsIFtfX3dlYnBhY2tfcmVxdWlyZV9fKDIpXSlcblx0ICAuZmFjdG9yeSgnQmxvYicsIFsnJHdpbmRvdycsIF9fd2VicGFja19yZXF1aXJlX18oMyldKVxuXHQgIC5mYWN0b3J5KCdTYXZlQXMnLCBbX193ZWJwYWNrX3JlcXVpcmVfXyg1KV0pO1xuXG5cbi8qKiovIH0sXG4vKiAxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQndXNlIHN0cmljdCc7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBGaWxlU2F2ZXIoQmxvYiwgU2F2ZUFzLCBGaWxlU2F2ZXJVdGlscykge1xuXG5cdCAgZnVuY3Rpb24gc2F2ZShibG9iLCBmaWxlbmFtZSwgZGlzYWJsZUF1dG9CT00pIHtcblx0ICAgIHRyeSB7XG5cdCAgICAgIFNhdmVBcyhibG9iLCBmaWxlbmFtZSwgZGlzYWJsZUF1dG9CT00pO1xuXHQgICAgfSBjYXRjaChlcnIpIHtcblx0ICAgICAgRmlsZVNhdmVyVXRpbHMuaGFuZGxlRXJyb3JzKGVyci5tZXNzYWdlKTtcblx0ICAgIH1cblx0ICB9XG5cblx0ICByZXR1cm4ge1xuXG5cdCAgICAvKipcblx0ICAgICogc2F2ZUFzXG5cdCAgICAqIEltbWVkaWF0ZWx5IHN0YXJ0cyBzYXZpbmcgYSBmaWxlLCByZXR1cm5zIHVuZGVmaW5lZC5cblx0ICAgICpcblx0ICAgICogQG5hbWUgc2F2ZUFzXG5cdCAgICAqIEBmdW5jdGlvblxuXHQgICAgKiBAcGFyYW0ge0Jsb2J9IGRhdGEgQSBCbG9iIGluc3RhbmNlXG5cdCAgICAqIEBwYXJhbSB7T2JqZWN0fSBmaWxlbmFtZSBDdXN0b20gZmlsZW5hbWUgKGV4dGVuc2lvbiBpcyBvcHRpb25hbClcblx0ICAgICogQHBhcmFtIHtCb29sZWFufSBkaXNhYmxlQXV0b0JPTSBEaXNhYmxlIGF1dG9tYXRpY2FsbHkgcHJvdmlkZWQgVW5pY29kZVxuXHQgICAgKiB0ZXh0IGVuY29kaW5nIGhpbnRzXG5cdCAgICAqXG5cdCAgICAqIEByZXR1cm4ge1VuZGVmaW5lZH1cblx0ICAgICovXG5cblx0ICAgIHNhdmVBczogZnVuY3Rpb24oZGF0YSwgZmlsZW5hbWUsIGRpc2FibGVBdXRvQk9NKSB7XG5cblx0ICAgICAgaWYgKCFGaWxlU2F2ZXJVdGlscy5pc0Jsb2JJbnN0YW5jZShkYXRhKSkge1xuXHQgICAgICAgIEZpbGVTYXZlclV0aWxzLmhhbmRsZUVycm9ycygnRGF0YSBhcmd1bWVudCBzaG91bGQgYmUgYSBibG9iIGluc3RhbmNlJyk7XG5cdCAgICAgIH1cblxuXHQgICAgICBpZiAoIUZpbGVTYXZlclV0aWxzLmlzU3RyaW5nKGZpbGVuYW1lKSkge1xuXHQgICAgICAgIEZpbGVTYXZlclV0aWxzLmhhbmRsZUVycm9ycygnRmlsZW5hbWUgYXJndW1lbnQgc2hvdWxkIGJlIGEgc3RyaW5nJyk7XG5cdCAgICAgIH1cblxuXHQgICAgICByZXR1cm4gc2F2ZShkYXRhLCBmaWxlbmFtZSwgZGlzYWJsZUF1dG9CT00pO1xuXHQgICAgfVxuXHQgIH07XG5cdH07XG5cblxuLyoqKi8gfSxcbi8qIDIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdCd1c2Ugc3RyaWN0JztcblxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIEZpbGVTYXZlclV0aWxzKCkge1xuXHQgIHJldHVybiB7XG5cdCAgICBoYW5kbGVFcnJvcnM6IGZ1bmN0aW9uKG1zZykge1xuXHQgICAgICB0aHJvdyBuZXcgRXJyb3IobXNnKTtcblx0ICAgIH0sXG5cdCAgICBpc1N0cmluZzogZnVuY3Rpb24ob2JqKSB7XG5cdCAgICAgIHJldHVybiB0eXBlb2Ygb2JqID09PSAnc3RyaW5nJyB8fCBvYmogaW5zdGFuY2VvZiBTdHJpbmc7XG5cdCAgICB9LFxuXHQgICAgaXNVbmRlZmluZWQ6IGZ1bmN0aW9uKG9iaikge1xuXHQgICAgICByZXR1cm4gdHlwZW9mIG9iaiA9PT0gJ3VuZGVmaW5lZCc7XG5cdCAgICB9LFxuXHQgICAgaXNCbG9iSW5zdGFuY2U6IGZ1bmN0aW9uKG9iaikge1xuXHQgICAgICByZXR1cm4gb2JqIGluc3RhbmNlb2YgQmxvYjtcblx0ICAgIH1cblx0ICB9O1xuXHR9O1xuXG5cbi8qKiovIH0sXG4vKiAzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cblx0X193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIEJsb2IoJHdpbmRvdykge1xuXHQgIHJldHVybiAkd2luZG93LkJsb2I7XG5cdH07XG5cblxuLyoqKi8gfSxcbi8qIDQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qIEJsb2IuanNcblx0ICogQSBCbG9iIGltcGxlbWVudGF0aW9uLlxuXHQgKiAyMDE0LTA3LTI0XG5cdCAqXG5cdCAqIEJ5IEVsaSBHcmV5LCBodHRwOi8vZWxpZ3JleS5jb21cblx0ICogQnkgRGV2aW4gU2FtYXJpbiwgaHR0cHM6Ly9naXRodWIuY29tL2RzYW1hcmluXG5cdCAqIExpY2Vuc2U6IFgxMS9NSVRcblx0ICogICBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2VsaWdyZXkvQmxvYi5qcy9ibG9iL21hc3Rlci9MSUNFTlNFLm1kXG5cdCAqL1xuXG5cdC8qZ2xvYmFsIHNlbGYsIHVuZXNjYXBlICovXG5cdC8qanNsaW50IGJpdHdpc2U6IHRydWUsIHJlZ2V4cDogdHJ1ZSwgY29uZnVzaW9uOiB0cnVlLCBlczU6IHRydWUsIHZhcnM6IHRydWUsIHdoaXRlOiB0cnVlLFxuXHQgIHBsdXNwbHVzOiB0cnVlICovXG5cblx0LyohIEBzb3VyY2UgaHR0cDovL3B1cmwuZWxpZ3JleS5jb20vZ2l0aHViL0Jsb2IuanMvYmxvYi9tYXN0ZXIvQmxvYi5qcyAqL1xuXG5cdChmdW5jdGlvbiAodmlldykge1xuXHRcdFwidXNlIHN0cmljdFwiO1xuXG5cdFx0dmlldy5VUkwgPSB2aWV3LlVSTCB8fCB2aWV3LndlYmtpdFVSTDtcblxuXHRcdGlmICh2aWV3LkJsb2IgJiYgdmlldy5VUkwpIHtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdG5ldyBCbG9iO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9IGNhdGNoIChlKSB7fVxuXHRcdH1cblxuXHRcdC8vIEludGVybmFsbHkgd2UgdXNlIGEgQmxvYkJ1aWxkZXIgaW1wbGVtZW50YXRpb24gdG8gYmFzZSBCbG9iIG9mZiBvZlxuXHRcdC8vIGluIG9yZGVyIHRvIHN1cHBvcnQgb2xkZXIgYnJvd3NlcnMgdGhhdCBvbmx5IGhhdmUgQmxvYkJ1aWxkZXJcblx0XHR2YXIgQmxvYkJ1aWxkZXIgPSB2aWV3LkJsb2JCdWlsZGVyIHx8IHZpZXcuV2ViS2l0QmxvYkJ1aWxkZXIgfHwgdmlldy5Nb3pCbG9iQnVpbGRlciB8fCAoZnVuY3Rpb24odmlldykge1xuXHRcdFx0dmFyXG5cdFx0XHRcdCAgZ2V0X2NsYXNzID0gZnVuY3Rpb24ob2JqZWN0KSB7XG5cdFx0XHRcdFx0cmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvYmplY3QpLm1hdGNoKC9eXFxbb2JqZWN0XFxzKC4qKVxcXSQvKVsxXTtcblx0XHRcdFx0fVxuXHRcdFx0XHQsIEZha2VCbG9iQnVpbGRlciA9IGZ1bmN0aW9uIEJsb2JCdWlsZGVyKCkge1xuXHRcdFx0XHRcdHRoaXMuZGF0YSA9IFtdO1xuXHRcdFx0XHR9XG5cdFx0XHRcdCwgRmFrZUJsb2IgPSBmdW5jdGlvbiBCbG9iKGRhdGEsIHR5cGUsIGVuY29kaW5nKSB7XG5cdFx0XHRcdFx0dGhpcy5kYXRhID0gZGF0YTtcblx0XHRcdFx0XHR0aGlzLnNpemUgPSBkYXRhLmxlbmd0aDtcblx0XHRcdFx0XHR0aGlzLnR5cGUgPSB0eXBlO1xuXHRcdFx0XHRcdHRoaXMuZW5jb2RpbmcgPSBlbmNvZGluZztcblx0XHRcdFx0fVxuXHRcdFx0XHQsIEZCQl9wcm90byA9IEZha2VCbG9iQnVpbGRlci5wcm90b3R5cGVcblx0XHRcdFx0LCBGQl9wcm90byA9IEZha2VCbG9iLnByb3RvdHlwZVxuXHRcdFx0XHQsIEZpbGVSZWFkZXJTeW5jID0gdmlldy5GaWxlUmVhZGVyU3luY1xuXHRcdFx0XHQsIEZpbGVFeGNlcHRpb24gPSBmdW5jdGlvbih0eXBlKSB7XG5cdFx0XHRcdFx0dGhpcy5jb2RlID0gdGhpc1t0aGlzLm5hbWUgPSB0eXBlXTtcblx0XHRcdFx0fVxuXHRcdFx0XHQsIGZpbGVfZXhfY29kZXMgPSAoXG5cdFx0XHRcdFx0ICBcIk5PVF9GT1VORF9FUlIgU0VDVVJJVFlfRVJSIEFCT1JUX0VSUiBOT1RfUkVBREFCTEVfRVJSIEVOQ09ESU5HX0VSUiBcIlxuXHRcdFx0XHRcdCsgXCJOT19NT0RJRklDQVRJT05fQUxMT1dFRF9FUlIgSU5WQUxJRF9TVEFURV9FUlIgU1lOVEFYX0VSUlwiXG5cdFx0XHRcdCkuc3BsaXQoXCIgXCIpXG5cdFx0XHRcdCwgZmlsZV9leF9jb2RlID0gZmlsZV9leF9jb2Rlcy5sZW5ndGhcblx0XHRcdFx0LCByZWFsX1VSTCA9IHZpZXcuVVJMIHx8IHZpZXcud2Via2l0VVJMIHx8IHZpZXdcblx0XHRcdFx0LCByZWFsX2NyZWF0ZV9vYmplY3RfVVJMID0gcmVhbF9VUkwuY3JlYXRlT2JqZWN0VVJMXG5cdFx0XHRcdCwgcmVhbF9yZXZva2Vfb2JqZWN0X1VSTCA9IHJlYWxfVVJMLnJldm9rZU9iamVjdFVSTFxuXHRcdFx0XHQsIFVSTCA9IHJlYWxfVVJMXG5cdFx0XHRcdCwgYnRvYSA9IHZpZXcuYnRvYVxuXHRcdFx0XHQsIGF0b2IgPSB2aWV3LmF0b2JcblxuXHRcdFx0XHQsIEFycmF5QnVmZmVyID0gdmlldy5BcnJheUJ1ZmZlclxuXHRcdFx0XHQsIFVpbnQ4QXJyYXkgPSB2aWV3LlVpbnQ4QXJyYXlcblxuXHRcdFx0XHQsIG9yaWdpbiA9IC9eW1xcdy1dKzpcXC8qXFxbP1tcXHdcXC46LV0rXFxdPyg/OjpbMC05XSspPy9cblx0XHRcdDtcblx0XHRcdEZha2VCbG9iLmZha2UgPSBGQl9wcm90by5mYWtlID0gdHJ1ZTtcblx0XHRcdHdoaWxlIChmaWxlX2V4X2NvZGUtLSkge1xuXHRcdFx0XHRGaWxlRXhjZXB0aW9uLnByb3RvdHlwZVtmaWxlX2V4X2NvZGVzW2ZpbGVfZXhfY29kZV1dID0gZmlsZV9leF9jb2RlICsgMTtcblx0XHRcdH1cblx0XHRcdC8vIFBvbHlmaWxsIFVSTFxuXHRcdFx0aWYgKCFyZWFsX1VSTC5jcmVhdGVPYmplY3RVUkwpIHtcblx0XHRcdFx0VVJMID0gdmlldy5VUkwgPSBmdW5jdGlvbih1cmkpIHtcblx0XHRcdFx0XHR2YXJcblx0XHRcdFx0XHRcdCAgdXJpX2luZm8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sXCIsIFwiYVwiKVxuXHRcdFx0XHRcdFx0LCB1cmlfb3JpZ2luXG5cdFx0XHRcdFx0O1xuXHRcdFx0XHRcdHVyaV9pbmZvLmhyZWYgPSB1cmk7XG5cdFx0XHRcdFx0aWYgKCEoXCJvcmlnaW5cIiBpbiB1cmlfaW5mbykpIHtcblx0XHRcdFx0XHRcdGlmICh1cmlfaW5mby5wcm90b2NvbC50b0xvd2VyQ2FzZSgpID09PSBcImRhdGE6XCIpIHtcblx0XHRcdFx0XHRcdFx0dXJpX2luZm8ub3JpZ2luID0gbnVsbDtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdHVyaV9vcmlnaW4gPSB1cmkubWF0Y2gob3JpZ2luKTtcblx0XHRcdFx0XHRcdFx0dXJpX2luZm8ub3JpZ2luID0gdXJpX29yaWdpbiAmJiB1cmlfb3JpZ2luWzFdO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRyZXR1cm4gdXJpX2luZm87XG5cdFx0XHRcdH07XG5cdFx0XHR9XG5cdFx0XHRVUkwuY3JlYXRlT2JqZWN0VVJMID0gZnVuY3Rpb24oYmxvYikge1xuXHRcdFx0XHR2YXJcblx0XHRcdFx0XHQgIHR5cGUgPSBibG9iLnR5cGVcblx0XHRcdFx0XHQsIGRhdGFfVVJJX2hlYWRlclxuXHRcdFx0XHQ7XG5cdFx0XHRcdGlmICh0eXBlID09PSBudWxsKSB7XG5cdFx0XHRcdFx0dHlwZSA9IFwiYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtXCI7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKGJsb2IgaW5zdGFuY2VvZiBGYWtlQmxvYikge1xuXHRcdFx0XHRcdGRhdGFfVVJJX2hlYWRlciA9IFwiZGF0YTpcIiArIHR5cGU7XG5cdFx0XHRcdFx0aWYgKGJsb2IuZW5jb2RpbmcgPT09IFwiYmFzZTY0XCIpIHtcblx0XHRcdFx0XHRcdHJldHVybiBkYXRhX1VSSV9oZWFkZXIgKyBcIjtiYXNlNjQsXCIgKyBibG9iLmRhdGE7XG5cdFx0XHRcdFx0fSBlbHNlIGlmIChibG9iLmVuY29kaW5nID09PSBcIlVSSVwiKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gZGF0YV9VUklfaGVhZGVyICsgXCIsXCIgKyBkZWNvZGVVUklDb21wb25lbnQoYmxvYi5kYXRhKTtcblx0XHRcdFx0XHR9IGlmIChidG9hKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gZGF0YV9VUklfaGVhZGVyICsgXCI7YmFzZTY0LFwiICsgYnRvYShibG9iLmRhdGEpO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gZGF0YV9VUklfaGVhZGVyICsgXCIsXCIgKyBlbmNvZGVVUklDb21wb25lbnQoYmxvYi5kYXRhKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gZWxzZSBpZiAocmVhbF9jcmVhdGVfb2JqZWN0X1VSTCkge1xuXHRcdFx0XHRcdHJldHVybiByZWFsX2NyZWF0ZV9vYmplY3RfVVJMLmNhbGwocmVhbF9VUkwsIGJsb2IpO1xuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXHRcdFx0VVJMLnJldm9rZU9iamVjdFVSTCA9IGZ1bmN0aW9uKG9iamVjdF9VUkwpIHtcblx0XHRcdFx0aWYgKG9iamVjdF9VUkwuc3Vic3RyaW5nKDAsIDUpICE9PSBcImRhdGE6XCIgJiYgcmVhbF9yZXZva2Vfb2JqZWN0X1VSTCkge1xuXHRcdFx0XHRcdHJlYWxfcmV2b2tlX29iamVjdF9VUkwuY2FsbChyZWFsX1VSTCwgb2JqZWN0X1VSTCk7XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cdFx0XHRGQkJfcHJvdG8uYXBwZW5kID0gZnVuY3Rpb24oZGF0YS8qLCBlbmRpbmdzKi8pIHtcblx0XHRcdFx0dmFyIGJiID0gdGhpcy5kYXRhO1xuXHRcdFx0XHQvLyBkZWNvZGUgZGF0YSB0byBhIGJpbmFyeSBzdHJpbmdcblx0XHRcdFx0aWYgKFVpbnQ4QXJyYXkgJiYgKGRhdGEgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlciB8fCBkYXRhIGluc3RhbmNlb2YgVWludDhBcnJheSkpIHtcblx0XHRcdFx0XHR2YXJcblx0XHRcdFx0XHRcdCAgc3RyID0gXCJcIlxuXHRcdFx0XHRcdFx0LCBidWYgPSBuZXcgVWludDhBcnJheShkYXRhKVxuXHRcdFx0XHRcdFx0LCBpID0gMFxuXHRcdFx0XHRcdFx0LCBidWZfbGVuID0gYnVmLmxlbmd0aFxuXHRcdFx0XHRcdDtcblx0XHRcdFx0XHRmb3IgKDsgaSA8IGJ1Zl9sZW47IGkrKykge1xuXHRcdFx0XHRcdFx0c3RyICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYnVmW2ldKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0YmIucHVzaChzdHIpO1xuXHRcdFx0XHR9IGVsc2UgaWYgKGdldF9jbGFzcyhkYXRhKSA9PT0gXCJCbG9iXCIgfHwgZ2V0X2NsYXNzKGRhdGEpID09PSBcIkZpbGVcIikge1xuXHRcdFx0XHRcdGlmIChGaWxlUmVhZGVyU3luYykge1xuXHRcdFx0XHRcdFx0dmFyIGZyID0gbmV3IEZpbGVSZWFkZXJTeW5jO1xuXHRcdFx0XHRcdFx0YmIucHVzaChmci5yZWFkQXNCaW5hcnlTdHJpbmcoZGF0YSkpO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHQvLyBhc3luYyBGaWxlUmVhZGVyIHdvbid0IHdvcmsgYXMgQmxvYkJ1aWxkZXIgaXMgc3luY1xuXHRcdFx0XHRcdFx0dGhyb3cgbmV3IEZpbGVFeGNlcHRpb24oXCJOT1RfUkVBREFCTEVfRVJSXCIpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIGlmIChkYXRhIGluc3RhbmNlb2YgRmFrZUJsb2IpIHtcblx0XHRcdFx0XHRpZiAoZGF0YS5lbmNvZGluZyA9PT0gXCJiYXNlNjRcIiAmJiBhdG9iKSB7XG5cdFx0XHRcdFx0XHRiYi5wdXNoKGF0b2IoZGF0YS5kYXRhKSk7XG5cdFx0XHRcdFx0fSBlbHNlIGlmIChkYXRhLmVuY29kaW5nID09PSBcIlVSSVwiKSB7XG5cdFx0XHRcdFx0XHRiYi5wdXNoKGRlY29kZVVSSUNvbXBvbmVudChkYXRhLmRhdGEpKTtcblx0XHRcdFx0XHR9IGVsc2UgaWYgKGRhdGEuZW5jb2RpbmcgPT09IFwicmF3XCIpIHtcblx0XHRcdFx0XHRcdGJiLnB1c2goZGF0YS5kYXRhKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0aWYgKHR5cGVvZiBkYXRhICE9PSBcInN0cmluZ1wiKSB7XG5cdFx0XHRcdFx0XHRkYXRhICs9IFwiXCI7IC8vIGNvbnZlcnQgdW5zdXBwb3J0ZWQgdHlwZXMgdG8gc3RyaW5nc1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHQvLyBkZWNvZGUgVVRGLTE2IHRvIGJpbmFyeSBzdHJpbmdcblx0XHRcdFx0XHRiYi5wdXNoKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChkYXRhKSkpO1xuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXHRcdFx0RkJCX3Byb3RvLmdldEJsb2IgPSBmdW5jdGlvbih0eXBlKSB7XG5cdFx0XHRcdGlmICghYXJndW1lbnRzLmxlbmd0aCkge1xuXHRcdFx0XHRcdHR5cGUgPSBudWxsO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiBuZXcgRmFrZUJsb2IodGhpcy5kYXRhLmpvaW4oXCJcIiksIHR5cGUsIFwicmF3XCIpO1xuXHRcdFx0fTtcblx0XHRcdEZCQl9wcm90by50b1N0cmluZyA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRyZXR1cm4gXCJbb2JqZWN0IEJsb2JCdWlsZGVyXVwiO1xuXHRcdFx0fTtcblx0XHRcdEZCX3Byb3RvLnNsaWNlID0gZnVuY3Rpb24oc3RhcnQsIGVuZCwgdHlwZSkge1xuXHRcdFx0XHR2YXIgYXJncyA9IGFyZ3VtZW50cy5sZW5ndGg7XG5cdFx0XHRcdGlmIChhcmdzIDwgMykge1xuXHRcdFx0XHRcdHR5cGUgPSBudWxsO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiBuZXcgRmFrZUJsb2IoXG5cdFx0XHRcdFx0ICB0aGlzLmRhdGEuc2xpY2Uoc3RhcnQsIGFyZ3MgPiAxID8gZW5kIDogdGhpcy5kYXRhLmxlbmd0aClcblx0XHRcdFx0XHQsIHR5cGVcblx0XHRcdFx0XHQsIHRoaXMuZW5jb2Rpbmdcblx0XHRcdFx0KTtcblx0XHRcdH07XG5cdFx0XHRGQl9wcm90by50b1N0cmluZyA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRyZXR1cm4gXCJbb2JqZWN0IEJsb2JdXCI7XG5cdFx0XHR9O1xuXHRcdFx0RkJfcHJvdG8uY2xvc2UgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0dGhpcy5zaXplID0gMDtcblx0XHRcdFx0ZGVsZXRlIHRoaXMuZGF0YTtcblx0XHRcdH07XG5cdFx0XHRyZXR1cm4gRmFrZUJsb2JCdWlsZGVyO1xuXHRcdH0odmlldykpO1xuXG5cdFx0dmlldy5CbG9iID0gZnVuY3Rpb24oYmxvYlBhcnRzLCBvcHRpb25zKSB7XG5cdFx0XHR2YXIgdHlwZSA9IG9wdGlvbnMgPyAob3B0aW9ucy50eXBlIHx8IFwiXCIpIDogXCJcIjtcblx0XHRcdHZhciBidWlsZGVyID0gbmV3IEJsb2JCdWlsZGVyKCk7XG5cdFx0XHRpZiAoYmxvYlBhcnRzKSB7XG5cdFx0XHRcdGZvciAodmFyIGkgPSAwLCBsZW4gPSBibG9iUGFydHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcblx0XHRcdFx0XHRpZiAoVWludDhBcnJheSAmJiBibG9iUGFydHNbaV0gaW5zdGFuY2VvZiBVaW50OEFycmF5KSB7XG5cdFx0XHRcdFx0XHRidWlsZGVyLmFwcGVuZChibG9iUGFydHNbaV0uYnVmZmVyKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0XHRidWlsZGVyLmFwcGVuZChibG9iUGFydHNbaV0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0dmFyIGJsb2IgPSBidWlsZGVyLmdldEJsb2IodHlwZSk7XG5cdFx0XHRpZiAoIWJsb2Iuc2xpY2UgJiYgYmxvYi53ZWJraXRTbGljZSkge1xuXHRcdFx0XHRibG9iLnNsaWNlID0gYmxvYi53ZWJraXRTbGljZTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBibG9iO1xuXHRcdH07XG5cblx0XHR2YXIgZ2V0UHJvdG90eXBlT2YgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YgfHwgZnVuY3Rpb24ob2JqZWN0KSB7XG5cdFx0XHRyZXR1cm4gb2JqZWN0Ll9fcHJvdG9fXztcblx0XHR9O1xuXHRcdHZpZXcuQmxvYi5wcm90b3R5cGUgPSBnZXRQcm90b3R5cGVPZihuZXcgdmlldy5CbG9iKCkpO1xuXHR9KHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiICYmIHNlbGYgfHwgdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiAmJiB3aW5kb3cgfHwgdGhpcy5jb250ZW50IHx8IHRoaXMpKTtcblxuXG4vKioqLyB9LFxuLyogNSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gU2F2ZUFzKCkge1xuXHQgIHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpLnNhdmVBcyB8fCBmdW5jdGlvbigpIHt9O1xuXHR9O1xuXG5cbi8qKiovIH0sXG4vKiA2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgX19XRUJQQUNLX0FNRF9ERUZJTkVfQVJSQVlfXywgX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX187LyogRmlsZVNhdmVyLmpzXG5cdCAqIEEgc2F2ZUFzKCkgRmlsZVNhdmVyIGltcGxlbWVudGF0aW9uLlxuXHQgKiAxLjMuMlxuXHQgKiAyMDE2LTA2LTE2IDE4OjI1OjE5XG5cdCAqXG5cdCAqIEJ5IEVsaSBHcmV5LCBodHRwOi8vZWxpZ3JleS5jb21cblx0ICogTGljZW5zZTogTUlUXG5cdCAqICAgU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9lbGlncmV5L0ZpbGVTYXZlci5qcy9ibG9iL21hc3Rlci9MSUNFTlNFLm1kXG5cdCAqL1xuXG5cdC8qZ2xvYmFsIHNlbGYgKi9cblx0Lypqc2xpbnQgYml0d2lzZTogdHJ1ZSwgaW5kZW50OiA0LCBsYXhicmVhazogdHJ1ZSwgbGF4Y29tbWE6IHRydWUsIHNtYXJ0dGFiczogdHJ1ZSwgcGx1c3BsdXM6IHRydWUgKi9cblxuXHQvKiEgQHNvdXJjZSBodHRwOi8vcHVybC5lbGlncmV5LmNvbS9naXRodWIvRmlsZVNhdmVyLmpzL2Jsb2IvbWFzdGVyL0ZpbGVTYXZlci5qcyAqL1xuXG5cdHZhciBzYXZlQXMgPSBzYXZlQXMgfHwgKGZ1bmN0aW9uKHZpZXcpIHtcblx0XHRcInVzZSBzdHJpY3RcIjtcblx0XHQvLyBJRSA8MTAgaXMgZXhwbGljaXRseSB1bnN1cHBvcnRlZFxuXHRcdGlmICh0eXBlb2YgdmlldyA9PT0gXCJ1bmRlZmluZWRcIiB8fCB0eXBlb2YgbmF2aWdhdG9yICE9PSBcInVuZGVmaW5lZFwiICYmIC9NU0lFIFsxLTldXFwuLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdHZhclxuXHRcdFx0ICBkb2MgPSB2aWV3LmRvY3VtZW50XG5cdFx0XHQgIC8vIG9ubHkgZ2V0IFVSTCB3aGVuIG5lY2Vzc2FyeSBpbiBjYXNlIEJsb2IuanMgaGFzbid0IG92ZXJyaWRkZW4gaXQgeWV0XG5cdFx0XHQsIGdldF9VUkwgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0cmV0dXJuIHZpZXcuVVJMIHx8IHZpZXcud2Via2l0VVJMIHx8IHZpZXc7XG5cdFx0XHR9XG5cdFx0XHQsIHNhdmVfbGluayA9IGRvYy5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sXCIsIFwiYVwiKVxuXHRcdFx0LCBjYW5fdXNlX3NhdmVfbGluayA9IFwiZG93bmxvYWRcIiBpbiBzYXZlX2xpbmtcblx0XHRcdCwgY2xpY2sgPSBmdW5jdGlvbihub2RlKSB7XG5cdFx0XHRcdHZhciBldmVudCA9IG5ldyBNb3VzZUV2ZW50KFwiY2xpY2tcIik7XG5cdFx0XHRcdG5vZGUuZGlzcGF0Y2hFdmVudChldmVudCk7XG5cdFx0XHR9XG5cdFx0XHQsIGlzX3NhZmFyaSA9IC9jb25zdHJ1Y3Rvci9pLnRlc3Qodmlldy5IVE1MRWxlbWVudClcblx0XHRcdCwgaXNfY2hyb21lX2lvcyA9L0NyaU9TXFwvW1xcZF0rLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpXG5cdFx0XHQsIHRocm93X291dHNpZGUgPSBmdW5jdGlvbihleCkge1xuXHRcdFx0XHQodmlldy5zZXRJbW1lZGlhdGUgfHwgdmlldy5zZXRUaW1lb3V0KShmdW5jdGlvbigpIHtcblx0XHRcdFx0XHR0aHJvdyBleDtcblx0XHRcdFx0fSwgMCk7XG5cdFx0XHR9XG5cdFx0XHQsIGZvcmNlX3NhdmVhYmxlX3R5cGUgPSBcImFwcGxpY2F0aW9uL29jdGV0LXN0cmVhbVwiXG5cdFx0XHQvLyB0aGUgQmxvYiBBUEkgaXMgZnVuZGFtZW50YWxseSBicm9rZW4gYXMgdGhlcmUgaXMgbm8gXCJkb3dubG9hZGZpbmlzaGVkXCIgZXZlbnQgdG8gc3Vic2NyaWJlIHRvXG5cdFx0XHQsIGFyYml0cmFyeV9yZXZva2VfdGltZW91dCA9IDEwMDAgKiA0MCAvLyBpbiBtc1xuXHRcdFx0LCByZXZva2UgPSBmdW5jdGlvbihmaWxlKSB7XG5cdFx0XHRcdHZhciByZXZva2VyID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0aWYgKHR5cGVvZiBmaWxlID09PSBcInN0cmluZ1wiKSB7IC8vIGZpbGUgaXMgYW4gb2JqZWN0IFVSTFxuXHRcdFx0XHRcdFx0Z2V0X1VSTCgpLnJldm9rZU9iamVjdFVSTChmaWxlKTtcblx0XHRcdFx0XHR9IGVsc2UgeyAvLyBmaWxlIGlzIGEgRmlsZVxuXHRcdFx0XHRcdFx0ZmlsZS5yZW1vdmUoKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH07XG5cdFx0XHRcdHNldFRpbWVvdXQocmV2b2tlciwgYXJiaXRyYXJ5X3Jldm9rZV90aW1lb3V0KTtcblx0XHRcdH1cblx0XHRcdCwgZGlzcGF0Y2ggPSBmdW5jdGlvbihmaWxlc2F2ZXIsIGV2ZW50X3R5cGVzLCBldmVudCkge1xuXHRcdFx0XHRldmVudF90eXBlcyA9IFtdLmNvbmNhdChldmVudF90eXBlcyk7XG5cdFx0XHRcdHZhciBpID0gZXZlbnRfdHlwZXMubGVuZ3RoO1xuXHRcdFx0XHR3aGlsZSAoaS0tKSB7XG5cdFx0XHRcdFx0dmFyIGxpc3RlbmVyID0gZmlsZXNhdmVyW1wib25cIiArIGV2ZW50X3R5cGVzW2ldXTtcblx0XHRcdFx0XHRpZiAodHlwZW9mIGxpc3RlbmVyID09PSBcImZ1bmN0aW9uXCIpIHtcblx0XHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRcdGxpc3RlbmVyLmNhbGwoZmlsZXNhdmVyLCBldmVudCB8fCBmaWxlc2F2ZXIpO1xuXHRcdFx0XHRcdFx0fSBjYXRjaCAoZXgpIHtcblx0XHRcdFx0XHRcdFx0dGhyb3dfb3V0c2lkZShleCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHQsIGF1dG9fYm9tID0gZnVuY3Rpb24oYmxvYikge1xuXHRcdFx0XHQvLyBwcmVwZW5kIEJPTSBmb3IgVVRGLTggWE1MIGFuZCB0ZXh0LyogdHlwZXMgKGluY2x1ZGluZyBIVE1MKVxuXHRcdFx0XHQvLyBub3RlOiB5b3VyIGJyb3dzZXIgd2lsbCBhdXRvbWF0aWNhbGx5IGNvbnZlcnQgVVRGLTE2IFUrRkVGRiB0byBFRiBCQiBCRlxuXHRcdFx0XHRpZiAoL15cXHMqKD86dGV4dFxcL1xcUyp8YXBwbGljYXRpb25cXC94bWx8XFxTKlxcL1xcUypcXCt4bWwpXFxzKjsuKmNoYXJzZXRcXHMqPVxccyp1dGYtOC9pLnRlc3QoYmxvYi50eXBlKSkge1xuXHRcdFx0XHRcdHJldHVybiBuZXcgQmxvYihbU3RyaW5nLmZyb21DaGFyQ29kZSgweEZFRkYpLCBibG9iXSwge3R5cGU6IGJsb2IudHlwZX0pO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiBibG9iO1xuXHRcdFx0fVxuXHRcdFx0LCBGaWxlU2F2ZXIgPSBmdW5jdGlvbihibG9iLCBuYW1lLCBub19hdXRvX2JvbSkge1xuXHRcdFx0XHRpZiAoIW5vX2F1dG9fYm9tKSB7XG5cdFx0XHRcdFx0YmxvYiA9IGF1dG9fYm9tKGJsb2IpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdC8vIEZpcnN0IHRyeSBhLmRvd25sb2FkLCB0aGVuIHdlYiBmaWxlc3lzdGVtLCB0aGVuIG9iamVjdCBVUkxzXG5cdFx0XHRcdHZhclxuXHRcdFx0XHRcdCAgZmlsZXNhdmVyID0gdGhpc1xuXHRcdFx0XHRcdCwgdHlwZSA9IGJsb2IudHlwZVxuXHRcdFx0XHRcdCwgZm9yY2UgPSB0eXBlID09PSBmb3JjZV9zYXZlYWJsZV90eXBlXG5cdFx0XHRcdFx0LCBvYmplY3RfdXJsXG5cdFx0XHRcdFx0LCBkaXNwYXRjaF9hbGwgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdGRpc3BhdGNoKGZpbGVzYXZlciwgXCJ3cml0ZXN0YXJ0IHByb2dyZXNzIHdyaXRlIHdyaXRlZW5kXCIuc3BsaXQoXCIgXCIpKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Ly8gb24gYW55IGZpbGVzeXMgZXJyb3JzIHJldmVydCB0byBzYXZpbmcgd2l0aCBvYmplY3QgVVJMc1xuXHRcdFx0XHRcdCwgZnNfZXJyb3IgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdGlmICgoaXNfY2hyb21lX2lvcyB8fCAoZm9yY2UgJiYgaXNfc2FmYXJpKSkgJiYgdmlldy5GaWxlUmVhZGVyKSB7XG5cdFx0XHRcdFx0XHRcdC8vIFNhZmFyaSBkb2Vzbid0IGFsbG93IGRvd25sb2FkaW5nIG9mIGJsb2IgdXJsc1xuXHRcdFx0XHRcdFx0XHR2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcblx0XHRcdFx0XHRcdFx0cmVhZGVyLm9ubG9hZGVuZCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0XHRcdHZhciB1cmwgPSBpc19jaHJvbWVfaW9zID8gcmVhZGVyLnJlc3VsdCA6IHJlYWRlci5yZXN1bHQucmVwbGFjZSgvXmRhdGE6W147XSo7LywgJ2RhdGE6YXR0YWNobWVudC9maWxlOycpO1xuXHRcdFx0XHRcdFx0XHRcdHZhciBwb3B1cCA9IHZpZXcub3Blbih1cmwsICdfYmxhbmsnKTtcblx0XHRcdFx0XHRcdFx0XHRpZighcG9wdXApIHZpZXcubG9jYXRpb24uaHJlZiA9IHVybDtcblx0XHRcdFx0XHRcdFx0XHR1cmw9dW5kZWZpbmVkOyAvLyByZWxlYXNlIHJlZmVyZW5jZSBiZWZvcmUgZGlzcGF0Y2hpbmdcblx0XHRcdFx0XHRcdFx0XHRmaWxlc2F2ZXIucmVhZHlTdGF0ZSA9IGZpbGVzYXZlci5ET05FO1xuXHRcdFx0XHRcdFx0XHRcdGRpc3BhdGNoX2FsbCgpO1xuXHRcdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0XHRyZWFkZXIucmVhZEFzRGF0YVVSTChibG9iKTtcblx0XHRcdFx0XHRcdFx0ZmlsZXNhdmVyLnJlYWR5U3RhdGUgPSBmaWxlc2F2ZXIuSU5JVDtcblx0XHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0Ly8gZG9uJ3QgY3JlYXRlIG1vcmUgb2JqZWN0IFVSTHMgdGhhbiBuZWVkZWRcblx0XHRcdFx0XHRcdGlmICghb2JqZWN0X3VybCkge1xuXHRcdFx0XHRcdFx0XHRvYmplY3RfdXJsID0gZ2V0X1VSTCgpLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGlmIChmb3JjZSkge1xuXHRcdFx0XHRcdFx0XHR2aWV3LmxvY2F0aW9uLmhyZWYgPSBvYmplY3RfdXJsO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0dmFyIG9wZW5lZCA9IHZpZXcub3BlbihvYmplY3RfdXJsLCBcIl9ibGFua1wiKTtcblx0XHRcdFx0XHRcdFx0aWYgKCFvcGVuZWQpIHtcblx0XHRcdFx0XHRcdFx0XHQvLyBBcHBsZSBkb2VzIG5vdCBhbGxvdyB3aW5kb3cub3Blbiwgc2VlIGh0dHBzOi8vZGV2ZWxvcGVyLmFwcGxlLmNvbS9saWJyYXJ5L3NhZmFyaS9kb2N1bWVudGF0aW9uL1Rvb2xzL0NvbmNlcHR1YWwvU2FmYXJpRXh0ZW5zaW9uR3VpZGUvV29ya2luZ3dpdGhXaW5kb3dzYW5kVGFicy9Xb3JraW5nd2l0aFdpbmRvd3NhbmRUYWJzLmh0bWxcblx0XHRcdFx0XHRcdFx0XHR2aWV3LmxvY2F0aW9uLmhyZWYgPSBvYmplY3RfdXJsO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRmaWxlc2F2ZXIucmVhZHlTdGF0ZSA9IGZpbGVzYXZlci5ET05FO1xuXHRcdFx0XHRcdFx0ZGlzcGF0Y2hfYWxsKCk7XG5cdFx0XHRcdFx0XHRyZXZva2Uob2JqZWN0X3VybCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHQ7XG5cdFx0XHRcdGZpbGVzYXZlci5yZWFkeVN0YXRlID0gZmlsZXNhdmVyLklOSVQ7XG5cblx0XHRcdFx0aWYgKGNhbl91c2Vfc2F2ZV9saW5rKSB7XG5cdFx0XHRcdFx0b2JqZWN0X3VybCA9IGdldF9VUkwoKS5jcmVhdGVPYmplY3RVUkwoYmxvYik7XG5cdFx0XHRcdFx0c2V0VGltZW91dChmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdHNhdmVfbGluay5ocmVmID0gb2JqZWN0X3VybDtcblx0XHRcdFx0XHRcdHNhdmVfbGluay5kb3dubG9hZCA9IG5hbWU7XG5cdFx0XHRcdFx0XHRjbGljayhzYXZlX2xpbmspO1xuXHRcdFx0XHRcdFx0ZGlzcGF0Y2hfYWxsKCk7XG5cdFx0XHRcdFx0XHRyZXZva2Uob2JqZWN0X3VybCk7XG5cdFx0XHRcdFx0XHRmaWxlc2F2ZXIucmVhZHlTdGF0ZSA9IGZpbGVzYXZlci5ET05FO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGZzX2Vycm9yKCk7XG5cdFx0XHR9XG5cdFx0XHQsIEZTX3Byb3RvID0gRmlsZVNhdmVyLnByb3RvdHlwZVxuXHRcdFx0LCBzYXZlQXMgPSBmdW5jdGlvbihibG9iLCBuYW1lLCBub19hdXRvX2JvbSkge1xuXHRcdFx0XHRyZXR1cm4gbmV3IEZpbGVTYXZlcihibG9iLCBuYW1lIHx8IGJsb2IubmFtZSB8fCBcImRvd25sb2FkXCIsIG5vX2F1dG9fYm9tKTtcblx0XHRcdH1cblx0XHQ7XG5cdFx0Ly8gSUUgMTArIChuYXRpdmUgc2F2ZUFzKVxuXHRcdGlmICh0eXBlb2YgbmF2aWdhdG9yICE9PSBcInVuZGVmaW5lZFwiICYmIG5hdmlnYXRvci5tc1NhdmVPck9wZW5CbG9iKSB7XG5cdFx0XHRyZXR1cm4gZnVuY3Rpb24oYmxvYiwgbmFtZSwgbm9fYXV0b19ib20pIHtcblx0XHRcdFx0bmFtZSA9IG5hbWUgfHwgYmxvYi5uYW1lIHx8IFwiZG93bmxvYWRcIjtcblxuXHRcdFx0XHRpZiAoIW5vX2F1dG9fYm9tKSB7XG5cdFx0XHRcdFx0YmxvYiA9IGF1dG9fYm9tKGJsb2IpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiBuYXZpZ2F0b3IubXNTYXZlT3JPcGVuQmxvYihibG9iLCBuYW1lKTtcblx0XHRcdH07XG5cdFx0fVxuXG5cdFx0RlNfcHJvdG8uYWJvcnQgPSBmdW5jdGlvbigpe307XG5cdFx0RlNfcHJvdG8ucmVhZHlTdGF0ZSA9IEZTX3Byb3RvLklOSVQgPSAwO1xuXHRcdEZTX3Byb3RvLldSSVRJTkcgPSAxO1xuXHRcdEZTX3Byb3RvLkRPTkUgPSAyO1xuXG5cdFx0RlNfcHJvdG8uZXJyb3IgPVxuXHRcdEZTX3Byb3RvLm9ud3JpdGVzdGFydCA9XG5cdFx0RlNfcHJvdG8ub25wcm9ncmVzcyA9XG5cdFx0RlNfcHJvdG8ub253cml0ZSA9XG5cdFx0RlNfcHJvdG8ub25hYm9ydCA9XG5cdFx0RlNfcHJvdG8ub25lcnJvciA9XG5cdFx0RlNfcHJvdG8ub253cml0ZWVuZCA9XG5cdFx0XHRudWxsO1xuXG5cdFx0cmV0dXJuIHNhdmVBcztcblx0fShcblx0XHQgICB0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIiAmJiBzZWxmXG5cdFx0fHwgdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiAmJiB3aW5kb3dcblx0XHR8fCB0aGlzLmNvbnRlbnRcblx0KSk7XG5cdC8vIGBzZWxmYCBpcyB1bmRlZmluZWQgaW4gRmlyZWZveCBmb3IgQW5kcm9pZCBjb250ZW50IHNjcmlwdCBjb250ZXh0XG5cdC8vIHdoaWxlIGB0aGlzYCBpcyBuc0lDb250ZW50RnJhbWVNZXNzYWdlTWFuYWdlclxuXHQvLyB3aXRoIGFuIGF0dHJpYnV0ZSBgY29udGVudGAgdGhhdCBjb3JyZXNwb25kcyB0byB0aGUgd2luZG93XG5cblx0aWYgKHR5cGVvZiBtb2R1bGUgIT09IFwidW5kZWZpbmVkXCIgJiYgbW9kdWxlLmV4cG9ydHMpIHtcblx0ICBtb2R1bGUuZXhwb3J0cy5zYXZlQXMgPSBzYXZlQXM7XG5cdH0gZWxzZSBpZiAoKFwiZnVuY3Rpb25cIiAhPT0gXCJ1bmRlZmluZWRcIiAmJiBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpICE9PSBudWxsKSAmJiAoX193ZWJwYWNrX3JlcXVpcmVfXyg4KSAhPT0gbnVsbCkpIHtcblx0ICAhKF9fV0VCUEFDS19BTURfREVGSU5FX0FSUkFZX18gPSBbXSwgX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18gPSBmdW5jdGlvbigpIHtcblx0ICAgIHJldHVybiBzYXZlQXM7XG5cdCAgfS5hcHBseShleHBvcnRzLCBfX1dFQlBBQ0tfQU1EX0RFRklORV9BUlJBWV9fKSwgX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18gIT09IHVuZGVmaW5lZCAmJiAobW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXykpO1xuXHR9XG5cblxuLyoqKi8gfSxcbi8qIDcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7IHRocm93IG5ldyBFcnJvcihcImRlZmluZSBjYW5ub3QgYmUgdXNlZCBpbmRpcmVjdFwiKTsgfTtcclxuXG5cbi8qKiovIH0sXG4vKiA4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24oX193ZWJwYWNrX2FtZF9vcHRpb25zX18pIHttb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19hbWRfb3B0aW9uc19fO1xyXG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIHt9KSlcblxuLyoqKi8gfVxuLyoqKioqKi8gXSlcbn0pO1xuOyJdfQ==
