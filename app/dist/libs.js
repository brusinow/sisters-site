"use strict";angular.module("angular-parallax",[]).directive("parallax",["$window",function(t){return{restrict:"A",scope:{parallaxRatio:"@",parallaxVerticalOffset:"@",parallaxHorizontalOffset:"@"},link:function(e,r,n){var a=function(){e.parallaxHorizontalOffset||(e.parallaxHorizontalOffset="0");var n=t.pageYOffset*(e.parallaxRatio?e.parallaxRatio:1.1);if(n<=t.innerHeight){var a=n<e.parallaxVerticalOffset?e.parallaxVerticalOffset:n,i=e.parallaxHorizontalOffset.indexOf("%")===-1?e.parallaxHorizontalOffset+"px":e.parallaxHorizontalOffset;r.css("transform","translate("+i+", "+a+"px)")}};a(),angular.element(t).bind("scroll",a),angular.element(t).bind("touchmove",a)}}}]).directive("parallaxBackground",["$window",function(t){return{restrict:"A",transclude:!0,template:"<div ng-transclude></div>",scope:{parallaxRatio:"@",parallaxVerticalOffset:"@",parallaxStartPoint:"@"},link:function(e,r,n){var a=function(){var n=e.parallaxVerticalOffset/100*r[0].offsetHeight,a=(r.prop("offsetTop")-t.pageYOffset)*(e.parallaxRatio?e.parallaxRatio:1.1)-(n||0);a>=e.parallaxStartPoint&&(a=e.parallaxStartPoint),r.css("background-position","50% "+a+"px")};angular.element(t).bind("load",function(t){a(),e.$apply()}),angular.element(t).bind("scroll",a),angular.element(t).bind("touchmove",a)}}}]),angular.module("ngCart",["ngCart.directives"]).config([function(){}]).provider("$ngCart",function(){this.$get=function(){}}).run(["$rootScope","ngCart","ngCartItem","store",function(t,e,r,n){t.$on("ngCart:change",function(){e.$save()}),angular.isObject(n.get("cart"))?e.$restore(n.get("cart")):e.init()}]).service("ngCart",["$rootScope","$http","$location","$state","$window","ngCartItem","store",function(t,e,r,n,a,i,o){var s;this.init=function(){this.$cart={shipping:null,taxRate:null,tax:null,items:[]}},this.addItem=function(r,n,a,o,l,u,c){var p=this,f=6e4,d=this.getItemBySku(n);if("object"==typeof d){var g,h=d.getQuantity();if("ticket"===d._data.product_type){g=l-h;var u={ticketId:d.parent,ticketCount:g};e.post("/store/changeSessionTicket",u).then(function(){console.log("success"),clearTimeout(s),t.$broadcast("setTimer",!0),console.log("should be restarting timer"),s=setTimeout(function(){p.removeTickets(),t.$broadcast("setTimer",!1)},f),d.setQuantity(l,!1),t.$broadcast("ngCart:itemUpdated",d)},function(e){console.log(e),t.$broadcast("lowCount",{bool:!0,originalVal:h})})}else d.setQuantity(l,!1),t.$broadcast("ngCart:itemUpdated",d)}else{var m=new i(r,n,a,o,l,u,c);if("ticket"===m._data.product_type){console.log("A ticket was added! ",m);var u={ticketId:m.parent,ticketCount:m.quantity};e.post("/store/addSessionTicket",u).then(function(){t.$broadcast("setTimer",!0),s=setTimeout(function(){p.removeTickets(),t.$broadcast("setTimer",!1)},f)},function(t){console.log(t)})}this.$cart.items.push(m),t.$broadcast("ngCart:itemAdded",m)}t.$broadcast("ngCart:change",{})},this.addItemBtn=function(e,n,a,o,s,l){var u=0,c=JSON.parse(n);for(var p in c)console.log("prop: ",c[p]),u++;if(console.log("count is : ",u),u<2){var f=this.getItemBySku(n);if("object"==typeof f)f.setQuantity(s,!1),t.$broadcast("ngCart:itemUpdated",f);else{var d=new i(e,n,a,o,s,l);this.$cart.items.push(d),t.$broadcast("ngCart:itemAdded",d)}t.$broadcast("ngCart:change",{})}else r.url("/store/"+e)},this.changeQuantity=function(e,r){var n=this.getItemBySku(e);"object"==typeof n?(n.setQuantity(r,!0),t.$broadcast("ngCart:itemUpdated",n)):console.log("nothing there"),t.$broadcast("ngCart:change",{})},this.getItemById=function(t){var e=this.getCart().items,r=!1;return angular.forEach(e,function(e){e.getId()===t&&(r=e)}),r},this.getItemBySku=function(t){var e=this.getCart().items,r=!1;return angular.forEach(e,function(e){e.getSku()===t&&(r=e)}),r},this.setShipping=function(e){return this.$cart.shipping=e,t.$broadcast("ngCart:change",{}),this.getShipping()},this.getShipping=function(){return 0==this.getCart().items.length?0:this.getCart().shipping},this.setTaxRate=function(e){return this.$cart.taxRate=+parseFloat(e).toFixed(2),t.$broadcast("ngCart:change",{}),this.getTaxRate()},this.getTaxRate=function(){return this.$cart.taxRate},this.getTax=function(){return Math.round(this.getSubTotal()/100*this.getCart().taxRate)},this.setCart=function(t){return this.$cart=t,this.getCart()},this.getCart=function(){return this.$cart},this.getItems=function(){return this.getCart().items},this.getTotalItems=function(){var t=0,e=this.getItems();return angular.forEach(e,function(e){t+=e.getQuantity()}),t},this.getTotalUniqueItems=function(){return this.getCart().items.length},this.getCartTotal=function(){var t=0;return angular.forEach(this.getCart().items,function(e){t+=e.getTotal()}),parseFloat(t)},this.getSubTotal=function(){var t=0;angular.forEach(this.getCart().items,function(e){t+=e.getTotal()});var e=this.getShipping()||0;return t+=e,parseFloat(t)},this.removeTickets=function(){var t=this;angular.forEach(this.getCart().items,function(e,r){"ticket"===e._data.product_type&&t.removeItem(r)})},this.totalCost=function(){return+parseInt(this.getCartTotal()+this.getShipping()+this.getTax())},this.removeItem=function(e){var r=this.$cart.items.splice(e,1)[0]||{};t.$broadcast("ngCart:itemRemoved",r),t.$broadcast("ngCart:change",{})},this.removeItemById=function(e){var r,n=this.getCart();angular.forEach(n.items,function(t,r){t.getId()===e&&(t=n.items.splice(r,1)[0]||{})}),this.setCart(n),t.$broadcast("ngCart:itemRemoved",r),t.$broadcast("ngCart:change",{})},this.empty=function(){t.$broadcast("ngCart:change",{}),this.$cart.items=[],a.localStorage.removeItem("cart")},this.isEmpty=function(){return!(this.$cart.items.length>0)},this.toObject=function(){if(0===this.getItems().length)return!1;var t=[];return angular.forEach(this.getItems(),function(e){t.push(e.toObject())}),{shipping:this.getShipping(),tax:this.getTax(),taxRate:this.getTaxRate(),subTotal:this.getSubTotal(),totalCost:this.totalCost(),items:t}},this.$restore=function(t){var e=this;e.init(),e.$cart.shipping=t.shipping,e.$cart.taxRate=t.taxRate,e.$cart.tax=t.tax,angular.forEach(t.items,function(t){console.log("item: ",t),e.$cart.items.push(new i(t.parent,t.sku,t.description,t.amount,t.quantity,t._data,t.attr))}),this.$save()},this.$save=function(){return o.set("cart",angular.toJson(this.getCart()))}}]).factory("ngCartItem",["$rootScope","$log",function(t,e){var r=function(t,e,r,n,a,i,o){console.log("what is id? ",t),console.log("what is data? ",i),this.setId(t),this.setSku(e),this.setName(r),this.setPrice(n),this.setQuantity(a),this.setData(i),this.setAttr(o||i.attr)};return r.prototype.setId=function(t){t?this.parent=t:e.error("An ID must be provided")},r.prototype.setSku=function(t){t?this.sku=t:e.error("A sku must be provided")},r.prototype.getId=function(){return this.parent},r.prototype.getSku=function(){return this.sku},r.prototype.setName=function(t){t?this.description=t:e.error("A name must be provided")},r.prototype.getName=function(){return this.description},r.prototype.setPrice=function(t){var r=parseFloat(t);r?r<=0?e.error("A price must be over 0"):this.amount=r:e.error("A price must be provided")},r.prototype.getPrice=function(){return this.amount},r.prototype.setQuantity=function(t,r){var n=parseInt(t);n%1===0?(r===!0?this.quantity+=n:this.quantity=n,this.quantity<1&&(this.quantity=1)):(this.quantity=1,e.info("Quantity must be an integer and was defaulted to 1"))},r.prototype.getQuantity=function(){return this.quantity},r.prototype.setData=function(t){console.log("setting data"),t&&(this._data=t)},r.prototype.getData=function(){return this._data?this._data:void e.info("This item has no data")},r.prototype.setAttr=function(t){t&&(this.attr=t)},r.prototype.getAttr=function(){return!!this.attr&&this.attr},r.prototype.getTotal=function(){return+parseFloat(this.getQuantity()*this.getPrice()).toFixed(2)},r.prototype.toObject=function(){return{id:this.getId(),name:this.getName(),price:this.getPrice(),quantity:this.getQuantity(),data:this.getData(),total:this.getTotal()}},r}]).service("store",["$window",function(t){return{get:function(e){if(t.localStorage.getItem(e)){var r=angular.fromJson(t.localStorage.getItem(e));return JSON.parse(r)}return!1},set:function(e,r){return void 0===r?t.localStorage.removeItem(e):t.localStorage.setItem(e,angular.toJson(r)),t.localStorage.getItem(e)}}}]).controller("CartController",["$scope","$rootScope","ngCart","$timeout",function(t,e,r,n){t.loaded=!1,t.toggleCart=!1,t.ngCart=r,n(function(){t.loaded=!0});var a=r.getItems();console.log("items before filtering shippable: ",a);var i=[];angular.forEach(a,function(t){t._data.shippable===!0&&i.push(t)}),i.length>0?(console.log("should be set shippable!!!!"),t.shipBool=!0,t.$emit("setShippable",!0)):(console.log("should not be shippable!!!!"),t.shipBool=!1,t.$emit("setShippable",!1))}]).controller("CartBtnController",["$scope","ngCart","$timeout",function(t,e,r){t.loaded=!1,t.toggleCart=!1,t.ngCart=e,r(function(){t.loaded=!0})}]).value("version","1.0.0"),angular.module("ngCart.directives",["ngCart.fulfilment"]).controller("CartController",["$scope","ngCart",function(t,e){t.ngCart=e}]).directive("ngcartAddBtn",["ngCart",function(t){return{restrict:"E",controller:"CartBtnController",scope:{id:"@",sku:"@",name:"@",quantity:"@",quantityMax:"@",price:"@",data:"="},transclude:!0,templateUrl:function(t,e){return"undefined"==typeof e.templateUrl?"views/ngCart/addtocartBtn.html":e.templateUrl},link:function(e,r,n){e.attrs=n,e.inCart=function(){return t.getItemBySku(n.sku)},e.inCart()?e.q=t.getItemBySku(n.sku).getQuantity():e.q=parseInt(e.quantity),e.qtyOpt=[];for(var a=1;a<=e.quantityMax;a++)e.qtyOpt.push(a)}}}]).directive("ngcartAddtocart",["ngCart",function(t){return{restrict:"E",controller:"CartController",scope:{id:"@",sku:"@",name:"@",quantity:"@",quantityMax:"@",price:"@",data:"="},transclude:!0,templateUrl:function(t,e){return"undefined"==typeof e.templateUrl?"views/ngCart/addtocart.html":e.templateUrl},link:function(e,r,n){e.attrs=n,e.inCart=function(){return t.getItemBySku(n.sku)},e.inCart()?e.q=t.getItemBySku(n.sku).getQuantity():e.q=parseInt(e.quantity),e.qtyOpt=[];for(var a=1;a<=e.quantityMax;a++)e.qtyOpt.push(a)}}}]).directive("ngcartAddtocartProduct",["ngCart",function(t){return{restrict:"E",controller:"CartController",scope:{id:"@",sku:"@",name:"@",attr:"@",quantity:"@",quantityMax:"@",price:"@",data:"="},transclude:!0,templateUrl:function(t,e){return"undefined"==typeof e.templateUrl?"views/ngCart/addtocartProduct.html":e.templateUrl},link:function(e,r,n){e.attrs=n,e.inCart=function(){return t.getItemBySku(n.sku)},e.inCart()?e.q=t.getItemBySku(n.sku).getQuantity():e.q=parseInt(e.quantity),e.updateQ=function(t){console.log("count should be: ",t),e.qtyOpt=[];for(var r=1;r<=t;r++)e.qtyOpt.push(r)},e.updateQ(e.quantityMax),e.$on("changeQ",function(t,r){console.log("data in $on? ",r),console.log("updating in directive!"),e.updateQ(r.count)})}}}]).directive("ngcartCart",[function(){return{restrict:"E",controller:"CartController",scope:{},templateUrl:function(t,e){return"undefined"==typeof e.templateUrl?"views/ngCart/cart.html":e.templateUrl},link:function(t,e,r){}}}]).directive("ngcartSummary",[function(){return{restrict:"E",controller:"CartController",scope:{},transclude:!0,templateUrl:function(t,e){return"undefined"==typeof e.templateUrl?"views/ngCart/summary.html":e.templateUrl}}}]).directive("ngcartCartConfirm",[function(){return{restrict:"E",controller:"CartController",scope:{},templateUrl:function(t,e){return"undefined"==typeof e.templateUrl?"views/ngCart/cart-confirm.html":e.templateUrl},link:function(t,e,r){}}}]).directive("ngcartSmallCart",[function(){return{restrict:"E",controller:"CartController",scope:{},templateUrl:function(t,e){return"undefined"==typeof e.templateUrl?"views/ngCart/small-cart.html":e.templateUrl},link:function(t,e,r){}}}]).directive("ngcartSmallCartCollapse",[function(){return{restrict:"E",controller:"CartController",scope:{},templateUrl:function(t,e){return"undefined"==typeof e.templateUrl?"views/ngCart/small-cart-collapse.html":e.templateUrl},link:function(t,e,r){}}}]).directive("ngcartCheckout",[function(){return{restrict:"E",controller:["$rootScope","$scope","ngCart","fulfilmentProvider",function(t,e,r,n){e.ngCart=r,e.checkout=function(){n.setService(e.service),n.setSettings(e.settings),n.checkout().success(function(e,r,n,a){t.$broadcast("ngCart:checkout_succeeded",e)}).error(function(e,r,n,a){t.$broadcast("ngCart:checkout_failed",{statusCode:r,error:e})})}}],scope:{service:"@",settings:"="},transclude:!0,templateUrl:function(t,e){return"undefined"==typeof e.templateUrl?"template/ngCart/checkout.html":e.templateUrl}}}]),angular.module("ngCart.fulfilment",[]).service("fulfilmentProvider",["$injector",function(t){this._obj={service:void 0,settings:void 0},this.setService=function(t){this._obj.service=t},this.setSettings=function(t){this._obj.settings=t},this.checkout=function(){var e=t.get("ngCart.fulfilment."+this._obj.service);return e.checkout(this._obj.settings)}}]).service("ngCart.fulfilment.log",["$q","$log","ngCart",function(t,e,r){this.checkout=function(){var n=t.defer();return e.info(r.toObject()),n.resolve({cart:r.toObject()}),n.promise}}]).service("ngCart.fulfilment.http",["$http","ngCart",function(t,e){this.checkout=function(r){return t.post(r.url,{data:e.toObject(),options:r.options})}}]).service("ngCart.fulfilment.paypal",["$http","ngCart",function(t,e){}]),function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var r=e();for(var n in r)("object"==typeof exports?exports:t)[n]=r[n]}}(this,function(){return function(t){function e(n){if(r[n])return r[n].exports;var a=r[n]={exports:{},id:n,loaded:!1};return t[n].call(a.exports,a,a.exports,e),a.loaded=!0,a.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){t.exports="ngFileSaver",angular.module("ngFileSaver",[]).factory("FileSaver",["Blob","SaveAs","FileSaverUtils",r(1)]).factory("FileSaverUtils",[r(2)]).factory("Blob",["$window",r(3)]).factory("SaveAs",[r(5)])},function(t,e){t.exports=function(t,e,r){function n(t,n,a){try{e(t,n,a)}catch(t){r.handleErrors(t.message)}}return{saveAs:function(t,e,a){return r.isBlobInstance(t)||r.handleErrors("Data argument should be a blob instance"),r.isString(e)||r.handleErrors("Filename argument should be a string"),n(t,e,a)}}}},function(t,e){t.exports=function(){return{handleErrors:function(t){throw new Error(t)},isString:function(t){return"string"==typeof t||t instanceof String},isUndefined:function(t){return"undefined"==typeof t},isBlobInstance:function(t){return t instanceof Blob}}}},function(t,e,r){r(4),t.exports=function(t){return t.Blob}},function(t,e){!function(t){if(t.URL=t.URL||t.webkitURL,t.Blob&&t.URL)try{return void new Blob}catch(t){}var e=t.BlobBuilder||t.WebKitBlobBuilder||t.MozBlobBuilder||function(t){var e=function(t){return Object.prototype.toString.call(t).match(/^\[object\s(.*)\]$/)[1]},r=function(){this.data=[]},n=function(t,e,r){this.data=t,this.size=t.length,this.type=e,this.encoding=r},a=r.prototype,i=n.prototype,o=t.FileReaderSync,s=function(t){this.code=this[this.name=t]},l="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),u=l.length,c=t.URL||t.webkitURL||t,p=c.createObjectURL,f=c.revokeObjectURL,d=c,g=t.btoa,h=t.atob,m=t.ArrayBuffer,v=t.Uint8Array,y=/^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/;for(n.fake=i.fake=!0;u--;)s.prototype[l[u]]=u+1;return c.createObjectURL||(d=t.URL=function(t){var e,r=document.createElementNS("http://www.w3.org/1999/xhtml","a");return r.href=t,"origin"in r||("data:"===r.protocol.toLowerCase()?r.origin=null:(e=t.match(y),r.origin=e&&e[1])),r}),d.createObjectURL=function(t){var e,r=t.type;return null===r&&(r="application/octet-stream"),t instanceof n?(e="data:"+r,"base64"===t.encoding?e+";base64,"+t.data:"URI"===t.encoding?e+","+decodeURIComponent(t.data):g?e+";base64,"+g(t.data):e+","+encodeURIComponent(t.data)):p?p.call(c,t):void 0},d.revokeObjectURL=function(t){"data:"!==t.substring(0,5)&&f&&f.call(c,t)},a.append=function(t){var r=this.data;if(v&&(t instanceof m||t instanceof v)){for(var a="",i=new v(t),l=0,u=i.length;l<u;l++)a+=String.fromCharCode(i[l]);r.push(a)}else if("Blob"===e(t)||"File"===e(t)){if(!o)throw new s("NOT_READABLE_ERR");var c=new o;r.push(c.readAsBinaryString(t))}else t instanceof n?"base64"===t.encoding&&h?r.push(h(t.data)):"URI"===t.encoding?r.push(decodeURIComponent(t.data)):"raw"===t.encoding&&r.push(t.data):("string"!=typeof t&&(t+=""),r.push(unescape(encodeURIComponent(t))))},a.getBlob=function(t){return arguments.length||(t=null),new n(this.data.join(""),t,"raw")},a.toString=function(){return"[object BlobBuilder]"},i.slice=function(t,e,r){var a=arguments.length;return a<3&&(r=null),new n(this.data.slice(t,a>1?e:this.data.length),r,this.encoding)},i.toString=function(){return"[object Blob]"},i.close=function(){this.size=0,delete this.data},r}(t);t.Blob=function(t,r){var n=r?r.type||"":"",a=new e;if(t)for(var i=0,o=t.length;i<o;i++)Uint8Array&&t[i]instanceof Uint8Array?a.append(t[i].buffer):a.append(t[i]);var s=a.getBlob(n);return!s.slice&&s.webkitSlice&&(s.slice=s.webkitSlice),s};var r=Object.getPrototypeOf||function(t){return t.__proto__};t.Blob.prototype=r(new t.Blob)}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content||this)},function(t,e,r){t.exports=function(){return r(6).saveAs||function(){}}},function(t,e,r){var n,a,i=i||function(t){if(!("undefined"==typeof t||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var e=t.document,r=function(){return t.URL||t.webkitURL||t},n=e.createElementNS("http://www.w3.org/1999/xhtml","a"),a="download"in n,i=function(t){var e=new MouseEvent("click");t.dispatchEvent(e)},o=/constructor/i.test(t.HTMLElement),s=/CriOS\/[\d]+/.test(navigator.userAgent),l=function(e){(t.setImmediate||t.setTimeout)(function(){throw e},0)},u="application/octet-stream",c=4e4,p=function(t){var e=function(){"string"==typeof t?r().revokeObjectURL(t):t.remove()};setTimeout(e,c)},f=function(t,e,r){e=[].concat(e);for(var n=e.length;n--;){var a=t["on"+e[n]];if("function"==typeof a)try{a.call(t,r||t)}catch(t){l(t)}}},d=function(t){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob([String.fromCharCode(65279),t],{type:t.type}):t},g=function(e,l,c){c||(e=d(e));var g,h=this,m=e.type,v=m===u,y=function(){f(h,"writestart progress write writeend".split(" "))},b=function(){if((s||v&&o)&&t.FileReader){var n=new FileReader;return n.onloadend=function(){var e=s?n.result:n.result.replace(/^data:[^;]*;/,"data:attachment/file;"),r=t.open(e,"_blank");r||(t.location.href=e),e=void 0,h.readyState=h.DONE,y()},n.readAsDataURL(e),void(h.readyState=h.INIT)}if(g||(g=r().createObjectURL(e)),v)t.location.href=g;else{var a=t.open(g,"_blank");a||(t.location.href=g)}h.readyState=h.DONE,y(),p(g)};return h.readyState=h.INIT,a?(g=r().createObjectURL(e),void setTimeout(function(){n.href=g,n.download=l,i(n),y(),p(g),h.readyState=h.DONE})):void b()},h=g.prototype,m=function(t,e,r){return new g(t,e||t.name||"download",r)};return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(t,e,r){return e=e||t.name||"download",r||(t=d(t)),navigator.msSaveOrOpenBlob(t,e)}:(h.abort=function(){},h.readyState=h.INIT=0,h.WRITING=1,h.DONE=2,h.error=h.onwritestart=h.onprogress=h.onwrite=h.onabort=h.onerror=h.onwriteend=null,m)}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);"undefined"!=typeof t&&t.exports?t.exports.saveAs=i:null!==r(7)&&null!==r(8)&&(n=[],a=function(){return i}.apply(e,n),!(void 0!==a&&(t.exports=a)))},function(t,e){t.exports=function(){throw new Error("define cannot be used indirect")}},function(t,e){(function(e){t.exports=e}).call(e,{})}])});var uiroutermetatags;!function(t){function e(t,e,r,n){function a(t,e,r,a,i){n.prerenderReady=!1}function i(e,n){n.metaTags||t.debug('MetaTags - route: "'+n.name+'" does not contain any metatags'),r.update(n.metaTags)}function o(t,e,a,i,o,s){r.prerender.statusCode=500,n.prerenderReady=!0}function s(t,e,a){r.prerender.statusCode=404,n.prerenderReady=!0}e.MetaTags=r,e.$on("$stateChangeStart",a),e.$on("$stateChangeSuccess",i),e.$on("$stateChangeError",o),e.$on("$stateNotFound",s)}e.$inject=["$log","$rootScope","MetaTags","$window"];var r=angular.module("ui.router.metatags",["ui.router"]),n=function(){function t(){this.prefix="",this.suffix="",this.defaultTitle="",this.defaultDescription="",this.defaultKeywords="",this.defaultRobots="",this.staticProperties={},this.enableOGURL=!1}return t.prototype.setTitlePrefix=function(t){return this.prefix=t,this},t.prototype.setTitleSuffix=function(t){return this.suffix=t,this},t.prototype.setDefaultTitle=function(t){return this.defaultTitle=t,this},t.prototype.setDefaultDescription=function(t){return this.defaultDescription=t,this},t.prototype.setDefaultKeywords=function(t){return this.defaultKeywords=t,this},t.prototype.setDefaultRobots=function(t){return this.defaultRobots=t,this},t.prototype.setStaticProperties=function(t){return this.staticProperties=t,this},t.prototype.setOGURL=function(t){return this.enableOGURL=t,this},t.prototype.$get=function(){return{prefix:this.prefix,suffix:this.suffix,defaultTitle:this.defaultTitle,defaultDescription:this.defaultDescription,defaultKeywords:this.defaultKeywords,defaultRobots:this.defaultRobots,staticProperties:this.staticProperties,enableOGURL:this.enableOGURL}},t}();r.provider("UIRouterMetatags",n);var a=function(){function t(t,e,r,n,a,i,o){this.$log=t,this.UIRouterMetatags=e,this.$interpolate=r,this.$injector=n,this.$state=a,this.$location=i,this.$window=o,this.prerender={}}return t.$inject=["$log","UIRouterMetatags","$interpolate","$injector","$state","$location","$window"],t.prototype.update=function(t){var e=this;try{this.properties=angular.extend({},this.UIRouterMetatags.staticProperties),this.UIRouterMetatags.enableOGURL&&(this.properties["og:url"]=this.$location.absUrl()),t?(this.title=t.title?this.UIRouterMetatags.prefix+(this.getValue("title",t.title)||"")+this.UIRouterMetatags.suffix:this.UIRouterMetatags.defaultTitle,this.description=t.description?this.getValue("description",t.description):this.UIRouterMetatags.defaultDescription,this.keywords=t.keywords?this.getValue("keywords",t.keywords):this.UIRouterMetatags.defaultKeywords,this.robots=t.robots?this.getValue("robots",t.robots):this.UIRouterMetatags.defaultRobots,angular.forEach(t.properties,function(t,r){var n=e.getValue(r,t);n&&(e.properties[r]=n)})):(this.title=this.UIRouterMetatags.defaultTitle,this.description=this.UIRouterMetatags.defaultDescription,this.keywords=this.UIRouterMetatags.defaultKeywords,this.robots=this.UIRouterMetatags.defaultRobots),t&&t.prerender?(this.prerender.statusCode=t.prerender.statusCode?this.getValue("prerender.statusCode",t.prerender.statusCode):200,this.prerender.header=t.prerender.header?this.getValue("rerender.header",t.prerender.header):null):(this.prerender.statusCode=200,this.prerender.header=null),this.$window.prerenderReady=!0}catch(t){this.$log.error("error occured when extracting metatags:",t)}},t.prototype.getValue=function(t,e){try{return e?"number"==typeof e?e:"string"==typeof e&&0===e.trim().length?null:angular.isFunction(e)||Array.isArray(e)?this.$injector.invoke(e,this,this.$state.$current.locals.globals):this.$interpolate(e)(this.$state.$current.locals.globals):null}catch(e){return this.$log.error("error occured when trying to get the value of tag:",t,e),null}},t}();r.service("MetaTags",a),r.run(e)}(uiroutermetatags||(uiroutermetatags={}));var tableSortModule=angular.module("tableSort",[]);tableSortModule.provider("tableSortConfig",function(){this.filterTemplate="",this.filterFunction=void 0,this.paginationTemplate="",this.perPageOptions=[10,25,50,100],this.perPageDefault=this.perPageOptions[0],this.itemNameSingular="item",this.itemNamePlural=this.itemNameSingular+"s",this.noDataText="No "+this.itemNamePlural,this.wrappingElementClass="",isNaN(this.perPageDefault)||this.perPageOptions.indexOf(this.perPageDefault)!==-1||this.perPageOptions.push(this.perPageDefault),this.perPageOptions.sort(function(t,e){return t-e}),this.$get=function(){return this}}),tableSortModule.directive("tsWrapper",["$parse","$compile",function(t,e){function r(t,e){console.log("what is templateString? ",e);var r=e.replace(/FILTER_STRING/g,"filtering.filterString").replace(/CURRENT_PAGE_RANGE/g,"pagination.getPageRangeString(TOTAL_COUNT)").replace(/TOTAL_COUNT/g,t.itemsArrayExpression+".length").replace(/PER_PAGE_OPTIONS/g,"pagination.perPageOptions").replace(/ITEMS_PER_PAGE/g,"pagination.perPage").replace(/ITEM_NAME_SINGULAR/g,"itemNameSingular").replace(/ITEM_NAME_PLURAL/g,"itemNamePlural").replace(/FILTERED_COUNT/g,"filtering.filteredCount").replace(/CURRENT_PAGE_NUMBER/g,"pagination.currentPage");return console.log("newString: ",r),r}function n(){function t(t,e){return t>e?1:t<e?-1:0}var e=t,r=t;"object"==typeof Intl?e=new Intl.Collator((void 0),{sensitivity:"case"}).compare:"function"==typeof String.prototype.localeCompare&&(e=function(t,e){return(t+"").localeCompare(e,void 0,{sensitivity:"case"})});var n=function(t,n){return"number"==typeof t&&"number"==typeof n?r(t,n):t instanceof Date&&n instanceof Date?r(t.getTime(),n.getTime()):e(t,n)};return n}var a=n();return{scope:!0,controller:["$scope","tableSortConfig",function(e,r){e.pagination={template:r.paginationTemplate,perPageOptions:r.perPageOptions.concat(),perPage:r.perPageDefault,currentPage:1,getPageRangeString:function(t){var r=t!==e.filtering.filteredCount?e.filtering.filteredCount:t,n=Math.max((e.pagination.currentPage-1)*e.pagination.perPage+1,1),a=Math.min(e.pagination.currentPage*e.pagination.perPage,r);return 0===e.filtering.filteredCount?"":(a===r&&1===n?"":n+"-")+a}},console.log("what is pagination: ",e.pagination),e.filtering={template:r.filterTemplate,filterString:"",filterFunction:r.filterFunction,filteredCount:0,filterFields:[]},console.log("what is filtering: ",e.filtering),e.itemsArrayExpression="",e.itemNameSingular=r.itemNameSingular,e.itemNamePlural=r.itemNamePlural,e.noDataText=r.noDataText,e.wrappingElementClass=r.wrappingElementClass,e.sortExpression=[],e.headings=[];var n=function(e,r){return[t(e),null,!1,r?r:e]};this.setSortField=function(t,r,a,i){var o,s=n(t,a);if(s.push(i),1===e.sortExpression.length&&e.sortExpression[0][0]===s[0])e.sortExpression[0][2]?(r.removeClass("tablesort-desc"),r.addClass("tablesort-asc"),e.sortExpression[0][2]=!1):(r.removeClass("tablesort-asc"),r.addClass("tablesort-desc"),e.sortExpression[0][2]=!0),e.$emit("tablesort:sortOrder",[{name:e.sortExpression[0][3],order:e.sortExpression[0][2]}]);else{for(o=0;o<e.headings.length;o+=1)e.headings[o].removeClass("tablesort-desc").removeClass("tablesort-asc");r.addClass("tablesort-asc"),e.sortExpression=[s],e.$emit("tablesort:sortOrder",[{name:s[3],order:s[2]}])}},this.addSortField=function(t,r,a,i){var o,s=!1,l=n(t,a);for(l.push(i),o=0;o<e.sortExpression.length;o+=1)e.sortExpression[o][0]===l[0]&&(e.sortExpression[o][2]?(r.removeClass("tablesort-desc"),r.addClass("tablesort-asc"),e.sortExpression[o][2]=!1):(r.removeClass("tablesort-asc"),r.addClass("tablesort-desc"),e.sortExpression[o][2]=!0),s=!0);s||(r.addClass("tablesort-asc"),e.sortExpression.push(l)),e.$emit("tablesort:sortOrder",e.sortExpression.map(function(t){return{name:t[3],order:t[2]}}))},this.setTrackBy=function(t){e.trackBy=t},this.registerHeading=function(t){e.headings.push(t)},this.addFilterField=function(t,r){var a=n(t);e.filtering.filterFields.push(a)},this.setArrayExpr=function(t){e.itemsArrayExpression=t}}],link:function(n,i,o,s){if(o.tsItemName){var l="No "+n.itemNamePlural;n.itemNameSingular=o.tsItemName,o.tsItemNamePlural?n.itemNamePlural=o.tsItemNamePlural:n.itemNamePlural=o.tsItemName+"s",o.tsNoDataText||n.noDataText!==l||(n.noDataText="No "+n.itemNamePlural)}if(o.tsNoDataText&&(n.noDataText=o.tsNoDataText),o.tsWrappingElementClass&&(n.wrappingElementClass=o.tsWrappingElementClass),o.tsPerPageOptions&&(n.pagination.perPageOptions=n.$eval(o.tsPerPageOptions)),o.tsPerPageDefault){var u=n.$eval(o.tsPerPageDefault);isNaN(u)||(n.pagination.perPage=u,n.pagination.perPageOptions.indexOf(n.pagination.perPage)===-1&&(n.pagination.perPageOptions.push(n.pagination.perPage),n.pagination.perPageOptions.sort(function(t,e){return t-e})))}if(o.tsFilterFields)for(var c=o.tsFilterFields.split(",").filter(function(t){return t&&""!==t.trim()}),p=0;p<c.length;p+=1)s.addFilterField(c[p]);var f;if("false"!==o.tsDisplayFiltering&&""!==n.filtering.template&&n.filtering.filterFields.length>0){var d=r(n,n.filtering.template);f=e(d)(n),i.parent()[0].insertBefore(f[0],i[0])}o.tsFilterFunction&&(n.filtering.filterFunction=n.$eval(o.tsFilterFunction)),angular.isFunction(n.filtering.filterFunction)||(0===n.filtering.filterFields.length?n.filtering.filterFunction=function(t){return!0}:n.filtering.filterFunction=function(t){for(var e=!1,r=0;r<n.filtering.filterFields.length;r+=1)if(!e){var a=(n.filtering.filterFields[r][0](t)||"").toString().toLowerCase();e=a.indexOf(n.filtering.filterString.toLowerCase())>-1}return e}),n.filterLimitFun=function(t){if(!o.tsFilterFunction&&""===n.filtering.filterString)return n.filtering.filteredCount=t.length,t;var e=t.filter(n.filtering.filterFunction);return n.filtering.filteredCount=e.length,e},n.sortFun=function(t,e){var r,i,o,s,l,u;for(r=0;r<n.sortExpression.length;r+=1){if(i=n.sortExpression[r][0](t),o=n.sortExpression[r][0](e),l=e[n.sortExpression[r][1]],l&&(i=l(i),o=l(o)),void 0!==i&&null!==i||(i=""),void 0!==o&&null!==o||(o=""),s=n.sortExpression[r][2],u=(n.sortExpression[r][4]||a)(i,o),1===u)return s?-1:1;if(u===-1)return s?1:-1}if(n.trackBy){if(i=t[n.trackBy],o=e[n.trackBy],void 0!==i&&null!==i||(i=""),void 0!==o&&null!==o||(o=""),u=a(i,o),1===u)return s?-1:1;if(u===-1)return s?1:-1}return 0},n.pageLimitFun=function(t){if("false"===o.tsDisplayPagination||""===n.pagination.template)return t;for(var e=(n.pagination.currentPage-1)*n.pagination.perPage,r=n.pagination.currentPage*n.pagination.perPage,a=[],i=0;i<t.length;i++)i>=e&&i<r&&a.push(t[i]);return a};var g;if("false"!==o.tsDisplayPagination&&""!==n.pagination.template){var h=r(n,n.pagination.template);g=e(h)(n),i.after(g)}var m;if(n.wrappingElementClass&&""!==n.wrappingElementClass&&(m=i.wrap("<div class='"+n.wrappingElementClass+"' />")),o.tsGetTableDataFunction){var v=t(o.tsGetTableDataFunction),y=v.assign,b=function(e,r,a){var i=t(n.itemsArrayExpression)(n);return e&&(i=i.sort(n.sortFun)),r&&(i=n.filterLimitFun(i)),a&&(i=n.pageLimitFun(i)),i};y(n.$parent,b)}n.$on("$destroy",function(){f&&f.remove(),g&&g.remove(),m&&m.replaceWith(i)})}}}]),tableSortModule.directive("tsCriteria",function(){return{require:"^tsWrapper",scope:{tsOrderBy:"="},link:function(t,e,r,n){var a=function(a){t.$apply(function(){a.shiftKey?n.addSortField(r.tsCriteria,e,r.tsName,t.tsOrderBy):n.setSortField(r.tsCriteria,e,r.tsName,t.tsOrderBy)})};e.bind("click",a),e.addClass("tablesort-sortable"),"tsDefault"in r&&"0"!==r.tsDefault&&(n.addSortField(r.tsCriteria,e,r.tsName,t.tsOrderBy),"descending"===r.tsDefault&&n.addSortField(r.tsCriteria,e,r.tsName,t.tsOrderBy)),"tsFilter"in r&&n.addFilterField(r.tsCriteria,e),n.registerHeading(e)}}}),tableSortModule.directive("tsRepeat",["$compile","$interpolate",function(t,e){return{terminal:!0,multiElement:!0,require:"^tsWrapper",priority:1e6,link:function(r,n,a,i){for(var o=["ng-repeat","data-ng-repeat","ng-repeat-start","data-ng-repeat-start"],s=o[0],l="ts-repeat",u=0;u<o.length;u++)if(angular.isDefined(n.attr(o[u]))){s=o[u],l=s.replace(/^(data-)?ng/,"$1ts");break}var c="tablesortOrderBy:sortFun | tablesortLimit:filterLimitFun | tablesortLimit:pageLimitFun",p=n.attr(s),f=/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(\s+track\s+by\s+[\s\S]+?)?\s*$/,d=p.match(/\s+track\s+by\s+\S+?\.(\S+)/),g=p.match(f);if(d&&i.setTrackBy(d[1]),p.search(/tablesort/)!==-1?(p=p.replace(/tablesort/,c),
d&&(p=p.replace(d[0],"")+d[0])):p=p.replace(f,"$1 in $2 | "+c+"$3"),angular.isUndefined(a.tsHideNoData)){var h=e.startSymbol(),m=e.endSymbol(),v=angular.element(n[0]).clone();v.removeAttr(s),v.removeAttr(l),v.addClass("showIfLast"),v.children().remove(),v.append('<td colspan="'+n[0].childElementCount+'">'+h+"noDataText"+m+"</td>"),v=t(v)(r),n.parent().prepend(v)}i.setArrayExpr(g[2]),angular.element(n[0]).attr(s,p),t(n,null,1e6)(r)}}}]),tableSortModule.filter("tablesortLimit",function(){return function(t,e){if(t)return e(t)}}),tableSortModule.filter("tablesortOrderBy",function(){return function(t,e){if(t){var r=t.concat();return r.sort(e)}}}),tableSortModule.filter("parseInt",function(){return function(t){return parseInt(t)||null}}),tableSortModule.filter("parseFloat",function(){return function(t){return parseFloat(t)||null}}),tableSortModule.filter("parseDate",function(){return function(t){var e=Date.parse(t);return isNaN(e)?null:e}}),angular.module("picardy.fontawesome",[]).directive("fa",function(){return{restrict:"E",template:'<span class="fa" aria-hidden="true"></span>',replace:!0,link:function(t,e,r){function n(t,n){var a;r.$observe(t,function(){n=n||"fa-"+t,e.removeClass(i[t]),r[t]&&(a=[n,r[t]].join("-"),e.addClass(a),i[t]=a)})}function a(t,n){var a;r.$observe(t,function(){n=n||"fa-"+t,a=t in r&&"false"!==r[t]&&r[t]!==!1,e.toggleClass(n,a)})}var i={};n("name","fa"),n("rotate"),n("flip"),n("stack"),r.$observe("size",function(){var t;e.removeClass(i.size),"large"===r.size?t="fa-lg":isNaN(parseInt(r.size,10))||(t="fa-"+r.size+"x"),e.addClass(t),i.size=t}),r.$observe("stack",function(){var t;e.removeClass(i.stack),"large"===r.stack?t="fa-stack-lg":isNaN(parseInt(r.stack,10))||(t="fa-stack-"+r.stack+"x"),e.addClass(t),i.stack=t}),a("border"),a("fw"),a("inverse"),a("spin"),e.toggleClass("fa-li",e.parent()&&"LI"===e.parent().prop("tagName")&&e.parent().parent()&&e.parent().parent().hasClass("fa-ul")&&e.parent().children()[0]===e[0]&&"false"!==r.list&&r.list!==!1),r.$observe("alt",function(){var t=r.alt,n=e.next(),a="fa-alt-text";t?(e.removeAttr("alt"),n&&n.hasClass(a)||(e.after('<span class="sr-only fa-alt-text"></span>'),n=e.next()),n.text(t)):n&&n.hasClass(a)&&n.remove()})}}}).directive("faStack",function(){return{restrict:"E",transclude:!0,template:'<span ng-transclude class="fa-stack fa-lg"></span>',replace:!0,link:function(t,e,r){function n(t,n){var i;r.$observe(t,function(){n=n||"fa-"+t,e.removeClass(a[t]),r[t]&&(i=[n,r[t]].join("-"),e.addClass(i),a[t]=i)})}var a={};n("size"),r.$observe("size",function(){var t;e.removeClass(a.size),"large"===r.size?t="fa-lg":isNaN(parseInt(r.size,10))||(t="fa-"+r.size+"x"),e.addClass(t),a.size=t})}}}),function(t,e,r,n){function a(e,r){this.options=t.extend({},o,r),this._defaults=o,this._name=i,this.$element=t(e),this.init()}var i="menuButton",o={propertyName:"value"};a.prototype={constructor:a,init:function(){this.toggle()},toggle:function(t,e){"show"===this.$element.data("dropdown")?this.hideMenu():this.showMenu()},showMenu:function(){this.$element.data("dropdown","show"),this.$element.find("ul").show()},hideMenu:function(){this.$element.data("dropdown","hide"),this.$element.find("ul").hide()}},t.fn[i]=function(e){return this.each(function(){t.data(this,"plugin_"+i)?t.data(this,"plugin_"+i).toggle():t.data(this,"plugin_"+i,new a(this,e))})},t(r).on("click",function(e){t.each(t("[data-buttons=dropdown]"),function(r,n){t(e.target.offsetParent)[0]!=t(this)[0]&&t.data(this,"plugin_"+i)&&(t.data(this,"plugin_"+i).hideMenu(),t(this).find("ul").hide())})}),t(r).on("click","[data-buttons=dropdown]",function(e){var r=t(e.currentTarget);r.menuButton()}),t(r).on("click","[data-buttons=dropdown] > a",function(t){t.preventDefault()})}(jQuery,window,document),angular.module("angularPayments",[]),angular.module("angularPayments").factory("Common",[function(){var t={};return t.parseExpiry=function(t){var e,r,n,a;return t=t||"",t=t.replace(/\s/g,""),a=t.split("/",2),e=a[0],n=a[1],2===(null!=n?n.length:void 0)&&/^\d+$/.test(n)&&(r=(new Date).getFullYear(),r=r.toString().slice(0,2),n=r+n),e=parseInt(e,10),n=parseInt(n,10),{month:e,year:n}},t}]),angular.module("angularPayments").factory("Cards",[function(){var t=/(\d{1,4})/g,e=/(?:^|\s)(\d{4})$/,r=[{type:"maestro",pattern:/^(5018|5020|5038|6304|6759|676[1-3])/,format:t,inputFormat:e,length:[12,13,14,15,16,17,18,19],cvcLength:[3],luhn:!0},{type:"dinersclub",pattern:/^(36|38|30[0-5])/,format:t,inputFormat:e,length:[14],cvcLength:[3],luhn:!0},{type:"laser",pattern:/^(6706|6771|6709)/,format:t,inputFormat:e,length:[16,17,18,19],cvcLength:[3],luhn:!0},{type:"jcb",pattern:/^35/,format:t,inputFormat:e,length:[16],cvcLength:[3],luhn:!0},{type:"unionpay",pattern:/^62/,format:t,inputFormat:e,length:[16,17,18,19],cvcLength:[3],luhn:!1},{type:"discover",pattern:/^(6011|65|64[4-9]|622)/,format:t,inputFormat:e,length:[16],cvcLength:[3],luhn:!0},{type:"mastercard",pattern:/^5[1-5]/,format:t,inputFormat:e,length:[16],cvcLength:[3],luhn:!0},{type:"amex",pattern:/^3[47]/,format:/(\d{1,4})(\d{1,6})?(\d{1,5})?/,inputFormat:/^(\d{4}|\d{4}\s\d{6})$/,length:[15],cvcLength:[3,4],luhn:!0},{type:"visa",pattern:/^4/,format:t,inputFormat:e,length:[13,14,15,16],cvcLength:[3],luhn:!0}],n=function(t){var e,n,a;for(t=(t+"").replace(/\D/g,""),n=0,a=r.length;n<a;n++)if(e=r[n],e.pattern.test(t))return e},a=function(t){var e,n,a;for(n=0,a=r.length;n<a;n++)if(e=r[n],e.type===t)return e};return{fromNumber:function(t){return n(t)},fromType:function(t){return a(t)},defaultFormat:function(){return t},defaultInputFormat:function(){return e}}}]),angular.module("angularPayments").factory("_Format",["Cards","Common","$filter",function(t,e,r){var n={},a=function(t){var e;return null!=t.prop("selectionStart")&&t.prop("selectionStart")!==t.prop("selectionEnd")||!("undefined"==typeof document||null===document||null==(e=document.selection)||"function"!=typeof e.createRange||!e.createRange().text)},i=function(e){var r,n,a,i,o,s,l;if(a=String.fromCharCode(e.which),r=angular.element(e.currentTarget),l=r.val(),n=t.fromNumber(l+a),i=(l.replace(/\D/g,"")+a).length,s=16,n&&(s=n.length[n.length.length-1]),!(i>=s)){if(!/^\d+$/.test(a)&&!e.meta&&e.keyCode>=46)return void e.preventDefault();if(null==r.prop("selectionStart")||r.prop("selectionStart")===l.length)return o=t.defaultInputFormat(),n&&(o=n.inputFormat),o.test(l)?(e.preventDefault(),r.val(l+" "+a)):o.test(l+a)?(e.preventDefault(),r.val(l+a+" ")):void 0}},o=function(e){var r,n,i,o;r=angular.element(e.currentTarget),i=String.fromCharCode(e.which),/^\d+$/.test(i)&&(a(r)||(o=(r.val()+i).replace(/\D/g,""),n=t.fromNumber(o),n?o.length<=n.length[n.length.length-1]||e.preventDefault():o.length<=16||e.preventDefault()))},s=function(t){var e,r;if(e=angular.element(t.currentTarget),r=e.val(),!t.meta&&8===t.which&&(null==e.prop("selectionStart")||e.prop("selectionStart")===r.length))return/\d\s$/.test(r)&&!t.meta&&t.keyCode>=46?(t.preventDefault(),e.val(r.replace(/\d\s$/,""))):/\s\d?$/.test(r)?(t.preventDefault(),e.val(r.replace(/\s\d?$/,""))):void 0},l=function(e){var r,n,a,i;return(r=t.fromNumber(e))?(a=r.length[r.length.length-1],e=e.replace(/\D/g,""),e=e.slice(0,+a+1||9e9),r.format.global?null!=(i=e.match(r.format))?i.join(" "):void 0:(n=r.format.exec(e),null!=n&&n.shift(),null!=n?n.join(" "):void 0)):e},u=function(t){return setTimeout(function(){var e,r;return e=angular.element(t.target),r=e.val(),r=l(r),e.val(r)})},c=function(t){return null!=t?t.replace(/\s/g,""):t};n.card=function(t,e){t.bind("keypress",o),t.bind("keypress",i),t.bind("keydown",s),t.bind("paste",u),e.$parsers.push(c),e.$formatters.push(l)},_formatCVC=function(t){return $target=angular.element(t.currentTarget),digit=String.fromCharCode(t.which),!/^\d+$/.test(digit)&&!t.meta&&t.keyCode>=46?void t.preventDefault():(val=$target.val()+digit,val.length<=4?void 0:void t.preventDefault())},n.cvc=function(t){t.bind("keypress",_formatCVC)},_restrictExpiry=function(t){var e,r,n;return e=angular.element(t.currentTarget),r=String.fromCharCode(t.which),!/^\d+$/.test(r)&&!t.meta&&t.keyCode>=46?void t.preventDefault():a(e)?void 0:(n=e.val()+r,n=n.replace(/\D/g,""),n.length>6?void t.preventDefault():void 0)},_formatExpiry=function(t){var e,r,n;return r=String.fromCharCode(t.which),!/^\d+$/.test(r)&&!t.meta&&t.keyCode>=46?void t.preventDefault():(e=angular.element(t.currentTarget),n=e.val()+r,/^\d$/.test(n)&&"0"!==n&&"1"!==n?(t.preventDefault(),e.val("0"+n+" / ")):/^\d\d$/.test(n)?(t.preventDefault(),e.val(""+n+" / ")):void 0)},_formatForwardExpiry=function(t){var e,r,n;if(r=String.fromCharCode(t.which),/^\d+$/.test(r)||t.meta||!(t.keyCode>=46))return e=angular.element(t.currentTarget),n=e.val(),/^\d\d$/.test(n)?e.val(""+n+" / "):void 0},_formatForwardSlash=function(t){var e,r,n;if(r=String.fromCharCode(t.which),"/"===r)return e=angular.element(t.currentTarget),n=e.val(),/^\d$/.test(n)&&"0"!==n?e.val("0"+n+" / "):void 0},_formatBackExpiry=function(t){var e,r;if(!t.meta&&(e=angular.element(t.currentTarget),r=e.val(),8===t.which&&(null==e.prop("selectionStart")||e.prop("selectionStart")===r.length)))return/\d(\s|\/)+$/.test(r)?(t.preventDefault(),e.val(r.replace(/\d(\s|\/)*$/,""))):/\s\/\s?\d?$/.test(r)?(t.preventDefault(),e.val(r.replace(/\s\/\s?\d?$/,""))):void 0};var p=function(t){if(null!=t){var n=e.parseExpiry(t),a=new Date(n.year,n.month-1);return r("date")(a,"MM/yyyy")}return null},f=function(t){if(null!=t){var n=e.parseExpiry(t),a=new Date(n.year,n.month-1);return r("date")(a,"MM / yyyy")}return null};return n.expiry=function(t,e){t.bind("keypress",_restrictExpiry),t.bind("keypress",_formatExpiry),t.bind("keypress",_formatForwardSlash),t.bind("keypress",_formatForwardExpiry),t.bind("keydown",_formatBackExpiry),e.$parsers.push(p),e.$formatters.push(f)},function(t,e,r){if(!n[t])throw types=Object.keys(n),errstr='Unknown type for formatting: "'+t+'". ',errstr+='Should be one of: "'+types.join('", "')+'"',errstr;return n[t](e,r)}}]).directive("paymentsFormat",["$window","_Format",function(t,e){return{restrict:"A",require:"ngModel",link:function(t,r,n,a){e(n.paymentsFormat,r,a)}}}]),angular.module("angularPayments").factory("_Validate",["Cards","Common","$parse",function(t,e,r){var n=[].indexOf||function(t){for(var e=0,r=this.length;e<r;e++)if(e in this&&this[e]===t)return e;return-1},a=function(t){var e,r,n,a,i,o;for(n=!0,a=0,r=(t+"").split("").reverse(),i=0,o=r.length;i<o;i++)e=r[i],e=parseInt(e,10),(n=!n)&&(e*=2),e>9&&(e-=9),a+=e;return a%10===0},i={};return i.cvc=function(e,a,i,o){var s,l;if(null==e||0==e.length)return!0;if(!/^\d+$/.test(e))return!1;var u;if(o.paymentsTypeModel){var c=r(o.paymentsTypeModel);u=c(i)}return u?(s=e.length,n.call(null!=(l=t.fromType(u))?l.cvcLength:void 0,s)>=0):e.length>=3&&e.length<=4},i.card=function(e,i,o,s){var l,u,c;s.paymentsTypeModel&&(c=r(s.paymentsTypeModel));var p=function(){c&&c.assign(o,null),i.$card=null};return null==e||0==e.length?(p(),!0):(e=(e+"").replace(/\s+|-/g,""),/^\d+$/.test(e)&&(l=t.fromNumber(e))?(i.$card=angular.copy(l),c&&c.assign(o,l.type),ret=(u=e.length,n.call(l.length,u)>=0&&(l.luhn===!1||a(e))),ret):(p(),!1))},i.expiry=function(t){if(null==t||0==t.length)return!0;obj=e.parseExpiry(t),month=obj.month,year=obj.year;var r,n,a;return!(!month||!year)&&(!!/^\d+$/.test(month)&&(!!/^\d+$/.test(year)&&(parseInt(month,10)<=12&&(2===year.length&&(a=(new Date).getFullYear(),a=a.toString().slice(0,2),year=a+year),n=new Date(year,month),r=new Date,n.setMonth(n.getMonth()-1),n.setMonth(n.getMonth()+1,1),n>r))))},function(t,e,r,n,a){if(!i[t])throw types=Object.keys(i),errstr='Unknown type for validation: "'+t+'". ',errstr+='Should be one of: "'+types.join('", "')+'"',errstr;return i[t](e,r,n,a)}}]).factory("_ValidateWatch",["_Validate",function(t){var e={};return e.cvc=function(e,r,n,a){a.paymentsTypeModel&&n.$watch(a.paymentsTypeModel,function(i,o){if(i!=o){var s=t(e,r.$modelValue,r,n,a);r.$setValidity(e,s)}})},function(t,r,n,a){if(e[t])return e[t](t,r,n,a)}}]).directive("paymentsValidate",["$window","_Validate","_ValidateWatch",function(t,e,r){return{restrict:"A",require:"ngModel",link:function(t,n,a,i){var o=a.paymentsValidate;r(o,i,t,a);var s=function(r){var n=e(o,r,i,t,a);return i.$setValidity(o,n),n?r:void 0};i.$formatters.push(s),i.$parsers.push(s)}}}]),angular.module("angularPayments").directive("stripeForm",["$window","$parse","Common",function(t,e,r){return _getDataToSend=function(t){var e=["number","expMonth","expYear","cvc","name","addressLine1","addressLine2","addressCity","addressState","addressZip","addressCountry"],r=function(t){return t.replace(/([A-Z])/g,function(t){return"_"+t.toLowerCase()})},n={};for(i in e)t.hasOwnProperty(e[i])&&(n[r(e[i])]=angular.copy(t[e[i]]));return n.number=(n.number||"").replace(/ /g,""),n},{restrict:"A",link:function(e,n,a){if(!t.Stripe)throw"stripeForm requires that you have stripe.js installed. Include https://js.stripe.com/v2/ into your html.";var i=angular.element(n);i.bind("submit",function(){expMonthUsed=!!e.expMonth,expYearUsed=!!e.expYear,expMonthUsed&&expYearUsed||(exp=r.parseExpiry(e.expiry),e.expMonth=exp.month,e.expYear=exp.year);var n=i.find("button");n.prop("disabled",!0),i.hasClass("ng-valid")?t.Stripe.createToken(_getDataToSend(e),function(){var t=arguments;e.$apply(function(){e[a.stripeForm].apply(e,t)}),n.prop("disabled",!1)}):(e.$apply(function(){e[a.stripeForm].apply(e,[400,{error:"Invalid form submitted."}])}),n.prop("disabled",!1)),e.expMonth=null,e.expYear=null})}}}]),function(t,e,r){e.module("ngImageCompress",[]).directive("ngImageCompress",["$q",function(e){var n=t.URL||t.webkitURL,a=function(t,e){var n=e.resizeType,a=100*e.resizeQuality||70,i="image/jpeg";n!==r&&"png"===n&&(i="image/png");var o=e.resizeMaxHeight||300,s=e.resizeMaxWidth||250,l=t.height,u=t.width;u>l?u>s&&(l=Math.round(l*=s/u),u=s):l>o&&(u=Math.round(u*=o/l),l=o);var c=document.createElement("canvas");c.width=u,c.height=l;var p=(c.getContext("2d").drawImage(t,0,0,u,l),c.toDataURL(i,a/100)),f=new Image;return f.src=p,f.src},i=function(t,e){var r=new Image;r.onload=function(){e(r)},r.src=t},o=function(t){var r=e.defer(),n=new FileReader;return n.onload=function(t){r.resolve(t.target.result)},n.readAsDataURL(t),r.promise};return{restrict:"A",scope:{image:"=",resizeMaxHeight:"@?",resizeMaxWidth:"@?",resizeQuality:"@?",resizeType:"@?"},link:function(t,e,r){var s=function(e,r){i(e.url,function(n){var i=a(n,t);e.compressed={dataURL:i,type:i.match(/:(.+\/.+);/)[1]},r(e)})},l=function(e){t.$apply(function(){r.multiple?t.image.push(e):t.image=e})};e.bind("change",function(e){r.multiple&&(t.image=[]);for(var a=e.target.files,i=0;i<a.length;i++){var u={file:a[i],url:n.createObjectURL(a[i])};o(a[i]).then(function(t){u.dataURL=t}),t.resizeMaxHeight||t.resizeMaxWidth?s(u,function(t){l(t)}):l(u)}})}}}])}(window,window.angular);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFuZ3VsYXItcGFyYWxsYXguanMiLCJuZ0NhcnQuanMiLCJhbmd1bGFyLWZpbGUtc2F2ZXIuYnVuZGxlLmpzIiwidWktcm91dGVyLW1ldGF0YWdzLmpzIiwiYW5ndWxhci10YWJsZXNvcnQuanMiLCJhbmd1bGFyLWZvbnRhd2Vzb21lLmpzIiwiYnV0dG9ucy5qcyIsImFuZ3VsYXItcGF5bWVudHMuanMiLCJhbmd1bGFyLWltYWdlLWNvbXByZXNzLmpzIl0sIm5hbWVzIjpbImFuZ3VsYXIiLCJtb2R1bGUiLCJkaXJlY3RpdmUiLCIkd2luZG93IiwicmVzdHJpY3QiLCJzY29wZSIsInBhcmFsbGF4UmF0aW8iLCJwYXJhbGxheFZlcnRpY2FsT2Zmc2V0IiwicGFyYWxsYXhIb3Jpem9udGFsT2Zmc2V0IiwibGluayIsIiRzY29wZSIsImVsZW0iLCJhdHRycyIsInNldFBvc2l0aW9uIiwiY2FsY1ZhbFkiLCJwYWdlWU9mZnNldCIsImlubmVySGVpZ2h0IiwidG9wVmFsIiwiaG96VmFsIiwiaW5kZXhPZiIsImNzcyIsImVsZW1lbnQiLCJiaW5kIiwidHJhbnNjbHVkZSIsInRlbXBsYXRlIiwicGFyYWxsYXhTdGFydFBvaW50Iiwib2Zmc2V0Iiwib2Zmc2V0SGVpZ2h0IiwicHJvcCIsImUiLCIkYXBwbHkiLCJjb25maWciLCJwcm92aWRlciIsInRoaXMiLCIkZ2V0IiwicnVuIiwiJHJvb3RTY29wZSIsIm5nQ2FydCIsIm5nQ2FydEl0ZW0iLCJzdG9yZSIsIiRvbiIsIiRzYXZlIiwiaXNPYmplY3QiLCJnZXQiLCIkcmVzdG9yZSIsImluaXQiLCJzZXJ2aWNlIiwiJGh0dHAiLCIkbG9jYXRpb24iLCIkc3RhdGUiLCJteVRpbWVvdXQiLCIkY2FydCIsInNoaXBwaW5nIiwidGF4UmF0ZSIsInRheCIsIml0ZW1zIiwiYWRkSXRlbSIsImlkIiwic2t1IiwibmFtZSIsInByaWNlIiwicXVhbnRpdHkiLCJkYXRhIiwiYXR0ciIsInRoYXQiLCJ0aW1lckFtb3VudCIsImluQ2FydCIsImdldEl0ZW1CeVNrdSIsImRpZmYiLCJpbkNhcnRRIiwiZ2V0UXVhbnRpdHkiLCJfZGF0YSIsInByb2R1Y3RfdHlwZSIsInRpY2tldElkIiwicGFyZW50IiwidGlja2V0Q291bnQiLCJwb3N0IiwidGhlbiIsImNvbnNvbGUiLCJsb2ciLCJjbGVhclRpbWVvdXQiLCIkYnJvYWRjYXN0Iiwic2V0VGltZW91dCIsInJlbW92ZVRpY2tldHMiLCJzZXRRdWFudGl0eSIsImVyciIsImJvb2wiLCJvcmlnaW5hbFZhbCIsIm5ld0l0ZW0iLCJwdXNoIiwiYWRkSXRlbUJ0biIsImNvdW50Iiwic2t1UGFyc2VkIiwiSlNPTiIsInBhcnNlIiwidXJsIiwiY2hhbmdlUXVhbnRpdHkiLCJnZXRJdGVtQnlJZCIsIml0ZW1JZCIsImdldENhcnQiLCJidWlsZCIsImZvckVhY2giLCJpdGVtIiwiZ2V0SWQiLCJpdGVtU2t1IiwiZ2V0U2t1Iiwic2V0U2hpcHBpbmciLCJnZXRTaGlwcGluZyIsImxlbmd0aCIsInNldFRheFJhdGUiLCJwYXJzZUZsb2F0IiwidG9GaXhlZCIsImdldFRheFJhdGUiLCJnZXRUYXgiLCJNYXRoIiwicm91bmQiLCJnZXRTdWJUb3RhbCIsInNldENhcnQiLCJjYXJ0IiwiZ2V0SXRlbXMiLCJnZXRUb3RhbEl0ZW1zIiwiZ2V0VG90YWxVbmlxdWVJdGVtcyIsImdldENhcnRUb3RhbCIsInRvdGFsIiwiZ2V0VG90YWwiLCJfc2VsZiIsImkiLCJyZW1vdmVJdGVtIiwidG90YWxDb3N0IiwicGFyc2VJbnQiLCJpbmRleCIsInNwbGljZSIsInJlbW92ZUl0ZW1CeUlkIiwiZW1wdHkiLCJsb2NhbFN0b3JhZ2UiLCJpc0VtcHR5IiwidG9PYmplY3QiLCJzdWJUb3RhbCIsInN0b3JlZENhcnQiLCJkZXNjcmlwdGlvbiIsImFtb3VudCIsInNldCIsInRvSnNvbiIsImZhY3RvcnkiLCIkbG9nIiwic2V0SWQiLCJzZXRTa3UiLCJzZXROYW1lIiwic2V0UHJpY2UiLCJzZXREYXRhIiwic2V0QXR0ciIsInByb3RvdHlwZSIsImVycm9yIiwiZ2V0TmFtZSIsInByaWNlRmxvYXQiLCJnZXRQcmljZSIsInJlbGF0aXZlIiwicXVhbnRpdHlJbnQiLCJpbmZvIiwiZ2V0RGF0YSIsImF0dHJpYnV0ZXMiLCJnZXRBdHRyIiwia2V5IiwiZ2V0SXRlbSIsImZyb21Kc29uIiwidmFsIiwidW5kZWZpbmVkIiwic2V0SXRlbSIsImNvbnRyb2xsZXIiLCIkdGltZW91dCIsImxvYWRlZCIsInRvZ2dsZUNhcnQiLCJmaWx0ZXJlZCIsInNoaXBwYWJsZSIsInNoaXBCb29sIiwiJGVtaXQiLCJ2YWx1ZSIsInF1YW50aXR5TWF4IiwidGVtcGxhdGVVcmwiLCJxIiwicXR5T3B0IiwidXBkYXRlUSIsImV2ZW50IiwiZnVsZmlsbWVudFByb3ZpZGVyIiwiY2hlY2tvdXQiLCJzZXRTZXJ2aWNlIiwic2V0U2V0dGluZ3MiLCJzZXR0aW5ncyIsInN1Y2Nlc3MiLCJzdGF0dXMiLCJoZWFkZXJzIiwic3RhdHVzQ29kZSIsIiRpbmplY3RvciIsIl9vYmoiLCIkcSIsImRlZmVycmVkIiwiZGVmZXIiLCJyZXNvbHZlIiwicHJvbWlzZSIsIm9wdGlvbnMiLCJyb290IiwiZXhwb3J0cyIsImRlZmluZSIsImFtZCIsImEiLCJtb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiaW5zdGFsbGVkTW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsInAiLCJCbG9iIiwiU2F2ZUFzIiwiRmlsZVNhdmVyVXRpbHMiLCJzYXZlIiwiYmxvYiIsImZpbGVuYW1lIiwiZGlzYWJsZUF1dG9CT00iLCJoYW5kbGVFcnJvcnMiLCJtZXNzYWdlIiwic2F2ZUFzIiwiaXNCbG9iSW5zdGFuY2UiLCJpc1N0cmluZyIsIm1zZyIsIkVycm9yIiwib2JqIiwiU3RyaW5nIiwiaXNVbmRlZmluZWQiLCJ2aWV3IiwiVVJMIiwid2Via2l0VVJMIiwiQmxvYkJ1aWxkZXIiLCJXZWJLaXRCbG9iQnVpbGRlciIsIk1vekJsb2JCdWlsZGVyIiwiZ2V0X2NsYXNzIiwib2JqZWN0IiwiT2JqZWN0IiwidG9TdHJpbmciLCJtYXRjaCIsIkZha2VCbG9iQnVpbGRlciIsIkZha2VCbG9iIiwidHlwZSIsImVuY29kaW5nIiwic2l6ZSIsIkZCQl9wcm90byIsIkZCX3Byb3RvIiwiRmlsZVJlYWRlclN5bmMiLCJGaWxlRXhjZXB0aW9uIiwiY29kZSIsImZpbGVfZXhfY29kZXMiLCJzcGxpdCIsImZpbGVfZXhfY29kZSIsInJlYWxfVVJMIiwicmVhbF9jcmVhdGVfb2JqZWN0X1VSTCIsImNyZWF0ZU9iamVjdFVSTCIsInJlYWxfcmV2b2tlX29iamVjdF9VUkwiLCJyZXZva2VPYmplY3RVUkwiLCJidG9hIiwiYXRvYiIsIkFycmF5QnVmZmVyIiwiVWludDhBcnJheSIsIm9yaWdpbiIsImZha2UiLCJ1cmkiLCJ1cmlfb3JpZ2luIiwidXJpX2luZm8iLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnROUyIsImhyZWYiLCJwcm90b2NvbCIsInRvTG93ZXJDYXNlIiwiZGF0YV9VUklfaGVhZGVyIiwiZGVjb2RlVVJJQ29tcG9uZW50IiwiZW5jb2RlVVJJQ29tcG9uZW50Iiwib2JqZWN0X1VSTCIsInN1YnN0cmluZyIsImFwcGVuZCIsImJiIiwic3RyIiwiYnVmIiwiYnVmX2xlbiIsImZyb21DaGFyQ29kZSIsImZyIiwicmVhZEFzQmluYXJ5U3RyaW5nIiwidW5lc2NhcGUiLCJnZXRCbG9iIiwiYXJndW1lbnRzIiwiam9pbiIsInNsaWNlIiwic3RhcnQiLCJlbmQiLCJhcmdzIiwiY2xvc2UiLCJibG9iUGFydHMiLCJidWlsZGVyIiwibGVuIiwiYnVmZmVyIiwid2Via2l0U2xpY2UiLCJnZXRQcm90b3R5cGVPZiIsIl9fcHJvdG9fXyIsInNlbGYiLCJ3aW5kb3ciLCJjb250ZW50IiwiX19XRUJQQUNLX0FNRF9ERUZJTkVfQVJSQVlfXyIsIl9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fIiwibmF2aWdhdG9yIiwidGVzdCIsInVzZXJBZ2VudCIsImRvYyIsImdldF9VUkwiLCJzYXZlX2xpbmsiLCJjYW5fdXNlX3NhdmVfbGluayIsImNsaWNrIiwibm9kZSIsIk1vdXNlRXZlbnQiLCJkaXNwYXRjaEV2ZW50IiwiaXNfc2FmYXJpIiwiSFRNTEVsZW1lbnQiLCJpc19jaHJvbWVfaW9zIiwidGhyb3dfb3V0c2lkZSIsImV4Iiwic2V0SW1tZWRpYXRlIiwiZm9yY2Vfc2F2ZWFibGVfdHlwZSIsImFyYml0cmFyeV9yZXZva2VfdGltZW91dCIsInJldm9rZSIsImZpbGUiLCJyZXZva2VyIiwicmVtb3ZlIiwiZGlzcGF0Y2giLCJmaWxlc2F2ZXIiLCJldmVudF90eXBlcyIsImNvbmNhdCIsImxpc3RlbmVyIiwiYXV0b19ib20iLCJGaWxlU2F2ZXIiLCJub19hdXRvX2JvbSIsIm9iamVjdF91cmwiLCJmb3JjZSIsImRpc3BhdGNoX2FsbCIsImZzX2Vycm9yIiwiRmlsZVJlYWRlciIsInJlYWRlciIsIm9ubG9hZGVuZCIsInJlc3VsdCIsInJlcGxhY2UiLCJwb3B1cCIsIm9wZW4iLCJsb2NhdGlvbiIsInJlYWR5U3RhdGUiLCJET05FIiwicmVhZEFzRGF0YVVSTCIsIklOSVQiLCJvcGVuZWQiLCJkb3dubG9hZCIsIkZTX3Byb3RvIiwibXNTYXZlT3JPcGVuQmxvYiIsImFib3J0IiwiV1JJVElORyIsIm9ud3JpdGVzdGFydCIsIm9ucHJvZ3Jlc3MiLCJvbndyaXRlIiwib25hYm9ydCIsIm9uZXJyb3IiLCJvbndyaXRlZW5kIiwiYXBwbHkiLCJfX3dlYnBhY2tfYW1kX29wdGlvbnNfXyIsInVpcm91dGVybWV0YXRhZ3MiLCJydW5CbG9jayIsIk1ldGFUYWdzIiwic3RhdGVDaGFuZ2VTdGFydCIsInRvU3RhdGUiLCJ0b1BhcmFtcyIsImZyb20iLCJmcm9tUGFyYW1zIiwicHJlcmVuZGVyUmVhZHkiLCJzdGF0ZUNoYW5nZVN1Y2Nlc3MiLCJtZXRhVGFncyIsImRlYnVnIiwidXBkYXRlIiwic3RhdGVDaGFuZ2VFcnJvciIsImZyb21TdGF0ZSIsInByZXJlbmRlciIsInN0YXRlTm90Rm91bmQiLCJ1bmZvdW5kU3RhdGUiLCIkaW5qZWN0IiwiYXBwTW9kdWxlIiwiVUlSb3V0ZXJNZXRhdGFncyIsInByZWZpeCIsInN1ZmZpeCIsImRlZmF1bHRUaXRsZSIsImRlZmF1bHREZXNjcmlwdGlvbiIsImRlZmF1bHRLZXl3b3JkcyIsImRlZmF1bHRSb2JvdHMiLCJzdGF0aWNQcm9wZXJ0aWVzIiwiZW5hYmxlT0dVUkwiLCJzZXRUaXRsZVByZWZpeCIsInNldFRpdGxlU3VmZml4Iiwic2V0RGVmYXVsdFRpdGxlIiwidGl0bGUiLCJzZXREZWZhdWx0RGVzY3JpcHRpb24iLCJzZXREZWZhdWx0S2V5d29yZHMiLCJrZXl3b3JkcyIsInNldERlZmF1bHRSb2JvdHMiLCJyb2JvdHMiLCJzZXRTdGF0aWNQcm9wZXJ0aWVzIiwicHJvcGVydGllcyIsInNldE9HVVJMIiwiZW5hYmxlZCIsIiRpbnRlcnBvbGF0ZSIsInRhZ3MiLCJfdGhpcyIsImV4dGVuZCIsImFic1VybCIsImdldFZhbHVlIiwidiIsImhlYWRlciIsInRhZ1R5cGUiLCJ0YWciLCJ0cmltIiwiaXNGdW5jdGlvbiIsIkFycmF5IiwiaXNBcnJheSIsImludm9rZSIsIiRjdXJyZW50IiwibG9jYWxzIiwiZ2xvYmFscyIsInRhYmxlU29ydE1vZHVsZSIsImZpbHRlclRlbXBsYXRlIiwiZmlsdGVyRnVuY3Rpb24iLCJwYWdpbmF0aW9uVGVtcGxhdGUiLCJwZXJQYWdlT3B0aW9ucyIsInBlclBhZ2VEZWZhdWx0IiwiaXRlbU5hbWVTaW5ndWxhciIsIml0ZW1OYW1lUGx1cmFsIiwibm9EYXRhVGV4dCIsIndyYXBwaW5nRWxlbWVudENsYXNzIiwiaXNOYU4iLCJzb3J0IiwiYiIsIiRwYXJzZSIsIiRjb21waWxlIiwicmVwbGFjZVRlbXBsYXRlVG9rZW5zIiwidGVtcGxhdGVTdHJpbmciLCJuZXdTdHJpbmciLCJpdGVtc0FycmF5RXhwcmVzc2lvbiIsImNyZWF0ZURlZmF1bHRDb21wYXJlciIsIl9kZWZhdWx0Q29tcGFyZXIiLCJzdHJpbmdDb21wYXJlciIsIm51bWVyaWNDb21wYXJlciIsIkludGwiLCJDb2xsYXRvciIsInNlbnNpdGl2aXR5IiwiY29tcGFyZSIsImxvY2FsZUNvbXBhcmUiLCJjb21wYXJlckZuIiwiRGF0ZSIsImdldFRpbWUiLCJkZWZhdWx0Q29tcGFyZXIiLCJ0YWJsZVNvcnRDb25maWciLCJwYWdpbmF0aW9uIiwicGVyUGFnZSIsImN1cnJlbnRQYWdlIiwiZ2V0UGFnZVJhbmdlU3RyaW5nIiwibWF4T25QYWdlIiwiZmlsdGVyaW5nIiwiZmlsdGVyZWRDb3VudCIsInN0YXJ0UGFnZSIsIm1heCIsImVuZFBhZ2UiLCJtaW4iLCJmaWx0ZXJTdHJpbmciLCJmaWx0ZXJGaWVsZHMiLCJzb3J0RXhwcmVzc2lvbiIsImhlYWRpbmdzIiwicGFyc2Vfc29ydGV4cHIiLCJleHByIiwic2V0U29ydEZpZWxkIiwic29ydGV4cHIiLCJzb3J0QnkiLCJyZW1vdmVDbGFzcyIsImFkZENsYXNzIiwib3JkZXIiLCJhZGRTb3J0RmllbGQiLCJ0b2dnbGVfb3JkZXIiLCJtYXAiLCJzZXRUcmFja0J5IiwidHJhY2tCeSIsInJlZ2lzdGVySGVhZGluZyIsImhlYWRpbmdlbGVtZW50IiwiYWRkRmlsdGVyRmllbGQiLCJzZXRBcnJheUV4cHIiLCJkYXRhQXJyYXlFeHAiLCIkZWxlbWVudCIsIiRhdHRycyIsInRzV3JhcHBlckN0cmwiLCJ0c0l0ZW1OYW1lIiwib3JpZ2luYWxOb0RhdGFUZXh0IiwidHNJdGVtTmFtZVBsdXJhbCIsInRzTm9EYXRhVGV4dCIsInRzV3JhcHBpbmdFbGVtZW50Q2xhc3MiLCJ0c1BlclBhZ2VPcHRpb25zIiwiJGV2YWwiLCJ0c1BlclBhZ2VEZWZhdWx0IiwiZGVmYXVsdFBlclBhZ2UiLCJ0c0ZpbHRlckZpZWxkcyIsImZpbHRlciIsIiRmaWx0ZXJIdG1sIiwidHNEaXNwbGF5RmlsdGVyaW5nIiwiaW5zZXJ0QmVmb3JlIiwidHNGaWx0ZXJGdW5jdGlvbiIsInNob3VsZEluY2x1ZGUiLCJmaWx0ZXJMaW1pdEZ1biIsImFycmF5IiwiZmlsdGVyZWRBcnIiLCJzb3J0RnVuIiwiYXZhbCIsImJ2YWwiLCJkZXNjZW5kaW5nIiwiZmlsdGVyRnVuIiwiY29tcFJlc3VsdCIsInBhZ2VMaW1pdEZ1biIsInRzRGlzcGxheVBhZ2luYXRpb24iLCJiZWdpbiIsImZpbmFsIiwiJHBhZ2luYXRpb25IdG1sIiwicGFnZXJTdHJpbmciLCJhZnRlciIsIiR3cmFwcGluZ0VsZW1lbnQiLCJ3cmFwIiwidHNHZXRUYWJsZURhdGFGdW5jdGlvbiIsImdldHRlciIsInNldHRlciIsImFzc2lnbiIsImZuIiwic2hvdWxkQXBwbHlTb3J0aW5nIiwic2hvdWxkQXBwbHlGaWx0ZXJpbmciLCJsaW1pdFRvQ3VycmVudFBhZ2VPbmx5IiwiYXJyIiwiJHBhcmVudCIsInJlcGxhY2VXaXRoIiwicmVxdWlyZSIsInRzT3JkZXJCeSIsImNsaWNraW5nQ2FsbGJhY2siLCJzaGlmdEtleSIsInRzQ3JpdGVyaWEiLCJ0c05hbWUiLCJ0c0RlZmF1bHQiLCJ0ZXJtaW5hbCIsIm11bHRpRWxlbWVudCIsInByaW9yaXR5IiwicmVwZWF0QXR0cnMiLCJuZ1JlcGVhdERpcmVjdGl2ZSIsInRzUmVwZWF0RGlyZWN0aXZlIiwiaXNEZWZpbmVkIiwidHNFeHByIiwicmVwZWF0RXhwciIsInJlcGVhdEV4cHJSZWdleCIsInRyYWNrQnlNYXRjaCIsInJlcGVhdEluTWF0Y2giLCJzZWFyY2giLCJ0c0hpZGVOb0RhdGEiLCJzdGFydFN5bSIsInN0YXJ0U3ltYm9sIiwiZW5kU3ltIiwiZW5kU3ltYm9sIiwibm9EYXRhUm93IiwiY2xvbmUiLCJyZW1vdmVBdHRyIiwiY2hpbGRyZW4iLCJjaGlsZEVsZW1lbnRDb3VudCIsInByZXBlbmQiLCJsaW1pdEZ1biIsInNvcnRmdW4iLCJhcnJheUNvcHkiLCJpbnB1dCIsInRpbWVzdGFtcCIsIl9vYnNlcnZlU3RyaW5nQXR0ciIsImJhc2VDbGFzcyIsImNsYXNzTmFtZSIsIiRvYnNlcnZlIiwiY3VycmVudENsYXNzZXMiLCJfb2JzZXJ2ZUJvb2xlYW5BdHRyIiwidG9nZ2xlQ2xhc3MiLCJzdGFjayIsImhhc0NsYXNzIiwibGlzdCIsImFsdFRleHQiLCJhbHQiLCJhbHRFbGVtIiwibmV4dCIsImFsdEVsZW1DbGFzcyIsInRleHQiLCIkIiwiUGx1Z2luIiwiZGVmYXVsdHMiLCJfZGVmYXVsdHMiLCJfbmFtZSIsInBsdWdpbk5hbWUiLCJwcm9wZXJ0eU5hbWUiLCJjb25zdHJ1Y3RvciIsInRvZ2dsZSIsImVsIiwiaGlkZU1lbnUiLCJzaG93TWVudSIsImZpbmQiLCJzaG93IiwiaGlkZSIsImVhY2giLCJvbiIsInRhcmdldCIsIm9mZnNldFBhcmVudCIsIiRkcm9wZG93biIsImN1cnJlbnRUYXJnZXQiLCJtZW51QnV0dG9uIiwicHJldmVudERlZmF1bHQiLCJqUXVlcnkiLCJyZXQiLCJtb250aCIsInllYXIiLCJfcmVmIiwiZ2V0RnVsbFllYXIiLCJkZWZhdWx0Rm9ybWF0IiwiZGVmYXVsdElucHV0Rm9ybWF0IiwiY2FyZHMiLCJwYXR0ZXJuIiwiZm9ybWF0IiwiaW5wdXRGb3JtYXQiLCJjdmNMZW5ndGgiLCJsdWhuIiwiX2Zyb21OdW1iZXIiLCJudW0iLCJjYXJkIiwiX2Zyb21UeXBlIiwiZnJvbU51bWJlciIsImZyb21UeXBlIiwiQ2FyZHMiLCJDb21tb24iLCIkZmlsdGVyIiwiX2Zvcm1hdHMiLCJfaGFzVGV4dFNlbGVjdGVkIiwiJHRhcmdldCIsInJlZiIsInNlbGVjdGlvbiIsImNyZWF0ZVJhbmdlIiwiX2Zvcm1hdENhcmROdW1iZXIiLCJkaWdpdCIsInJlIiwidXBwZXJMZW5ndGgiLCJ3aGljaCIsIm1ldGEiLCJrZXlDb2RlIiwiX3Jlc3RyaWN0Q2FyZE51bWJlciIsIl9mb3JtYXRCYWNrQ2FyZE51bWJlciIsIl9nZXRGb3JtYXR0ZWRDYXJkTnVtYmVyIiwiZ3JvdXBzIiwiZ2xvYmFsIiwiZXhlYyIsInNoaWZ0IiwiX3JlRm9ybWF0Q2FyZE51bWJlciIsIl9wYXJzZUNhcmROdW1iZXIiLCJjdHJsIiwiJHBhcnNlcnMiLCIkZm9ybWF0dGVycyIsIl9mb3JtYXRDVkMiLCJfcmVzdHJpY3RFeHBpcnkiLCJfZm9ybWF0RXhwaXJ5IiwiX2Zvcm1hdEZvcndhcmRFeHBpcnkiLCJfZm9ybWF0Rm9yd2FyZFNsYXNoIiwic2xhc2giLCJfZm9ybWF0QmFja0V4cGlyeSIsIl9wYXJzZUV4cGlyeSIsInBhcnNlRXhwaXJ5IiwiZXhwaXJ5IiwiX2dldEZvcm1hdHRlZEV4cGlyeSIsInR5cGVzIiwia2V5cyIsImVycnN0ciIsIl9Gb3JtYXQiLCJwYXltZW50c0Zvcm1hdCIsIl9faW5kZXhPZiIsImwiLCJfbHVobkNoZWNrIiwiZGlnaXRzIiwib2RkIiwic3VtIiwicmV2ZXJzZSIsIl92YWxpZGF0b3JzIiwiY3ZjIiwicmVmMSIsInBheW1lbnRzVHlwZU1vZGVsIiwidHlwZU1vZGVsIiwiY2xlYXJDYXJkIiwiJGNhcmQiLCJjb3B5IiwiY3VycmVudFRpbWUiLCJzZXRNb250aCIsImdldE1vbnRoIiwiX1ZhbGlkYXRlIiwiX3ZhbGlkYXRvcldhdGNoZXMiLCIkd2F0Y2giLCJuZXdWYWwiLCJvbGRWYWwiLCJ2YWxpZCIsIiRtb2RlbFZhbHVlIiwiJHNldFZhbGlkaXR5IiwiX1ZhbGlkYXRlV2F0Y2giLCJwYXltZW50c1ZhbGlkYXRlIiwidmFsaWRhdGVGbiIsIl9nZXREYXRhVG9TZW5kIiwicG9zc2libGVLZXlzIiwiY2FtZWxUb1NuYWtlIiwiaGFzT3duUHJvcGVydHkiLCJTdHJpcGUiLCJmb3JtIiwiZXhwTW9udGhVc2VkIiwiZXhwTW9udGgiLCJleHBZZWFyVXNlZCIsImV4cFllYXIiLCJleHAiLCJidXR0b24iLCJjcmVhdGVUb2tlbiIsInN0cmlwZUZvcm0iLCJqaWNDb21wcmVzcyIsInNvdXJjZUltZ09iaiIsIm91dHB1dEZvcm1hdCIsInJlc2l6ZVR5cGUiLCJxdWFsaXR5IiwicmVzaXplUXVhbGl0eSIsIm1pbWVUeXBlIiwibWF4SGVpZ2h0IiwicmVzaXplTWF4SGVpZ2h0IiwibWF4V2lkdGgiLCJyZXNpemVNYXhXaWR0aCIsImhlaWdodCIsIndpZHRoIiwiY3ZzIiwiY3JlYXRlRWxlbWVudCIsIm5ld0ltYWdlRGF0YSIsImdldENvbnRleHQiLCJkcmF3SW1hZ2UiLCJ0b0RhdGFVUkwiLCJyZXN1bHRJbWFnZU9iaiIsIkltYWdlIiwic3JjIiwiY3JlYXRlSW1hZ2UiLCJjYWxsYmFjayIsImltYWdlIiwib25sb2FkIiwiZmlsZVRvRGF0YVVSTCIsImRvUmVzaXppbmciLCJpbWFnZVJlc3VsdCIsImRhdGFVUkxjb21wcmVzc2VkIiwiY29tcHJlc3NlZCIsImRhdGFVUkwiLCJhcHBseVNjb3BlIiwibXVsdGlwbGUiLCJldnQiLCJmaWxlcyJdLCJtYXBwaW5ncyI6IkFBQUEsWUFFQUEsU0FBQUMsT0FBQSx1QkFDQUMsVUFBQSxZQUFBLFVBQUEsU0FBQUMsR0FDQSxPQUNBQyxTQUFBLElBQ0FDLE9BQ0FDLGNBQUEsSUFDQUMsdUJBQUEsSUFDQUMseUJBQUEsS0FFQUMsS0FBQSxTQUFBQyxFQUFBQyxFQUFBQyxHQUNBLEdBQUFDLEdBQUEsV0FDQUgsRUFBQUYsMkJBQUFFLEVBQUFGLHlCQUFBLElBQ0EsSUFBQU0sR0FBQVgsRUFBQVksYUFBQUwsRUFBQUosY0FBQUksRUFBQUosY0FBQSxJQUNBLElBQUFRLEdBQUFYLEVBQUFhLFlBQUEsQ0FDQSxHQUFBQyxHQUFBSCxFQUFBSixFQUFBSCx1QkFBQUcsRUFBQUgsdUJBQUFPLEVBQ0FJLEVBQUFSLEVBQUFGLHlCQUFBVyxRQUFBLFFBQUEsRUFBQVQsRUFBQUYseUJBQUEsS0FBQUUsRUFBQUYsd0JBQ0FHLEdBQUFTLElBQUEsWUFBQSxhQUFBRixFQUFBLEtBQUFELEVBQUEsUUFJQUosS0FFQWIsUUFBQXFCLFFBQUFsQixHQUFBbUIsS0FBQSxTQUFBVCxHQUNBYixRQUFBcUIsUUFBQWxCLEdBQUFtQixLQUFBLFlBQUFULFFBR0FYLFVBQUEsc0JBQUEsVUFBQSxTQUFBQyxHQUNBLE9BQ0FDLFNBQUEsSUFDQW1CLFlBQUEsRUFDQUMsU0FBQSw0QkFDQW5CLE9BQ0FDLGNBQUEsSUFDQUMsdUJBQUEsSUFDQWtCLG1CQUFBLEtBRUFoQixLQUFBLFNBQUFDLEVBQUFDLEVBQUFDLEdB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QUMsT0FDQXV1QixNQUFBLElBQ0FoQixnQkFBQSxLQUNBRSxlQUFBLEtBQ0FMLGNBQUEsS0FDQUYsV0FBQSxNQUVBOXNCLEtBQUEsU0FBQUosRUFBQWdCLEVBQUFULEdBRUEsR0FBQW11QixHQUFBLFNBQUFDLEVBQUFMLEdBQ0FELEVBQUFNLEVBQUFqcEIsSUFBQSxTQUFBNm9CLEdBRUEsR0FBQUssR0FBQTdCLEVBQUF3QixFQUFBdnVCLEVBS0EydUIsR0FBQUUsWUFDQUMsUUFBQUYsRUFDQTlmLEtBQUE4ZixFQUFBamdCLE1BQUEsY0FBQSxJQUVBMmYsRUFBQUssTUFJQUksRUFBQSxTQUFBSixHQUNBM3VCLEVBQUF5QixPQUFBLFdBQ0FsQixFQUFBeXVCLFNBQ0FodkIsRUFBQXV1QixNQUFBbnBCLEtBQUF1cEIsR0FFQTN1QixFQUFBdXVCLE1BQUFJLElBTUEzdEIsR0FBQUMsS0FBQSxTQUFBLFNBQUFndUIsR0FFQTF1QixFQUFBeXVCLFdBQ0FodkIsRUFBQXV1QixTQUlBLEtBQUEsR0FEQVcsR0FBQUQsRUFBQW5KLE9BQUFvSixNQUNBem5CLEVBQUEsRUFBQUEsRUFBQXluQixFQUFBM29CLE9BQUFrQixJQUFBLENBRUEsR0FBQWtuQixJQUNBemEsS0FBQWdiLEVBQUF6bkIsR0FDQS9CLElBQUF3SSxFQUFBeUIsZ0JBQUF1ZixFQUFBem5CLElBR0FnbkIsR0FBQVMsRUFBQXpuQixJQUFBakQsS0FBQSxTQUFBc3FCLEdBQ0FILEVBQUFHLFFBQUFBLElBR0E5dUIsRUFBQXV0QixpQkFBQXZ0QixFQUFBeXRCLGVBQ0FpQixFQUFBQyxFQUFBLFNBQUFBLEdBQ0FJLEVBQUFKLEtBR0FJLEVBQUFKLFlBUUFqYyxPQUFBQSxPQUFBL1MiLCJmaWxlIjoibGlicy5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuYW5ndWxhci5tb2R1bGUoJ2FuZ3VsYXItcGFyYWxsYXgnLCBbXG5dKS5kaXJlY3RpdmUoJ3BhcmFsbGF4JywgWyckd2luZG93JywgZnVuY3Rpb24oJHdpbmRvdykge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnQScsXG4gICAgc2NvcGU6IHtcbiAgICAgIHBhcmFsbGF4UmF0aW86ICdAJyxcbiAgICAgIHBhcmFsbGF4VmVydGljYWxPZmZzZXQ6ICdAJyxcbiAgICAgIHBhcmFsbGF4SG9yaXpvbnRhbE9mZnNldDogJ0AnLFxuICAgIH0sXG4gICAgbGluazogZnVuY3Rpb24oJHNjb3BlLCBlbGVtLCBhdHRycykge1xuICAgICAgdmFyIHNldFBvc2l0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZighJHNjb3BlLnBhcmFsbGF4SG9yaXpvbnRhbE9mZnNldCkgJHNjb3BlLnBhcmFsbGF4SG9yaXpvbnRhbE9mZnNldCA9ICcwJztcbiAgICAgICAgdmFyIGNhbGNWYWxZID0gJHdpbmRvdy5wYWdlWU9mZnNldCAqICgkc2NvcGUucGFyYWxsYXhSYXRpbyA/ICRzY29wZS5wYXJhbGxheFJhdGlvIDogMS4xICk7XG4gICAgICAgIGlmIChjYWxjVmFsWSA8PSAkd2luZG93LmlubmVySGVpZ2h0KSB7XG4gICAgICAgICAgdmFyIHRvcFZhbCA9IChjYWxjVmFsWSA8ICRzY29wZS5wYXJhbGxheFZlcnRpY2FsT2Zmc2V0ID8gJHNjb3BlLnBhcmFsbGF4VmVydGljYWxPZmZzZXQgOiBjYWxjVmFsWSk7XG4gICAgICAgICAgdmFyIGhvelZhbCA9ICgkc2NvcGUucGFyYWxsYXhIb3Jpem9udGFsT2Zmc2V0LmluZGV4T2YoXCIlXCIpID09PSAtMSA/ICRzY29wZS5wYXJhbGxheEhvcml6b250YWxPZmZzZXQgKyAncHgnIDogJHNjb3BlLnBhcmFsbGF4SG9yaXpvbnRhbE9mZnNldCk7XG4gICAgICAgICAgZWxlbS5jc3MoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUoJyArIGhvelZhbCArICcsICcgKyB0b3BWYWwgKyAncHgpJyk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIHNldFBvc2l0aW9uKCk7XG5cbiAgICAgIGFuZ3VsYXIuZWxlbWVudCgkd2luZG93KS5iaW5kKFwic2Nyb2xsXCIsIHNldFBvc2l0aW9uKTtcbiAgICAgIGFuZ3VsYXIuZWxlbWVudCgkd2luZG93KS5iaW5kKFwidG91Y2htb3ZlXCIsIHNldFBvc2l0aW9uKTtcbiAgICB9ICAvLyBsaW5rIGZ1bmN0aW9uXG4gIH07XG59XSkuZGlyZWN0aXZlKCdwYXJhbGxheEJhY2tncm91bmQnLCBbJyR3aW5kb3cnLCBmdW5jdGlvbigkd2luZG93KSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdBJyxcbiAgICB0cmFuc2NsdWRlOiB0cnVlLFxuICAgIHRlbXBsYXRlOiAnPGRpdiBuZy10cmFuc2NsdWRlPjwvZGl2PicsXG4gICAgc2NvcGU6IHtcbiAgICAgIHBhcmFsbGF4UmF0aW86ICdAJyxcbiAgICAgIHBhcmFsbGF4VmVydGljYWxPZmZzZXQ6ICdAJyxcbiAgICAgIHBhcmFsbGF4U3RhcnRQb2ludDogJ0AnXG4gICAgfSxcbiAgICBsaW5rOiBmdW5jdGlvbigkc2NvcGUsIGVsZW0sIGF0dHJzKSB7XG4gICAgICB2YXIgc2V0UG9zaXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBvZmZzZXQgPSAoJHNjb3BlLnBhcmFsbGF4VmVydGljYWxPZmZzZXQvMTAwKSAqIGVsZW1bMF0ub2Zmc2V0SGVpZ2h0OyBcbiAgICAgICAgdmFyIGNhbGNWYWxZID0gKGVsZW0ucHJvcCgnb2Zmc2V0VG9wJykgLSAkd2luZG93LnBhZ2VZT2Zmc2V0KSAqICgkc2NvcGUucGFyYWxsYXhSYXRpbyA/ICRzY29wZS5wYXJhbGxheFJhdGlvIDogMS4xKSAtIChvZmZzZXQgfHwgMCk7XG4gICAgICAgIC8vIGhvcml6b250YWwgcG9zaXRpb25pbmdcbiAgICAgICAgaWYgKGNhbGNWYWxZID49ICRzY29wZS5wYXJhbGxheFN0YXJ0UG9pbnQpe1xuICAgICAgICAgIGNhbGNWYWxZID0gJHNjb3BlLnBhcmFsbGF4U3RhcnRQb2ludDtcbiAgICAgICAgfVxuICAgICAgICBlbGVtLmNzcygnYmFja2dyb3VuZC1wb3NpdGlvbicsIFwiNTAlIFwiICsgY2FsY1ZhbFkgKyBcInB4XCIpO1xuICAgICAgfTtcblxuICAgICAgLy8gc2V0IG91ciBpbml0aWFsIHBvc2l0aW9uIC0gZml4ZXMgd2Via2l0IGJhY2tncm91bmQgcmVuZGVyIGJ1Z1xuICAgICAgYW5ndWxhci5lbGVtZW50KCR3aW5kb3cpLmJpbmQoJ2xvYWQnLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIHNldFBvc2l0aW9uKCk7XG4gICAgICAgICRzY29wZS4kYXBwbHkoKTtcbiAgICAgIH0pO1xuXG4gICAgICBhbmd1bGFyLmVsZW1lbnQoJHdpbmRvdykuYmluZChcInNjcm9sbFwiLCBzZXRQb3NpdGlvbik7XG4gICAgICBhbmd1bGFyLmVsZW1lbnQoJHdpbmRvdykuYmluZChcInRvdWNobW92ZVwiLCBzZXRQb3NpdGlvbik7XG4gICAgfSAgLy8gbGluayBmdW5jdGlvblxuICB9O1xufV0pO1xuIiwiJ3VzZSBzdHJpY3QnO1xyXG5cclxuXHJcbmFuZ3VsYXIubW9kdWxlKCduZ0NhcnQnLCBbJ25nQ2FydC5kaXJlY3RpdmVzJ10pXHJcblxyXG4gICAgLmNvbmZpZyhbZnVuY3Rpb24gKCkge1xyXG5cclxuICAgIH1dKVxyXG5cclxuICAgIC5wcm92aWRlcignJG5nQ2FydCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLiRnZXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgfTtcclxuICAgIH0pXHJcblxyXG4gICAgLnJ1bihbJyRyb290U2NvcGUnLCAnbmdDYXJ0JywnbmdDYXJ0SXRlbScsICdzdG9yZScsIGZ1bmN0aW9uICgkcm9vdFNjb3BlLCBuZ0NhcnQsIG5nQ2FydEl0ZW0sIHN0b3JlKSB7XHJcblxyXG4gICAgICAgICRyb290U2NvcGUuJG9uKCduZ0NhcnQ6Y2hhbmdlJywgZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgbmdDYXJ0LiRzYXZlKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmIChhbmd1bGFyLmlzT2JqZWN0KHN0b3JlLmdldCgnY2FydCcpKSkge1xyXG4gICAgICAgICAgICBuZ0NhcnQuJHJlc3RvcmUoc3RvcmUuZ2V0KCdjYXJ0JykpO1xyXG5cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBuZ0NhcnQuaW5pdCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XSlcclxuXHJcbiAgICAuc2VydmljZSgnbmdDYXJ0JywgWyckcm9vdFNjb3BlJywgJyRodHRwJywgJyRsb2NhdGlvbicsICckc3RhdGUnLCAnJHdpbmRvdycsICduZ0NhcnRJdGVtJywgJ3N0b3JlJywgZnVuY3Rpb24gKCRyb290U2NvcGUsICRodHRwLCAkbG9jYXRpb24sICRzdGF0ZSwgJHdpbmRvdywgbmdDYXJ0SXRlbSwgc3RvcmUpIHtcclxuICAgICAgICB2YXIgbXlUaW1lb3V0O1xyXG5cclxuICAgICAgICB0aGlzLmluaXQgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICB0aGlzLiRjYXJ0ID0ge1xyXG4gICAgICAgICAgICAgICAgc2hpcHBpbmcgOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgdGF4UmF0ZSA6IG51bGwsXHJcbiAgICAgICAgICAgICAgICB0YXggOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgaXRlbXMgOiBbXVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMuYWRkSXRlbSA9IGZ1bmN0aW9uIChpZCwgc2t1LCBuYW1lLCBwcmljZSwgcXVhbnRpdHksIGRhdGEsIGF0dHIpIHtcclxuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gICAgICAgICAgICB2YXIgdGltZXJBbW91bnQgPSA2MDAwMDtcclxuICAgICAgICAgICAgdmFyIGluQ2FydCA9IHRoaXMuZ2V0SXRlbUJ5U2t1KHNrdSk7XHJcblxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIGluQ2FydCA9PT0gJ29iamVjdCcpe1xyXG4gICAgICAgICAgICAgICAgLy9VcGRhdGUgcXVhbnRpdHkgb2YgYW4gaXRlbSBpZiBpdCdzIGFscmVhZHkgaW4gdGhlIGNhcnRcclxuICAgICAgICAgICAgICAgIHZhciBkaWZmO1xyXG4gICAgICAgICAgICAgICAgdmFyIGluQ2FydFEgPSBpbkNhcnQuZ2V0UXVhbnRpdHkoKTtcclxuICAgICAgICAgICAgICAgIGlmIChpbkNhcnQuX2RhdGEucHJvZHVjdF90eXBlID09PSBcInRpY2tldFwiKXtcclxuICAgICAgICAgICAgICAgICAgICBkaWZmID0gcXVhbnRpdHkgLSBpbkNhcnRRO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aWNrZXRJZDogaW5DYXJ0LnBhcmVudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGlja2V0Q291bnQ6IGRpZmZcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgJGh0dHAucG9zdCgnL3N0b3JlL2NoYW5nZVNlc3Npb25UaWNrZXQnLCBkYXRhKS50aGVuKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwic3VjY2Vzc1wiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KG15VGltZW91dCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgnc2V0VGltZXInLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJzaG91bGQgYmUgcmVzdGFydGluZyB0aW1lclwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbXlUaW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbigpeyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQucmVtb3ZlVGlja2V0cygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCdzZXRUaW1lcicsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgdGltZXJBbW91bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbkNhcnQuc2V0UXVhbnRpdHkocXVhbnRpdHksIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCduZ0NhcnQ6aXRlbVVwZGF0ZWQnLCBpbkNhcnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uKGVycil7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZGlkbid0IHdvcmtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCdsb3dDb3VudCcsIHtib29sOiB0cnVlLCBvcmlnaW5hbFZhbDogaW5DYXJ0UX0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpbkNhcnQuc2V0UXVhbnRpdHkocXVhbnRpdHksIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgnbmdDYXJ0Oml0ZW1VcGRhdGVkJywgaW5DYXJ0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbmV3SXRlbSA9IG5ldyBuZ0NhcnRJdGVtKGlkLCBza3UsIG5hbWUsIHByaWNlLCBxdWFudGl0eSwgZGF0YSwgYXR0cik7XHJcbiAgICAgICAgICAgICAgICBpZiAobmV3SXRlbS5fZGF0YS5wcm9kdWN0X3R5cGUgPT09IFwidGlja2V0XCIpe1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQSB0aWNrZXQgd2FzIGFkZGVkISBcIixuZXdJdGVtKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGlja2V0SWQ6IG5ld0l0ZW0ucGFyZW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aWNrZXRDb3VudDogbmV3SXRlbS5xdWFudGl0eVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAkaHR0cC5wb3N0KCcvc3RvcmUvYWRkU2Vzc2lvblRpY2tldCcsIGRhdGEpLnRoZW4oZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ3NldFRpbWVyJywgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgbXlUaW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbigpeyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5yZW1vdmVUaWNrZXRzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgnc2V0VGltZXInLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgdGltZXJBbW91bnQpO1xyXG4gICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24oZXJyKXtcclxuICAgICAgICAgICAgICAgICAgICAvLyBkaWRuJ3Qgd29ya1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLiRjYXJ0Lml0ZW1zLnB1c2gobmV3SXRlbSk7XHJcbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ25nQ2FydDppdGVtQWRkZWQnLCBuZXdJdGVtKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCduZ0NhcnQ6Y2hhbmdlJywge30pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMuYWRkSXRlbUJ0biA9IGZ1bmN0aW9uIChpZCwgc2t1LCBuYW1lLCBwcmljZSwgcXVhbnRpdHksIGRhdGEpIHtcclxuICAgICAgICAgICAgdmFyIGNvdW50ID0gMDtcclxuICAgICAgICAgICAgdmFyIHNrdVBhcnNlZCA9IEpTT04ucGFyc2Uoc2t1KTtcclxuICAgICAgICAgICAgZm9yICh2YXIgcHJvcCBpbiBza3VQYXJzZWQpe1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJwcm9wOiBcIixza3VQYXJzZWRbcHJvcF0pO1xyXG4gICAgICAgICAgICAgICAgY291bnQrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcImNvdW50IGlzIDogXCIsY291bnQpO1xyXG4gICAgICAgICAgICBpZiAoY291bnQgPCAyKXtcclxuICAgICAgICAgICAgdmFyIGluQ2FydCA9IHRoaXMuZ2V0SXRlbUJ5U2t1KHNrdSk7XHJcblxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIGluQ2FydCA9PT0gJ29iamVjdCcpe1xyXG4gICAgICAgICAgICAgICAgLy9VcGRhdGUgcXVhbnRpdHkgb2YgYW4gaXRlbSBpZiBpdCdzIGFscmVhZHkgaW4gdGhlIGNhcnRcclxuICAgICAgICAgICAgICAgIGluQ2FydC5zZXRRdWFudGl0eShxdWFudGl0eSwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCduZ0NhcnQ6aXRlbVVwZGF0ZWQnLCBpbkNhcnQpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdmFyIG5ld0l0ZW0gPSBuZXcgbmdDYXJ0SXRlbShpZCwgc2t1LCBuYW1lLCBwcmljZSwgcXVhbnRpdHksIGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy4kY2FydC5pdGVtcy5wdXNoKG5ld0l0ZW0pO1xyXG4gICAgICAgICAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCduZ0NhcnQ6aXRlbUFkZGVkJywgbmV3SXRlbSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgnbmdDYXJ0OmNoYW5nZScsIHt9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICRsb2NhdGlvbi51cmwoJy9zdG9yZS8nKyBpZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuXHJcbiAgICAgICAgdGhpcy5jaGFuZ2VRdWFudGl0eSA9IGZ1bmN0aW9uIChza3UsIHF1YW50aXR5KXtcclxuICAgICAgICAgICAgdmFyIGluQ2FydCA9IHRoaXMuZ2V0SXRlbUJ5U2t1KHNrdSk7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgaW5DYXJ0ID09PSAnb2JqZWN0Jyl7XHJcbiAgICAgICAgICAgIGluQ2FydC5zZXRRdWFudGl0eShxdWFudGl0eSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgnbmdDYXJ0Oml0ZW1VcGRhdGVkJywgaW5DYXJ0KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwibm90aGluZyB0aGVyZVwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ25nQ2FydDpjaGFuZ2UnLCB7fSk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgdGhpcy5nZXRJdGVtQnlJZCA9IGZ1bmN0aW9uIChpdGVtSWQpIHtcclxuICAgICAgICAgICAgdmFyIGl0ZW1zID0gdGhpcy5nZXRDYXJ0KCkuaXRlbXM7XHJcbiAgICAgICAgICAgIHZhciBidWlsZCA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKGl0ZW1zLCBmdW5jdGlvbiAoaXRlbSkge1xyXG4gICAgICAgICAgICAgICAgaWYgIChpdGVtLmdldElkKCkgPT09IGl0ZW1JZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1aWxkID0gaXRlbTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiBidWlsZDtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAgdGhpcy5nZXRJdGVtQnlTa3UgPSBmdW5jdGlvbiAoaXRlbVNrdSkge1xyXG4gICAgICAgICAgICB2YXIgaXRlbXMgPSB0aGlzLmdldENhcnQoKS5pdGVtcztcclxuICAgICAgICAgICAgdmFyIGJ1aWxkID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICBhbmd1bGFyLmZvckVhY2goaXRlbXMsIGZ1bmN0aW9uIChpdGVtKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAgKGl0ZW0uZ2V0U2t1KCkgPT09IGl0ZW1Ta3UpIHtcclxuICAgICAgICAgICAgICAgICAgICBidWlsZCA9IGl0ZW07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gYnVpbGQ7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy5zZXRTaGlwcGluZyA9IGZ1bmN0aW9uKHNoaXBwaW5nKXtcclxuICAgICAgICAgICAgdGhpcy4kY2FydC5zaGlwcGluZyA9IHNoaXBwaW5nO1xyXG4gICAgICAgICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ25nQ2FydDpjaGFuZ2UnLCB7fSk7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFNoaXBwaW5nKCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy5nZXRTaGlwcGluZyA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmdldENhcnQoKS5pdGVtcy5sZW5ndGggPT0gMCkgcmV0dXJuIDA7XHJcbiAgICAgICAgICAgIHJldHVybiAgdGhpcy5nZXRDYXJ0KCkuc2hpcHBpbmc7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy5zZXRUYXhSYXRlID0gZnVuY3Rpb24odGF4UmF0ZSl7XHJcbiAgICAgICAgICAgIHRoaXMuJGNhcnQudGF4UmF0ZSA9ICtwYXJzZUZsb2F0KHRheFJhdGUpLnRvRml4ZWQoMik7XHJcbiAgICAgICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgnbmdDYXJ0OmNoYW5nZScsIHt9KTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VGF4UmF0ZSgpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMuZ2V0VGF4UmF0ZSA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLiRjYXJ0LnRheFJhdGVcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLmdldFRheCA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIHJldHVybiBNYXRoLnJvdW5kKCgodGhpcy5nZXRTdWJUb3RhbCgpLzEwMCkgKiB0aGlzLmdldENhcnQoKS50YXhSYXRlICkpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMuc2V0Q2FydCA9IGZ1bmN0aW9uIChjYXJ0KSB7XHJcbiAgICAgICAgICAgIHRoaXMuJGNhcnQgPSBjYXJ0O1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRDYXJ0KCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy5nZXRDYXJ0ID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuJGNhcnQ7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy5nZXRJdGVtcyA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldENhcnQoKS5pdGVtcztcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLmdldFRvdGFsSXRlbXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBjb3VudCA9IDA7XHJcbiAgICAgICAgICAgIHZhciBpdGVtcyA9IHRoaXMuZ2V0SXRlbXMoKTtcclxuICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKGl0ZW1zLCBmdW5jdGlvbiAoaXRlbSkge1xyXG4gICAgICAgICAgICAgICAgY291bnQgKz0gaXRlbS5nZXRRdWFudGl0eSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIGNvdW50O1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMuZ2V0VG90YWxVbmlxdWVJdGVtcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Q2FydCgpLml0ZW1zLmxlbmd0aDtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLmdldENhcnRUb3RhbCA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIHZhciB0b3RhbCA9IDA7XHJcbiAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaCh0aGlzLmdldENhcnQoKS5pdGVtcywgZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgICAgICAgICAgIHRvdGFsICs9IGl0ZW0uZ2V0VG90YWwoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUZsb2F0KHRvdGFsKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLmdldFN1YlRvdGFsID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgdmFyIHRvdGFsID0gMDtcclxuICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKHRoaXMuZ2V0Q2FydCgpLml0ZW1zLCBmdW5jdGlvbiAoaXRlbSkge1xyXG4gICAgICAgICAgICAgICAgdG90YWwgKz0gaXRlbS5nZXRUb3RhbCgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdmFyIHNoaXBwaW5nID0gdGhpcy5nZXRTaGlwcGluZygpIHx8IDA7XHJcbiAgICAgICAgICAgICAgICB0b3RhbCArPSBzaGlwcGluZztcclxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlRmxvYXQodG90YWwpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMucmVtb3ZlVGlja2V0cyA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIHZhciBfc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaCh0aGlzLmdldENhcnQoKS5pdGVtcywgZnVuY3Rpb24gKGl0ZW0sIGkpIHtcclxuICAgICAgICAgICAgICAgIGlmIChpdGVtLl9kYXRhLnByb2R1Y3RfdHlwZSA9PT0gXCJ0aWNrZXRcIil7XHJcbiAgICAgICAgICAgICAgICAgICAgX3NlbGYucmVtb3ZlSXRlbShpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy50b3RhbENvc3QgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiArcGFyc2VJbnQodGhpcy5nZXRDYXJ0VG90YWwoKSArIHRoaXMuZ2V0U2hpcHBpbmcoKSArIHRoaXMuZ2V0VGF4KCkpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMucmVtb3ZlSXRlbSA9IGZ1bmN0aW9uIChpbmRleCkge1xyXG4gICAgICAgICAgICB2YXIgaXRlbSA9IHRoaXMuJGNhcnQuaXRlbXMuc3BsaWNlKGluZGV4LCAxKVswXSB8fCB7fTtcclxuICAgICAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCduZ0NhcnQ6aXRlbVJlbW92ZWQnLCBpdGVtKTtcclxuICAgICAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCduZ0NhcnQ6Y2hhbmdlJywge30pO1xyXG5cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLnJlbW92ZUl0ZW1CeUlkID0gZnVuY3Rpb24gKGlkKSB7XHJcbiAgICAgICAgICAgIHZhciBpdGVtO1xyXG4gICAgICAgICAgICB2YXIgY2FydCA9IHRoaXMuZ2V0Q2FydCgpO1xyXG4gICAgICAgICAgICBhbmd1bGFyLmZvckVhY2goY2FydC5pdGVtcywgZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICBpZihpdGVtLmdldElkKCkgPT09IGlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbSA9IGNhcnQuaXRlbXMuc3BsaWNlKGluZGV4LCAxKVswXSB8fCB7fTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0Q2FydChjYXJ0KTtcclxuICAgICAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCduZ0NhcnQ6aXRlbVJlbW92ZWQnLCBpdGVtKTtcclxuICAgICAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCduZ0NhcnQ6Y2hhbmdlJywge30pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMuZW1wdHkgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ25nQ2FydDpjaGFuZ2UnLCB7fSk7XHJcbiAgICAgICAgICAgIHRoaXMuJGNhcnQuaXRlbXMgPSBbXTtcclxuICAgICAgICAgICAgJHdpbmRvdy5sb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnY2FydCcpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5pc0VtcHR5ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgcmV0dXJuICh0aGlzLiRjYXJ0Lml0ZW1zLmxlbmd0aCA+IDAgPyBmYWxzZSA6IHRydWUpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLnRvT2JqZWN0ID0gZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5nZXRJdGVtcygpLmxlbmd0aCA9PT0gMCkgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgdmFyIGl0ZW1zID0gW107XHJcbiAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaCh0aGlzLmdldEl0ZW1zKCksIGZ1bmN0aW9uKGl0ZW0pe1xyXG4gICAgICAgICAgICAgICAgaXRlbXMucHVzaCAoaXRlbS50b09iamVjdCgpKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgc2hpcHBpbmc6IHRoaXMuZ2V0U2hpcHBpbmcoKSxcclxuICAgICAgICAgICAgICAgIHRheDogdGhpcy5nZXRUYXgoKSxcclxuICAgICAgICAgICAgICAgIHRheFJhdGU6IHRoaXMuZ2V0VGF4UmF0ZSgpLFxyXG4gICAgICAgICAgICAgICAgc3ViVG90YWw6IHRoaXMuZ2V0U3ViVG90YWwoKSxcclxuICAgICAgICAgICAgICAgIHRvdGFsQ29zdDogdGhpcy50b3RhbENvc3QoKSxcclxuICAgICAgICAgICAgICAgIGl0ZW1zOml0ZW1zXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuXHJcbiAgICAgICAgdGhpcy4kcmVzdG9yZSA9IGZ1bmN0aW9uKHN0b3JlZENhcnQpe1xyXG4gICAgICAgICAgICB2YXIgX3NlbGYgPSB0aGlzO1xyXG4gICAgICAgICAgICBfc2VsZi5pbml0KCk7XHJcbiAgICAgICAgICAgIF9zZWxmLiRjYXJ0LnNoaXBwaW5nID0gc3RvcmVkQ2FydC5zaGlwcGluZztcclxuICAgICAgICAgICAgX3NlbGYuJGNhcnQudGF4UmF0ZSA9IHN0b3JlZENhcnQudGF4UmF0ZTtcclxuICAgICAgICAgICAgX3NlbGYuJGNhcnQudGF4ID0gc3RvcmVkQ2FydC50YXg7XHJcblxyXG4gICAgICAgICAgICBhbmd1bGFyLmZvckVhY2goc3RvcmVkQ2FydC5pdGVtcywgZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiaXRlbTogXCIsaXRlbSk7XHJcbiAgICAgICAgICAgICAgICBfc2VsZi4kY2FydC5pdGVtcy5wdXNoKG5ldyBuZ0NhcnRJdGVtKGl0ZW0ucGFyZW50LCBpdGVtLnNrdSwgaXRlbS5kZXNjcmlwdGlvbiwgaXRlbS5hbW91bnQsIGl0ZW0ucXVhbnRpdHksIGl0ZW0uX2RhdGEsIGl0ZW0uYXR0cikpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy4kc2F2ZSgpO1xyXG4gICAgICAgIH07XHJcblxyXG5cclxuXHJcbiAgICAgICAgdGhpcy4kc2F2ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHN0b3JlLnNldCgnY2FydCcsIGFuZ3VsYXIudG9Kc29uKHRoaXMuZ2V0Q2FydCgpKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1dKVxyXG5cclxuICAgIC5mYWN0b3J5KCduZ0NhcnRJdGVtJywgWyckcm9vdFNjb3BlJywgJyRsb2cnLCBmdW5jdGlvbiAoJHJvb3RTY29wZSwgJGxvZykge1xyXG5cclxuICAgICAgICB2YXIgaXRlbSA9IGZ1bmN0aW9uIChpZCwgc2t1LCBuYW1lLCBwcmljZSwgcXVhbnRpdHksIGRhdGEsIGF0dHIpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJ3aGF0IGlzIGlkPyBcIixpZCk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwid2hhdCBpcyBkYXRhPyBcIixkYXRhKTtcclxuXHJcbiAgICAgICAgICAgIC8vIGlmIChteURhdGEucHJvZHVjdF90eXBlID09PSAndGlja2V0Jyl7XHJcbiAgICAgICAgICAgIC8vICAgICBteURhdGEudW5peCA9IGRhdGEuZGF0ZTtcclxuICAgICAgICAgICAgLy8gfSBlbHNlIGlmIChteURhdGEucHJvZHVjdF90eXBlID09PSAnc2hpcHBhYmxlJyl7XHJcbiAgICAgICAgICAgIC8vICAgICBteURhdGEuc2hpcF9kZXRhaWxzID0gZGF0YS5zaGlwX2RldGFpbHM7XHJcbiAgICAgICAgICAgIC8vIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHRoaXMuc2V0SWQoaWQpO1xyXG4gICAgICAgICAgICB0aGlzLnNldFNrdShza3UpO1xyXG4gICAgICAgICAgICB0aGlzLnNldE5hbWUobmFtZSk7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0UHJpY2UocHJpY2UpO1xyXG4gICAgICAgICAgICB0aGlzLnNldFF1YW50aXR5KHF1YW50aXR5KTtcclxuICAgICAgICAgICAgdGhpcy5zZXREYXRhKGRhdGEpO1xyXG4gICAgICAgICAgICB0aGlzLnNldEF0dHIoYXR0ciB8fCBkYXRhLmF0dHIpO1xyXG4gICAgICAgIH07XHJcblxyXG5cclxuICAgICAgICBpdGVtLnByb3RvdHlwZS5zZXRJZCA9IGZ1bmN0aW9uKGlkKXtcclxuICAgICAgICAgICAgaWYgKGlkKSAgdGhpcy5wYXJlbnQgPSBpZDtcclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkbG9nLmVycm9yKCdBbiBJRCBtdXN0IGJlIHByb3ZpZGVkJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBpdGVtLnByb3RvdHlwZS5zZXRTa3UgPSBmdW5jdGlvbihza3Upe1xyXG4gICAgICAgICAgICBpZiAoc2t1KSAgdGhpcy5za3UgPSBza3U7XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJGxvZy5lcnJvcignQSBza3UgbXVzdCBiZSBwcm92aWRlZCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgaXRlbS5wcm90b3R5cGUuZ2V0SWQgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnQ7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgaXRlbS5wcm90b3R5cGUuZ2V0U2t1ID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2t1O1xyXG4gICAgICAgIH07XHJcblxyXG5cclxuICAgICAgICBpdGVtLnByb3RvdHlwZS5zZXROYW1lID0gZnVuY3Rpb24obmFtZSl7XHJcbiAgICAgICAgICAgIGlmIChuYW1lKSAgdGhpcy5kZXNjcmlwdGlvbiA9IG5hbWU7XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJGxvZy5lcnJvcignQSBuYW1lIG11c3QgYmUgcHJvdmlkZWQnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgaXRlbS5wcm90b3R5cGUuZ2V0TmFtZSA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRlc2NyaXB0aW9uO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGl0ZW0ucHJvdG90eXBlLnNldFByaWNlID0gZnVuY3Rpb24ocHJpY2Upe1xyXG4gICAgICAgICAgICB2YXIgcHJpY2VGbG9hdCA9IHBhcnNlRmxvYXQocHJpY2UpO1xyXG4gICAgICAgICAgICBpZiAocHJpY2VGbG9hdCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHByaWNlRmxvYXQgPD0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICRsb2cuZXJyb3IoJ0EgcHJpY2UgbXVzdCBiZSBvdmVyIDAnKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hbW91bnQgPSAocHJpY2VGbG9hdCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkbG9nLmVycm9yKCdBIHByaWNlIG11c3QgYmUgcHJvdmlkZWQnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgaXRlbS5wcm90b3R5cGUuZ2V0UHJpY2UgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hbW91bnQ7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICBcclxuICAgICAgICBpdGVtLnByb3RvdHlwZS5zZXRRdWFudGl0eSA9IGZ1bmN0aW9uKHF1YW50aXR5LCByZWxhdGl2ZSl7XHJcblxyXG5cclxuICAgICAgICAgICAgdmFyIHF1YW50aXR5SW50ID0gcGFyc2VJbnQocXVhbnRpdHkpO1xyXG4gICAgICAgICAgICBpZiAocXVhbnRpdHlJbnQgJSAxID09PSAwKXtcclxuICAgICAgICAgICAgICAgIGlmIChyZWxhdGl2ZSA9PT0gdHJ1ZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5xdWFudGl0eSAgKz0gcXVhbnRpdHlJbnQ7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucXVhbnRpdHkgPSBxdWFudGl0eUludDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnF1YW50aXR5IDwgMSkgdGhpcy5xdWFudGl0eSA9IDE7XHJcblxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5xdWFudGl0eSA9IDE7XHJcbiAgICAgICAgICAgICAgICAkbG9nLmluZm8oJ1F1YW50aXR5IG11c3QgYmUgYW4gaW50ZWdlciBhbmQgd2FzIGRlZmF1bHRlZCB0byAxJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGl0ZW0ucHJvdG90eXBlLmdldFF1YW50aXR5ID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucXVhbnRpdHk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgaXRlbS5wcm90b3R5cGUuc2V0RGF0YSA9IGZ1bmN0aW9uKGRhdGEpe1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcInNldHRpbmcgZGF0YVwiKTtcclxuICAgICAgICAgICAgaWYgKGRhdGEpIHRoaXMuX2RhdGEgPSBkYXRhO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGl0ZW0ucHJvdG90eXBlLmdldERhdGEgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fZGF0YSkgcmV0dXJuIHRoaXMuX2RhdGE7XHJcbiAgICAgICAgICAgIGVsc2UgJGxvZy5pbmZvKCdUaGlzIGl0ZW0gaGFzIG5vIGRhdGEnKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBpdGVtLnByb3RvdHlwZS5zZXRBdHRyID0gZnVuY3Rpb24oYXR0cmlidXRlcyl7XHJcbiAgICAgICAgICAgIGlmIChhdHRyaWJ1dGVzKSB0aGlzLmF0dHIgPSBhdHRyaWJ1dGVzO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGl0ZW0ucHJvdG90eXBlLmdldEF0dHIgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICBpZiAodGhpcy5hdHRyKXtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmF0dHI7XHJcbiAgICAgICAgICAgIH0gXHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgXHJcblxyXG5cclxuXHJcbiAgICAgICAgaXRlbS5wcm90b3R5cGUuZ2V0VG90YWwgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICByZXR1cm4gK3BhcnNlRmxvYXQodGhpcy5nZXRRdWFudGl0eSgpICogdGhpcy5nZXRQcmljZSgpKS50b0ZpeGVkKDIpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGl0ZW0ucHJvdG90eXBlLnRvT2JqZWN0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBpZDogdGhpcy5nZXRJZCgpLFxyXG4gICAgICAgICAgICAgICAgbmFtZTogdGhpcy5nZXROYW1lKCksXHJcbiAgICAgICAgICAgICAgICBwcmljZTogdGhpcy5nZXRQcmljZSgpLFxyXG4gICAgICAgICAgICAgICAgcXVhbnRpdHk6IHRoaXMuZ2V0UXVhbnRpdHkoKSxcclxuICAgICAgICAgICAgICAgIGRhdGE6IHRoaXMuZ2V0RGF0YSgpLFxyXG4gICAgICAgICAgICAgICAgdG90YWw6IHRoaXMuZ2V0VG90YWwoKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGl0ZW07XHJcblxyXG4gICAgfV0pXHJcblxyXG4gICAgLnNlcnZpY2UoJ3N0b3JlJywgWyckd2luZG93JywgZnVuY3Rpb24gKCR3aW5kb3cpIHtcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuXHJcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCAkd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKGtleSkgKSAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjYXJ0ID0gYW5ndWxhci5mcm9tSnNvbiggJHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShrZXkpICkgO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBKU09OLnBhcnNlKGNhcnQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgfSxcclxuXHJcblxyXG4gICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uIChrZXksIHZhbCkge1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh2YWwgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICR3aW5kb3cubG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oa2V5KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgga2V5LCBhbmd1bGFyLnRvSnNvbih2YWwpICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShrZXkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfV0pXHJcblxyXG4gICAgLmNvbnRyb2xsZXIoJ0NhcnRDb250cm9sbGVyJyxbJyRzY29wZScsJyRyb290U2NvcGUnLCAnbmdDYXJ0JywnJHRpbWVvdXQnLCBmdW5jdGlvbigkc2NvcGUsICRyb290U2NvcGUsIG5nQ2FydCwgJHRpbWVvdXQpIHtcclxuICAgICAgICAkc2NvcGUubG9hZGVkID0gZmFsc2U7XHJcbiAgICAgICAgJHNjb3BlLnRvZ2dsZUNhcnQgPSBmYWxzZTtcclxuICAgICAgICAkc2NvcGUubmdDYXJ0ID0gbmdDYXJ0O1xyXG4gICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICRzY29wZS5sb2FkZWQgPSB0cnVlO1xyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgICAgdmFyIGl0ZW1zID0gbmdDYXJ0LmdldEl0ZW1zKCk7XHJcbiAgICAgICAgICAgIC8vIGxvb3AgdG8gZGV0ZXJtaW5lIGlmIGFueSBpdGVtcyBhcmUgc2hpcHBhYmxlXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiaXRlbXMgYmVmb3JlIGZpbHRlcmluZyBzaGlwcGFibGU6IFwiLGl0ZW1zKTtcclxuICAgICAgICAgICAgdmFyIGZpbHRlcmVkID0gW107XHJcbiAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaChpdGVtcywgZnVuY3Rpb24oaXRlbSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0uX2RhdGEuc2hpcHBhYmxlID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmlsdGVyZWQucHVzaChpdGVtKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGlmIChmaWx0ZXJlZC5sZW5ndGggPiAwKXtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwic2hvdWxkIGJlIHNldCBzaGlwcGFibGUhISEhXCIpO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnNoaXBCb29sID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICRzY29wZS4kZW1pdCgnc2V0U2hpcHBhYmxlJywgdHJ1ZSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcInNob3VsZCBub3QgYmUgc2hpcHBhYmxlISEhIVwiKTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5zaGlwQm9vbCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLiRlbWl0KCdzZXRTaGlwcGFibGUnLCBmYWxzZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgXHJcblxyXG4gICAgfV0pXHJcblxyXG4gICAgLmNvbnRyb2xsZXIoJ0NhcnRCdG5Db250cm9sbGVyJyxbJyRzY29wZScsICduZ0NhcnQnLCckdGltZW91dCcsIGZ1bmN0aW9uKCRzY29wZSwgbmdDYXJ0LCAkdGltZW91dCkge1xyXG4gICAgICAgIFxyXG4gICAgICAgICRzY29wZS5sb2FkZWQgPSBmYWxzZTtcclxuICAgICAgICAkc2NvcGUudG9nZ2xlQ2FydCA9IGZhbHNlO1xyXG4gICAgICAgICRzY29wZS5uZ0NhcnQgPSBuZ0NhcnQ7XHJcbiAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgJHNjb3BlLmxvYWRlZCA9IHRydWU7XHJcbiAgICAgICAgfSlcclxuXHJcbiAgICB9XSlcclxuXHJcbiAgICAudmFsdWUoJ3ZlcnNpb24nLCAnMS4wLjAnKTtcclxuOyd1c2Ugc3RyaWN0JztcclxuXHJcblxyXG5hbmd1bGFyLm1vZHVsZSgnbmdDYXJ0LmRpcmVjdGl2ZXMnLCBbJ25nQ2FydC5mdWxmaWxtZW50J10pXHJcblxyXG4gICAgLmNvbnRyb2xsZXIoJ0NhcnRDb250cm9sbGVyJyxbJyRzY29wZScsICduZ0NhcnQnLCBmdW5jdGlvbigkc2NvcGUsIG5nQ2FydCkge1xyXG4gICAgICAgIFxyXG4gICAgICAgICRzY29wZS5uZ0NhcnQgPSBuZ0NhcnQ7XHJcblxyXG4gICAgICAgIFxyXG4gICAgICAgIFxyXG4gICAgfV0pXHJcblxyXG4gICAgICAgICAgLmRpcmVjdGl2ZSgnbmdjYXJ0QWRkQnRuJywgWyduZ0NhcnQnLCBmdW5jdGlvbihuZ0NhcnQpe1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHJlc3RyaWN0IDogJ0UnLFxyXG4gICAgICAgICAgICBjb250cm9sbGVyIDogJ0NhcnRCdG5Db250cm9sbGVyJyxcclxuICAgICAgICAgICAgc2NvcGU6IHtcclxuICAgICAgICAgICAgICAgIGlkOidAJyxcclxuICAgICAgICAgICAgICAgIHNrdTogJ0AnLFxyXG4gICAgICAgICAgICAgICAgbmFtZTonQCcsXHJcbiAgICAgICAgICAgICAgICBxdWFudGl0eTonQCcsXHJcbiAgICAgICAgICAgICAgICBxdWFudGl0eU1heDonQCcsXHJcbiAgICAgICAgICAgICAgICBwcmljZTonQCcsXHJcbiAgICAgICAgICAgICAgICBkYXRhOic9J1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB0cmFuc2NsdWRlOiB0cnVlLFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogZnVuY3Rpb24oZWxlbWVudCwgYXR0cnMpIHtcclxuICAgICAgICAgICAgICAgIGlmICggdHlwZW9mIGF0dHJzLnRlbXBsYXRlVXJsID09ICd1bmRlZmluZWQnICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAndmlld3MvbmdDYXJ0L2FkZHRvY2FydEJ0bi5odG1sJztcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGF0dHJzLnRlbXBsYXRlVXJsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBsaW5rOmZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycyl7XHJcbiAgICAgICAgICAgICAgICBzY29wZS5hdHRycyA9IGF0dHJzO1xyXG4gICAgICAgICAgICAgICAgc2NvcGUuaW5DYXJ0ID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gIG5nQ2FydC5nZXRJdGVtQnlTa3UoYXR0cnMuc2t1KTtcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHNjb3BlLmluQ2FydCgpKXtcclxuICAgICAgICAgICAgICAgICAgICBzY29wZS5xID0gbmdDYXJ0LmdldEl0ZW1CeVNrdShhdHRycy5za3UpLmdldFF1YW50aXR5KCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHNjb3BlLnEgPSBwYXJzZUludChzY29wZS5xdWFudGl0eSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgc2NvcGUucXR5T3B0ID0gIFtdO1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPD0gc2NvcGUucXVhbnRpdHlNYXg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHNjb3BlLnF0eU9wdC5wdXNoKGkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9O1xyXG4gICAgfV0pXHJcblxyXG4gICAgLmRpcmVjdGl2ZSgnbmdjYXJ0QWRkdG9jYXJ0JywgWyduZ0NhcnQnLCBmdW5jdGlvbihuZ0NhcnQpe1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHJlc3RyaWN0IDogJ0UnLFxyXG4gICAgICAgICAgICBjb250cm9sbGVyIDogJ0NhcnRDb250cm9sbGVyJyxcclxuICAgICAgICAgICAgc2NvcGU6IHtcclxuICAgICAgICAgICAgICAgIGlkOidAJyxcclxuICAgICAgICAgICAgICAgIHNrdTogJ0AnLFxyXG4gICAgICAgICAgICAgICAgbmFtZTonQCcsXHJcbiAgICAgICAgICAgICAgICBxdWFudGl0eTonQCcsXHJcbiAgICAgICAgICAgICAgICBxdWFudGl0eU1heDonQCcsXHJcbiAgICAgICAgICAgICAgICBwcmljZTonQCcsXHJcbiAgICAgICAgICAgICAgICBkYXRhOic9J1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB0cmFuc2NsdWRlOiB0cnVlLFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogZnVuY3Rpb24oZWxlbWVudCwgYXR0cnMpIHtcclxuICAgICAgICAgICAgICAgIGlmICggdHlwZW9mIGF0dHJzLnRlbXBsYXRlVXJsID09ICd1bmRlZmluZWQnICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAndmlld3MvbmdDYXJ0L2FkZHRvY2FydC5odG1sJztcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGF0dHJzLnRlbXBsYXRlVXJsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBsaW5rOmZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycyl7XHJcbiAgICAgICAgICAgICAgICBzY29wZS5hdHRycyA9IGF0dHJzO1xyXG4gICAgICAgICAgICAgICAgc2NvcGUuaW5DYXJ0ID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gIG5nQ2FydC5nZXRJdGVtQnlTa3UoYXR0cnMuc2t1KTtcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHNjb3BlLmluQ2FydCgpKXtcclxuICAgICAgICAgICAgICAgICAgICBzY29wZS5xID0gbmdDYXJ0LmdldEl0ZW1CeVNrdShhdHRycy5za3UpLmdldFF1YW50aXR5KCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHNjb3BlLnEgPSBwYXJzZUludChzY29wZS5xdWFudGl0eSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgIHNjb3BlLnF0eU9wdCA9ICBbXTtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDw9IHNjb3BlLnF1YW50aXR5TWF4OyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBzY29wZS5xdHlPcHQucHVzaChpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICBcclxuXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfTtcclxuICAgIH1dKVxyXG5cclxuICAgIC5kaXJlY3RpdmUoJ25nY2FydEFkZHRvY2FydFByb2R1Y3QnLCBbJ25nQ2FydCcsIGZ1bmN0aW9uKG5nQ2FydCl7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgcmVzdHJpY3QgOiAnRScsXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXIgOiAnQ2FydENvbnRyb2xsZXInLFxyXG4gICAgICAgICAgICBzY29wZToge1xyXG4gICAgICAgICAgICAgICAgaWQ6J0AnLFxyXG4gICAgICAgICAgICAgICAgc2t1OiAnQCcsXHJcbiAgICAgICAgICAgICAgICBuYW1lOidAJyxcclxuICAgICAgICAgICAgICAgIGF0dHI6ICdAJyxcclxuICAgICAgICAgICAgICAgIHF1YW50aXR5OidAJyxcclxuICAgICAgICAgICAgICAgIHF1YW50aXR5TWF4OidAJyxcclxuICAgICAgICAgICAgICAgIHByaWNlOidAJyxcclxuICAgICAgICAgICAgICAgIGRhdGE6Jz0nXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHRyYW5zY2x1ZGU6IHRydWUsXHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBmdW5jdGlvbihlbGVtZW50LCBhdHRycykge1xyXG4gICAgICAgICAgICAgICAgaWYgKCB0eXBlb2YgYXR0cnMudGVtcGxhdGVVcmwgPT0gJ3VuZGVmaW5lZCcgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICd2aWV3cy9uZ0NhcnQvYWRkdG9jYXJ0UHJvZHVjdC5odG1sJztcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGF0dHJzLnRlbXBsYXRlVXJsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBsaW5rOmZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycyl7XHJcbiAgICAgICAgICAgICAgICBzY29wZS5hdHRycyA9IGF0dHJzO1xyXG4gICAgICAgICAgICAgICAgc2NvcGUuaW5DYXJ0ID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gIG5nQ2FydC5nZXRJdGVtQnlTa3UoYXR0cnMuc2t1KTtcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHNjb3BlLmluQ2FydCgpKXtcclxuICAgICAgICAgICAgICAgICAgICBzY29wZS5xID0gbmdDYXJ0LmdldEl0ZW1CeVNrdShhdHRycy5za3UpLmdldFF1YW50aXR5KCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHNjb3BlLnEgPSBwYXJzZUludChzY29wZS5xdWFudGl0eSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgc2NvcGUudXBkYXRlUSA9IGZ1bmN0aW9uKGNvdW50KXtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImNvdW50IHNob3VsZCBiZTogXCIsY291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNjb3BlLnF0eU9wdCA9ICBbXTtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8PSBjb3VudDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlLnF0eU9wdC5wdXNoKGkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHNjb3BlLnVwZGF0ZVEoc2NvcGUucXVhbnRpdHlNYXgpO1xyXG5cclxuICAgICAgICAgICAgICAgIHNjb3BlLiRvbignY2hhbmdlUScsZnVuY3Rpb24oZXZlbnQsIGRhdGEpe1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiZGF0YSBpbiAkb24/IFwiLGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwidXBkYXRpbmcgaW4gZGlyZWN0aXZlIVwiKVxyXG4gICAgICAgICAgICAgICAgc2NvcGUudXBkYXRlUShkYXRhLmNvdW50KTsgXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuXHJcbiAgICAgICAgICAgICAgICBcclxuXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfTtcclxuICAgIH1dKVxyXG5cclxuXHJcblxyXG4gICAgLmRpcmVjdGl2ZSgnbmdjYXJ0Q2FydCcsIFtmdW5jdGlvbigpe1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHJlc3RyaWN0IDogJ0UnLFxyXG4gICAgICAgICAgICBjb250cm9sbGVyIDogJ0NhcnRDb250cm9sbGVyJyxcclxuICAgICAgICAgICAgc2NvcGU6IHt9LFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogZnVuY3Rpb24oZWxlbWVudCwgYXR0cnMpIHtcclxuICAgICAgICAgICAgICAgIGlmICggdHlwZW9mIGF0dHJzLnRlbXBsYXRlVXJsID09ICd1bmRlZmluZWQnICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAndmlld3MvbmdDYXJ0L2NhcnQuaHRtbCc7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhdHRycy50ZW1wbGF0ZVVybDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbGluazpmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMpe1xyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9XSlcclxuXHJcbiAgICAuZGlyZWN0aXZlKCduZ2NhcnRTdW1tYXJ5JywgW2Z1bmN0aW9uKCl7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgcmVzdHJpY3QgOiAnRScsXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXIgOiAnQ2FydENvbnRyb2xsZXInLFxyXG4gICAgICAgICAgICBzY29wZToge30sXHJcbiAgICAgICAgICAgIHRyYW5zY2x1ZGU6IHRydWUsXHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBmdW5jdGlvbihlbGVtZW50LCBhdHRycykge1xyXG4gICAgICAgICAgICAgICAgaWYgKCB0eXBlb2YgYXR0cnMudGVtcGxhdGVVcmwgPT0gJ3VuZGVmaW5lZCcgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICd2aWV3cy9uZ0NhcnQvc3VtbWFyeS5odG1sJztcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGF0dHJzLnRlbXBsYXRlVXJsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH1dKVxyXG5cclxuICAgICAuZGlyZWN0aXZlKCduZ2NhcnRDYXJ0Q29uZmlybScsIFtmdW5jdGlvbigpe1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHJlc3RyaWN0IDogJ0UnLFxyXG4gICAgICAgICAgICBjb250cm9sbGVyIDogJ0NhcnRDb250cm9sbGVyJyxcclxuICAgICAgICAgICAgc2NvcGU6IHt9LFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogZnVuY3Rpb24oZWxlbWVudCwgYXR0cnMpIHtcclxuICAgICAgICAgICAgICAgIGlmICggdHlwZW9mIGF0dHJzLnRlbXBsYXRlVXJsID09ICd1bmRlZmluZWQnICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAndmlld3MvbmdDYXJ0L2NhcnQtY29uZmlybS5odG1sJztcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGF0dHJzLnRlbXBsYXRlVXJsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBsaW5rOmZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycyl7XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH1dKVxyXG5cclxuICAgIC5kaXJlY3RpdmUoJ25nY2FydFNtYWxsQ2FydCcsIFtmdW5jdGlvbigpe1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHJlc3RyaWN0IDogJ0UnLFxyXG4gICAgICAgICAgICBjb250cm9sbGVyIDogJ0NhcnRDb250cm9sbGVyJyxcclxuICAgICAgICAgICAgc2NvcGU6IHt9LFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogZnVuY3Rpb24oZWxlbWVudCwgYXR0cnMpIHtcclxuICAgICAgICAgICAgICAgIGlmICggdHlwZW9mIGF0dHJzLnRlbXBsYXRlVXJsID09ICd1bmRlZmluZWQnICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAndmlld3MvbmdDYXJ0L3NtYWxsLWNhcnQuaHRtbCc7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhdHRycy50ZW1wbGF0ZVVybDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbGluazpmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMpe1xyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9XSlcclxuXHJcbiAgICAuZGlyZWN0aXZlKCduZ2NhcnRTbWFsbENhcnRDb2xsYXBzZScsIFtmdW5jdGlvbigpe1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHJlc3RyaWN0IDogJ0UnLFxyXG4gICAgICAgICAgICBjb250cm9sbGVyIDogJ0NhcnRDb250cm9sbGVyJyxcclxuICAgICAgICAgICAgc2NvcGU6IHt9LFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogZnVuY3Rpb24oZWxlbWVudCwgYXR0cnMpIHtcclxuICAgICAgICAgICAgICAgIGlmICggdHlwZW9mIGF0dHJzLnRlbXBsYXRlVXJsID09ICd1bmRlZmluZWQnICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAndmlld3MvbmdDYXJ0L3NtYWxsLWNhcnQtY29sbGFwc2UuaHRtbCc7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhdHRycy50ZW1wbGF0ZVVybDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbGluazpmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMpe1xyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9XSlcclxuXHJcbiAgICAuZGlyZWN0aXZlKCduZ2NhcnRDaGVja291dCcsIFtmdW5jdGlvbigpe1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHJlc3RyaWN0IDogJ0UnLFxyXG4gICAgICAgICAgICBjb250cm9sbGVyIDogKCdDYXJ0Q29udHJvbGxlcicsIFsnJHJvb3RTY29wZScsICckc2NvcGUnLCAnbmdDYXJ0JywgJ2Z1bGZpbG1lbnRQcm92aWRlcicsIGZ1bmN0aW9uKCRyb290U2NvcGUsICRzY29wZSwgbmdDYXJ0LCBmdWxmaWxtZW50UHJvdmlkZXIpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5uZ0NhcnQgPSBuZ0NhcnQ7XHJcblxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmNoZWNrb3V0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZ1bGZpbG1lbnRQcm92aWRlci5zZXRTZXJ2aWNlKCRzY29wZS5zZXJ2aWNlKTtcclxuICAgICAgICAgICAgICAgICAgICBmdWxmaWxtZW50UHJvdmlkZXIuc2V0U2V0dGluZ3MoJHNjb3BlLnNldHRpbmdzKTtcclxuICAgICAgICAgICAgICAgICAgICBmdWxmaWxtZW50UHJvdmlkZXIuY2hlY2tvdXQoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSwgc3RhdHVzLCBoZWFkZXJzLCBjb25maWcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgnbmdDYXJ0OmNoZWNrb3V0X3N1Y2NlZWRlZCcsIGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24gKGRhdGEsIHN0YXR1cywgaGVhZGVycywgY29uZmlnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ25nQ2FydDpjaGVja291dF9mYWlsZWQnLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzQ29kZTogc3RhdHVzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiBkYXRhXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1dKSxcclxuICAgICAgICAgICAgc2NvcGU6IHtcclxuICAgICAgICAgICAgICAgIHNlcnZpY2U6J0AnLFxyXG4gICAgICAgICAgICAgICAgc2V0dGluZ3M6Jz0nXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHRyYW5zY2x1ZGU6IHRydWUsXHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBmdW5jdGlvbihlbGVtZW50LCBhdHRycykge1xyXG4gICAgICAgICAgICAgICAgaWYgKCB0eXBlb2YgYXR0cnMudGVtcGxhdGVVcmwgPT0gJ3VuZGVmaW5lZCcgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICd0ZW1wbGF0ZS9uZ0NhcnQvY2hlY2tvdXQuaHRtbCc7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhdHRycy50ZW1wbGF0ZVVybDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9XSk7XHJcbjtcclxuYW5ndWxhci5tb2R1bGUoJ25nQ2FydC5mdWxmaWxtZW50JywgW10pXHJcbiAgICAuc2VydmljZSgnZnVsZmlsbWVudFByb3ZpZGVyJywgWyckaW5qZWN0b3InLCBmdW5jdGlvbigkaW5qZWN0b3Ipe1xyXG5cclxuICAgICAgICB0aGlzLl9vYmogPSB7XHJcbiAgICAgICAgICAgIHNlcnZpY2UgOiB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgIHNldHRpbmdzIDogdW5kZWZpbmVkXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy5zZXRTZXJ2aWNlID0gZnVuY3Rpb24oc2VydmljZSl7XHJcbiAgICAgICAgICAgIHRoaXMuX29iai5zZXJ2aWNlID0gc2VydmljZTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLnNldFNldHRpbmdzID0gZnVuY3Rpb24oc2V0dGluZ3Mpe1xyXG4gICAgICAgICAgICB0aGlzLl9vYmouc2V0dGluZ3MgPSBzZXR0aW5ncztcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLmNoZWNrb3V0ID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgdmFyIHByb3ZpZGVyID0gJGluamVjdG9yLmdldCgnbmdDYXJ0LmZ1bGZpbG1lbnQuJyArIHRoaXMuX29iai5zZXJ2aWNlKTtcclxuICAgICAgICAgICAgICByZXR1cm4gcHJvdmlkZXIuY2hlY2tvdXQodGhpcy5fb2JqLnNldHRpbmdzKTtcclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1dKVxyXG5cclxuXHJcbi5zZXJ2aWNlKCduZ0NhcnQuZnVsZmlsbWVudC5sb2cnLCBbJyRxJywgJyRsb2cnLCAnbmdDYXJ0JywgZnVuY3Rpb24oJHEsICRsb2csIG5nQ2FydCl7XHJcblxyXG4gICAgICAgIHRoaXMuY2hlY2tvdXQgPSBmdW5jdGlvbigpe1xyXG5cclxuICAgICAgICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcclxuXHJcbiAgICAgICAgICAgICRsb2cuaW5mbyhuZ0NhcnQudG9PYmplY3QoKSk7XHJcbiAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoe1xyXG4gICAgICAgICAgICAgICAgY2FydDpuZ0NhcnQudG9PYmplY3QoKVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xyXG5cclxuICAgICAgICB9XHJcblxyXG4gfV0pXHJcblxyXG4uc2VydmljZSgnbmdDYXJ0LmZ1bGZpbG1lbnQuaHR0cCcsIFsnJGh0dHAnLCAnbmdDYXJ0JywgZnVuY3Rpb24oJGh0dHAsIG5nQ2FydCl7XHJcblxyXG4gICAgICAgIHRoaXMuY2hlY2tvdXQgPSBmdW5jdGlvbihzZXR0aW5ncyl7XHJcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5wb3N0KHNldHRpbmdzLnVybCxcclxuICAgICAgICAgICAgICAgIHsgZGF0YTogbmdDYXJ0LnRvT2JqZWN0KCksIG9wdGlvbnM6IHNldHRpbmdzLm9wdGlvbnN9KTtcclxuICAgICAgICB9XHJcbiB9XSlcclxuXHJcblxyXG4uc2VydmljZSgnbmdDYXJ0LmZ1bGZpbG1lbnQucGF5cGFsJywgWyckaHR0cCcsICduZ0NhcnQnLCBmdW5jdGlvbigkaHR0cCwgbmdDYXJ0KXtcclxuXHJcblxyXG59XSk7XHJcbiIsIihmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7XG5cdGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0Jylcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFtdLCBmYWN0b3J5KTtcblx0ZWxzZSB7XG5cdFx0dmFyIGEgPSBmYWN0b3J5KCk7XG5cdFx0Zm9yKHZhciBpIGluIGEpICh0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgPyBleHBvcnRzIDogcm9vdClbaV0gPSBhW2ldO1xuXHR9XG59KSh0aGlzLCBmdW5jdGlvbigpIHtcbnJldHVybiAvKioqKioqLyAoZnVuY3Rpb24obW9kdWxlcykgeyAvLyB3ZWJwYWNrQm9vdHN0cmFwXG4vKioqKioqLyBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuLyoqKioqKi8gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuLyoqKioqKi8gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbi8qKioqKiovIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbi8qKioqKiovIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbi8qKioqKiovIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuXG4vKioqKioqLyBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbi8qKioqKiovIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4vKioqKioqLyBcdFx0XHRleHBvcnRzOiB7fSxcbi8qKioqKiovIFx0XHRcdGlkOiBtb2R1bGVJZCxcbi8qKioqKiovIFx0XHRcdGxvYWRlZDogZmFsc2Vcbi8qKioqKiovIFx0XHR9O1xuXG4vKioqKioqLyBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4vKioqKioqLyBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbi8qKioqKiovIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4vKioqKioqLyBcdFx0bW9kdWxlLmxvYWRlZCA9IHRydWU7XG5cbi8qKioqKiovIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuLyoqKioqKi8gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbi8qKioqKiovIFx0fVxuXG5cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4vKioqKioqLyBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cbi8qKioqKiovIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vKioqKioqLyBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuLyoqKioqKi8gfSlcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqKioqLyAoW1xuLyogMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHQvKlxuXHQqXG5cdCogQSBBbmd1bGFySlMgbW9kdWxlIHRoYXQgaW1wbGVtZW50cyB0aGUgSFRNTDUgVzNDIHNhdmVBcygpIGluIGJyb3dzZXJzIHRoYXRcblx0KiBkbyBub3QgbmF0aXZlbHkgc3VwcG9ydCBpdFxuXHQqXG5cdCogKGMpIDIwMTUgUGhpbGlwcCBBbGZlcm92XG5cdCogTGljZW5zZTogTUlUXG5cdCpcblx0Ki9cblxuXHRtb2R1bGUuZXhwb3J0cyA9ICduZ0ZpbGVTYXZlcic7XG5cblx0YW5ndWxhci5tb2R1bGUoJ25nRmlsZVNhdmVyJywgW10pXG5cdCAgLmZhY3RvcnkoJ0ZpbGVTYXZlcicsIFsnQmxvYicsICdTYXZlQXMnLCAnRmlsZVNhdmVyVXRpbHMnLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpXSlcblx0ICAuZmFjdG9yeSgnRmlsZVNhdmVyVXRpbHMnLCBbX193ZWJwYWNrX3JlcXVpcmVfXygyKV0pXG5cdCAgLmZhY3RvcnkoJ0Jsb2InLCBbJyR3aW5kb3cnLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpXSlcblx0ICAuZmFjdG9yeSgnU2F2ZUFzJywgW19fd2VicGFja19yZXF1aXJlX18oNSldKTtcblxuXG4vKioqLyB9LFxuLyogMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gRmlsZVNhdmVyKEJsb2IsIFNhdmVBcywgRmlsZVNhdmVyVXRpbHMpIHtcblxuXHQgIGZ1bmN0aW9uIHNhdmUoYmxvYiwgZmlsZW5hbWUsIGRpc2FibGVBdXRvQk9NKSB7XG5cdCAgICB0cnkge1xuXHQgICAgICBTYXZlQXMoYmxvYiwgZmlsZW5hbWUsIGRpc2FibGVBdXRvQk9NKTtcblx0ICAgIH0gY2F0Y2goZXJyKSB7XG5cdCAgICAgIEZpbGVTYXZlclV0aWxzLmhhbmRsZUVycm9ycyhlcnIubWVzc2FnZSk7XG5cdCAgICB9XG5cdCAgfVxuXG5cdCAgcmV0dXJuIHtcblxuXHQgICAgLyoqXG5cdCAgICAqIHNhdmVBc1xuXHQgICAgKiBJbW1lZGlhdGVseSBzdGFydHMgc2F2aW5nIGEgZmlsZSwgcmV0dXJucyB1bmRlZmluZWQuXG5cdCAgICAqXG5cdCAgICAqIEBuYW1lIHNhdmVBc1xuXHQgICAgKiBAZnVuY3Rpb25cblx0ICAgICogQHBhcmFtIHtCbG9ifSBkYXRhIEEgQmxvYiBpbnN0YW5jZVxuXHQgICAgKiBAcGFyYW0ge09iamVjdH0gZmlsZW5hbWUgQ3VzdG9tIGZpbGVuYW1lIChleHRlbnNpb24gaXMgb3B0aW9uYWwpXG5cdCAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gZGlzYWJsZUF1dG9CT00gRGlzYWJsZSBhdXRvbWF0aWNhbGx5IHByb3ZpZGVkIFVuaWNvZGVcblx0ICAgICogdGV4dCBlbmNvZGluZyBoaW50c1xuXHQgICAgKlxuXHQgICAgKiBAcmV0dXJuIHtVbmRlZmluZWR9XG5cdCAgICAqL1xuXG5cdCAgICBzYXZlQXM6IGZ1bmN0aW9uKGRhdGEsIGZpbGVuYW1lLCBkaXNhYmxlQXV0b0JPTSkge1xuXG5cdCAgICAgIGlmICghRmlsZVNhdmVyVXRpbHMuaXNCbG9iSW5zdGFuY2UoZGF0YSkpIHtcblx0ICAgICAgICBGaWxlU2F2ZXJVdGlscy5oYW5kbGVFcnJvcnMoJ0RhdGEgYXJndW1lbnQgc2hvdWxkIGJlIGEgYmxvYiBpbnN0YW5jZScpO1xuXHQgICAgICB9XG5cblx0ICAgICAgaWYgKCFGaWxlU2F2ZXJVdGlscy5pc1N0cmluZyhmaWxlbmFtZSkpIHtcblx0ICAgICAgICBGaWxlU2F2ZXJVdGlscy5oYW5kbGVFcnJvcnMoJ0ZpbGVuYW1lIGFyZ3VtZW50IHNob3VsZCBiZSBhIHN0cmluZycpO1xuXHQgICAgICB9XG5cblx0ICAgICAgcmV0dXJuIHNhdmUoZGF0YSwgZmlsZW5hbWUsIGRpc2FibGVBdXRvQk9NKTtcblx0ICAgIH1cblx0ICB9O1xuXHR9O1xuXG5cbi8qKiovIH0sXG4vKiAyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQndXNlIHN0cmljdCc7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBGaWxlU2F2ZXJVdGlscygpIHtcblx0ICByZXR1cm4ge1xuXHQgICAgaGFuZGxlRXJyb3JzOiBmdW5jdGlvbihtc2cpIHtcblx0ICAgICAgdGhyb3cgbmV3IEVycm9yKG1zZyk7XG5cdCAgICB9LFxuXHQgICAgaXNTdHJpbmc6IGZ1bmN0aW9uKG9iaikge1xuXHQgICAgICByZXR1cm4gdHlwZW9mIG9iaiA9PT0gJ3N0cmluZycgfHwgb2JqIGluc3RhbmNlb2YgU3RyaW5nO1xuXHQgICAgfSxcblx0ICAgIGlzVW5kZWZpbmVkOiBmdW5jdGlvbihvYmopIHtcblx0ICAgICAgcmV0dXJuIHR5cGVvZiBvYmogPT09ICd1bmRlZmluZWQnO1xuXHQgICAgfSxcblx0ICAgIGlzQmxvYkluc3RhbmNlOiBmdW5jdGlvbihvYmopIHtcblx0ICAgICAgcmV0dXJuIG9iaiBpbnN0YW5jZW9mIEJsb2I7XG5cdCAgICB9XG5cdCAgfTtcblx0fTtcblxuXG4vKioqLyB9LFxuLyogMyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXG5cdF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBCbG9iKCR3aW5kb3cpIHtcblx0ICByZXR1cm4gJHdpbmRvdy5CbG9iO1xuXHR9O1xuXG5cbi8qKiovIH0sXG4vKiA0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKiBCbG9iLmpzXG5cdCAqIEEgQmxvYiBpbXBsZW1lbnRhdGlvbi5cblx0ICogMjAxNC0wNy0yNFxuXHQgKlxuXHQgKiBCeSBFbGkgR3JleSwgaHR0cDovL2VsaWdyZXkuY29tXG5cdCAqIEJ5IERldmluIFNhbWFyaW4sIGh0dHBzOi8vZ2l0aHViLmNvbS9kc2FtYXJpblxuXHQgKiBMaWNlbnNlOiBYMTEvTUlUXG5cdCAqICAgU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9lbGlncmV5L0Jsb2IuanMvYmxvYi9tYXN0ZXIvTElDRU5TRS5tZFxuXHQgKi9cblxuXHQvKmdsb2JhbCBzZWxmLCB1bmVzY2FwZSAqL1xuXHQvKmpzbGludCBiaXR3aXNlOiB0cnVlLCByZWdleHA6IHRydWUsIGNvbmZ1c2lvbjogdHJ1ZSwgZXM1OiB0cnVlLCB2YXJzOiB0cnVlLCB3aGl0ZTogdHJ1ZSxcblx0ICBwbHVzcGx1czogdHJ1ZSAqL1xuXG5cdC8qISBAc291cmNlIGh0dHA6Ly9wdXJsLmVsaWdyZXkuY29tL2dpdGh1Yi9CbG9iLmpzL2Jsb2IvbWFzdGVyL0Jsb2IuanMgKi9cblxuXHQoZnVuY3Rpb24gKHZpZXcpIHtcblx0XHRcInVzZSBzdHJpY3RcIjtcblxuXHRcdHZpZXcuVVJMID0gdmlldy5VUkwgfHwgdmlldy53ZWJraXRVUkw7XG5cblx0XHRpZiAodmlldy5CbG9iICYmIHZpZXcuVVJMKSB7XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRuZXcgQmxvYjtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fSBjYXRjaCAoZSkge31cblx0XHR9XG5cblx0XHQvLyBJbnRlcm5hbGx5IHdlIHVzZSBhIEJsb2JCdWlsZGVyIGltcGxlbWVudGF0aW9uIHRvIGJhc2UgQmxvYiBvZmYgb2Zcblx0XHQvLyBpbiBvcmRlciB0byBzdXBwb3J0IG9sZGVyIGJyb3dzZXJzIHRoYXQgb25seSBoYXZlIEJsb2JCdWlsZGVyXG5cdFx0dmFyIEJsb2JCdWlsZGVyID0gdmlldy5CbG9iQnVpbGRlciB8fCB2aWV3LldlYktpdEJsb2JCdWlsZGVyIHx8IHZpZXcuTW96QmxvYkJ1aWxkZXIgfHwgKGZ1bmN0aW9uKHZpZXcpIHtcblx0XHRcdHZhclxuXHRcdFx0XHQgIGdldF9jbGFzcyA9IGZ1bmN0aW9uKG9iamVjdCkge1xuXHRcdFx0XHRcdHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwob2JqZWN0KS5tYXRjaCgvXlxcW29iamVjdFxccyguKilcXF0kLylbMV07XG5cdFx0XHRcdH1cblx0XHRcdFx0LCBGYWtlQmxvYkJ1aWxkZXIgPSBmdW5jdGlvbiBCbG9iQnVpbGRlcigpIHtcblx0XHRcdFx0XHR0aGlzLmRhdGEgPSBbXTtcblx0XHRcdFx0fVxuXHRcdFx0XHQsIEZha2VCbG9iID0gZnVuY3Rpb24gQmxvYihkYXRhLCB0eXBlLCBlbmNvZGluZykge1xuXHRcdFx0XHRcdHRoaXMuZGF0YSA9IGRhdGE7XG5cdFx0XHRcdFx0dGhpcy5zaXplID0gZGF0YS5sZW5ndGg7XG5cdFx0XHRcdFx0dGhpcy50eXBlID0gdHlwZTtcblx0XHRcdFx0XHR0aGlzLmVuY29kaW5nID0gZW5jb2Rpbmc7XG5cdFx0XHRcdH1cblx0XHRcdFx0LCBGQkJfcHJvdG8gPSBGYWtlQmxvYkJ1aWxkZXIucHJvdG90eXBlXG5cdFx0XHRcdCwgRkJfcHJvdG8gPSBGYWtlQmxvYi5wcm90b3R5cGVcblx0XHRcdFx0LCBGaWxlUmVhZGVyU3luYyA9IHZpZXcuRmlsZVJlYWRlclN5bmNcblx0XHRcdFx0LCBGaWxlRXhjZXB0aW9uID0gZnVuY3Rpb24odHlwZSkge1xuXHRcdFx0XHRcdHRoaXMuY29kZSA9IHRoaXNbdGhpcy5uYW1lID0gdHlwZV07XG5cdFx0XHRcdH1cblx0XHRcdFx0LCBmaWxlX2V4X2NvZGVzID0gKFxuXHRcdFx0XHRcdCAgXCJOT1RfRk9VTkRfRVJSIFNFQ1VSSVRZX0VSUiBBQk9SVF9FUlIgTk9UX1JFQURBQkxFX0VSUiBFTkNPRElOR19FUlIgXCJcblx0XHRcdFx0XHQrIFwiTk9fTU9ESUZJQ0FUSU9OX0FMTE9XRURfRVJSIElOVkFMSURfU1RBVEVfRVJSIFNZTlRBWF9FUlJcIlxuXHRcdFx0XHQpLnNwbGl0KFwiIFwiKVxuXHRcdFx0XHQsIGZpbGVfZXhfY29kZSA9IGZpbGVfZXhfY29kZXMubGVuZ3RoXG5cdFx0XHRcdCwgcmVhbF9VUkwgPSB2aWV3LlVSTCB8fCB2aWV3LndlYmtpdFVSTCB8fCB2aWV3XG5cdFx0XHRcdCwgcmVhbF9jcmVhdGVfb2JqZWN0X1VSTCA9IHJlYWxfVVJMLmNyZWF0ZU9iamVjdFVSTFxuXHRcdFx0XHQsIHJlYWxfcmV2b2tlX29iamVjdF9VUkwgPSByZWFsX1VSTC5yZXZva2VPYmplY3RVUkxcblx0XHRcdFx0LCBVUkwgPSByZWFsX1VSTFxuXHRcdFx0XHQsIGJ0b2EgPSB2aWV3LmJ0b2Fcblx0XHRcdFx0LCBhdG9iID0gdmlldy5hdG9iXG5cblx0XHRcdFx0LCBBcnJheUJ1ZmZlciA9IHZpZXcuQXJyYXlCdWZmZXJcblx0XHRcdFx0LCBVaW50OEFycmF5ID0gdmlldy5VaW50OEFycmF5XG5cblx0XHRcdFx0LCBvcmlnaW4gPSAvXltcXHctXSs6XFwvKlxcWz9bXFx3XFwuOi1dK1xcXT8oPzo6WzAtOV0rKT8vXG5cdFx0XHQ7XG5cdFx0XHRGYWtlQmxvYi5mYWtlID0gRkJfcHJvdG8uZmFrZSA9IHRydWU7XG5cdFx0XHR3aGlsZSAoZmlsZV9leF9jb2RlLS0pIHtcblx0XHRcdFx0RmlsZUV4Y2VwdGlvbi5wcm90b3R5cGVbZmlsZV9leF9jb2Rlc1tmaWxlX2V4X2NvZGVdXSA9IGZpbGVfZXhfY29kZSArIDE7XG5cdFx0XHR9XG5cdFx0XHQvLyBQb2x5ZmlsbCBVUkxcblx0XHRcdGlmICghcmVhbF9VUkwuY3JlYXRlT2JqZWN0VVJMKSB7XG5cdFx0XHRcdFVSTCA9IHZpZXcuVVJMID0gZnVuY3Rpb24odXJpKSB7XG5cdFx0XHRcdFx0dmFyXG5cdFx0XHRcdFx0XHQgIHVyaV9pbmZvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbFwiLCBcImFcIilcblx0XHRcdFx0XHRcdCwgdXJpX29yaWdpblxuXHRcdFx0XHRcdDtcblx0XHRcdFx0XHR1cmlfaW5mby5ocmVmID0gdXJpO1xuXHRcdFx0XHRcdGlmICghKFwib3JpZ2luXCIgaW4gdXJpX2luZm8pKSB7XG5cdFx0XHRcdFx0XHRpZiAodXJpX2luZm8ucHJvdG9jb2wudG9Mb3dlckNhc2UoKSA9PT0gXCJkYXRhOlwiKSB7XG5cdFx0XHRcdFx0XHRcdHVyaV9pbmZvLm9yaWdpbiA9IG51bGw7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHR1cmlfb3JpZ2luID0gdXJpLm1hdGNoKG9yaWdpbik7XG5cdFx0XHRcdFx0XHRcdHVyaV9pbmZvLm9yaWdpbiA9IHVyaV9vcmlnaW4gJiYgdXJpX29yaWdpblsxXTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmV0dXJuIHVyaV9pbmZvO1xuXHRcdFx0XHR9O1xuXHRcdFx0fVxuXHRcdFx0VVJMLmNyZWF0ZU9iamVjdFVSTCA9IGZ1bmN0aW9uKGJsb2IpIHtcblx0XHRcdFx0dmFyXG5cdFx0XHRcdFx0ICB0eXBlID0gYmxvYi50eXBlXG5cdFx0XHRcdFx0LCBkYXRhX1VSSV9oZWFkZXJcblx0XHRcdFx0O1xuXHRcdFx0XHRpZiAodHlwZSA9PT0gbnVsbCkge1xuXHRcdFx0XHRcdHR5cGUgPSBcImFwcGxpY2F0aW9uL29jdGV0LXN0cmVhbVwiO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmIChibG9iIGluc3RhbmNlb2YgRmFrZUJsb2IpIHtcblx0XHRcdFx0XHRkYXRhX1VSSV9oZWFkZXIgPSBcImRhdGE6XCIgKyB0eXBlO1xuXHRcdFx0XHRcdGlmIChibG9iLmVuY29kaW5nID09PSBcImJhc2U2NFwiKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gZGF0YV9VUklfaGVhZGVyICsgXCI7YmFzZTY0LFwiICsgYmxvYi5kYXRhO1xuXHRcdFx0XHRcdH0gZWxzZSBpZiAoYmxvYi5lbmNvZGluZyA9PT0gXCJVUklcIikge1xuXHRcdFx0XHRcdFx0cmV0dXJuIGRhdGFfVVJJX2hlYWRlciArIFwiLFwiICsgZGVjb2RlVVJJQ29tcG9uZW50KGJsb2IuZGF0YSk7XG5cdFx0XHRcdFx0fSBpZiAoYnRvYSkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIGRhdGFfVVJJX2hlYWRlciArIFwiO2Jhc2U2NCxcIiArIGJ0b2EoYmxvYi5kYXRhKTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0cmV0dXJuIGRhdGFfVVJJX2hlYWRlciArIFwiLFwiICsgZW5jb2RlVVJJQ29tcG9uZW50KGJsb2IuZGF0YSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2UgaWYgKHJlYWxfY3JlYXRlX29iamVjdF9VUkwpIHtcblx0XHRcdFx0XHRyZXR1cm4gcmVhbF9jcmVhdGVfb2JqZWN0X1VSTC5jYWxsKHJlYWxfVVJMLCBibG9iKTtcblx0XHRcdFx0fVxuXHRcdFx0fTtcblx0XHRcdFVSTC5yZXZva2VPYmplY3RVUkwgPSBmdW5jdGlvbihvYmplY3RfVVJMKSB7XG5cdFx0XHRcdGlmIChvYmplY3RfVVJMLnN1YnN0cmluZygwLCA1KSAhPT0gXCJkYXRhOlwiICYmIHJlYWxfcmV2b2tlX29iamVjdF9VUkwpIHtcblx0XHRcdFx0XHRyZWFsX3Jldm9rZV9vYmplY3RfVVJMLmNhbGwocmVhbF9VUkwsIG9iamVjdF9VUkwpO1xuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXHRcdFx0RkJCX3Byb3RvLmFwcGVuZCA9IGZ1bmN0aW9uKGRhdGEvKiwgZW5kaW5ncyovKSB7XG5cdFx0XHRcdHZhciBiYiA9IHRoaXMuZGF0YTtcblx0XHRcdFx0Ly8gZGVjb2RlIGRhdGEgdG8gYSBiaW5hcnkgc3RyaW5nXG5cdFx0XHRcdGlmIChVaW50OEFycmF5ICYmIChkYXRhIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIgfHwgZGF0YSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpKSB7XG5cdFx0XHRcdFx0dmFyXG5cdFx0XHRcdFx0XHQgIHN0ciA9IFwiXCJcblx0XHRcdFx0XHRcdCwgYnVmID0gbmV3IFVpbnQ4QXJyYXkoZGF0YSlcblx0XHRcdFx0XHRcdCwgaSA9IDBcblx0XHRcdFx0XHRcdCwgYnVmX2xlbiA9IGJ1Zi5sZW5ndGhcblx0XHRcdFx0XHQ7XG5cdFx0XHRcdFx0Zm9yICg7IGkgPCBidWZfbGVuOyBpKyspIHtcblx0XHRcdFx0XHRcdHN0ciArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGJ1ZltpXSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGJiLnB1c2goc3RyKTtcblx0XHRcdFx0fSBlbHNlIGlmIChnZXRfY2xhc3MoZGF0YSkgPT09IFwiQmxvYlwiIHx8IGdldF9jbGFzcyhkYXRhKSA9PT0gXCJGaWxlXCIpIHtcblx0XHRcdFx0XHRpZiAoRmlsZVJlYWRlclN5bmMpIHtcblx0XHRcdFx0XHRcdHZhciBmciA9IG5ldyBGaWxlUmVhZGVyU3luYztcblx0XHRcdFx0XHRcdGJiLnB1c2goZnIucmVhZEFzQmluYXJ5U3RyaW5nKGRhdGEpKTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0Ly8gYXN5bmMgRmlsZVJlYWRlciB3b24ndCB3b3JrIGFzIEJsb2JCdWlsZGVyIGlzIHN5bmNcblx0XHRcdFx0XHRcdHRocm93IG5ldyBGaWxlRXhjZXB0aW9uKFwiTk9UX1JFQURBQkxFX0VSUlwiKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gZWxzZSBpZiAoZGF0YSBpbnN0YW5jZW9mIEZha2VCbG9iKSB7XG5cdFx0XHRcdFx0aWYgKGRhdGEuZW5jb2RpbmcgPT09IFwiYmFzZTY0XCIgJiYgYXRvYikge1xuXHRcdFx0XHRcdFx0YmIucHVzaChhdG9iKGRhdGEuZGF0YSkpO1xuXHRcdFx0XHRcdH0gZWxzZSBpZiAoZGF0YS5lbmNvZGluZyA9PT0gXCJVUklcIikge1xuXHRcdFx0XHRcdFx0YmIucHVzaChkZWNvZGVVUklDb21wb25lbnQoZGF0YS5kYXRhKSk7XG5cdFx0XHRcdFx0fSBlbHNlIGlmIChkYXRhLmVuY29kaW5nID09PSBcInJhd1wiKSB7XG5cdFx0XHRcdFx0XHRiYi5wdXNoKGRhdGEuZGF0YSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGlmICh0eXBlb2YgZGF0YSAhPT0gXCJzdHJpbmdcIikge1xuXHRcdFx0XHRcdFx0ZGF0YSArPSBcIlwiOyAvLyBjb252ZXJ0IHVuc3VwcG9ydGVkIHR5cGVzIHRvIHN0cmluZ3Ncblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Ly8gZGVjb2RlIFVURi0xNiB0byBiaW5hcnkgc3RyaW5nXG5cdFx0XHRcdFx0YmIucHVzaCh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoZGF0YSkpKTtcblx0XHRcdFx0fVxuXHRcdFx0fTtcblx0XHRcdEZCQl9wcm90by5nZXRCbG9iID0gZnVuY3Rpb24odHlwZSkge1xuXHRcdFx0XHRpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHtcblx0XHRcdFx0XHR0eXBlID0gbnVsbDtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gbmV3IEZha2VCbG9iKHRoaXMuZGF0YS5qb2luKFwiXCIpLCB0eXBlLCBcInJhd1wiKTtcblx0XHRcdH07XG5cdFx0XHRGQkJfcHJvdG8udG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0cmV0dXJuIFwiW29iamVjdCBCbG9iQnVpbGRlcl1cIjtcblx0XHRcdH07XG5cdFx0XHRGQl9wcm90by5zbGljZSA9IGZ1bmN0aW9uKHN0YXJ0LCBlbmQsIHR5cGUpIHtcblx0XHRcdFx0dmFyIGFyZ3MgPSBhcmd1bWVudHMubGVuZ3RoO1xuXHRcdFx0XHRpZiAoYXJncyA8IDMpIHtcblx0XHRcdFx0XHR0eXBlID0gbnVsbDtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gbmV3IEZha2VCbG9iKFxuXHRcdFx0XHRcdCAgdGhpcy5kYXRhLnNsaWNlKHN0YXJ0LCBhcmdzID4gMSA/IGVuZCA6IHRoaXMuZGF0YS5sZW5ndGgpXG5cdFx0XHRcdFx0LCB0eXBlXG5cdFx0XHRcdFx0LCB0aGlzLmVuY29kaW5nXG5cdFx0XHRcdCk7XG5cdFx0XHR9O1xuXHRcdFx0RkJfcHJvdG8udG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0cmV0dXJuIFwiW29iamVjdCBCbG9iXVwiO1xuXHRcdFx0fTtcblx0XHRcdEZCX3Byb3RvLmNsb3NlID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHRoaXMuc2l6ZSA9IDA7XG5cdFx0XHRcdGRlbGV0ZSB0aGlzLmRhdGE7XG5cdFx0XHR9O1xuXHRcdFx0cmV0dXJuIEZha2VCbG9iQnVpbGRlcjtcblx0XHR9KHZpZXcpKTtcblxuXHRcdHZpZXcuQmxvYiA9IGZ1bmN0aW9uKGJsb2JQYXJ0cywgb3B0aW9ucykge1xuXHRcdFx0dmFyIHR5cGUgPSBvcHRpb25zID8gKG9wdGlvbnMudHlwZSB8fCBcIlwiKSA6IFwiXCI7XG5cdFx0XHR2YXIgYnVpbGRlciA9IG5ldyBCbG9iQnVpbGRlcigpO1xuXHRcdFx0aWYgKGJsb2JQYXJ0cykge1xuXHRcdFx0XHRmb3IgKHZhciBpID0gMCwgbGVuID0gYmxvYlBhcnRzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG5cdFx0XHRcdFx0aWYgKFVpbnQ4QXJyYXkgJiYgYmxvYlBhcnRzW2ldIGluc3RhbmNlb2YgVWludDhBcnJheSkge1xuXHRcdFx0XHRcdFx0YnVpbGRlci5hcHBlbmQoYmxvYlBhcnRzW2ldLmJ1ZmZlcik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGVsc2Uge1xuXHRcdFx0XHRcdFx0YnVpbGRlci5hcHBlbmQoYmxvYlBhcnRzW2ldKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHZhciBibG9iID0gYnVpbGRlci5nZXRCbG9iKHR5cGUpO1xuXHRcdFx0aWYgKCFibG9iLnNsaWNlICYmIGJsb2Iud2Via2l0U2xpY2UpIHtcblx0XHRcdFx0YmxvYi5zbGljZSA9IGJsb2Iud2Via2l0U2xpY2U7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gYmxvYjtcblx0XHR9O1xuXG5cdFx0dmFyIGdldFByb3RvdHlwZU9mID0gT2JqZWN0LmdldFByb3RvdHlwZU9mIHx8IGZ1bmN0aW9uKG9iamVjdCkge1xuXHRcdFx0cmV0dXJuIG9iamVjdC5fX3Byb3RvX187XG5cdFx0fTtcblx0XHR2aWV3LkJsb2IucHJvdG90eXBlID0gZ2V0UHJvdG90eXBlT2YobmV3IHZpZXcuQmxvYigpKTtcblx0fSh0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIiAmJiBzZWxmIHx8IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiYgd2luZG93IHx8IHRoaXMuY29udGVudCB8fCB0aGlzKSk7XG5cblxuLyoqKi8gfSxcbi8qIDUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0JztcblxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIFNhdmVBcygpIHtcblx0ICByZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyg2KS5zYXZlQXMgfHwgZnVuY3Rpb24oKSB7fTtcblx0fTtcblxuXG4vKioqLyB9LFxuLyogNiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIF9fV0VCUEFDS19BTURfREVGSU5FX0FSUkFZX18sIF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fOy8qIEZpbGVTYXZlci5qc1xuXHQgKiBBIHNhdmVBcygpIEZpbGVTYXZlciBpbXBsZW1lbnRhdGlvbi5cblx0ICogMS4zLjJcblx0ICogMjAxNi0wNi0xNiAxODoyNToxOVxuXHQgKlxuXHQgKiBCeSBFbGkgR3JleSwgaHR0cDovL2VsaWdyZXkuY29tXG5cdCAqIExpY2Vuc2U6IE1JVFxuXHQgKiAgIFNlZSBodHRwczovL2dpdGh1Yi5jb20vZWxpZ3JleS9GaWxlU2F2ZXIuanMvYmxvYi9tYXN0ZXIvTElDRU5TRS5tZFxuXHQgKi9cblxuXHQvKmdsb2JhbCBzZWxmICovXG5cdC8qanNsaW50IGJpdHdpc2U6IHRydWUsIGluZGVudDogNCwgbGF4YnJlYWs6IHRydWUsIGxheGNvbW1hOiB0cnVlLCBzbWFydHRhYnM6IHRydWUsIHBsdXNwbHVzOiB0cnVlICovXG5cblx0LyohIEBzb3VyY2UgaHR0cDovL3B1cmwuZWxpZ3JleS5jb20vZ2l0aHViL0ZpbGVTYXZlci5qcy9ibG9iL21hc3Rlci9GaWxlU2F2ZXIuanMgKi9cblxuXHR2YXIgc2F2ZUFzID0gc2F2ZUFzIHx8IChmdW5jdGlvbih2aWV3KSB7XG5cdFx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFx0Ly8gSUUgPDEwIGlzIGV4cGxpY2l0bHkgdW5zdXBwb3J0ZWRcblx0XHRpZiAodHlwZW9mIHZpZXcgPT09IFwidW5kZWZpbmVkXCIgfHwgdHlwZW9mIG5hdmlnYXRvciAhPT0gXCJ1bmRlZmluZWRcIiAmJiAvTVNJRSBbMS05XVxcLi8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHR2YXJcblx0XHRcdCAgZG9jID0gdmlldy5kb2N1bWVudFxuXHRcdFx0ICAvLyBvbmx5IGdldCBVUkwgd2hlbiBuZWNlc3NhcnkgaW4gY2FzZSBCbG9iLmpzIGhhc24ndCBvdmVycmlkZGVuIGl0IHlldFxuXHRcdFx0LCBnZXRfVVJMID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHJldHVybiB2aWV3LlVSTCB8fCB2aWV3LndlYmtpdFVSTCB8fCB2aWV3O1xuXHRcdFx0fVxuXHRcdFx0LCBzYXZlX2xpbmsgPSBkb2MuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbFwiLCBcImFcIilcblx0XHRcdCwgY2FuX3VzZV9zYXZlX2xpbmsgPSBcImRvd25sb2FkXCIgaW4gc2F2ZV9saW5rXG5cdFx0XHQsIGNsaWNrID0gZnVuY3Rpb24obm9kZSkge1xuXHRcdFx0XHR2YXIgZXZlbnQgPSBuZXcgTW91c2VFdmVudChcImNsaWNrXCIpO1xuXHRcdFx0XHRub2RlLmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuXHRcdFx0fVxuXHRcdFx0LCBpc19zYWZhcmkgPSAvY29uc3RydWN0b3IvaS50ZXN0KHZpZXcuSFRNTEVsZW1lbnQpXG5cdFx0XHQsIGlzX2Nocm9tZV9pb3MgPS9DcmlPU1xcL1tcXGRdKy8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KVxuXHRcdFx0LCB0aHJvd19vdXRzaWRlID0gZnVuY3Rpb24oZXgpIHtcblx0XHRcdFx0KHZpZXcuc2V0SW1tZWRpYXRlIHx8IHZpZXcuc2V0VGltZW91dCkoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0dGhyb3cgZXg7XG5cdFx0XHRcdH0sIDApO1xuXHRcdFx0fVxuXHRcdFx0LCBmb3JjZV9zYXZlYWJsZV90eXBlID0gXCJhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW1cIlxuXHRcdFx0Ly8gdGhlIEJsb2IgQVBJIGlzIGZ1bmRhbWVudGFsbHkgYnJva2VuIGFzIHRoZXJlIGlzIG5vIFwiZG93bmxvYWRmaW5pc2hlZFwiIGV2ZW50IHRvIHN1YnNjcmliZSB0b1xuXHRcdFx0LCBhcmJpdHJhcnlfcmV2b2tlX3RpbWVvdXQgPSAxMDAwICogNDAgLy8gaW4gbXNcblx0XHRcdCwgcmV2b2tlID0gZnVuY3Rpb24oZmlsZSkge1xuXHRcdFx0XHR2YXIgcmV2b2tlciA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdGlmICh0eXBlb2YgZmlsZSA9PT0gXCJzdHJpbmdcIikgeyAvLyBmaWxlIGlzIGFuIG9iamVjdCBVUkxcblx0XHRcdFx0XHRcdGdldF9VUkwoKS5yZXZva2VPYmplY3RVUkwoZmlsZSk7XG5cdFx0XHRcdFx0fSBlbHNlIHsgLy8gZmlsZSBpcyBhIEZpbGVcblx0XHRcdFx0XHRcdGZpbGUucmVtb3ZlKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9O1xuXHRcdFx0XHRzZXRUaW1lb3V0KHJldm9rZXIsIGFyYml0cmFyeV9yZXZva2VfdGltZW91dCk7XG5cdFx0XHR9XG5cdFx0XHQsIGRpc3BhdGNoID0gZnVuY3Rpb24oZmlsZXNhdmVyLCBldmVudF90eXBlcywgZXZlbnQpIHtcblx0XHRcdFx0ZXZlbnRfdHlwZXMgPSBbXS5jb25jYXQoZXZlbnRfdHlwZXMpO1xuXHRcdFx0XHR2YXIgaSA9IGV2ZW50X3R5cGVzLmxlbmd0aDtcblx0XHRcdFx0d2hpbGUgKGktLSkge1xuXHRcdFx0XHRcdHZhciBsaXN0ZW5lciA9IGZpbGVzYXZlcltcIm9uXCIgKyBldmVudF90eXBlc1tpXV07XG5cdFx0XHRcdFx0aWYgKHR5cGVvZiBsaXN0ZW5lciA9PT0gXCJmdW5jdGlvblwiKSB7XG5cdFx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0XHRsaXN0ZW5lci5jYWxsKGZpbGVzYXZlciwgZXZlbnQgfHwgZmlsZXNhdmVyKTtcblx0XHRcdFx0XHRcdH0gY2F0Y2ggKGV4KSB7XG5cdFx0XHRcdFx0XHRcdHRocm93X291dHNpZGUoZXgpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0LCBhdXRvX2JvbSA9IGZ1bmN0aW9uKGJsb2IpIHtcblx0XHRcdFx0Ly8gcHJlcGVuZCBCT00gZm9yIFVURi04IFhNTCBhbmQgdGV4dC8qIHR5cGVzIChpbmNsdWRpbmcgSFRNTClcblx0XHRcdFx0Ly8gbm90ZTogeW91ciBicm93c2VyIHdpbGwgYXV0b21hdGljYWxseSBjb252ZXJ0IFVURi0xNiBVK0ZFRkYgdG8gRUYgQkIgQkZcblx0XHRcdFx0aWYgKC9eXFxzKig/OnRleHRcXC9cXFMqfGFwcGxpY2F0aW9uXFwveG1sfFxcUypcXC9cXFMqXFwreG1sKVxccyo7LipjaGFyc2V0XFxzKj1cXHMqdXRmLTgvaS50ZXN0KGJsb2IudHlwZSkpIHtcblx0XHRcdFx0XHRyZXR1cm4gbmV3IEJsb2IoW1N0cmluZy5mcm9tQ2hhckNvZGUoMHhGRUZGKSwgYmxvYl0sIHt0eXBlOiBibG9iLnR5cGV9KTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gYmxvYjtcblx0XHRcdH1cblx0XHRcdCwgRmlsZVNhdmVyID0gZnVuY3Rpb24oYmxvYiwgbmFtZSwgbm9fYXV0b19ib20pIHtcblx0XHRcdFx0aWYgKCFub19hdXRvX2JvbSkge1xuXHRcdFx0XHRcdGJsb2IgPSBhdXRvX2JvbShibG9iKTtcblx0XHRcdFx0fVxuXHRcdFx0XHQvLyBGaXJzdCB0cnkgYS5kb3dubG9hZCwgdGhlbiB3ZWIgZmlsZXN5c3RlbSwgdGhlbiBvYmplY3QgVVJMc1xuXHRcdFx0XHR2YXJcblx0XHRcdFx0XHQgIGZpbGVzYXZlciA9IHRoaXNcblx0XHRcdFx0XHQsIHR5cGUgPSBibG9iLnR5cGVcblx0XHRcdFx0XHQsIGZvcmNlID0gdHlwZSA9PT0gZm9yY2Vfc2F2ZWFibGVfdHlwZVxuXHRcdFx0XHRcdCwgb2JqZWN0X3VybFxuXHRcdFx0XHRcdCwgZGlzcGF0Y2hfYWxsID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRkaXNwYXRjaChmaWxlc2F2ZXIsIFwid3JpdGVzdGFydCBwcm9ncmVzcyB3cml0ZSB3cml0ZWVuZFwiLnNwbGl0KFwiIFwiKSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdC8vIG9uIGFueSBmaWxlc3lzIGVycm9ycyByZXZlcnQgdG8gc2F2aW5nIHdpdGggb2JqZWN0IFVSTHNcblx0XHRcdFx0XHQsIGZzX2Vycm9yID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRpZiAoKGlzX2Nocm9tZV9pb3MgfHwgKGZvcmNlICYmIGlzX3NhZmFyaSkpICYmIHZpZXcuRmlsZVJlYWRlcikge1xuXHRcdFx0XHRcdFx0XHQvLyBTYWZhcmkgZG9lc24ndCBhbGxvdyBkb3dubG9hZGluZyBvZiBibG9iIHVybHNcblx0XHRcdFx0XHRcdFx0dmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG5cdFx0XHRcdFx0XHRcdHJlYWRlci5vbmxvYWRlbmQgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdFx0XHR2YXIgdXJsID0gaXNfY2hyb21lX2lvcyA/IHJlYWRlci5yZXN1bHQgOiByZWFkZXIucmVzdWx0LnJlcGxhY2UoL15kYXRhOlteO10qOy8sICdkYXRhOmF0dGFjaG1lbnQvZmlsZTsnKTtcblx0XHRcdFx0XHRcdFx0XHR2YXIgcG9wdXAgPSB2aWV3Lm9wZW4odXJsLCAnX2JsYW5rJyk7XG5cdFx0XHRcdFx0XHRcdFx0aWYoIXBvcHVwKSB2aWV3LmxvY2F0aW9uLmhyZWYgPSB1cmw7XG5cdFx0XHRcdFx0XHRcdFx0dXJsPXVuZGVmaW5lZDsgLy8gcmVsZWFzZSByZWZlcmVuY2UgYmVmb3JlIGRpc3BhdGNoaW5nXG5cdFx0XHRcdFx0XHRcdFx0ZmlsZXNhdmVyLnJlYWR5U3RhdGUgPSBmaWxlc2F2ZXIuRE9ORTtcblx0XHRcdFx0XHRcdFx0XHRkaXNwYXRjaF9hbGwoKTtcblx0XHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdFx0cmVhZGVyLnJlYWRBc0RhdGFVUkwoYmxvYik7XG5cdFx0XHRcdFx0XHRcdGZpbGVzYXZlci5yZWFkeVN0YXRlID0gZmlsZXNhdmVyLklOSVQ7XG5cdFx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdC8vIGRvbid0IGNyZWF0ZSBtb3JlIG9iamVjdCBVUkxzIHRoYW4gbmVlZGVkXG5cdFx0XHRcdFx0XHRpZiAoIW9iamVjdF91cmwpIHtcblx0XHRcdFx0XHRcdFx0b2JqZWN0X3VybCA9IGdldF9VUkwoKS5jcmVhdGVPYmplY3RVUkwoYmxvYik7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRpZiAoZm9yY2UpIHtcblx0XHRcdFx0XHRcdFx0dmlldy5sb2NhdGlvbi5ocmVmID0gb2JqZWN0X3VybDtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdHZhciBvcGVuZWQgPSB2aWV3Lm9wZW4ob2JqZWN0X3VybCwgXCJfYmxhbmtcIik7XG5cdFx0XHRcdFx0XHRcdGlmICghb3BlbmVkKSB7XG5cdFx0XHRcdFx0XHRcdFx0Ly8gQXBwbGUgZG9lcyBub3QgYWxsb3cgd2luZG93Lm9wZW4sIHNlZSBodHRwczovL2RldmVsb3Blci5hcHBsZS5jb20vbGlicmFyeS9zYWZhcmkvZG9jdW1lbnRhdGlvbi9Ub29scy9Db25jZXB0dWFsL1NhZmFyaUV4dGVuc2lvbkd1aWRlL1dvcmtpbmd3aXRoV2luZG93c2FuZFRhYnMvV29ya2luZ3dpdGhXaW5kb3dzYW5kVGFicy5odG1sXG5cdFx0XHRcdFx0XHRcdFx0dmlldy5sb2NhdGlvbi5ocmVmID0gb2JqZWN0X3VybDtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0ZmlsZXNhdmVyLnJlYWR5U3RhdGUgPSBmaWxlc2F2ZXIuRE9ORTtcblx0XHRcdFx0XHRcdGRpc3BhdGNoX2FsbCgpO1xuXHRcdFx0XHRcdFx0cmV2b2tlKG9iamVjdF91cmwpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0O1xuXHRcdFx0XHRmaWxlc2F2ZXIucmVhZHlTdGF0ZSA9IGZpbGVzYXZlci5JTklUO1xuXG5cdFx0XHRcdGlmIChjYW5fdXNlX3NhdmVfbGluaykge1xuXHRcdFx0XHRcdG9iamVjdF91cmwgPSBnZXRfVVJMKCkuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xuXHRcdFx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRzYXZlX2xpbmsuaHJlZiA9IG9iamVjdF91cmw7XG5cdFx0XHRcdFx0XHRzYXZlX2xpbmsuZG93bmxvYWQgPSBuYW1lO1xuXHRcdFx0XHRcdFx0Y2xpY2soc2F2ZV9saW5rKTtcblx0XHRcdFx0XHRcdGRpc3BhdGNoX2FsbCgpO1xuXHRcdFx0XHRcdFx0cmV2b2tlKG9iamVjdF91cmwpO1xuXHRcdFx0XHRcdFx0ZmlsZXNhdmVyLnJlYWR5U3RhdGUgPSBmaWxlc2F2ZXIuRE9ORTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRmc19lcnJvcigpO1xuXHRcdFx0fVxuXHRcdFx0LCBGU19wcm90byA9IEZpbGVTYXZlci5wcm90b3R5cGVcblx0XHRcdCwgc2F2ZUFzID0gZnVuY3Rpb24oYmxvYiwgbmFtZSwgbm9fYXV0b19ib20pIHtcblx0XHRcdFx0cmV0dXJuIG5ldyBGaWxlU2F2ZXIoYmxvYiwgbmFtZSB8fCBibG9iLm5hbWUgfHwgXCJkb3dubG9hZFwiLCBub19hdXRvX2JvbSk7XG5cdFx0XHR9XG5cdFx0O1xuXHRcdC8vIElFIDEwKyAobmF0aXZlIHNhdmVBcylcblx0XHRpZiAodHlwZW9mIG5hdmlnYXRvciAhPT0gXCJ1bmRlZmluZWRcIiAmJiBuYXZpZ2F0b3IubXNTYXZlT3JPcGVuQmxvYikge1xuXHRcdFx0cmV0dXJuIGZ1bmN0aW9uKGJsb2IsIG5hbWUsIG5vX2F1dG9fYm9tKSB7XG5cdFx0XHRcdG5hbWUgPSBuYW1lIHx8IGJsb2IubmFtZSB8fCBcImRvd25sb2FkXCI7XG5cblx0XHRcdFx0aWYgKCFub19hdXRvX2JvbSkge1xuXHRcdFx0XHRcdGJsb2IgPSBhdXRvX2JvbShibG9iKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gbmF2aWdhdG9yLm1zU2F2ZU9yT3BlbkJsb2IoYmxvYiwgbmFtZSk7XG5cdFx0XHR9O1xuXHRcdH1cblxuXHRcdEZTX3Byb3RvLmFib3J0ID0gZnVuY3Rpb24oKXt9O1xuXHRcdEZTX3Byb3RvLnJlYWR5U3RhdGUgPSBGU19wcm90by5JTklUID0gMDtcblx0XHRGU19wcm90by5XUklUSU5HID0gMTtcblx0XHRGU19wcm90by5ET05FID0gMjtcblxuXHRcdEZTX3Byb3RvLmVycm9yID1cblx0XHRGU19wcm90by5vbndyaXRlc3RhcnQgPVxuXHRcdEZTX3Byb3RvLm9ucHJvZ3Jlc3MgPVxuXHRcdEZTX3Byb3RvLm9ud3JpdGUgPVxuXHRcdEZTX3Byb3RvLm9uYWJvcnQgPVxuXHRcdEZTX3Byb3RvLm9uZXJyb3IgPVxuXHRcdEZTX3Byb3RvLm9ud3JpdGVlbmQgPVxuXHRcdFx0bnVsbDtcblxuXHRcdHJldHVybiBzYXZlQXM7XG5cdH0oXG5cdFx0ICAgdHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIgJiYgc2VsZlxuXHRcdHx8IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiYgd2luZG93XG5cdFx0fHwgdGhpcy5jb250ZW50XG5cdCkpO1xuXHQvLyBgc2VsZmAgaXMgdW5kZWZpbmVkIGluIEZpcmVmb3ggZm9yIEFuZHJvaWQgY29udGVudCBzY3JpcHQgY29udGV4dFxuXHQvLyB3aGlsZSBgdGhpc2AgaXMgbnNJQ29udGVudEZyYW1lTWVzc2FnZU1hbmFnZXJcblx0Ly8gd2l0aCBhbiBhdHRyaWJ1dGUgYGNvbnRlbnRgIHRoYXQgY29ycmVzcG9uZHMgdG8gdGhlIHdpbmRvd1xuXG5cdGlmICh0eXBlb2YgbW9kdWxlICE9PSBcInVuZGVmaW5lZFwiICYmIG1vZHVsZS5leHBvcnRzKSB7XG5cdCAgbW9kdWxlLmV4cG9ydHMuc2F2ZUFzID0gc2F2ZUFzO1xuXHR9IGVsc2UgaWYgKChcImZ1bmN0aW9uXCIgIT09IFwidW5kZWZpbmVkXCIgJiYgX193ZWJwYWNrX3JlcXVpcmVfXyg3KSAhPT0gbnVsbCkgJiYgKF9fd2VicGFja19yZXF1aXJlX18oOCkgIT09IG51bGwpKSB7XG5cdCAgIShfX1dFQlBBQ0tfQU1EX0RFRklORV9BUlJBWV9fID0gW10sIF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fID0gZnVuY3Rpb24oKSB7XG5cdCAgICByZXR1cm4gc2F2ZUFzO1xuXHQgIH0uYXBwbHkoZXhwb3J0cywgX19XRUJQQUNLX0FNRF9ERUZJTkVfQVJSQVlfXyksIF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fICE9PSB1bmRlZmluZWQgJiYgKG1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18pKTtcblx0fVxuXG5cbi8qKiovIH0sXG4vKiA3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkgeyB0aHJvdyBuZXcgRXJyb3IoXCJkZWZpbmUgY2Fubm90IGJlIHVzZWQgaW5kaXJlY3RcIik7IH07XHJcblxuXG4vKioqLyB9LFxuLyogOCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKF9fd2VicGFja19hbWRfb3B0aW9uc19fKSB7bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfYW1kX29wdGlvbnNfXztcclxuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCB7fSkpXG5cbi8qKiovIH1cbi8qKioqKiovIF0pXG59KTtcbjsiLCIvKipcbiAqIE1ldGF0YWdzIGZvciBhbmd1bGFyLXVpLXJvdXRlclxuICovXG52YXIgdWlyb3V0ZXJtZXRhdGFncztcbihmdW5jdGlvbiAodWlyb3V0ZXJtZXRhdGFncykge1xuICAgIHJ1bkJsb2NrLiRpbmplY3QgPSBbXCIkbG9nXCIsIFwiJHJvb3RTY29wZVwiLCBcIk1ldGFUYWdzXCIsIFwiJHdpbmRvd1wiXTtcbiAgICB2YXIgYXBwTW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ3VpLnJvdXRlci5tZXRhdGFncycsIFsndWkucm91dGVyJ10pO1xuICAgIHZhciBVSVJvdXRlck1ldGF0YWdzID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLyogQG5nSW5qZWN0ICovXG4gICAgICAgIGZ1bmN0aW9uIFVJUm91dGVyTWV0YXRhZ3MoKSB7XG4gICAgICAgICAgICB0aGlzLnByZWZpeCA9ICcnO1xuICAgICAgICAgICAgdGhpcy5zdWZmaXggPSAnJztcbiAgICAgICAgICAgIHRoaXMuZGVmYXVsdFRpdGxlID0gJyc7XG4gICAgICAgICAgICB0aGlzLmRlZmF1bHREZXNjcmlwdGlvbiA9ICcnO1xuICAgICAgICAgICAgdGhpcy5kZWZhdWx0S2V5d29yZHMgPSAnJztcbiAgICAgICAgICAgIHRoaXMuZGVmYXVsdFJvYm90cyA9ICcnO1xuICAgICAgICAgICAgdGhpcy5zdGF0aWNQcm9wZXJ0aWVzID0ge307XG4gICAgICAgICAgICB0aGlzLmVuYWJsZU9HVVJMID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgVUlSb3V0ZXJNZXRhdGFncy5wcm90b3R5cGUuc2V0VGl0bGVQcmVmaXggPSBmdW5jdGlvbiAocHJlZml4KSB7XG4gICAgICAgICAgICB0aGlzLnByZWZpeCA9IHByZWZpeDtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9O1xuICAgICAgICBVSVJvdXRlck1ldGF0YWdzLnByb3RvdHlwZS5zZXRUaXRsZVN1ZmZpeCA9IGZ1bmN0aW9uIChzdWZmaXgpIHtcbiAgICAgICAgICAgIHRoaXMuc3VmZml4ID0gc3VmZml4O1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH07XG4gICAgICAgIFVJUm91dGVyTWV0YXRhZ3MucHJvdG90eXBlLnNldERlZmF1bHRUaXRsZSA9IGZ1bmN0aW9uICh0aXRsZSkge1xuICAgICAgICAgICAgdGhpcy5kZWZhdWx0VGl0bGUgPSB0aXRsZTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9O1xuICAgICAgICBVSVJvdXRlck1ldGF0YWdzLnByb3RvdHlwZS5zZXREZWZhdWx0RGVzY3JpcHRpb24gPSBmdW5jdGlvbiAoZGVzY3JpcHRpb24pIHtcbiAgICAgICAgICAgIHRoaXMuZGVmYXVsdERlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfTtcbiAgICAgICAgVUlSb3V0ZXJNZXRhdGFncy5wcm90b3R5cGUuc2V0RGVmYXVsdEtleXdvcmRzID0gZnVuY3Rpb24gKGtleXdvcmRzKSB7XG4gICAgICAgICAgICB0aGlzLmRlZmF1bHRLZXl3b3JkcyA9IGtleXdvcmRzO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH07XG4gICAgICAgIFVJUm91dGVyTWV0YXRhZ3MucHJvdG90eXBlLnNldERlZmF1bHRSb2JvdHMgPSBmdW5jdGlvbiAocm9ib3RzKSB7XG4gICAgICAgICAgICB0aGlzLmRlZmF1bHRSb2JvdHMgPSByb2JvdHM7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfTtcbiAgICAgICAgVUlSb3V0ZXJNZXRhdGFncy5wcm90b3R5cGUuc2V0U3RhdGljUHJvcGVydGllcyA9IGZ1bmN0aW9uIChwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRpY1Byb3BlcnRpZXMgPSBwcm9wZXJ0aWVzO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH07XG4gICAgICAgIFVJUm91dGVyTWV0YXRhZ3MucHJvdG90eXBlLnNldE9HVVJMID0gZnVuY3Rpb24gKGVuYWJsZWQpIHtcbiAgICAgICAgICAgIHRoaXMuZW5hYmxlT0dVUkwgPSBlbmFibGVkO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH07XG4gICAgICAgIFVJUm91dGVyTWV0YXRhZ3MucHJvdG90eXBlLiRnZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHByZWZpeDogdGhpcy5wcmVmaXgsXG4gICAgICAgICAgICAgICAgc3VmZml4OiB0aGlzLnN1ZmZpeCxcbiAgICAgICAgICAgICAgICBkZWZhdWx0VGl0bGU6IHRoaXMuZGVmYXVsdFRpdGxlLFxuICAgICAgICAgICAgICAgIGRlZmF1bHREZXNjcmlwdGlvbjogdGhpcy5kZWZhdWx0RGVzY3JpcHRpb24sXG4gICAgICAgICAgICAgICAgZGVmYXVsdEtleXdvcmRzOiB0aGlzLmRlZmF1bHRLZXl3b3JkcyxcbiAgICAgICAgICAgICAgICBkZWZhdWx0Um9ib3RzOiB0aGlzLmRlZmF1bHRSb2JvdHMsXG4gICAgICAgICAgICAgICAgc3RhdGljUHJvcGVydGllczogdGhpcy5zdGF0aWNQcm9wZXJ0aWVzLFxuICAgICAgICAgICAgICAgIGVuYWJsZU9HVVJMOiB0aGlzLmVuYWJsZU9HVVJMXG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gVUlSb3V0ZXJNZXRhdGFncztcbiAgICB9KSgpO1xuICAgIGFwcE1vZHVsZS5wcm92aWRlcignVUlSb3V0ZXJNZXRhdGFncycsIFVJUm91dGVyTWV0YXRhZ3MpO1xuICAgIHZhciBNZXRhVGFncyA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8qIEBuZ0luamVjdCAqL1xuICAgICAgICBNZXRhVGFncy4kaW5qZWN0ID0gW1wiJGxvZ1wiLCBcIlVJUm91dGVyTWV0YXRhZ3NcIiwgXCIkaW50ZXJwb2xhdGVcIiwgXCIkaW5qZWN0b3JcIiwgXCIkc3RhdGVcIiwgXCIkbG9jYXRpb25cIiwgXCIkd2luZG93XCJdO1xuICAgICAgICBmdW5jdGlvbiBNZXRhVGFncygkbG9nLCBVSVJvdXRlck1ldGF0YWdzLCAkaW50ZXJwb2xhdGUsICRpbmplY3RvciwgJHN0YXRlLCAkbG9jYXRpb24sICR3aW5kb3cpIHtcbiAgICAgICAgICAgIHRoaXMuJGxvZyA9ICRsb2c7XG4gICAgICAgICAgICB0aGlzLlVJUm91dGVyTWV0YXRhZ3MgPSBVSVJvdXRlck1ldGF0YWdzO1xuICAgICAgICAgICAgdGhpcy4kaW50ZXJwb2xhdGUgPSAkaW50ZXJwb2xhdGU7XG4gICAgICAgICAgICB0aGlzLiRpbmplY3RvciA9ICRpbmplY3RvcjtcbiAgICAgICAgICAgIHRoaXMuJHN0YXRlID0gJHN0YXRlO1xuICAgICAgICAgICAgdGhpcy4kbG9jYXRpb24gPSAkbG9jYXRpb247XG4gICAgICAgICAgICB0aGlzLiR3aW5kb3cgPSAkd2luZG93O1xuICAgICAgICAgICAgdGhpcy5wcmVyZW5kZXIgPSB7fTtcbiAgICAgICAgfVxuICAgICAgICBNZXRhVGFncy5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKHRhZ3MpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHRoaXMucHJvcGVydGllcyA9IGFuZ3VsYXIuZXh0ZW5kKHt9LCB0aGlzLlVJUm91dGVyTWV0YXRhZ3Muc3RhdGljUHJvcGVydGllcyk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuVUlSb3V0ZXJNZXRhdGFncy5lbmFibGVPR1VSTCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BlcnRpZXNbJ29nOnVybCddID0gdGhpcy4kbG9jYXRpb24uYWJzVXJsKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0YWdzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGl0bGUgPSB0YWdzLnRpdGxlID8gdGhpcy5VSVJvdXRlck1ldGF0YWdzLnByZWZpeCArICh0aGlzLmdldFZhbHVlKCd0aXRsZScsIHRhZ3MudGl0bGUpIHx8ICcnKSArIHRoaXMuVUlSb3V0ZXJNZXRhdGFncy5zdWZmaXggOiB0aGlzLlVJUm91dGVyTWV0YXRhZ3MuZGVmYXVsdFRpdGxlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRlc2NyaXB0aW9uID0gdGFncy5kZXNjcmlwdGlvbiA/IHRoaXMuZ2V0VmFsdWUoJ2Rlc2NyaXB0aW9uJywgdGFncy5kZXNjcmlwdGlvbikgOiB0aGlzLlVJUm91dGVyTWV0YXRhZ3MuZGVmYXVsdERlc2NyaXB0aW9uO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmtleXdvcmRzID0gdGFncy5rZXl3b3JkcyA/IHRoaXMuZ2V0VmFsdWUoJ2tleXdvcmRzJywgdGFncy5rZXl3b3JkcykgOiB0aGlzLlVJUm91dGVyTWV0YXRhZ3MuZGVmYXVsdEtleXdvcmRzO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJvYm90cyA9IHRhZ3Mucm9ib3RzID8gdGhpcy5nZXRWYWx1ZSgncm9ib3RzJywgdGFncy5yb2JvdHMpIDogdGhpcy5VSVJvdXRlck1ldGF0YWdzLmRlZmF1bHRSb2JvdHM7XG4gICAgICAgICAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaCh0YWdzLnByb3BlcnRpZXMsIGZ1bmN0aW9uICh2YWx1ZSwga2V5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdiA9IF90aGlzLmdldFZhbHVlKGtleSwgdmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5wcm9wZXJ0aWVzW2tleV0gPSB2O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGl0bGUgPSB0aGlzLlVJUm91dGVyTWV0YXRhZ3MuZGVmYXVsdFRpdGxlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRlc2NyaXB0aW9uID0gdGhpcy5VSVJvdXRlck1ldGF0YWdzLmRlZmF1bHREZXNjcmlwdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5rZXl3b3JkcyA9IHRoaXMuVUlSb3V0ZXJNZXRhdGFncy5kZWZhdWx0S2V5d29yZHM7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucm9ib3RzID0gdGhpcy5VSVJvdXRlck1ldGF0YWdzLmRlZmF1bHRSb2JvdHM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0YWdzICYmIHRhZ3MucHJlcmVuZGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJlcmVuZGVyLnN0YXR1c0NvZGUgPSB0YWdzLnByZXJlbmRlci5zdGF0dXNDb2RlID8gdGhpcy5nZXRWYWx1ZSgncHJlcmVuZGVyLnN0YXR1c0NvZGUnLCB0YWdzLnByZXJlbmRlci5zdGF0dXNDb2RlKSA6IDIwMDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcmVyZW5kZXIuaGVhZGVyID0gdGFncy5wcmVyZW5kZXIuaGVhZGVyID8gdGhpcy5nZXRWYWx1ZSgncmVyZW5kZXIuaGVhZGVyJywgdGFncy5wcmVyZW5kZXIuaGVhZGVyKSA6IG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByZXJlbmRlci5zdGF0dXNDb2RlID0gMjAwO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByZXJlbmRlci5oZWFkZXIgPSBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLiR3aW5kb3cucHJlcmVuZGVyUmVhZHkgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIHRoaXMuJGxvZy5lcnJvcignZXJyb3Igb2NjdXJlZCB3aGVuIGV4dHJhY3RpbmcgbWV0YXRhZ3M6JywgZXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgTWV0YVRhZ3MucHJvdG90eXBlLmdldFZhbHVlID0gZnVuY3Rpb24gKHRhZ1R5cGUsIHRhZykge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpZiAoIXRhZykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIHRhZyA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRhZztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIHRhZyA9PT0gJ3N0cmluZycgJiYgdGFnLnRyaW0oKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGFuZ3VsYXIuaXNGdW5jdGlvbih0YWcpIHx8IEFycmF5LmlzQXJyYXkodGFnKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy4kaW5qZWN0b3IuaW52b2tlKHRhZywgdGhpcywgdGhpcy4kc3RhdGUuJGN1cnJlbnQubG9jYWxzLmdsb2JhbHMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuJGludGVycG9sYXRlKHRhZykodGhpcy4kc3RhdGUuJGN1cnJlbnQubG9jYWxzLmdsb2JhbHMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiRsb2cuZXJyb3IoJ2Vycm9yIG9jY3VyZWQgd2hlbiB0cnlpbmcgdG8gZ2V0IHRoZSB2YWx1ZSBvZiB0YWc6JywgdGFnVHlwZSwgZXJyKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIE1ldGFUYWdzO1xuICAgIH0pKCk7XG4gICAgYXBwTW9kdWxlLnNlcnZpY2UoJ01ldGFUYWdzJywgTWV0YVRhZ3MpO1xuICAgIC8qIEBuZ0luamVjdCAqL1xuICAgIGZ1bmN0aW9uIHJ1bkJsb2NrKCRsb2csICRyb290U2NvcGUsIE1ldGFUYWdzLCAkd2luZG93KSB7XG4gICAgICAgICRyb290U2NvcGUuTWV0YVRhZ3MgPSBNZXRhVGFncztcbiAgICAgICAgJHJvb3RTY29wZS4kb24oJyRzdGF0ZUNoYW5nZVN0YXJ0Jywgc3RhdGVDaGFuZ2VTdGFydCk7XG4gICAgICAgICRyb290U2NvcGUuJG9uKCckc3RhdGVDaGFuZ2VTdWNjZXNzJywgc3RhdGVDaGFuZ2VTdWNjZXNzKTtcbiAgICAgICAgJHJvb3RTY29wZS4kb24oJyRzdGF0ZUNoYW5nZUVycm9yJywgc3RhdGVDaGFuZ2VFcnJvcik7XG4gICAgICAgICRyb290U2NvcGUuJG9uKCckc3RhdGVOb3RGb3VuZCcsIHN0YXRlTm90Rm91bmQpO1xuICAgICAgICBmdW5jdGlvbiBzdGF0ZUNoYW5nZVN0YXJ0KGV2ZW50LCB0b1N0YXRlLCB0b1BhcmFtcywgZnJvbSwgZnJvbVBhcmFtcykge1xuICAgICAgICAgICAgJHdpbmRvdy5wcmVyZW5kZXJSZWFkeSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIHN0YXRlQ2hhbmdlU3VjY2VzcyhldmVudCwgdG9TdGF0ZSkge1xuICAgICAgICAgICAgaWYgKCF0b1N0YXRlLm1ldGFUYWdzKSB7XG4gICAgICAgICAgICAgICAgJGxvZy5kZWJ1ZyhcIk1ldGFUYWdzIC0gcm91dGU6IFxcXCJcIiArIHRvU3RhdGUubmFtZSArIFwiXFxcIiBkb2VzIG5vdCBjb250YWluIGFueSBtZXRhdGFnc1wiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIE1ldGFUYWdzLnVwZGF0ZSh0b1N0YXRlLm1ldGFUYWdzKTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBzdGF0ZUNoYW5nZUVycm9yKGV2ZW50LCB0b1N0YXRlLCB0b1BhcmFtcywgZnJvbVN0YXRlLCBmcm9tUGFyYW1zLCBlcnJvcikge1xuICAgICAgICAgICAgTWV0YVRhZ3MucHJlcmVuZGVyLnN0YXR1c0NvZGUgPSA1MDA7XG4gICAgICAgICAgICAkd2luZG93LnByZXJlbmRlclJlYWR5ID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBzdGF0ZU5vdEZvdW5kKGV2ZW50LCB1bmZvdW5kU3RhdGUsIGZyb21TdGF0ZSkge1xuICAgICAgICAgICAgTWV0YVRhZ3MucHJlcmVuZGVyLnN0YXR1c0NvZGUgPSA0MDQ7XG4gICAgICAgICAgICAkd2luZG93LnByZXJlbmRlclJlYWR5ID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhcHBNb2R1bGUucnVuKHJ1bkJsb2NrKTtcbn0pKHVpcm91dGVybWV0YXRhZ3MgfHwgKHVpcm91dGVybWV0YXRhZ3MgPSB7fSkpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD11aS1yb3V0ZXItbWV0YXRhZ3MuanMubWFwXG4iLCIvKlxuYW5ndWxhci10YWJsZXNvcnQgdjEuNC4wXG4oYykgMjAxMy0yMDE2IE1hdHRpYXMgSG9sbWx1bmQsIGh0dHA6Ly9tYXR0aWFzaC5naXRodWIuaW8vYW5ndWxhci10YWJsZXNvcnRcbkxpY2Vuc2U6IE1JVFxuKi9cblxudmFyIHRhYmxlU29ydE1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCAndGFibGVTb3J0JywgW10gKTtcblxudGFibGVTb3J0TW9kdWxlLnByb3ZpZGVyKCAndGFibGVTb3J0Q29uZmlnJywgZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZmlsdGVyVGVtcGxhdGUgPSAnJzsgICAgICAgICAgICAgICAgICAgICAgICAgIC8vTm8gZmlsdGVyaW5nIGJ5IGRlZmF1bHQgdW5sZXNzIGEgdGVtcGxhdGUgaXMgcHJvdmlkZWRcbiAgICB0aGlzLmZpbHRlckZ1bmN0aW9uID0gdW5kZWZpbmVkOyAgICAgICAgICAgICAgICAgICAvL0VtcHR5IGJ5IGRlZmF1bHQgLSB1c2UgdGhlIGJ1aWx0IGluIGZpbHRlciBmdW5jdGlvbiB3aGVuIGxlZnQgYmxhbmtcbiAgICB0aGlzLnBhZ2luYXRpb25UZW1wbGF0ZSA9ICcnOyAgICAgICAgICAgICAgICAgICAgICAvL05vIHBhZ2luYXRpb24gYnkgZGVmYXVsdCB1bmxlc3MgYSB0ZW1wbGF0ZSBpcyBwcm92aWRlZFxuXG4gICAgLy9UaGUgYmVsb3cgb3B0aW9ucyBjYW4gYWxsIGJlIG92ZXJyaWRkZW4gb24gYSBwZXItdGFibGUgYmFzaXNcbiAgICB0aGlzLnBlclBhZ2VPcHRpb25zID0gWzEwLCAyNSwgNTAsIDEwMF07ICAgICAgICAgICAvL0RlZmF1bHQgcGFnaW5hdGlvbiBvcHRpb25zXG4gICAgdGhpcy5wZXJQYWdlRGVmYXVsdCA9IHRoaXMucGVyUGFnZU9wdGlvbnNbMF07ICAgICAgLy9TZWxlY3QgdGhlIGZpcnN0IG9wdGlvbiBieSBkZWZhdWx0XG4gICAgdGhpcy5pdGVtTmFtZVNpbmd1bGFyID0gJ2l0ZW0nOyAgICAgICAgICAgICAgICAgICAgLy9EZWZhdWx0IG5hbWVcbiAgICB0aGlzLml0ZW1OYW1lUGx1cmFsID0gdGhpcy5pdGVtTmFtZVNpbmd1bGFyICsgJ3MnOyAvL0RlZmF1bHQgd2F5IHRvIG1ha2UgYW4gaXRlbSBwbHVyYWwgZm9yIEVuZ2xpc2hcbiAgICB0aGlzLm5vRGF0YVRleHQgPSAnTm8gJyArIHRoaXMuaXRlbU5hbWVQbHVyYWw7ICAgICAvL0RlZmF1bHQgdGV4dCB0byBzaG93IHRoYXQgdGhlcmUgYXJlIG5vIGl0ZW1zXG4gICAgdGhpcy53cmFwcGluZ0VsZW1lbnRDbGFzcyA9IFwiXCI7ICAgICAgICAgICAgICAgICAgICAvL0VtcHR5IGJ5IGRlZmF1bHRcblxuICAgIGlmKCAhaXNOYU4odGhpcy5wZXJQYWdlRGVmYXVsdCkgJiYgdGhpcy5wZXJQYWdlT3B0aW9ucy5pbmRleE9mKHRoaXMucGVyUGFnZURlZmF1bHQpID09PSAtMSApIHtcbiAgICAgICAgLy9JZiBhIGRlZmF1bHQgcGVyLXBhZ2Ugb3B0aW9uIHdhcyBhZGRlZCB0aGF0IGlzbid0IGluIHRoZSBhcnJheSwgYWRkIGl0IGF0IHRoZSBlbmRcbiAgICAgICAgdGhpcy5wZXJQYWdlT3B0aW9ucy5wdXNoKHRoaXMucGVyUGFnZURlZmF1bHQpO1xuICAgIH1cblxuICAgIC8vU29ydCB0aGUgcGVyLXBhZ2Ugb3B0aW9ucyBhcnJheVxuICAgIHRoaXMucGVyUGFnZU9wdGlvbnMuc29ydChmdW5jdGlvbiAoYSxiKSB7cmV0dXJuIGEgLSBiO30pO1xuXG4gICAgdGhpcy4kZ2V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG59KTtcblxudGFibGVTb3J0TW9kdWxlLmRpcmVjdGl2ZSggJ3RzV3JhcHBlcicsIFsnJHBhcnNlJywgJyRjb21waWxlJywgZnVuY3Rpb24oICRwYXJzZSwgJGNvbXBpbGUgKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgZnVuY3Rpb24gcmVwbGFjZVRlbXBsYXRlVG9rZW5zKCRzY29wZSwgdGVtcGxhdGVTdHJpbmcpIHtcbiAgICAgICAgLy9SZXBsYWNlIHNvbWUgc3RyaW5ncyB3aXRoIHRoZSBwcm9wZXIgZXhwcmVzc2lvbnMgdG8gYmUgY29tcGlsZWRcbiAgICAgICAgY29uc29sZS5sb2coXCJ3aGF0IGlzIHRlbXBsYXRlU3RyaW5nPyBcIix0ZW1wbGF0ZVN0cmluZyk7XG5cbiAgICAgICAgdmFyIG5ld1N0cmluZyA9IHRlbXBsYXRlU3RyaW5nXG4gICAgICAgICAgICAucmVwbGFjZSgvRklMVEVSX1NUUklORy9nLCAnZmlsdGVyaW5nLmZpbHRlclN0cmluZycpXG4gICAgICAgICAgICAucmVwbGFjZSgvQ1VSUkVOVF9QQUdFX1JBTkdFL2csICdwYWdpbmF0aW9uLmdldFBhZ2VSYW5nZVN0cmluZyhUT1RBTF9DT1VOVCknKVxuICAgICAgICAgICAgLnJlcGxhY2UoL1RPVEFMX0NPVU5UL2csICRzY29wZS5pdGVtc0FycmF5RXhwcmVzc2lvbiArICcubGVuZ3RoJylcbiAgICAgICAgICAgIC5yZXBsYWNlKC9QRVJfUEFHRV9PUFRJT05TL2csICdwYWdpbmF0aW9uLnBlclBhZ2VPcHRpb25zJylcbiAgICAgICAgICAgIC5yZXBsYWNlKC9JVEVNU19QRVJfUEFHRS9nLCAncGFnaW5hdGlvbi5wZXJQYWdlJylcbiAgICAgICAgICAgIC5yZXBsYWNlKC9JVEVNX05BTUVfU0lOR1VMQVIvZywgJ2l0ZW1OYW1lU2luZ3VsYXInKVxuICAgICAgICAgICAgLnJlcGxhY2UoL0lURU1fTkFNRV9QTFVSQUwvZywgJ2l0ZW1OYW1lUGx1cmFsJylcbiAgICAgICAgICAgIC5yZXBsYWNlKC9GSUxURVJFRF9DT1VOVC9nLCAnZmlsdGVyaW5nLmZpbHRlcmVkQ291bnQnKVxuICAgICAgICAgICAgLnJlcGxhY2UoL0NVUlJFTlRfUEFHRV9OVU1CRVIvZywgJ3BhZ2luYXRpb24uY3VycmVudFBhZ2UnKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwibmV3U3RyaW5nOiBcIixuZXdTdHJpbmcpO1xuICAgICAgICAgICAgcmV0dXJuIG5ld1N0cmluZztcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVEZWZhdWx0Q29tcGFyZXIoKSB7XG5cbiAgICAgICAgZnVuY3Rpb24gX2RlZmF1bHRDb21wYXJlcihhLCBiKSB7XG4gICAgICAgICAgICBpZiAoYSA+IGIpIHJldHVybiAxO1xuICAgICAgICAgICAgaWYgKGEgPCBiKSByZXR1cm4gLTE7XG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgc3RyaW5nQ29tcGFyZXIgPSBfZGVmYXVsdENvbXBhcmVyO1xuICAgICAgICB2YXIgbnVtZXJpY0NvbXBhcmVyID0gX2RlZmF1bHRDb21wYXJlcjtcblxuICAgICAgICBpZih0eXBlb2YgSW50bCA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIHN0cmluZ0NvbXBhcmVyID0gbmV3IEludGwuQ29sbGF0b3IodW5kZWZpbmVkLCB7c2Vuc2l0aXZpdHk6ICdjYXNlJ30pLmNvbXBhcmU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZih0eXBlb2YgU3RyaW5nLnByb3RvdHlwZS5sb2NhbGVDb21wYXJlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBzdHJpbmdDb21wYXJlciA9IGZ1bmN0aW9uKGEsIGIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gKGEgKyAnJykubG9jYWxlQ29tcGFyZShiLCB1bmRlZmluZWQsIHtzZW5zaXRpdml0eTogJ2Nhc2UnfSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGNvbXBhcmVyRm4gPSBmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBhID09PSAnbnVtYmVyJyAmJiB0eXBlb2YgYiA9PT0gJ251bWJlcicpXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bWVyaWNDb21wYXJlcihhLCBiKTtcblxuICAgICAgICAgICAgaWYgKGEgaW5zdGFuY2VvZiBEYXRlICYmIGIgaW5zdGFuY2VvZiBEYXRlKVxuICAgICAgICAgICAgICAgIHJldHVybiBudW1lcmljQ29tcGFyZXIoYS5nZXRUaW1lKCksIGIuZ2V0VGltZSgpKTtcblxuICAgICAgICAgICAgcmV0dXJuIHN0cmluZ0NvbXBhcmVyKGEsIGIpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBjb21wYXJlckZuO1xuICAgIH1cblxuICAgIHZhciBkZWZhdWx0Q29tcGFyZXIgPSBjcmVhdGVEZWZhdWx0Q29tcGFyZXIoKTtcblxuICAgIHJldHVybiB7XG4gICAgICAgIHNjb3BlOiB0cnVlLFxuICAgICAgICBjb250cm9sbGVyOiBbJyRzY29wZScsICd0YWJsZVNvcnRDb25maWcnLCBmdW5jdGlvbigkc2NvcGUsIHRhYmxlU29ydENvbmZpZyApIHtcbiAgICAgICAgICAgIC8vbG9jYWwgc2NvcGUgdmFycyBmb3IgdGhpcyBkaXJlY3RpdmVcbiAgICAgICAgICAgICRzY29wZS5wYWdpbmF0aW9uID0ge1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiB0YWJsZVNvcnRDb25maWcucGFnaW5hdGlvblRlbXBsYXRlLFxuICAgICAgICAgICAgICAgIHBlclBhZ2VPcHRpb25zOiB0YWJsZVNvcnRDb25maWcucGVyUGFnZU9wdGlvbnMuY29uY2F0KCksIC8vY29weSB0aGUgYXJyYXksIG5vdCBhIHJlZmVyZW5jZVxuICAgICAgICAgICAgICAgIHBlclBhZ2U6IHRhYmxlU29ydENvbmZpZy5wZXJQYWdlRGVmYXVsdCxcbiAgICAgICAgICAgICAgICBjdXJyZW50UGFnZTogMSxcbiAgICAgICAgICAgICAgICBnZXRQYWdlUmFuZ2VTdHJpbmc6IGZ1bmN0aW9uKHRvdGFsKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vVE9ETzogRm9ybWF0IHRoZXNlIG51bWJlcnMsIHBlcmhhcHMgb3B0aW9uYWxseVxuICAgICAgICAgICAgICAgICAgICB2YXIgbWF4T25QYWdlID0gdG90YWwgIT09ICRzY29wZS5maWx0ZXJpbmcuZmlsdGVyZWRDb3VudCA/ICRzY29wZS5maWx0ZXJpbmcuZmlsdGVyZWRDb3VudCA6IHRvdGFsO1xuICAgICAgICAgICAgICAgICAgICAvL1RoaXMga2VlcHMgdGhlIGZpcnN0IHBhZ2UgbGFiZWxlZCBhcyAxLCBub3QgMFxuICAgICAgICAgICAgICAgICAgICB2YXIgc3RhcnRQYWdlID0gTWF0aC5tYXgoKCRzY29wZS5wYWdpbmF0aW9uLmN1cnJlbnRQYWdlIC0gMSkgKiAkc2NvcGUucGFnaW5hdGlvbi5wZXJQYWdlICsgMSwgMSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlbmRQYWdlID0gTWF0aC5taW4oJHNjb3BlLnBhZ2luYXRpb24uY3VycmVudFBhZ2UgKiAkc2NvcGUucGFnaW5hdGlvbi5wZXJQYWdlLCBtYXhPblBhZ2UpO1xuICAgICAgICAgICAgICAgICAgICAvL1RoaXMgcHJldmVudHMgdGhlIHJhbmdlIGZyb20gc2hvd2luZyB3aGVuIHRoZSB0b3RhbCBudW1iZXIgb2YgaXRlbXMgY2FuIGJlIHNob3duIG9uIGEgc2luZ2xlIHBhZ2VcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRzY29wZS5maWx0ZXJpbmcuZmlsdGVyZWRDb3VudCA9PT0gMCA/ICcnIDogKGVuZFBhZ2UgPT09IG1heE9uUGFnZSAmJiBzdGFydFBhZ2UgPT09IDEgPyAnJyA6IHN0YXJ0UGFnZSArICctJykgKyBlbmRQYWdlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIndoYXQgaXMgcGFnaW5hdGlvbjogXCIsJHNjb3BlLnBhZ2luYXRpb24pO1xuXG4gICAgICAgICAgICAkc2NvcGUuZmlsdGVyaW5nID0ge1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiB0YWJsZVNvcnRDb25maWcuZmlsdGVyVGVtcGxhdGUsXG4gICAgICAgICAgICAgICAgZmlsdGVyU3RyaW5nOiAnJyxcbiAgICAgICAgICAgICAgICBmaWx0ZXJGdW5jdGlvbjogdGFibGVTb3J0Q29uZmlnLmZpbHRlckZ1bmN0aW9uLFxuICAgICAgICAgICAgICAgIGZpbHRlcmVkQ291bnQ6IDAsXG4gICAgICAgICAgICAgICAgZmlsdGVyRmllbGRzOiBbXVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJ3aGF0IGlzIGZpbHRlcmluZzogXCIsJHNjb3BlLmZpbHRlcmluZyk7XG5cbiAgICAgICAgICAgICRzY29wZS5pdGVtc0FycmF5RXhwcmVzc2lvbiA9ICcnOyAvL3RoaXMgd2lsbCBjb250YWluIHRoZSBzdHJpbmcgZXhwcmVzc2lvbiBmb3IgdGhlIGFycmF5IG9mIGl0ZW1zIGluIHRoZSB0YWJsZVxuICAgICAgICAgICAgJHNjb3BlLml0ZW1OYW1lU2luZ3VsYXIgPSB0YWJsZVNvcnRDb25maWcuaXRlbU5hbWVTaW5ndWxhcjtcbiAgICAgICAgICAgICRzY29wZS5pdGVtTmFtZVBsdXJhbCA9IHRhYmxlU29ydENvbmZpZy5pdGVtTmFtZVBsdXJhbDtcbiAgICAgICAgICAgICRzY29wZS5ub0RhdGFUZXh0ID0gdGFibGVTb3J0Q29uZmlnLm5vRGF0YVRleHQ7XG4gICAgICAgICAgICAkc2NvcGUud3JhcHBpbmdFbGVtZW50Q2xhc3MgPSB0YWJsZVNvcnRDb25maWcud3JhcHBpbmdFbGVtZW50Q2xhc3M7XG4gICAgICAgICAgICAkc2NvcGUuc29ydEV4cHJlc3Npb24gPSBbXTtcbiAgICAgICAgICAgICRzY29wZS5oZWFkaW5ncyA9IFtdO1xuXG4gICAgICAgICAgICB2YXIgcGFyc2Vfc29ydGV4cHIgPSBmdW5jdGlvbiggZXhwciwgbmFtZSApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gWyRwYXJzZSggZXhwciApLCBudWxsLCBmYWxzZSwgbmFtZSA/IG5hbWUgOiBleHByXTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHRoaXMuc2V0U29ydEZpZWxkID0gZnVuY3Rpb24oIHNvcnRleHByLCBlbGVtZW50LCBuYW1lLCBzb3J0QnkgKSB7XG4gICAgICAgICAgICAgICAgdmFyIGk7XG4gICAgICAgICAgICAgICAgdmFyIGV4cHIgPSBwYXJzZV9zb3J0ZXhwciggc29ydGV4cHIsIG5hbWUgKTtcbiAgICAgICAgICAgICAgICBleHByLnB1c2goc29ydEJ5KTtcbiAgICAgICAgICAgICAgICBpZiggJHNjb3BlLnNvcnRFeHByZXNzaW9uLmxlbmd0aCA9PT0gMSAmJiAkc2NvcGUuc29ydEV4cHJlc3Npb25bMF1bMF0gPT09IGV4cHJbMF0gKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmKCAkc2NvcGUuc29ydEV4cHJlc3Npb25bMF1bMl0gKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnJlbW92ZUNsYXNzKCAndGFibGVzb3J0LWRlc2MnICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmFkZENsYXNzKCAndGFibGVzb3J0LWFzYycgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5zb3J0RXhwcmVzc2lvblswXVsyXSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5yZW1vdmVDbGFzcyggJ3RhYmxlc29ydC1hc2MnICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmFkZENsYXNzKCAndGFibGVzb3J0LWRlc2MnICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc29ydEV4cHJlc3Npb25bMF1bMl0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS4kZW1pdCggJ3RhYmxlc29ydDpzb3J0T3JkZXInLCBbe1xuICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICRzY29wZS5zb3J0RXhwcmVzc2lvblswXVszXSxcbiAgICAgICAgICAgICAgICAgICAgICBvcmRlcjogJHNjb3BlLnNvcnRFeHByZXNzaW9uWzBdWzJdXG4gICAgICAgICAgICAgICAgICAgIH1dKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBmb3IoIGk9MDsgaTwkc2NvcGUuaGVhZGluZ3MubGVuZ3RoOyBpPWkrMSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5oZWFkaW5nc1tpXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZW1vdmVDbGFzcyggJ3RhYmxlc29ydC1kZXNjJyApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlbW92ZUNsYXNzKCAndGFibGVzb3J0LWFzYycgKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmFkZENsYXNzKCAndGFibGVzb3J0LWFzYycgKTtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNvcnRFeHByZXNzaW9uID0gW2V4cHJdO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuJGVtaXQoICd0YWJsZXNvcnQ6c29ydE9yZGVyJywgW3tcbiAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBleHByWzNdLFxuICAgICAgICAgICAgICAgICAgICAgIG9yZGVyOiBleHByWzJdXG4gICAgICAgICAgICAgICAgICAgIH1dKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB0aGlzLmFkZFNvcnRGaWVsZCA9IGZ1bmN0aW9uKCBzb3J0ZXhwciwgZWxlbWVudCwgbmFtZSwgc29ydEJ5ICkge1xuICAgICAgICAgICAgICAgIHZhciBpO1xuICAgICAgICAgICAgICAgIHZhciB0b2dnbGVfb3JkZXIgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB2YXIgZXhwciA9IHBhcnNlX3NvcnRleHByKCBzb3J0ZXhwciwgbmFtZSApO1xuICAgICAgICAgICAgICAgIGV4cHIucHVzaChzb3J0QnkpO1xuICAgICAgICAgICAgICAgIGZvciggaT0wOyBpPCRzY29wZS5zb3J0RXhwcmVzc2lvbi5sZW5ndGg7IGk9aSsxICkge1xuICAgICAgICAgICAgICAgICAgICBpZiggJHNjb3BlLnNvcnRFeHByZXNzaW9uW2ldWzBdID09PSBleHByWzBdICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYoICRzY29wZS5zb3J0RXhwcmVzc2lvbltpXVsyXSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnJlbW92ZUNsYXNzKCAndGFibGVzb3J0LWRlc2MnICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5hZGRDbGFzcyggJ3RhYmxlc29ydC1hc2MnICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNvcnRFeHByZXNzaW9uW2ldWzJdID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQucmVtb3ZlQ2xhc3MoICd0YWJsZXNvcnQtYXNjJyApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuYWRkQ2xhc3MoICd0YWJsZXNvcnQtZGVzYycgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc29ydEV4cHJlc3Npb25baV1bMl0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdG9nZ2xlX29yZGVyID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiggIXRvZ2dsZV9vcmRlciApIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5hZGRDbGFzcyggJ3RhYmxlc29ydC1hc2MnICk7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5zb3J0RXhwcmVzc2lvbi5wdXNoKCBleHByICk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgJHNjb3BlLiRlbWl0KCAndGFibGVzb3J0OnNvcnRPcmRlcicsICRzY29wZS5zb3J0RXhwcmVzc2lvbi5tYXAoZnVuY3Rpb24gKGEpIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IGFbM10sXG4gICAgICAgICAgICAgICAgICAgIG9yZGVyOiBhWzJdXG4gICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdGhpcy5zZXRUcmFja0J5ID0gZnVuY3Rpb24oIHRyYWNrQnkgKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnRyYWNrQnkgPSB0cmFja0J5O1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdGhpcy5yZWdpc3RlckhlYWRpbmcgPSBmdW5jdGlvbiggaGVhZGluZ2VsZW1lbnQgKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmhlYWRpbmdzLnB1c2goIGhlYWRpbmdlbGVtZW50ICk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB0aGlzLmFkZEZpbHRlckZpZWxkID0gZnVuY3Rpb24oIHNvcnRleHByLCBlbGVtZW50ICkge1xuICAgICAgICAgICAgICAgIHZhciBleHByID0gcGFyc2Vfc29ydGV4cHIoIHNvcnRleHByICk7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmZpbHRlcmluZy5maWx0ZXJGaWVsZHMucHVzaCggZXhwciApO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdGhpcy5zZXRBcnJheUV4cHIgPSBmdW5jdGlvbiggZGF0YUFycmF5RXhwICkge1xuICAgICAgICAgICAgICAgICRzY29wZS5pdGVtc0FycmF5RXhwcmVzc2lvbiA9IGRhdGFBcnJheUV4cDtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1dLFxuICAgICAgICBsaW5rOiBmdW5jdGlvbigkc2NvcGUsICRlbGVtZW50LCAkYXR0cnMsIHRzV3JhcHBlckN0cmwpIHtcblxuICAgICAgICAgICAgaWYoICRhdHRycy50c0l0ZW1OYW1lICkge1xuICAgICAgICAgICAgICAgIHZhciBvcmlnaW5hbE5vRGF0YVRleHQgPSAnTm8gJyArICRzY29wZS5pdGVtTmFtZVBsdXJhbDtcblxuICAgICAgICAgICAgICAgIC8vaWYgdGhlIHRhYmxlIGF0dHJpYnV0ZXMgaGFzIGFuIGl0ZW0gbmFtZSBvbiBpdCwgdGhpcyB0YWtlcyBwcmlvcml0eVxuICAgICAgICAgICAgICAgICRzY29wZS5pdGVtTmFtZVNpbmd1bGFyID0gJGF0dHJzLnRzSXRlbU5hbWU7XG5cbiAgICAgICAgICAgICAgICBpZiggJGF0dHJzLnRzSXRlbU5hbWVQbHVyYWwgKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vaWYgYSBwbHVyYWwgbmFtZSB3YXMgc3BlY2lmaWVkLCB1c2UgdGhhdFxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuaXRlbU5hbWVQbHVyYWwgPSAkYXR0cnMudHNJdGVtTmFtZVBsdXJhbDtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvL290aGVyd2lzZSBqdXN0IGFkZCAncycgdG8gdGhlIHNpbmd1bGFyIG5hbWVcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLml0ZW1OYW1lUGx1cmFsID0gJGF0dHJzLnRzSXRlbU5hbWUgKyAncyc7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYoICEkYXR0cnMudHNOb0RhdGFUZXh0ICYmICRzY29wZS5ub0RhdGFUZXh0ID09PSBvcmlnaW5hbE5vRGF0YVRleHQgKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vSWYgdGhlIG5vRGF0YVRleHQgd2FzIE5PVCBzcGVjaWZpZWQgQU5EIGl0J3MgaW4gdGhlIHNhbWUgJ05vIElURU1TJyBmb3JtYXQgYXMgdGhlIGRlZmF1bHQgLCB1cGRhdGUgaXQgdG8gY29udGFpbiB0aGUgbmV3IGl0ZW0gbmFtZVxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUubm9EYXRhVGV4dCA9ICdObyAnICsgJHNjb3BlLml0ZW1OYW1lUGx1cmFsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYoICRhdHRycy50c05vRGF0YVRleHQgKSB7XG4gICAgICAgICAgICAgICAgLy9JZiB0aGUgbm9EYXRhVGV4dCB3YXMgc3BlY2lmaWVkLCB1cGRhdGUgaXRcbiAgICAgICAgICAgICAgICAkc2NvcGUubm9EYXRhVGV4dCA9ICRhdHRycy50c05vRGF0YVRleHQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmKCAkYXR0cnMudHNXcmFwcGluZ0VsZW1lbnRDbGFzcyApIHtcbiAgICAgICAgICAgICAgICAvL0lmIHRoZSB3cmFwcGluZ0VsZW1lbnRDbGFzcyB3YXMgc3BlY2lmaWVkLCB1cGRhdGUgaXRcbiAgICAgICAgICAgICAgICAkc2NvcGUud3JhcHBpbmdFbGVtZW50Q2xhc3MgPSAkYXR0cnMudHNXcmFwcGluZ0VsZW1lbnRDbGFzcztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy9sb2NhbCBhdHRyaWJ1dGUgdXNhZ2VzIG9mIHRoZSBwYWdpbmF0aW9uL2ZpbHRlcmluZyBvcHRpb25zIHdpbGwgb3ZlcnJpZGUgdGhlIGdsb2JhbCBjb25maWdcbiAgICAgICAgICAgIGlmKCAkYXR0cnMudHNQZXJQYWdlT3B0aW9ucyApIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUucGFnaW5hdGlvbi5wZXJQYWdlT3B0aW9ucyA9ICRzY29wZS4kZXZhbCgkYXR0cnMudHNQZXJQYWdlT3B0aW9ucyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmKCAkYXR0cnMudHNQZXJQYWdlRGVmYXVsdCApIHtcbiAgICAgICAgICAgICAgICB2YXIgZGVmYXVsdFBlclBhZ2UgPSAkc2NvcGUuJGV2YWwoJGF0dHJzLnRzUGVyUGFnZURlZmF1bHQpO1xuICAgICAgICAgICAgICAgIGlmKCAhaXNOYU4oZGVmYXVsdFBlclBhZ2UpICkge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucGFnaW5hdGlvbi5wZXJQYWdlID0gZGVmYXVsdFBlclBhZ2U7XG4gICAgICAgICAgICAgICAgICAgIGlmKCAkc2NvcGUucGFnaW5hdGlvbi5wZXJQYWdlT3B0aW9ucy5pbmRleE9mKCRzY29wZS5wYWdpbmF0aW9uLnBlclBhZ2UpID09PSAtMSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vSWYgYSBkZWZhdWx0IHBlci1wYWdlIG9wdGlvbiB3YXMgYWRkZWQgdGhhdCBpc24ndCBpbiB0aGUgYXJyYXksIGFkZCBpdCBhbmQgc29ydCB0aGUgYXJyYXlcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5wYWdpbmF0aW9uLnBlclBhZ2VPcHRpb25zLnB1c2goJHNjb3BlLnBhZ2luYXRpb24ucGVyUGFnZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUucGFnaW5hdGlvbi5wZXJQYWdlT3B0aW9ucy5zb3J0KGZ1bmN0aW9uIChhLGIpIHtyZXR1cm4gYSAtIGI7fSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmKCAkYXR0cnMudHNGaWx0ZXJGaWVsZHMgKSB7XG4gICAgICAgICAgICAgICAgdmFyIGZpbHRlckZpZWxkcyA9ICRhdHRycy50c0ZpbHRlckZpZWxkcy5zcGxpdCgnLCcpXG4gICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24oaXRlbSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0gJiYgaXRlbS50cmltKCkgIT09ICcnO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBmb3IoIHZhciBpPTA7IGk8ZmlsdGVyRmllbGRzLmxlbmd0aDsgaT1pKzEgKSB7XG4gICAgICAgICAgICAgICAgICAgIHRzV3JhcHBlckN0cmwuYWRkRmlsdGVyRmllbGQoZmlsdGVyRmllbGRzW2ldKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciAkZmlsdGVySHRtbDtcbiAgICAgICAgICAgIGlmKCAkYXR0cnMudHNEaXNwbGF5RmlsdGVyaW5nICE9PSAnZmFsc2UnICYmICRzY29wZS5maWx0ZXJpbmcudGVtcGxhdGUgIT09ICcnICYmICRzY29wZS5maWx0ZXJpbmcuZmlsdGVyRmllbGRzLmxlbmd0aD4wICkge1xuICAgICAgICAgICAgICAgIHZhciBmaWx0ZXJTdHJpbmcgPSByZXBsYWNlVGVtcGxhdGVUb2tlbnMoJHNjb3BlLCAkc2NvcGUuZmlsdGVyaW5nLnRlbXBsYXRlKTtcbiAgICAgICAgICAgICAgICAkZmlsdGVySHRtbCA9ICRjb21waWxlKGZpbHRlclN0cmluZykoJHNjb3BlKTtcbiAgICAgICAgICAgICAgICAvL0FkZCBmaWx0ZXJpbmcgSFRNTCBCRUZPUkUgdGhlIHRhYmxlXG4gICAgICAgICAgICAgICAgJGVsZW1lbnQucGFyZW50KClbMF0uaW5zZXJ0QmVmb3JlKCRmaWx0ZXJIdG1sWzBdLCAkZWxlbWVudFswXSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmKCAkYXR0cnMudHNGaWx0ZXJGdW5jdGlvbiApIHtcbiAgICAgICAgICAgICAgICAvL2lmIHRoZSB0YWJsZSBhdHRyaWJ1dGVzIGhhcyBhIGZpbHRlciBmdW5jdGlvbiBvbiBpdCwgdGhpcyB0YWtlcyBwcmlvcml0eVxuICAgICAgICAgICAgICAgICRzY29wZS5maWx0ZXJpbmcuZmlsdGVyRnVuY3Rpb24gPSAkc2NvcGUuJGV2YWwoJGF0dHJzLnRzRmlsdGVyRnVuY3Rpb24pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiggIWFuZ3VsYXIuaXNGdW5jdGlvbigkc2NvcGUuZmlsdGVyaW5nLmZpbHRlckZ1bmN0aW9uKSApIHtcbiAgICAgICAgICAgICAgICAvL05vIGN1c3RvbSBmaWx0ZXIgd2FzIHByb3ZpZGVkLi4uXG4gICAgICAgICAgICAgICAgaWYoICRzY29wZS5maWx0ZXJpbmcuZmlsdGVyRmllbGRzLmxlbmd0aD09PTAgKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vVGhlcmUgYXJlIG5vIGZpbHRlciBmaWVsZHMsIHNvIGFsd2F5cyByZXR1cm4gZXZlcnl0aGluZ1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZmlsdGVyaW5nLmZpbHRlckZ1bmN0aW9uID0gZnVuY3Rpb24oaXRlbSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy9UaGlzIGlzIHRoZSBkZWZhdWx0IGZpbHRlciBmdW5jdGlvbi4gSXQgZG9lcyBhIGxvd2VyY2FzZSBzdHJpbmcgbWF0Y2hcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmZpbHRlcmluZy5maWx0ZXJGdW5jdGlvbiA9IGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzaG91bGRJbmNsdWRlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IoIHZhciBpPTA7IGk8JHNjb3BlLmZpbHRlcmluZy5maWx0ZXJGaWVsZHMubGVuZ3RoOyBpPWkrMSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiggIXNob3VsZEluY2x1ZGUgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdHIgPSAoJHNjb3BlLmZpbHRlcmluZy5maWx0ZXJGaWVsZHNbaV1bMF0oaXRlbSkgfHwgJycpLnRvU3RyaW5nKCkudG9Mb3dlckNhc2UoKTsgLy9wYXJzZSB0aGUgaXRlbSdzIHByb3BlcnR5IHVzaW5nIHRoZSBgdHMtY3JpdGVyaWFgIHZhbHVlICYgZmlsdGVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3VsZEluY2x1ZGUgPSBzdHIuaW5kZXhPZigkc2NvcGUuZmlsdGVyaW5nLmZpbHRlclN0cmluZy50b0xvd2VyQ2FzZSgpKSA+IC0xO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzaG91bGRJbmNsdWRlO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgJHNjb3BlLmZpbHRlckxpbWl0RnVuID0gZnVuY3Rpb24oYXJyYXkpIHtcbiAgICAgICAgICAgICAgICBpZiggISRhdHRycy50c0ZpbHRlckZ1bmN0aW9uICYmICRzY29wZS5maWx0ZXJpbmcuZmlsdGVyU3RyaW5nID09PSAnJyApIHtcbiAgICAgICAgICAgICAgICAgICAgLy9SZXR1cm4gdW5maWx0ZXJlZCB3aGVuIE5PVCB1c2luZyBhIGN1c3RvbSBmaWx0ZXIgZnVuY3Rpb24gYW5kIHdoZW4gbm90aGluZyBpcyBiZWluZyBzZWFyY2hlZFxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZmlsdGVyaW5nLmZpbHRlcmVkQ291bnQgPSBhcnJheS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhcnJheTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIGZpbHRlcmVkQXJyID0gYXJyYXkuZmlsdGVyKCRzY29wZS5maWx0ZXJpbmcuZmlsdGVyRnVuY3Rpb24pO1xuICAgICAgICAgICAgICAgICRzY29wZS5maWx0ZXJpbmcuZmlsdGVyZWRDb3VudCA9IGZpbHRlcmVkQXJyLmxlbmd0aDtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmlsdGVyZWRBcnI7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAkc2NvcGUuc29ydEZ1biA9IGZ1bmN0aW9uKCBhLCBiICkge1xuICAgICAgICAgICAgICAgIHZhciBpLCBhdmFsLCBidmFsLCBkZXNjZW5kaW5nLCBmaWx0ZXJGdW4sIGNvbXBSZXN1bHQ7XG4gICAgICAgICAgICAgICAgZm9yKCBpPTA7IGk8JHNjb3BlLnNvcnRFeHByZXNzaW9uLmxlbmd0aDsgaT1pKzEgKSB7XG4gICAgICAgICAgICAgICAgICAgIGF2YWwgPSAkc2NvcGUuc29ydEV4cHJlc3Npb25baV1bMF0oYSk7XG4gICAgICAgICAgICAgICAgICAgIGJ2YWwgPSAkc2NvcGUuc29ydEV4cHJlc3Npb25baV1bMF0oYik7XG4gICAgICAgICAgICAgICAgICAgIGZpbHRlckZ1biA9IGJbJHNjb3BlLnNvcnRFeHByZXNzaW9uW2ldWzFdXTtcbiAgICAgICAgICAgICAgICAgICAgaWYoIGZpbHRlckZ1biApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF2YWwgPSBmaWx0ZXJGdW4oIGF2YWwgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ2YWwgPSBmaWx0ZXJGdW4oIGJ2YWwgKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiggYXZhbCA9PT0gdW5kZWZpbmVkIHx8IGF2YWwgPT09IG51bGwgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhdmFsID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYoIGJ2YWwgPT09IHVuZGVmaW5lZCB8fCBidmFsID09PSBudWxsICkge1xuICAgICAgICAgICAgICAgICAgICBidmFsID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZGVzY2VuZGluZyA9ICRzY29wZS5zb3J0RXhwcmVzc2lvbltpXVsyXTtcbiAgICAgICAgICAgICAgICAgICAgY29tcFJlc3VsdCA9ICgkc2NvcGUuc29ydEV4cHJlc3Npb25baV1bNF0gfHwgZGVmYXVsdENvbXBhcmVyKShhdmFsLCBidmFsKTtcbiAgICAgICAgICAgICAgICAgICAgaWYoIGNvbXBSZXN1bHQgPT09IDEgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGVzY2VuZGluZyA/IC0xIDogMTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmKCBjb21wUmVzdWx0ID09PSAtMSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkZXNjZW5kaW5nID8gMSA6IC0xO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gQWxsIHRoZSBzb3J0IGZpZWxkcyB3ZXJlIGVxdWFsLiBJZiB0aGVyZSBpcyBhICd0cmFjayBieScnIGV4cHJlc3Npb24sXG4gICAgICAgICAgICAgICAgLy8gdXNlIHRoYXQgYXMgYSB0aWVicmVha2VyIHRvIG1ha2UgdGhlIHNvcnQgcmVzdWx0IHN0YWJsZS5cbiAgICAgICAgICAgICAgICBpZiggJHNjb3BlLnRyYWNrQnkgKSB7XG4gICAgICAgICAgICAgICAgICAgIGF2YWwgPSBhWyRzY29wZS50cmFja0J5XTtcbiAgICAgICAgICAgICAgICAgICAgYnZhbCA9IGJbJHNjb3BlLnRyYWNrQnldO1xuICAgICAgICAgICAgICAgICAgICBpZiggYXZhbCA9PT0gdW5kZWZpbmVkIHx8IGF2YWwgPT09IG51bGwgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhdmFsID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYoIGJ2YWwgPT09IHVuZGVmaW5lZCB8fCBidmFsID09PSBudWxsICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnZhbCA9ICcnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbXBSZXN1bHQgPSBkZWZhdWx0Q29tcGFyZXIoYXZhbCwgYnZhbCk7XG4gICAgICAgICAgICAgICAgICAgIGlmKCBjb21wUmVzdWx0ID09PSAxICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRlc2NlbmRpbmcgPyAtMSA6IDE7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiggY29tcFJlc3VsdCA9PT0gLTEgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGVzY2VuZGluZyA/IDEgOiAtMTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICRzY29wZS5wYWdlTGltaXRGdW4gPSBmdW5jdGlvbihhcnJheSkge1xuICAgICAgICAgICAgICAgIGlmKCAkYXR0cnMudHNEaXNwbGF5UGFnaW5hdGlvbiA9PT0gJ2ZhbHNlJyB8fCAkc2NvcGUucGFnaW5hdGlvbi50ZW1wbGF0ZSA9PT0gJycpIHtcbiAgICAgICAgICAgICAgICAgICAgLy9wYWdpbmF0aW9uIGlzIGRpc2FibGVkIG9uIHRoaXMgdGFibGUgb3IgdGhlcmUgaXMgbm8gdGVtcGxhdGUsIHNvIHJldHVybiBldmVyeXRoaW5nXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhcnJheTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy9Pbmx5IHJldHVybiB0aGUgaXRlbXMgdGhhdCBhcmUgaW4gdGhlIGNvcnJlY3QgaW5kZXggcmFuZ2UgZm9yIHRoZSBjdXJyZW50bHkgc2VsZWN0ZWQgcGFnZVxuICAgICAgICAgICAgICAgIHZhciBiZWdpbiA9ICgkc2NvcGUucGFnaW5hdGlvbi5jdXJyZW50UGFnZSAtIDEpICogJHNjb3BlLnBhZ2luYXRpb24ucGVyUGFnZTtcbiAgICAgICAgICAgICAgICB2YXIgZW5kID0gJHNjb3BlLnBhZ2luYXRpb24uY3VycmVudFBhZ2UgKiAkc2NvcGUucGFnaW5hdGlvbi5wZXJQYWdlO1xuICAgICAgICAgICAgICAgIHZhciBmaW5hbD1bXTtcbiAgICAgICAgICAgICAgICBmb3IoIHZhciBpPTA7IGkgPCBhcnJheS5sZW5ndGg7IGkrKyApIHtcbiAgICAgICAgICAgICAgICAgICAgaWYoIGkgPj0gYmVnaW4gJiYgaSA8IGVuZCApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsLnB1c2goYXJyYXlbaV0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBmaW5hbDtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHZhciAkcGFnaW5hdGlvbkh0bWw7XG4gICAgICAgICAgICBpZiggJGF0dHJzLnRzRGlzcGxheVBhZ2luYXRpb24gIT09ICdmYWxzZScgJiYgJHNjb3BlLnBhZ2luYXRpb24udGVtcGxhdGUgIT09ICcnICkge1xuICAgICAgICAgICAgICAgIHZhciBwYWdlclN0cmluZyA9IHJlcGxhY2VUZW1wbGF0ZVRva2Vucygkc2NvcGUsICRzY29wZS5wYWdpbmF0aW9uLnRlbXBsYXRlKTtcbiAgICAgICAgICAgICAgICAkcGFnaW5hdGlvbkh0bWwgPSAkY29tcGlsZShwYWdlclN0cmluZykoJHNjb3BlKTtcbiAgICAgICAgICAgICAgICAvL0FkZCBwYWdpbmF0aW9uIEhUTUwgQUZURVIgdGhlIHRhYmxlXG4gICAgICAgICAgICAgICAgJGVsZW1lbnQuYWZ0ZXIoJHBhZ2luYXRpb25IdG1sKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgIHZhciAkd3JhcHBpbmdFbGVtZW50O1xuICAgICAgICAgICAgaWYoICRzY29wZS53cmFwcGluZ0VsZW1lbnRDbGFzcyAmJiAkc2NvcGUud3JhcHBpbmdFbGVtZW50Q2xhc3MgIT09IFwiXCIgKSB7XG4gICAgICAgICAgICAgICAgLy9UaGlzIHNob3VsZCBoYXBwZW4gQUZURVIgdGhlIGZpbHRlcmluZyBhbmQgcGFnaW5hdGlvbiBIVE1MIGFyZSBzZXRcbiAgICAgICAgICAgICAgICAkd3JhcHBpbmdFbGVtZW50ID0gJGVsZW1lbnQud3JhcChcIjxkaXYgY2xhc3M9J1wiKyAkc2NvcGUud3JhcHBpbmdFbGVtZW50Q2xhc3MgK1wiJyAvPlwiKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYoICRhdHRycy50c0dldFRhYmxlRGF0YUZ1bmN0aW9uICkge1xuICAgICAgICAgICAgICAgIHZhciBnZXR0ZXIgPSAkcGFyc2UoJGF0dHJzLnRzR2V0VGFibGVEYXRhRnVuY3Rpb24pO1xuICAgICAgICAgICAgICAgIHZhciBzZXR0ZXIgPSBnZXR0ZXIuYXNzaWduO1xuXG4gICAgICAgICAgICAgICAgLy9JZiB0aGlzIGF0dHJpYnV0ZSBoYXMgYSB2YWx1ZSwgdGhlbiB3ZSB3YW50IHRvIHR1cm4gaXQgaW50byBhIGZ1bmN0aW9uIG9uIHRoZSBwYXJlbnQgc2NvcGVcbiAgICAgICAgICAgICAgICAvL3NvIHRoYXQgaXQgY2FuIGJlIHBhc3NlZCBpbnRvIG90aGVyIGZ1bmN0aW9ucyBhbmQgcnVuIG9uIHRoZSBwYXJlbnQgY29udHJvbGxlcnMgYXMgbmVlZGVkXG4gICAgICAgICAgICAgICAgdmFyIGZuICA9IGZ1bmN0aW9uKCBzaG91bGRBcHBseVNvcnRpbmcsIHNob3VsZEFwcGx5RmlsdGVyaW5nLCBsaW1pdFRvQ3VycmVudFBhZ2VPbmx5ICkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgYXJyID0gJHBhcnNlKCRzY29wZS5pdGVtc0FycmF5RXhwcmVzc2lvbikoJHNjb3BlKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiggc2hvdWxkQXBwbHlTb3J0aW5nICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXJyID0gYXJyLnNvcnQoJHNjb3BlLnNvcnRGdW4pO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYoIHNob3VsZEFwcGx5RmlsdGVyaW5nICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXJyID0gJHNjb3BlLmZpbHRlckxpbWl0RnVuKGFycik7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiggbGltaXRUb0N1cnJlbnRQYWdlT25seSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyciA9ICRzY29wZS5wYWdlTGltaXRGdW4oYXJyKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhcnI7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIHNldHRlcigkc2NvcGUuJHBhcmVudCwgZm4pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAkc2NvcGUuJG9uKCAnJGRlc3Ryb3knLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAvL1doZW4gdGhlIGRpcmVjdGl2ZSBpcyBkZXN0cm95ZWQsIGFsc28gcmVtb3ZlIHRoZSBmaWx0ZXIgJiBwYWdpbmF0aW9uIEhUTUxcbiAgICAgICAgICAgICAgICBpZiggJGZpbHRlckh0bWwgKSB7XG4gICAgICAgICAgICAgICAgICAgICRmaWx0ZXJIdG1sLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiggJHBhZ2luYXRpb25IdG1sICkge1xuICAgICAgICAgICAgICAgICAgICAkcGFnaW5hdGlvbkh0bWwucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmKCAkd3JhcHBpbmdFbGVtZW50ICkge1xuICAgICAgICAgICAgICAgICAgICAvL3VuLXdyYXAgdGhlIHRhYmxlIGZyb20gdGhpcyBlbGVtZW50XG4gICAgICAgICAgICAgICAgICAgICR3cmFwcGluZ0VsZW1lbnQucmVwbGFjZVdpdGgoJGVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcbn1dKTtcblxudGFibGVTb3J0TW9kdWxlLmRpcmVjdGl2ZSggJ3RzQ3JpdGVyaWEnLCBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICByZXF1aXJlOiBcIl50c1dyYXBwZXJcIixcbiAgICAgICAgc2NvcGU6IHtcbiAgICAgICAgICB0c09yZGVyQnk6ICc9J1xuICAgICAgICB9LFxuICAgICAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMsIHRzV3JhcHBlckN0cmwpIHtcbiAgICAgICAgICAgIHZhciBjbGlja2luZ0NhbGxiYWNrID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgICAgICBzY29wZS4kYXBwbHkoIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBpZiggZXZlbnQuc2hpZnRLZXkgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0c1dyYXBwZXJDdHJsLmFkZFNvcnRGaWVsZChhdHRycy50c0NyaXRlcmlhLCBlbGVtZW50LCBhdHRycy50c05hbWUsIHNjb3BlLnRzT3JkZXJCeSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0c1dyYXBwZXJDdHJsLnNldFNvcnRGaWVsZChhdHRycy50c0NyaXRlcmlhLCBlbGVtZW50LCBhdHRycy50c05hbWUsIHNjb3BlLnRzT3JkZXJCeSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZWxlbWVudC5iaW5kKCAnY2xpY2snLCBjbGlja2luZ0NhbGxiYWNrICk7XG4gICAgICAgICAgICBlbGVtZW50LmFkZENsYXNzKCAndGFibGVzb3J0LXNvcnRhYmxlJyApO1xuICAgICAgICAgICAgaWYoICd0c0RlZmF1bHQnIGluIGF0dHJzICYmIGF0dHJzLnRzRGVmYXVsdCAhPT0gJzAnICkge1xuICAgICAgICAgICAgICAgIHRzV3JhcHBlckN0cmwuYWRkU29ydEZpZWxkKCBhdHRycy50c0NyaXRlcmlhLCBlbGVtZW50LCBhdHRycy50c05hbWUsIHNjb3BlLnRzT3JkZXJCeSApO1xuICAgICAgICAgICAgICAgIGlmKCBhdHRycy50c0RlZmF1bHQgPT09ICdkZXNjZW5kaW5nJyApIHtcbiAgICAgICAgICAgICAgICAgICAgdHNXcmFwcGVyQ3RybC5hZGRTb3J0RmllbGQoIGF0dHJzLnRzQ3JpdGVyaWEsIGVsZW1lbnQsIGF0dHJzLnRzTmFtZSwgc2NvcGUudHNPcmRlckJ5ICk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYoICd0c0ZpbHRlcicgaW4gYXR0cnMpIHtcbiAgICAgICAgICAgICAgICB0c1dyYXBwZXJDdHJsLmFkZEZpbHRlckZpZWxkKCBhdHRycy50c0NyaXRlcmlhLCBlbGVtZW50ICk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0c1dyYXBwZXJDdHJsLnJlZ2lzdGVySGVhZGluZyggZWxlbWVudCApO1xuICAgICAgICB9XG4gICAgfTtcbn0pO1xuXG50YWJsZVNvcnRNb2R1bGUuZGlyZWN0aXZlKCAndHNSZXBlYXQnLCBbJyRjb21waWxlJywgJyRpbnRlcnBvbGF0ZScsIGZ1bmN0aW9uKCRjb21waWxlLCAkaW50ZXJwb2xhdGUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICB0ZXJtaW5hbDogdHJ1ZSxcbiAgICAgICAgbXVsdGlFbGVtZW50OiB0cnVlLFxuICAgICAgICByZXF1aXJlOiAnXnRzV3JhcHBlcicsXG4gICAgICAgIHByaW9yaXR5OiAxMDAwMDAwLFxuICAgICAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMsIHRzV3JhcHBlckN0cmwpIHtcbiAgICAgICAgICAgIHZhciByZXBlYXRBdHRycyA9IFsnbmctcmVwZWF0JywgJ2RhdGEtbmctcmVwZWF0JywgJ25nLXJlcGVhdC1zdGFydCcsICdkYXRhLW5nLXJlcGVhdC1zdGFydCddO1xuICAgICAgICAgICAgdmFyIG5nUmVwZWF0RGlyZWN0aXZlID0gcmVwZWF0QXR0cnNbMF07XG4gICAgICAgICAgICB2YXIgdHNSZXBlYXREaXJlY3RpdmUgPSAndHMtcmVwZWF0JztcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVwZWF0QXR0cnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoYW5ndWxhci5pc0RlZmluZWQoZWxlbWVudC5hdHRyKHJlcGVhdEF0dHJzW2ldKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgbmdSZXBlYXREaXJlY3RpdmUgPSByZXBlYXRBdHRyc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgdHNSZXBlYXREaXJlY3RpdmUgPSBuZ1JlcGVhdERpcmVjdGl2ZS5yZXBsYWNlKC9eKGRhdGEtKT9uZy8sICckMXRzJyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIHRzRXhwciA9ICd0YWJsZXNvcnRPcmRlckJ5OnNvcnRGdW4gfCB0YWJsZXNvcnRMaW1pdDpmaWx0ZXJMaW1pdEZ1biB8IHRhYmxlc29ydExpbWl0OnBhZ2VMaW1pdEZ1bic7XG4gICAgICAgICAgICB2YXIgcmVwZWF0RXhwciA9IGVsZW1lbnQuYXR0cihuZ1JlcGVhdERpcmVjdGl2ZSk7XG4gICAgICAgICAgICB2YXIgcmVwZWF0RXhwclJlZ2V4ID0gL15cXHMqKFtcXHNcXFNdKz8pXFxzK2luXFxzKyhbXFxzXFxTXSs/KShcXHMrdHJhY2tcXHMrYnlcXHMrW1xcc1xcU10rPyk/XFxzKiQvO1xuICAgICAgICAgICAgdmFyIHRyYWNrQnlNYXRjaCA9IHJlcGVhdEV4cHIubWF0Y2goL1xccyt0cmFja1xccytieVxccytcXFMrP1xcLihcXFMrKS8pO1xuICAgICAgICAgICAgdmFyIHJlcGVhdEluTWF0Y2ggPSByZXBlYXRFeHByLm1hdGNoKHJlcGVhdEV4cHJSZWdleCk7XG4gICAgICAgICAgICBpZiAodHJhY2tCeU1hdGNoKSB7XG4gICAgICAgICAgICAgICAgdHNXcmFwcGVyQ3RybC5zZXRUcmFja0J5KHRyYWNrQnlNYXRjaFsxXSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vTGltaXQgU29ydCB0aGUgcmVzdWx0cywgdGhlbiBsaW1pdCB0aGVtIHRvIG9ubHkgaW5jbHVkZSB3aGF0IG1hdGNoZXMgdGhlIGZpbHRlciwgdGhlbiBvbmx5IHdoYXQncyBvbiB0aGUgY3VycmVudCBwYWdlXG4gICAgICAgICAgICBpZiAocmVwZWF0RXhwci5zZWFyY2goL3RhYmxlc29ydC8pICE9PSAtMSkge1xuICAgICAgICAgICAgICAgIHJlcGVhdEV4cHIgPSByZXBlYXRFeHByLnJlcGxhY2UoL3RhYmxlc29ydC8sIHRzRXhwcik7XG4gICAgICAgICAgICAgICAgaWYgKHRyYWNrQnlNYXRjaCkge1xuICAgICAgICAgICAgICAgICAgICAvL01vdmUgdGhlICd0cmFjayBieScnIHN0YXRlbWVudCB0byB0aGUgZW5kXG4gICAgICAgICAgICAgICAgICAgIHJlcGVhdEV4cHIgPSByZXBlYXRFeHByLnJlcGxhY2UodHJhY2tCeU1hdGNoWzBdLCAnJykgKyB0cmFja0J5TWF0Y2hbMF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXBlYXRFeHByID0gcmVwZWF0RXhwci5yZXBsYWNlKHJlcGVhdEV4cHJSZWdleCwgJyQxIGluICQyIHwgJyArIHRzRXhwciArICckMycpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoYW5ndWxhci5pc1VuZGVmaW5lZChhdHRycy50c0hpZGVOb0RhdGEpKSB7XG4gICAgICAgICAgICAgICAgdmFyIHN0YXJ0U3ltID0gJGludGVycG9sYXRlLnN0YXJ0U3ltYm9sKCk7XG4gICAgICAgICAgICAgICAgdmFyIGVuZFN5bSA9ICRpbnRlcnBvbGF0ZS5lbmRTeW1ib2woKTtcblxuICAgICAgICAgICAgICAgIHZhciBub0RhdGFSb3cgPSBhbmd1bGFyLmVsZW1lbnQoZWxlbWVudFswXSkuY2xvbmUoKTtcbiAgICAgICAgICAgICAgICBub0RhdGFSb3cucmVtb3ZlQXR0cihuZ1JlcGVhdERpcmVjdGl2ZSk7XG4gICAgICAgICAgICAgICAgbm9EYXRhUm93LnJlbW92ZUF0dHIodHNSZXBlYXREaXJlY3RpdmUpO1xuICAgICAgICAgICAgICAgIG5vRGF0YVJvdy5hZGRDbGFzcyggJ3Nob3dJZkxhc3QnICk7XG4gICAgICAgICAgICAgICAgbm9EYXRhUm93LmNoaWxkcmVuKCkucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgbm9EYXRhUm93LmFwcGVuZCggJzx0ZCBjb2xzcGFuPVwiJyArIGVsZW1lbnRbMF0uY2hpbGRFbGVtZW50Q291bnQgKyAnXCI+JyArIHN0YXJ0U3ltICsgJ25vRGF0YVRleHQnICsgZW5kU3ltICsgJzwvdGQ+JyApO1xuICAgICAgICAgICAgICAgIG5vRGF0YVJvdyA9ICRjb21waWxlKG5vRGF0YVJvdykoc2NvcGUpO1xuICAgICAgICAgICAgICAgIGVsZW1lbnQucGFyZW50KCkucHJlcGVuZChub0RhdGFSb3cpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvL3Bhc3MgdGhlIGBpdGVtc0xpc3RgIGZyb20gYGl0ZW0gaW4gaXRlbXNMaXN0YCB0byB0aGUgbWFzdGVyIGRpcmVjdGl2ZSBhcyBhIHN0cmluZyBzbyBpdCBjYW4gYmUgdXNlZCBpbiBleHByZXNzaW9uc1xuICAgICAgICAgICAgdHNXcmFwcGVyQ3RybC5zZXRBcnJheUV4cHIocmVwZWF0SW5NYXRjaFsyXSk7XG5cbiAgICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudChlbGVtZW50WzBdKS5hdHRyKG5nUmVwZWF0RGlyZWN0aXZlLCByZXBlYXRFeHByKTtcbiAgICAgICAgICAgICRjb21waWxlKGVsZW1lbnQsIG51bGwsIDEwMDAwMDApKHNjb3BlKTtcbiAgICAgICAgfVxuICAgIH07XG59XSk7XG5cbnRhYmxlU29ydE1vZHVsZS5maWx0ZXIoICd0YWJsZXNvcnRMaW1pdCcsIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBmdW5jdGlvbihhcnJheSwgbGltaXRGdW4pIHtcbiAgICBpZighYXJyYXkpIHJldHVybjtcbiAgICByZXR1cm4gbGltaXRGdW4oYXJyYXkpO1xuICAgIH07XG59ICk7XG5cbnRhYmxlU29ydE1vZHVsZS5maWx0ZXIoICd0YWJsZXNvcnRPcmRlckJ5JywgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGFycmF5LCBzb3J0ZnVuICkge1xuICAgICAgICBpZighYXJyYXkpIHJldHVybjtcbiAgICAgICAgdmFyIGFycmF5Q29weSA9IGFycmF5LmNvbmNhdCgpO1xuICAgICAgICByZXR1cm4gYXJyYXlDb3B5LnNvcnQoIHNvcnRmdW4gKTtcbiAgICB9O1xufSApO1xuXG50YWJsZVNvcnRNb2R1bGUuZmlsdGVyKCAncGFyc2VJbnQnLCBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oaW5wdXQpIHtcbiAgICAgICAgcmV0dXJuIHBhcnNlSW50KCBpbnB1dCApIHx8IG51bGw7XG4gICAgfTtcbn0gKTtcblxudGFibGVTb3J0TW9kdWxlLmZpbHRlciggJ3BhcnNlRmxvYXQnLCBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oaW5wdXQpIHtcbiAgICAgICAgcmV0dXJuIHBhcnNlRmxvYXQoIGlucHV0ICkgfHwgbnVsbDtcbiAgICB9O1xufSApO1xuXG50YWJsZVNvcnRNb2R1bGUuZmlsdGVyKCAncGFyc2VEYXRlJywgZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoaW5wdXQpIHtcbiAgICAgICAgdmFyIHRpbWVzdGFtcCA9IERhdGUucGFyc2UoaW5wdXQpO1xuICAgICAgICByZXR1cm4gaXNOYU4odGltZXN0YW1wKSA/IG51bGwgOiB0aW1lc3RhbXA7XG4gICAgfTtcbn0gKTtcbiIsIid1c2Ugc3RyaWN0JztcblxuYW5ndWxhci5tb2R1bGUoJ3BpY2FyZHkuZm9udGF3ZXNvbWUnLCBbXSlcbiAgLmRpcmVjdGl2ZSgnZmEnLCBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlc3RyaWN0OiAnRScsXG4gICAgICB0ZW1wbGF0ZTogJzxzcGFuIGNsYXNzPVwiZmFcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L3NwYW4+JyxcbiAgICAgIHJlcGxhY2U6IHRydWUsXG4gICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7XG5cbiAgICAgICAgLyoqKiBTVFJJTkcgQVRUUlMgKioqL1xuICAgICAgICAvLyBrZWVwIGEgc3RhdGUgb2YgdGhlIGN1cnJlbnQgYXR0cnMgc28gdGhhdCB3aGVuIHRoZXkgY2hhbmdlLFxuICAgICAgICAvLyB3ZSBjYW4gcmVtb3ZlIHRoZSBvbGQgYXR0cnMgYmVmb3JlIGFkZGluZyB0aGUgbmV3IG9uZXMuXG4gICAgICAgIHZhciBjdXJyZW50Q2xhc3NlcyA9IHt9O1xuXG4gICAgICAgIC8vIGdlbmVyaWMgZnVuY3Rpb24gdG8gYmluZCBzdHJpbmcgYXR0cnNcbiAgICAgICAgZnVuY3Rpb24gX29ic2VydmVTdHJpbmdBdHRyIChhdHRyLCBiYXNlQ2xhc3MpIHtcbiAgICAgICAgICB2YXIgY2xhc3NOYW1lO1xuXG4gICAgICAgICAgYXR0cnMuJG9ic2VydmUoYXR0ciwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgYmFzZUNsYXNzID0gYmFzZUNsYXNzIHx8ICdmYS0nICsgYXR0cjtcbiAgICAgICAgICAgIGVsZW1lbnQucmVtb3ZlQ2xhc3MoY3VycmVudENsYXNzZXNbYXR0cl0pO1xuICAgICAgICAgICAgaWYgKGF0dHJzW2F0dHJdKSB7XG4gICAgICAgICAgICAgIGNsYXNzTmFtZSA9IFtiYXNlQ2xhc3MsIGF0dHJzW2F0dHJdXS5qb2luKCctJyk7XG4gICAgICAgICAgICAgIGVsZW1lbnQuYWRkQ2xhc3MoY2xhc3NOYW1lKTtcbiAgICAgICAgICAgICAgY3VycmVudENsYXNzZXNbYXR0cl0gPSBjbGFzc05hbWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBfb2JzZXJ2ZVN0cmluZ0F0dHIoJ25hbWUnLCAnZmEnKTtcbiAgICAgICAgX29ic2VydmVTdHJpbmdBdHRyKCdyb3RhdGUnKTtcbiAgICAgICAgX29ic2VydmVTdHJpbmdBdHRyKCdmbGlwJyk7XG4gICAgICAgIF9vYnNlcnZlU3RyaW5nQXR0cignc3RhY2snKTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogc2l6ZSBjYW4gYmUgcGFzc2VkIFwibGFyZ2VcIiBvciBhbiBpbnRlZ2VyXG4gICAgICAgICAqL1xuICAgICAgICBhdHRycy4kb2JzZXJ2ZSgnc2l6ZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB2YXIgY2xhc3NOYW1lO1xuICAgICAgICAgIGVsZW1lbnQucmVtb3ZlQ2xhc3MoY3VycmVudENsYXNzZXMuc2l6ZSk7XG5cbiAgICAgICAgICBpZiAoYXR0cnMuc2l6ZSA9PT0gJ2xhcmdlJykge1xuICAgICAgICAgICAgY2xhc3NOYW1lID0gJ2ZhLWxnJztcbiAgICAgICAgICB9IGVsc2UgaWYgKCFpc05hTihwYXJzZUludChhdHRycy5zaXplLCAxMCkpKSB7XG4gICAgICAgICAgICBjbGFzc05hbWUgPSAnZmEtJyArIGF0dHJzLnNpemUgKyAneCc7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZWxlbWVudC5hZGRDbGFzcyhjbGFzc05hbWUpO1xuICAgICAgICAgIGN1cnJlbnRDbGFzc2VzLnNpemUgPSBjbGFzc05hbWU7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBzdGFjayBjYW4gYmUgcGFzc2VkIFwibGFyZ2VcIiBvciBhbiBpbnRlZ2VyXG4gICAgICAgICAqL1xuICAgICAgICBhdHRycy4kb2JzZXJ2ZSgnc3RhY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdmFyIGNsYXNzTmFtZTtcbiAgICAgICAgICBlbGVtZW50LnJlbW92ZUNsYXNzKGN1cnJlbnRDbGFzc2VzLnN0YWNrKTtcblxuICAgICAgICAgIGlmIChhdHRycy5zdGFjayA9PT0gJ2xhcmdlJykge1xuICAgICAgICAgICAgY2xhc3NOYW1lID0gJ2ZhLXN0YWNrLWxnJztcbiAgICAgICAgICB9IGVsc2UgaWYgKCFpc05hTihwYXJzZUludChhdHRycy5zdGFjaywgMTApKSkge1xuICAgICAgICAgICAgY2xhc3NOYW1lID0gJ2ZhLXN0YWNrLScgKyBhdHRycy5zdGFjayArICd4JztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBlbGVtZW50LmFkZENsYXNzKGNsYXNzTmFtZSk7XG4gICAgICAgICAgY3VycmVudENsYXNzZXMuc3RhY2sgPSBjbGFzc05hbWU7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8qKiogQk9PTEVBTiBBVFRSUyAqKiovXG4gICAgICAgIC8vIGdlbmVyaWMgZnVuY3Rpb24gdG8gYmluZCBib29sZWFuIGF0dHJzXG4gICAgICAgIGZ1bmN0aW9uIF9vYnNlcnZlQm9vbGVhbkF0dHIgKGF0dHIsIGNsYXNzTmFtZSkge1xuICAgICAgICAgIHZhciB2YWx1ZTtcblxuICAgICAgICAgIGF0dHJzLiRvYnNlcnZlKGF0dHIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGNsYXNzTmFtZSA9IGNsYXNzTmFtZSB8fCAnZmEtJyArIGF0dHI7XG4gICAgICAgICAgICB2YWx1ZSA9IGF0dHIgaW4gYXR0cnMgJiYgYXR0cnNbYXR0cl0gIT09ICdmYWxzZScgJiYgYXR0cnNbYXR0cl0gIT09IGZhbHNlO1xuICAgICAgICAgICAgZWxlbWVudC50b2dnbGVDbGFzcyhjbGFzc05hbWUsIHZhbHVlKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIF9vYnNlcnZlQm9vbGVhbkF0dHIoJ2JvcmRlcicpO1xuICAgICAgICBfb2JzZXJ2ZUJvb2xlYW5BdHRyKCdmdycpO1xuICAgICAgICBfb2JzZXJ2ZUJvb2xlYW5BdHRyKCdpbnZlcnNlJyk7XG4gICAgICAgIF9vYnNlcnZlQm9vbGVhbkF0dHIoJ3NwaW4nKTtcblxuICAgICAgICAvKioqIENPTkRJVElPTkFMIEFUVFJTICoqKi9cbiAgICAgICAgICAvLyBhdXRvbWF0aWNhbGx5IHBvcHVsYXRlIGZhLWxpIGlmIERPTSBzdHJ1Y3R1cmUgaW5kaWNhdGVzXG4gICAgICAgIGVsZW1lbnQudG9nZ2xlQ2xhc3MoJ2ZhLWxpJyxcbiAgICAgICAgICBlbGVtZW50LnBhcmVudCgpICYmXG4gICAgICAgICAgZWxlbWVudC5wYXJlbnQoKS5wcm9wKCd0YWdOYW1lJykgPT09ICdMSScgJiZcbiAgICAgICAgICBlbGVtZW50LnBhcmVudCgpLnBhcmVudCgpICYmXG4gICAgICAgICAgZWxlbWVudC5wYXJlbnQoKS5wYXJlbnQoKS5oYXNDbGFzcygnZmEtdWwnKSAmJlxuICAgICAgICAgIGVsZW1lbnQucGFyZW50KCkuY2hpbGRyZW4oKVswXSA9PT0gZWxlbWVudFswXSAmJlxuICAgICAgICAgIGF0dHJzLmxpc3QgIT09ICdmYWxzZScgJiZcbiAgICAgICAgICBhdHRycy5saXN0ICE9PSBmYWxzZVxuICAgICAgICApO1xuXG4gICAgICAgIGF0dHJzLiRvYnNlcnZlKCdhbHQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdmFyIGFsdFRleHQgPSBhdHRycy5hbHQsXG4gICAgICAgICAgICAgIGFsdEVsZW0gPSBlbGVtZW50Lm5leHQoKSxcbiAgICAgICAgICAgICAgYWx0RWxlbUNsYXNzID0gJ2ZhLWFsdC10ZXh0JztcblxuICAgICAgICAgIGlmIChhbHRUZXh0KSB7XG4gICAgICAgICAgICBlbGVtZW50LnJlbW92ZUF0dHIoJ2FsdCcpO1xuXG4gICAgICAgICAgICAvLyBjcmVhdGUgdGhlIGFsdCBlbGVtIGlmIG9uZSBkb2VzIG5vdCBleGlzdFxuICAgICAgICAgICAgaWYgKCFhbHRFbGVtIHx8ICFhbHRFbGVtLmhhc0NsYXNzKGFsdEVsZW1DbGFzcykpIHtcbiAgICAgICAgICAgICAgZWxlbWVudC5hZnRlcignPHNwYW4gY2xhc3M9XCJzci1vbmx5IGZhLWFsdC10ZXh0XCI+PC9zcGFuPicpO1xuICAgICAgICAgICAgICBhbHRFbGVtID0gZWxlbWVudC5uZXh0KCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGFsdEVsZW0udGV4dChhbHRUZXh0KTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGFsdEVsZW0gJiYgYWx0RWxlbS5oYXNDbGFzcyhhbHRFbGVtQ2xhc3MpKSB7XG4gICAgICAgICAgICAvLyBraWxsIHRoZSBhbHQgZWxlbSBpZiB3ZSB1c2VkIHRvIGhhdmUgYWx0IHRleHQsIGJ1dCBub3cgd2UgZG9uJ3RcbiAgICAgICAgICAgIGFsdEVsZW0ucmVtb3ZlKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9O1xuICB9KVxuICAuZGlyZWN0aXZlKCdmYVN0YWNrJywgZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB7XG4gICAgICByZXN0cmljdDogJ0UnLFxuICAgICAgdHJhbnNjbHVkZTogdHJ1ZSxcbiAgICAgIHRlbXBsYXRlOiAnPHNwYW4gbmctdHJhbnNjbHVkZSBjbGFzcz1cImZhLXN0YWNrIGZhLWxnXCI+PC9zcGFuPicsXG4gICAgICByZXBsYWNlOiB0cnVlLFxuICAgICAgbGluazogZnVuY3Rpb24gKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xuXG4gICAgICAgIC8qKiogU1RSSU5HIEFUVFJTICoqKi9cbiAgICAgICAgLy8ga2VlcCBhIHN0YXRlIG9mIHRoZSBjdXJyZW50IGF0dHJzIHNvIHRoYXQgd2hlbiB0aGV5IGNoYW5nZSxcbiAgICAgICAgLy8gd2UgY2FuIHJlbW92ZSB0aGUgb2xkIGF0dHJzIGJlZm9yZSBhZGRpbmcgdGhlIG5ldyBvbmVzLlxuICAgICAgICB2YXIgY3VycmVudENsYXNzZXMgPSB7fTtcblxuICAgICAgICAvLyBnZW5lcmljIGZ1bmN0aW9uIHRvIGJpbmQgc3RyaW5nIGF0dHJzXG4gICAgICAgIGZ1bmN0aW9uIF9vYnNlcnZlU3RyaW5nQXR0ciAoYXR0ciwgYmFzZUNsYXNzKSB7XG4gICAgICAgICAgdmFyIGNsYXNzTmFtZTtcblxuICAgICAgICAgIGF0dHJzLiRvYnNlcnZlKGF0dHIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGJhc2VDbGFzcyA9IGJhc2VDbGFzcyB8fCAnZmEtJyArIGF0dHI7XG4gICAgICAgICAgICBlbGVtZW50LnJlbW92ZUNsYXNzKGN1cnJlbnRDbGFzc2VzW2F0dHJdKTtcbiAgICAgICAgICAgIGlmIChhdHRyc1thdHRyXSkge1xuICAgICAgICAgICAgICBjbGFzc05hbWUgPSBbYmFzZUNsYXNzLCBhdHRyc1thdHRyXV0uam9pbignLScpO1xuICAgICAgICAgICAgICBlbGVtZW50LmFkZENsYXNzKGNsYXNzTmFtZSk7XG4gICAgICAgICAgICAgIGN1cnJlbnRDbGFzc2VzW2F0dHJdID0gY2xhc3NOYW1lO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgX29ic2VydmVTdHJpbmdBdHRyKCdzaXplJyk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIHNpemUgY2FuIGJlIHBhc3NlZCBcImxhcmdlXCIgb3IgYW4gaW50ZWdlclxuICAgICAgICAgKi9cbiAgICAgICAgYXR0cnMuJG9ic2VydmUoJ3NpemUnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdmFyIGNsYXNzTmFtZTtcblxuICAgICAgICAgIGVsZW1lbnQucmVtb3ZlQ2xhc3MoY3VycmVudENsYXNzZXMuc2l6ZSk7XG5cbiAgICAgICAgICBpZiAoYXR0cnMuc2l6ZSA9PT0gJ2xhcmdlJykge1xuICAgICAgICAgICAgY2xhc3NOYW1lID0gJ2ZhLWxnJztcbiAgICAgICAgICB9IGVsc2UgaWYgKCFpc05hTihwYXJzZUludChhdHRycy5zaXplLCAxMCkpKSB7XG4gICAgICAgICAgICBjbGFzc05hbWUgPSAnZmEtJyArIGF0dHJzLnNpemUgKyAneCc7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZWxlbWVudC5hZGRDbGFzcyhjbGFzc05hbWUpO1xuICAgICAgICAgIGN1cnJlbnRDbGFzc2VzLnNpemUgPSBjbGFzc05hbWU7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH07XG4gIH0pOyIsIi8qISBAbGljZW5zZVxuICogIFByb2plY3Q6IEJ1dHRvbnNcbiAqICBEZXNjcmlwdGlvbjogQSBoaWdobHkgY3VzdG9taXphYmxlIENTUyBidXR0b24gbGlicmFyeSBidWlsdCB3aXRoIFNhc3MgYW5kIENvbXBhc3NcbiAqICBBdXRob3I6IEFsZXggV29sZmVcbiAqICBMaWNlbnNlOiBBcGFjaGUgTGljZW5zZSB2Mi4wXG4gKi9cblxuLy8gdGhlIHNlbWktY29sb24gYmVmb3JlIGZ1bmN0aW9uIGludm9jYXRpb24gaXMgYSBzYWZldHkgbmV0IGFnYWluc3QgY29uY2F0ZW5hdGVkXG4vLyBzY3JpcHRzIGFuZC9vciBvdGhlciBwbHVnaW5zIHdoaWNoIG1heSBub3QgYmUgY2xvc2VkIHByb3Blcmx5LlxuOyhmdW5jdGlvbiAoICQsIHdpbmRvdywgZG9jdW1lbnQsIHVuZGVmaW5lZCApIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICAvLyB1bmRlZmluZWQgaXMgdXNlZCBoZXJlIGFzIHRoZSB1bmRlZmluZWQgZ2xvYmFsIHZhcmlhYmxlIGluIEVDTUFTY3JpcHQgMyBpc1xuICAgIC8vIG11dGFibGUgKGllLiBpdCBjYW4gYmUgY2hhbmdlZCBieSBzb21lb25lIGVsc2UpLiB1bmRlZmluZWQgaXNuJ3QgcmVhbGx5IGJlaW5nXG4gICAgLy8gcGFzc2VkIGluIHNvIHdlIGNhbiBlbnN1cmUgdGhlIHZhbHVlIG9mIGl0IGlzIHRydWx5IHVuZGVmaW5lZC4gSW4gRVM1LCB1bmRlZmluZWRcbiAgICAvLyBjYW4gbm8gbG9uZ2VyIGJlIG1vZGlmaWVkLlxuXG4gICAgLy8gd2luZG93IGFuZCBkb2N1bWVudCBhcmUgcGFzc2VkIHRocm91Z2ggYXMgbG9jYWwgdmFyaWFibGUgcmF0aGVyIHRoYW4gZ2xvYmFsXG4gICAgLy8gYXMgdGhpcyAoc2xpZ2h0bHkpIHF1aWNrZW5zIHRoZSByZXNvbHV0aW9uIHByb2Nlc3MgYW5kIGNhbiBiZSBtb3JlIGVmZmljaWVudGx5XG4gICAgLy8gbWluaWZpZWQgKGVzcGVjaWFsbHkgd2hlbiBib3RoIGFyZSByZWd1bGFybHkgcmVmZXJlbmNlZCBpbiB5b3VyIHBsdWdpbikuXG5cbiAgICAvLyBDcmVhdGUgdGhlIGRlZmF1bHRzIG9uY2VcbiAgICB2YXIgcGx1Z2luTmFtZSA9IFwibWVudUJ1dHRvblwiO1xuICAgIHZhciBtZW51Q2xhc3MgPSBcIi5idXR0b24tZHJvcGRvd25cIjtcbiAgICB2YXIgZGVmYXVsdHMgPSB7XG4gICAgICAgIHByb3BlcnR5TmFtZTogXCJ2YWx1ZVwiXG4gICAgfTtcblxuICAgIC8vIFRoZSBhY3R1YWwgcGx1Z2luIGNvbnN0cnVjdG9yXG4gICAgZnVuY3Rpb24gUGx1Z2luKCBlbGVtZW50LCBvcHRpb25zICkge1xuXG4gICAgICAgIC8vU0VUIE9QVElPTlNcbiAgICAgICAgdGhpcy5vcHRpb25zID0gJC5leHRlbmQoIHt9LCBkZWZhdWx0cywgb3B0aW9ucyApO1xuICAgICAgICB0aGlzLl9kZWZhdWx0cyA9IGRlZmF1bHRzO1xuICAgICAgICB0aGlzLl9uYW1lID0gcGx1Z2luTmFtZTtcblxuICAgICAgICAvL1JFR0lTVEVSIEVMRU1FTlRcbiAgICAgICAgdGhpcy4kZWxlbWVudCA9ICQoZWxlbWVudCk7XG5cbiAgICAgICAgLy9JTklUSUFMSVpFXG4gICAgICAgIHRoaXMuaW5pdCgpO1xuICAgIH1cblxuICAgIFBsdWdpbi5wcm90b3R5cGUgPSB7XG4gICAgICAgIGNvbnN0cnVjdG9yOiBQbHVnaW4sXG5cbiAgICAgICAgaW5pdDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAvLyBXRSBET04nVCBTVE9QIFBST1BHQVRJT04gU08gQ0xJQ0tTIFdJTEwgQVVUT01BVElDQUxMWVxuICAgICAgICAgICAgLy8gVE9HR0xFIEFORCBSRU1PVkUgVEhFIERST1BET1dOXG4gICAgICAgICAgICB0aGlzLnRvZ2dsZSgpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHRvZ2dsZTogZnVuY3Rpb24oZWwsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIGlmKHRoaXMuJGVsZW1lbnQuZGF0YSgnZHJvcGRvd24nKSA9PT0gJ3Nob3cnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oaWRlTWVudSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zaG93TWVudSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIHNob3dNZW51OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHRoaXMuJGVsZW1lbnQuZGF0YSgnZHJvcGRvd24nLCAnc2hvdycpO1xuICAgICAgICAgICAgdGhpcy4kZWxlbWVudC5maW5kKCd1bCcpLnNob3coKTtcbiAgICAgICAgfSxcblxuICAgICAgICBoaWRlTWVudTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB0aGlzLiRlbGVtZW50LmRhdGEoJ2Ryb3Bkb3duJywgJ2hpZGUnKTtcbiAgICAgICAgICAgIHRoaXMuJGVsZW1lbnQuZmluZCgndWwnKS5oaWRlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gQSByZWFsbHkgbGlnaHR3ZWlnaHQgcGx1Z2luIHdyYXBwZXIgYXJvdW5kIHRoZSBjb25zdHJ1Y3RvcixcbiAgICAvLyBwcmV2ZW50aW5nIGFnYWluc3QgbXVsdGlwbGUgaW5zdGFudGlhdGlvbnNcbiAgICAkLmZuW3BsdWdpbk5hbWVdID0gZnVuY3Rpb24gKCBvcHRpb25zICkge1xuICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgLy8gVE9HR0xFIEJVVFRPTiBJRiBJVCBFWElTVFNcbiAgICAgICAgICAgIGlmICgkLmRhdGEodGhpcywgXCJwbHVnaW5fXCIgKyBwbHVnaW5OYW1lKSkge1xuICAgICAgICAgICAgICAgICQuZGF0YSh0aGlzLCBcInBsdWdpbl9cIiArIHBsdWdpbk5hbWUpLnRvZ2dsZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gT1RIRVJXSVNFIENSRUFURSBBIE5FVyBJTlNUQU5DRVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgJC5kYXRhKHRoaXMsIFwicGx1Z2luX1wiICsgcGx1Z2luTmFtZSwgbmV3IFBsdWdpbiggdGhpcywgb3B0aW9ucyApKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIC8vQ0xPU0UgT1BFTiBEUk9QRE9XTiBNRU5VUyBJRiBDTElDS0VEIFNPTUVXSEVSRSBFTFNFXG4gICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuICAgICAgICAkLmVhY2goJCgnW2RhdGEtYnV0dG9ucz1kcm9wZG93bl0nKSwgZnVuY3Rpb24oaSwgdmFsdWUpIHtcbiAgICAgICAgICAgIGlmICgkKGUudGFyZ2V0Lm9mZnNldFBhcmVudClbMF0gIT0gJCh0aGlzKVswXSkge1xuICAgICAgICAgICAgICAgIGlmICgkLmRhdGEodGhpcywgXCJwbHVnaW5fXCIgKyBwbHVnaW5OYW1lKSkge1xuICAgICAgICAgICAgICAgICAgICAkLmRhdGEodGhpcywgXCJwbHVnaW5fXCIgKyBwbHVnaW5OYW1lKS5oaWRlTWVudSgpO1xuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJ3VsJykuaGlkZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAvL0RFTEVHQVRFIENMSUNLIEVWRU5UIEZPUiBEUk9QRE9XTiBNRU5VU1xuICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICdbZGF0YS1idXR0b25zPWRyb3Bkb3duXScsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgdmFyICRkcm9wZG93biA9ICQoZS5jdXJyZW50VGFyZ2V0KTtcbiAgICAgICAgJGRyb3Bkb3duLm1lbnVCdXR0b24oKTtcbiAgICB9KTtcblxuICAgIC8vSUdOT1JFIENMSUNLIEVWRU5UUyBGUk9NIERJU1BMQVkgQlVUVE9OIElOIERST1BET1dOXG4gICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJ1tkYXRhLWJ1dHRvbnM9ZHJvcGRvd25dID4gYScsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0pO1xuXG59KSggalF1ZXJ5LCB3aW5kb3csIGRvY3VtZW50KTsiLCJhbmd1bGFyLm1vZHVsZSgnYW5ndWxhclBheW1lbnRzJywgW10pO2FuZ3VsYXIubW9kdWxlKCdhbmd1bGFyUGF5bWVudHMnKVxuXG4uZmFjdG9yeSgnQ29tbW9uJywgW2Z1bmN0aW9uKCl7XG5cbiAgdmFyIHJldCA9IHt9O1xuXG5cbiAgLy8gZXhwaXJ5IGlzIGEgc3RyaW5nIFwibW0gLyB5eVt5eV1cIlxuICByZXRbJ3BhcnNlRXhwaXJ5J10gPSBmdW5jdGlvbih2YWx1ZSl7XG4gICAgdmFyIG1vbnRoLCBwcmVmaXgsIHllYXIsIF9yZWY7XG5cbiAgICB2YWx1ZSA9IHZhbHVlIHx8ICcnXG5cbiAgICB2YWx1ZSA9IHZhbHVlLnJlcGxhY2UoL1xccy9nLCAnJyk7XG4gICAgX3JlZiA9IHZhbHVlLnNwbGl0KCcvJywgMiksIG1vbnRoID0gX3JlZlswXSwgeWVhciA9IF9yZWZbMV07XG5cbiAgICBpZiAoKHllYXIgIT0gbnVsbCA/IHllYXIubGVuZ3RoIDogdm9pZCAwKSA9PT0gMiAmJiAvXlxcZCskLy50ZXN0KHllYXIpKSB7XG4gICAgICBwcmVmaXggPSAobmV3IERhdGUpLmdldEZ1bGxZZWFyKCk7XG4gICAgICBwcmVmaXggPSBwcmVmaXgudG9TdHJpbmcoKS5zbGljZSgwLCAyKTtcbiAgICAgIHllYXIgPSBwcmVmaXggKyB5ZWFyO1xuICAgIH1cblxuICAgIG1vbnRoID0gcGFyc2VJbnQobW9udGgsIDEwKTtcbiAgICB5ZWFyID0gcGFyc2VJbnQoeWVhciwgMTApO1xuICAgIFxuICAgIHJldHVybiB7XG4gICAgICBtb250aDogbW9udGgsXG4gICAgICB5ZWFyOiB5ZWFyXG4gICAgfTtcbiAgfVxuXG4gIHJldHVybiByZXQ7XG5cbn1dKTthbmd1bGFyLm1vZHVsZSgnYW5ndWxhclBheW1lbnRzJylcblxuLmZhY3RvcnkoJ0NhcmRzJywgW2Z1bmN0aW9uKCl7XG5cbiAgdmFyIGRlZmF1bHRGb3JtYXQgPSAvKFxcZHsxLDR9KS9nO1xuICB2YXIgZGVmYXVsdElucHV0Rm9ybWF0ID0gIC8oPzpefFxccykoXFxkezR9KSQvO1xuXG4gICAgICAgIHZhciBjYXJkcyA9IFtcbiAgICB7XG4gICAgICB0eXBlOiAnbWFlc3RybycsXG4gICAgICBwYXR0ZXJuOiAvXig1MDE4fDUwMjB8NTAzOHw2MzA0fDY3NTl8Njc2WzEtM10pLyxcbiAgICAgIGZvcm1hdDogZGVmYXVsdEZvcm1hdCxcbiAgICAgIGlucHV0Rm9ybWF0OiBkZWZhdWx0SW5wdXRGb3JtYXQsXG4gICAgICBsZW5ndGg6IFsxMiwgMTMsIDE0LCAxNSwgMTYsIDE3LCAxOCwgMTldLFxuICAgICAgY3ZjTGVuZ3RoOiBbM10sXG4gICAgICBsdWhuOiB0cnVlXG4gICAgfSwge1xuICAgICAgdHlwZTogJ2RpbmVyc2NsdWInLFxuICAgICAgcGF0dGVybjogL14oMzZ8Mzh8MzBbMC01XSkvLFxuICAgICAgZm9ybWF0OiBkZWZhdWx0Rm9ybWF0LFxuICAgICAgaW5wdXRGb3JtYXQ6IGRlZmF1bHRJbnB1dEZvcm1hdCxcbiAgICAgIGxlbmd0aDogWzE0XSxcbiAgICAgIGN2Y0xlbmd0aDogWzNdLFxuICAgICAgbHVobjogdHJ1ZVxuICAgIH0sIHtcbiAgICAgIHR5cGU6ICdsYXNlcicsXG4gICAgICBwYXR0ZXJuOiAvXig2NzA2fDY3NzF8NjcwOSkvLFxuICAgICAgZm9ybWF0OiBkZWZhdWx0Rm9ybWF0LFxuICAgICAgaW5wdXRGb3JtYXQ6IGRlZmF1bHRJbnB1dEZvcm1hdCxcbiAgICAgIGxlbmd0aDogWzE2LCAxNywgMTgsIDE5XSxcbiAgICAgIGN2Y0xlbmd0aDogWzNdLFxuICAgICAgbHVobjogdHJ1ZVxuICAgIH0sIHtcbiAgICAgIHR5cGU6ICdqY2InLFxuICAgICAgcGF0dGVybjogL14zNS8sXG4gICAgICBmb3JtYXQ6IGRlZmF1bHRGb3JtYXQsXG4gICAgICBpbnB1dEZvcm1hdDogZGVmYXVsdElucHV0Rm9ybWF0LFxuICAgICAgbGVuZ3RoOiBbMTZdLFxuICAgICAgY3ZjTGVuZ3RoOiBbM10sXG4gICAgICBsdWhuOiB0cnVlXG4gICAgfSwge1xuICAgICAgdHlwZTogJ3VuaW9ucGF5JyxcbiAgICAgIHBhdHRlcm46IC9eNjIvLFxuICAgICAgZm9ybWF0OiBkZWZhdWx0Rm9ybWF0LFxuICAgICAgaW5wdXRGb3JtYXQ6IGRlZmF1bHRJbnB1dEZvcm1hdCxcbiAgICAgIGxlbmd0aDogWzE2LCAxNywgMTgsIDE5XSxcbiAgICAgIGN2Y0xlbmd0aDogWzNdLFxuICAgICAgbHVobjogZmFsc2VcbiAgICB9LCB7XG4gICAgICB0eXBlOiAnZGlzY292ZXInLFxuICAgICAgcGF0dGVybjogL14oNjAxMXw2NXw2NFs0LTldfDYyMikvLFxuICAgICAgZm9ybWF0OiBkZWZhdWx0Rm9ybWF0LFxuICAgICAgaW5wdXRGb3JtYXQ6IGRlZmF1bHRJbnB1dEZvcm1hdCxcbiAgICAgIGxlbmd0aDogWzE2XSxcbiAgICAgIGN2Y0xlbmd0aDogWzNdLFxuICAgICAgbHVobjogdHJ1ZVxuICAgIH0sIHtcbiAgICAgIHR5cGU6ICdtYXN0ZXJjYXJkJyxcbiAgICAgIHBhdHRlcm46IC9eNVsxLTVdLyxcbiAgICAgIGZvcm1hdDogZGVmYXVsdEZvcm1hdCxcbiAgICAgIGlucHV0Rm9ybWF0OiBkZWZhdWx0SW5wdXRGb3JtYXQsXG4gICAgICBsZW5ndGg6IFsxNl0sXG4gICAgICBjdmNMZW5ndGg6IFszXSxcbiAgICAgIGx1aG46IHRydWVcbiAgICB9LCB7XG4gICAgICB0eXBlOiAnYW1leCcsXG4gICAgICBwYXR0ZXJuOiAvXjNbNDddLyxcbiAgICAgIGZvcm1hdDogLyhcXGR7MSw0fSkoXFxkezEsNn0pPyhcXGR7MSw1fSk/LyxcbiAgICAgIGlucHV0Rm9ybWF0OiAvXihcXGR7NH18XFxkezR9XFxzXFxkezZ9KSQvLFxuICAgICAgbGVuZ3RoOiBbMTVdLFxuICAgICAgY3ZjTGVuZ3RoOiBbMywgNF0sXG4gICAgICBsdWhuOiB0cnVlXG4gICAgfSwge1xuICAgICAgdHlwZTogJ3Zpc2EnLFxuICAgICAgcGF0dGVybjogL140LyxcbiAgICAgIGZvcm1hdDogZGVmYXVsdEZvcm1hdCxcbiAgICAgIGlucHV0Rm9ybWF0OiBkZWZhdWx0SW5wdXRGb3JtYXQsXG4gICAgICBsZW5ndGg6IFsxMywgMTQsIDE1LCAxNl0sXG4gICAgICBjdmNMZW5ndGg6IFszXSxcbiAgICAgIGx1aG46IHRydWVcbiAgICB9XG4gIF07XG5cblxuICB2YXIgX2Zyb21OdW1iZXIgPSBmdW5jdGlvbihudW0pe1xuICAgICAgdmFyIGNhcmQsIGksIGxlbjtcblxuICAgICAgbnVtID0gKG51bSArICcnKS5yZXBsYWNlKC9cXEQvZywgJycpO1xuXG4gICAgICBmb3IgKGkgPSAwLCBsZW4gPSBjYXJkcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuXG4gICAgICAgIGNhcmQgPSBjYXJkc1tpXTtcblxuICAgICAgICBpZiAoY2FyZC5wYXR0ZXJuLnRlc3QobnVtKSkge1xuICAgICAgICAgIHJldHVybiBjYXJkO1xuICAgICAgICB9XG5cbiAgICAgIH1cbiAgfVxuXG4gIHZhciBfZnJvbVR5cGUgPSBmdW5jdGlvbih0eXBlKSB7XG4gICAgICB2YXIgY2FyZCwgaSwgbGVuO1xuXG4gICAgICBmb3IgKGkgPSAwLCBsZW4gPSBjYXJkcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuXG4gICAgICAgIGNhcmQgPSBjYXJkc1tpXTtcbiAgICAgICAgXG4gICAgICAgIGlmIChjYXJkLnR5cGUgPT09IHR5cGUpIHtcbiAgICAgICAgICByZXR1cm4gY2FyZDtcbiAgICAgICAgfVxuXG4gICAgICB9XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICAgIGZyb21OdW1iZXI6IGZ1bmN0aW9uKHZhbCkgeyByZXR1cm4gX2Zyb21OdW1iZXIodmFsKSB9LFxuICAgICAgZnJvbVR5cGU6IGZ1bmN0aW9uKHZhbCkgeyByZXR1cm4gX2Zyb21UeXBlKHZhbCkgfSxcbiAgICAgIGRlZmF1bHRGb3JtYXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gZGVmYXVsdEZvcm1hdDt9LFxuICAgICAgZGVmYXVsdElucHV0Rm9ybWF0OiBmdW5jdGlvbigpIHsgcmV0dXJuIGRlZmF1bHRJbnB1dEZvcm1hdDt9XG4gIH1cblxufV0pO2FuZ3VsYXIubW9kdWxlKCdhbmd1bGFyUGF5bWVudHMnKVxuXG5cbi5mYWN0b3J5KCdfRm9ybWF0JyxbJ0NhcmRzJywgJ0NvbW1vbicsICckZmlsdGVyJywgZnVuY3Rpb24oQ2FyZHMsIENvbW1vbiwgJGZpbHRlcil7XG5cbiAgdmFyIF9mb3JtYXRzID0ge31cblxuICB2YXIgX2hhc1RleHRTZWxlY3RlZCA9IGZ1bmN0aW9uKCR0YXJnZXQpIHtcbiAgICAgIHZhciByZWY7XG4gICAgICBcbiAgICAgIGlmICgoJHRhcmdldC5wcm9wKCdzZWxlY3Rpb25TdGFydCcpICE9IG51bGwpICYmICR0YXJnZXQucHJvcCgnc2VsZWN0aW9uU3RhcnQnKSAhPT0gJHRhcmdldC5wcm9wKCdzZWxlY3Rpb25FbmQnKSkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAodHlwZW9mIGRvY3VtZW50ICE9PSBcInVuZGVmaW5lZFwiICYmIGRvY3VtZW50ICE9PSBudWxsID8gKHJlZiA9IGRvY3VtZW50LnNlbGVjdGlvbikgIT0gbnVsbCA/IHR5cGVvZiByZWYuY3JlYXRlUmFuZ2UgPT09IFwiZnVuY3Rpb25cIiA/IHJlZi5jcmVhdGVSYW5nZSgpLnRleHQgOiB2b2lkIDAgOiB2b2lkIDAgOiB2b2lkIDApIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG5cbiAgLy8gY2FyZCBmb3JtYXR0aW5nXG5cbiAgdmFyIF9mb3JtYXRDYXJkTnVtYmVyID0gZnVuY3Rpb24oZSkge1xuICAgICAgdmFyICR0YXJnZXQsIGNhcmQsIGRpZ2l0LCBsZW5ndGgsIHJlLCB1cHBlckxlbmd0aCwgdmFsdWU7XG4gICAgICBcbiAgICAgIGRpZ2l0ID0gU3RyaW5nLmZyb21DaGFyQ29kZShlLndoaWNoKTtcbiAgICAgICR0YXJnZXQgPSBhbmd1bGFyLmVsZW1lbnQoZS5jdXJyZW50VGFyZ2V0KTtcbiAgICAgIHZhbHVlID0gJHRhcmdldC52YWwoKTtcbiAgICAgIGNhcmQgPSBDYXJkcy5mcm9tTnVtYmVyKHZhbHVlICsgZGlnaXQpO1xuICAgICAgbGVuZ3RoID0gKHZhbHVlLnJlcGxhY2UoL1xcRC9nLCAnJykgKyBkaWdpdCkubGVuZ3RoO1xuICAgICAgXG4gICAgICB1cHBlckxlbmd0aCA9IDE2O1xuICAgICAgXG4gICAgICBpZiAoY2FyZCkge1xuICAgICAgICB1cHBlckxlbmd0aCA9IGNhcmQubGVuZ3RoW2NhcmQubGVuZ3RoLmxlbmd0aCAtIDFdO1xuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAobGVuZ3RoID49IHVwcGVyTGVuZ3RoKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKCEvXlxcZCskLy50ZXN0KGRpZ2l0KSAmJiAhZS5tZXRhICYmIGUua2V5Q29kZSA+PSA0Nikge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKCgkdGFyZ2V0LnByb3AoJ3NlbGVjdGlvblN0YXJ0JykgIT0gbnVsbCkgJiYgJHRhcmdldC5wcm9wKCdzZWxlY3Rpb25TdGFydCcpICE9PSB2YWx1ZS5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICByZSA9IENhcmRzLmRlZmF1bHRJbnB1dEZvcm1hdCgpO1xuICAgICAgaWYgKGNhcmQpIHtcbiAgICAgICAgICByZSA9IGNhcmQuaW5wdXRGb3JtYXQ7XG4gICAgICB9XG5cbiAgICAgIGlmIChyZS50ZXN0KHZhbHVlKSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHJldHVybiAkdGFyZ2V0LnZhbCh2YWx1ZSArICcgJyArIGRpZ2l0KTtcblxuICAgICAgfSBlbHNlIGlmIChyZS50ZXN0KHZhbHVlICsgZGlnaXQpKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgcmV0dXJuICR0YXJnZXQudmFsKHZhbHVlICsgZGlnaXQgKyAnICcpO1xuXG4gICAgICB9XG4gIH07XG5cbiAgdmFyIF9yZXN0cmljdENhcmROdW1iZXIgPSBmdW5jdGlvbihlKSB7XG4gICAgICB2YXIgJHRhcmdldCwgY2FyZCwgZGlnaXQsIHZhbHVlO1xuICAgICAgXG4gICAgICAkdGFyZ2V0ID0gYW5ndWxhci5lbGVtZW50KGUuY3VycmVudFRhcmdldCk7XG4gICAgICBkaWdpdCA9IFN0cmluZy5mcm9tQ2hhckNvZGUoZS53aGljaCk7XG4gICAgICBcbiAgICAgIGlmKCEvXlxcZCskLy50ZXN0KGRpZ2l0KSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmKF9oYXNUZXh0U2VsZWN0ZWQoJHRhcmdldCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgXG4gICAgICB2YWx1ZSA9ICgkdGFyZ2V0LnZhbCgpICsgZGlnaXQpLnJlcGxhY2UoL1xcRC9nLCAnJyk7XG4gICAgICBjYXJkID0gQ2FyZHMuZnJvbU51bWJlcih2YWx1ZSk7XG4gICAgICBcbiAgICAgIGlmKGNhcmQpIHtcbiAgICAgICAgaWYoISh2YWx1ZS5sZW5ndGggPD0gY2FyZC5sZW5ndGhbY2FyZC5sZW5ndGgubGVuZ3RoIC0gMV0pKXtcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmKCEodmFsdWUubGVuZ3RoIDw9IDE2KSl7XG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9XG4gICAgICB9XG4gIH07XG5cbiAgdmFyIF9mb3JtYXRCYWNrQ2FyZE51bWJlciA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgIHZhciAkdGFyZ2V0LCB2YWx1ZTtcbiAgICAgIFxuICAgICAgJHRhcmdldCA9IGFuZ3VsYXIuZWxlbWVudChlLmN1cnJlbnRUYXJnZXQpO1xuICAgICAgdmFsdWUgPSAkdGFyZ2V0LnZhbCgpO1xuICAgICAgXG4gICAgICBpZihlLm1ldGEpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgXG4gICAgICBpZihlLndoaWNoICE9PSA4KSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYoKCR0YXJnZXQucHJvcCgnc2VsZWN0aW9uU3RhcnQnKSAhPSBudWxsKSAmJiAkdGFyZ2V0LnByb3AoJ3NlbGVjdGlvblN0YXJ0JykgIT09IHZhbHVlLmxlbmd0aCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmKC9cXGRcXHMkLy50ZXN0KHZhbHVlKSAmJiAhZS5tZXRhICYmIGUua2V5Q29kZSA+PSA0Nikge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHJldHVybiAkdGFyZ2V0LnZhbCh2YWx1ZS5yZXBsYWNlKC9cXGRcXHMkLywgJycpKTtcbiAgICAgIH0gZWxzZSBpZiAoL1xcc1xcZD8kLy50ZXN0KHZhbHVlKSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHJldHVybiAkdGFyZ2V0LnZhbCh2YWx1ZS5yZXBsYWNlKC9cXHNcXGQ/JC8sICcnKSk7XG4gICAgICB9XG4gICAgfTtcblxuICB2YXIgX2dldEZvcm1hdHRlZENhcmROdW1iZXIgPSBmdW5jdGlvbihudW0pIHtcbiAgICAgIHZhciBjYXJkLCBncm91cHMsIHVwcGVyTGVuZ3RoLCByZWY7XG4gICAgICBcbiAgICAgIGNhcmQgPSBDYXJkcy5mcm9tTnVtYmVyKG51bSk7XG4gICAgICBcbiAgICAgIGlmICghY2FyZCkge1xuICAgICAgICByZXR1cm4gbnVtO1xuICAgICAgfVxuICAgICAgXG4gICAgICB1cHBlckxlbmd0aCA9IGNhcmQubGVuZ3RoW2NhcmQubGVuZ3RoLmxlbmd0aCAtIDFdO1xuICAgICAgbnVtID0gbnVtLnJlcGxhY2UoL1xcRC9nLCAnJyk7XG4gICAgICBudW0gPSBudW0uc2xpY2UoMCwgK3VwcGVyTGVuZ3RoICsgMSB8fCA5ZTkpO1xuICAgICAgXG4gICAgICBpZihjYXJkLmZvcm1hdC5nbG9iYWwpIHtcbiAgICAgICAgcmV0dXJuIChyZWYgPSBudW0ubWF0Y2goY2FyZC5mb3JtYXQpKSAhPSBudWxsID8gcmVmLmpvaW4oJyAnKSA6IHZvaWQgMDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGdyb3VwcyA9IGNhcmQuZm9ybWF0LmV4ZWMobnVtKTtcbiAgICAgICAgICBcbiAgICAgICAgaWYgKGdyb3VwcyAhPSBudWxsKSB7XG4gICAgICAgICAgZ3JvdXBzLnNoaWZ0KCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZ3JvdXBzICE9IG51bGwgPyBncm91cHMuam9pbignICcpIDogdm9pZCAwO1xuICAgICAgfVxuICAgIH07XG5cbiAgdmFyIF9yZUZvcm1hdENhcmROdW1iZXIgPSBmdW5jdGlvbihlKSB7XG4gICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgJHRhcmdldCwgdmFsdWU7XG4gICAgICAkdGFyZ2V0ID0gYW5ndWxhci5lbGVtZW50KGUudGFyZ2V0KTtcbiAgICBcbiAgICAgIHZhbHVlID0gJHRhcmdldC52YWwoKTtcbiAgICAgIHZhbHVlID0gX2dldEZvcm1hdHRlZENhcmROdW1iZXIodmFsdWUpO1xuICAgICAgcmV0dXJuICR0YXJnZXQudmFsKHZhbHVlKTtcbiAgICB9KTtcbiAgfTtcblxuICB2YXIgX3BhcnNlQ2FyZE51bWJlciA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlICE9IG51bGwgPyB2YWx1ZS5yZXBsYWNlKC9cXHMvZywgJycpIDogdmFsdWU7XG4gIH07XG5cbiAgX2Zvcm1hdHNbJ2NhcmQnXSA9IGZ1bmN0aW9uKGVsZW0sIGN0cmwpe1xuICAgIGVsZW0uYmluZCgna2V5cHJlc3MnLCBfcmVzdHJpY3RDYXJkTnVtYmVyKTtcbiAgICBlbGVtLmJpbmQoJ2tleXByZXNzJywgX2Zvcm1hdENhcmROdW1iZXIpO1xuICAgIGVsZW0uYmluZCgna2V5ZG93bicsIF9mb3JtYXRCYWNrQ2FyZE51bWJlcik7XG4gICAgZWxlbS5iaW5kKCdwYXN0ZScsIF9yZUZvcm1hdENhcmROdW1iZXIpO1xuXG4gICAgY3RybC4kcGFyc2Vycy5wdXNoKF9wYXJzZUNhcmROdW1iZXIpO1xuICAgIGN0cmwuJGZvcm1hdHRlcnMucHVzaChfZ2V0Rm9ybWF0dGVkQ2FyZE51bWJlcik7XG4gIH1cblxuXG4gIC8vIGN2Y1xuXG4gIF9mb3JtYXRDVkMgPSBmdW5jdGlvbihlKXtcbiAgICAkdGFyZ2V0ID0gYW5ndWxhci5lbGVtZW50KGUuY3VycmVudFRhcmdldCk7XG4gICAgZGlnaXQgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGUud2hpY2gpO1xuICAgIFxuICAgIGlmICghL15cXGQrJC8udGVzdChkaWdpdCkgJiYgIWUubWV0YSAmJiBlLmtleUNvZGUgPj0gNDYpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YWwgPSAkdGFyZ2V0LnZhbCgpICsgZGlnaXQ7XG4gICAgXG4gICAgaWYodmFsLmxlbmd0aCA8PSA0KXtcbiAgICAgIHJldHVybjtcbiAgICB9IGVsc2Uge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfVxuXG4gIF9mb3JtYXRzWydjdmMnXSA9IGZ1bmN0aW9uKGVsZW0pe1xuICAgIGVsZW0uYmluZCgna2V5cHJlc3MnLCBfZm9ybWF0Q1ZDKVxuICB9XG5cbiAgLy8gZXhwaXJ5XG5cbiAgX3Jlc3RyaWN0RXhwaXJ5ID0gZnVuY3Rpb24oZSkge1xuICAgIHZhciAkdGFyZ2V0LCBkaWdpdCwgdmFsdWU7XG4gICAgXG4gICAgJHRhcmdldCA9IGFuZ3VsYXIuZWxlbWVudChlLmN1cnJlbnRUYXJnZXQpO1xuICAgIGRpZ2l0ID0gU3RyaW5nLmZyb21DaGFyQ29kZShlLndoaWNoKTtcbiAgICBcbiAgICBpZiAoIS9eXFxkKyQvLnRlc3QoZGlnaXQpICYmICFlLm1ldGEgJiYgZS5rZXlDb2RlID49IDQ2KSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIFxuICAgIGlmKF9oYXNUZXh0U2VsZWN0ZWQoJHRhcmdldCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgXG4gICAgdmFsdWUgPSAkdGFyZ2V0LnZhbCgpICsgZGlnaXQ7XG4gICAgdmFsdWUgPSB2YWx1ZS5yZXBsYWNlKC9cXEQvZywgJycpO1xuICAgIFxuICAgIGlmICh2YWx1ZS5sZW5ndGggPiA2KSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH07XG5cbiAgX2Zvcm1hdEV4cGlyeSA9IGZ1bmN0aW9uKGUpIHtcbiAgICB2YXIgJHRhcmdldCwgZGlnaXQsIHZhbDtcbiAgICBcbiAgICBkaWdpdCA9IFN0cmluZy5mcm9tQ2hhckNvZGUoZS53aGljaCk7XG4gICAgXG4gICAgaWYgKCEvXlxcZCskLy50ZXN0KGRpZ2l0KSAmJiAhZS5tZXRhICYmIGUua2V5Q29kZSA+PSA0Nikge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBcbiAgICAkdGFyZ2V0ID0gYW5ndWxhci5lbGVtZW50KGUuY3VycmVudFRhcmdldCk7XG4gICAgdmFsID0gJHRhcmdldC52YWwoKSArIGRpZ2l0O1xuICAgIFxuICAgIGlmICgvXlxcZCQvLnRlc3QodmFsKSAmJiAodmFsICE9PSAnMCcgJiYgdmFsICE9PSAnMScpKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICByZXR1cm4gJHRhcmdldC52YWwoXCIwXCIgKyB2YWwgKyBcIiAvIFwiKTtcblxuICAgIH0gZWxzZSBpZiAoL15cXGRcXGQkLy50ZXN0KHZhbCkpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHJldHVybiAkdGFyZ2V0LnZhbChcIlwiICsgdmFsICsgXCIgLyBcIik7XG5cbiAgICB9XG4gIH07XG5cbiAgX2Zvcm1hdEZvcndhcmRFeHBpcnkgPSBmdW5jdGlvbihlKSB7XG4gICAgdmFyICR0YXJnZXQsIGRpZ2l0LCB2YWw7XG4gICAgXG4gICAgZGlnaXQgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGUud2hpY2gpO1xuICAgIFxuICAgIGlmICghL15cXGQrJC8udGVzdChkaWdpdCkgJiYgIWUubWV0YSAmJiBlLmtleUNvZGUgPj0gNDYpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgXG4gICAgJHRhcmdldCA9IGFuZ3VsYXIuZWxlbWVudChlLmN1cnJlbnRUYXJnZXQpO1xuICAgIHZhbCA9ICR0YXJnZXQudmFsKCk7XG4gICAgXG4gICAgaWYgKC9eXFxkXFxkJC8udGVzdCh2YWwpKSB7XG4gICAgICByZXR1cm4gJHRhcmdldC52YWwoXCJcIiArIHZhbCArIFwiIC8gXCIpO1xuICAgIH1cbiAgfTtcblxuICBfZm9ybWF0Rm9yd2FyZFNsYXNoID0gZnVuY3Rpb24oZSkge1xuICAgIHZhciAkdGFyZ2V0LCBzbGFzaCwgdmFsO1xuICAgIFxuICAgIHNsYXNoID0gU3RyaW5nLmZyb21DaGFyQ29kZShlLndoaWNoKTtcbiAgICBcbiAgICBpZiAoc2xhc2ggIT09ICcvJykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBcbiAgICAkdGFyZ2V0ID0gYW5ndWxhci5lbGVtZW50KGUuY3VycmVudFRhcmdldCk7XG4gICAgdmFsID0gJHRhcmdldC52YWwoKTtcbiAgICBcbiAgICBpZiAoL15cXGQkLy50ZXN0KHZhbCkgJiYgdmFsICE9PSAnMCcpIHtcbiAgICAgIHJldHVybiAkdGFyZ2V0LnZhbChcIjBcIiArIHZhbCArIFwiIC8gXCIpO1xuICAgIH1cbiAgfTtcblxuICBfZm9ybWF0QmFja0V4cGlyeSA9IGZ1bmN0aW9uKGUpIHtcbiAgICB2YXIgJHRhcmdldCwgdmFsdWU7XG4gICAgXG4gICAgaWYgKGUubWV0YSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBcbiAgICAkdGFyZ2V0ID0gYW5ndWxhci5lbGVtZW50KGUuY3VycmVudFRhcmdldCk7XG4gICAgdmFsdWUgPSAkdGFyZ2V0LnZhbCgpO1xuICAgIFxuICAgIGlmIChlLndoaWNoICE9PSA4KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIFxuICAgIGlmICgoJHRhcmdldC5wcm9wKCdzZWxlY3Rpb25TdGFydCcpICE9IG51bGwpICYmICR0YXJnZXQucHJvcCgnc2VsZWN0aW9uU3RhcnQnKSAhPT0gdmFsdWUubGVuZ3RoKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIFxuICAgIGlmICgvXFxkKFxcc3xcXC8pKyQvLnRlc3QodmFsdWUpKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICByZXR1cm4gJHRhcmdldC52YWwodmFsdWUucmVwbGFjZSgvXFxkKFxcc3xcXC8pKiQvLCAnJykpO1xuXG4gICAgfSBlbHNlIGlmICgvXFxzXFwvXFxzP1xcZD8kLy50ZXN0KHZhbHVlKSkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgcmV0dXJuICR0YXJnZXQudmFsKHZhbHVlLnJlcGxhY2UoL1xcc1xcL1xccz9cXGQ/JC8sICcnKSk7XG5cbiAgICB9XG4gIH07XG5cbiAgdmFyIF9wYXJzZUV4cGlyeSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgaWYodmFsdWUgIT0gbnVsbCkge1xuICAgICAgdmFyIG9iaiA9IENvbW1vbi5wYXJzZUV4cGlyeSh2YWx1ZSk7XG4gICAgICB2YXIgZXhwaXJ5ID0gbmV3IERhdGUob2JqLnllYXIsIG9iai5tb250aC0xKTtcbiAgICAgIHJldHVybiAkZmlsdGVyKCdkYXRlJykoZXhwaXJ5LCAnTU0veXl5eScpO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfTtcblxuICB2YXIgX2dldEZvcm1hdHRlZEV4cGlyeSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgaWYodmFsdWUgIT0gbnVsbCkge1xuICAgICAgdmFyIG9iaiA9IENvbW1vbi5wYXJzZUV4cGlyeSh2YWx1ZSk7XG4gICAgICB2YXIgZXhwaXJ5ID0gbmV3IERhdGUob2JqLnllYXIsIG9iai5tb250aC0xKTtcbiAgICAgIHJldHVybiAkZmlsdGVyKCdkYXRlJykoZXhwaXJ5LCAnTU0gLyB5eXl5Jyk7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9O1xuXG5cbiAgX2Zvcm1hdHNbJ2V4cGlyeSddID0gZnVuY3Rpb24oZWxlbSwgY3RybCl7XG4gICAgZWxlbS5iaW5kKCdrZXlwcmVzcycsIF9yZXN0cmljdEV4cGlyeSk7XG4gICAgZWxlbS5iaW5kKCdrZXlwcmVzcycsIF9mb3JtYXRFeHBpcnkpO1xuICAgIGVsZW0uYmluZCgna2V5cHJlc3MnLCBfZm9ybWF0Rm9yd2FyZFNsYXNoKTtcbiAgICBlbGVtLmJpbmQoJ2tleXByZXNzJywgX2Zvcm1hdEZvcndhcmRFeHBpcnkpO1xuICAgIGVsZW0uYmluZCgna2V5ZG93bicsIF9mb3JtYXRCYWNrRXhwaXJ5KTtcblxuICAgIGN0cmwuJHBhcnNlcnMucHVzaChfcGFyc2VFeHBpcnkpO1xuICAgIGN0cmwuJGZvcm1hdHRlcnMucHVzaChfZ2V0Rm9ybWF0dGVkRXhwaXJ5KTtcbiAgfVxuXG4gIHJldHVybiBmdW5jdGlvbih0eXBlLCBlbGVtLCBjdHJsKXtcbiAgICBpZighX2Zvcm1hdHNbdHlwZV0pe1xuXG4gICAgICB0eXBlcyA9IE9iamVjdC5rZXlzKF9mb3JtYXRzKTtcblxuICAgICAgZXJyc3RyICA9ICdVbmtub3duIHR5cGUgZm9yIGZvcm1hdHRpbmc6IFwiJyt0eXBlKydcIi4gJztcbiAgICAgIGVycnN0ciArPSAnU2hvdWxkIGJlIG9uZSBvZjogXCInK3R5cGVzLmpvaW4oJ1wiLCBcIicpKydcIic7XG5cbiAgICAgIHRocm93IGVycnN0cjtcbiAgICB9XG4gICAgcmV0dXJuIF9mb3JtYXRzW3R5cGVdKGVsZW0sIGN0cmwpO1xuICB9XG5cbn1dKVxuXG4uZGlyZWN0aXZlKCdwYXltZW50c0Zvcm1hdCcsIFsnJHdpbmRvdycsICdfRm9ybWF0JywgZnVuY3Rpb24oJHdpbmRvdywgX0Zvcm1hdCl7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICByZXF1aXJlOiAnbmdNb2RlbCcsXG4gICAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbSwgYXR0ciwgY3RybCl7XG4gICAgICAgIF9Gb3JtYXQoYXR0ci5wYXltZW50c0Zvcm1hdCwgZWxlbSwgY3RybCk7XG4gICAgICB9XG4gICAgfVxufV0pO2FuZ3VsYXIubW9kdWxlKCdhbmd1bGFyUGF5bWVudHMnKVxuXG5cblxuLmZhY3RvcnkoJ19WYWxpZGF0ZScsIFsnQ2FyZHMnLCAnQ29tbW9uJywgJyRwYXJzZScsIGZ1bmN0aW9uKENhcmRzLCBDb21tb24sICRwYXJzZSl7XG5cbiAgdmFyIF9faW5kZXhPZiA9IFtdLmluZGV4T2YgfHwgZnVuY3Rpb24oaXRlbSkgeyBmb3IgKHZhciBpID0gMCwgbCA9IHRoaXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7IGlmIChpIGluIHRoaXMgJiYgdGhpc1tpXSA9PT0gaXRlbSkgcmV0dXJuIGk7IH0gcmV0dXJuIC0xOyB9XG5cbiAgdmFyIF9sdWhuQ2hlY2sgPSBmdW5jdGlvbihudW0pIHtcbiAgICB2YXIgZGlnaXQsIGRpZ2l0cywgb2RkLCBzdW0sIGksIGxlbjtcblxuICAgIG9kZCA9IHRydWU7XG4gICAgc3VtID0gMDtcbiAgICBkaWdpdHMgPSAobnVtICsgJycpLnNwbGl0KCcnKS5yZXZlcnNlKCk7XG5cbiAgICBmb3IgKGkgPSAwLCBsZW4gPSBkaWdpdHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcblxuICAgICAgZGlnaXQgPSBkaWdpdHNbaV07XG4gICAgICBkaWdpdCA9IHBhcnNlSW50KGRpZ2l0LCAxMCk7XG5cbiAgICAgIGlmICgob2RkID0gIW9kZCkpIHtcbiAgICAgICAgZGlnaXQgKj0gMjtcbiAgICAgIH1cblxuICAgICAgaWYgKGRpZ2l0ID4gOSkge1xuICAgICAgICBkaWdpdCAtPSA5O1xuICAgICAgfVxuXG4gICAgICBzdW0gKz0gZGlnaXQ7XG5cbiAgICB9XG5cbiAgICByZXR1cm4gc3VtICUgMTAgPT09IDA7XG4gIH07XG5cbiAgdmFyIF92YWxpZGF0b3JzID0ge31cblxuICBfdmFsaWRhdG9yc1snY3ZjJ10gPSBmdW5jdGlvbihjdmMsIGN0cmwsIHNjb3BlLCBhdHRyKXtcbiAgICAgIHZhciByZWYsIHJlZjE7XG5cbiAgICAgIC8vIHZhbGlkIGlmIGVtcHR5IC0gbGV0IG5nLXJlcXVpcmVkIGhhbmRsZSBlbXB0eVxuICAgICAgaWYoY3ZjID09IG51bGwgfHwgY3ZjLmxlbmd0aCA9PSAwKSByZXR1cm4gdHJ1ZTtcblxuICAgICAgaWYgKCEvXlxcZCskLy50ZXN0KGN2YykpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICB2YXIgdHlwZTtcbiAgICAgIGlmKGF0dHIucGF5bWVudHNUeXBlTW9kZWwpIHtcbiAgICAgICAgICB2YXIgdHlwZU1vZGVsID0gJHBhcnNlKGF0dHIucGF5bWVudHNUeXBlTW9kZWwpO1xuICAgICAgICAgIHR5cGUgPSB0eXBlTW9kZWwoc2NvcGUpO1xuICAgICAgfVxuXG4gICAgICBpZiAodHlwZSkge1xuICAgICAgICByZXR1cm4gcmVmID0gY3ZjLmxlbmd0aCwgX19pbmRleE9mLmNhbGwoKHJlZjEgPSBDYXJkcy5mcm9tVHlwZSh0eXBlKSkgIT0gbnVsbCA/IHJlZjEuY3ZjTGVuZ3RoIDogdm9pZCAwLCByZWYpID49IDA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gY3ZjLmxlbmd0aCA+PSAzICYmIGN2Yy5sZW5ndGggPD0gNDtcbiAgICAgIH1cbiAgfVxuXG4gIF92YWxpZGF0b3JzWydjYXJkJ10gPSBmdW5jdGlvbihudW0sIGN0cmwsIHNjb3BlLCBhdHRyKXtcbiAgICAgIHZhciBjYXJkLCByZWYsIHR5cGVNb2RlbDtcblxuICAgICAgaWYoYXR0ci5wYXltZW50c1R5cGVNb2RlbCkge1xuICAgICAgICAgIHR5cGVNb2RlbCA9ICRwYXJzZShhdHRyLnBheW1lbnRzVHlwZU1vZGVsKTtcbiAgICAgIH1cblxuICAgICAgdmFyIGNsZWFyQ2FyZCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgaWYodHlwZU1vZGVsKSB7XG4gICAgICAgICAgICAgIHR5cGVNb2RlbC5hc3NpZ24oc2NvcGUsIG51bGwpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjdHJsLiRjYXJkID0gbnVsbDtcbiAgICAgIH07XG5cbiAgICAgIC8vIHZhbGlkIGlmIGVtcHR5IC0gbGV0IG5nLXJlcXVpcmVkIGhhbmRsZSBlbXB0eVxuICAgICAgaWYobnVtID09IG51bGwgfHwgbnVtLmxlbmd0aCA9PSAwKXtcbiAgICAgICAgY2xlYXJDYXJkKCk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuXG4gICAgICBudW0gPSAobnVtICsgJycpLnJlcGxhY2UoL1xccyt8LS9nLCAnJyk7XG5cbiAgICAgIGlmICghL15cXGQrJC8udGVzdChudW0pKSB7XG4gICAgICAgIGNsZWFyQ2FyZCgpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIGNhcmQgPSBDYXJkcy5mcm9tTnVtYmVyKG51bSk7XG5cbiAgICAgIGlmKCFjYXJkKSB7XG4gICAgICAgIGNsZWFyQ2FyZCgpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIGN0cmwuJGNhcmQgPSBhbmd1bGFyLmNvcHkoY2FyZCk7XG5cbiAgICAgIGlmKHR5cGVNb2RlbCkge1xuICAgICAgICAgIHR5cGVNb2RlbC5hc3NpZ24oc2NvcGUsIGNhcmQudHlwZSk7XG4gICAgICB9XG5cbiAgICAgIHJldCA9IChyZWYgPSBudW0ubGVuZ3RoLCBfX2luZGV4T2YuY2FsbChjYXJkLmxlbmd0aCwgcmVmKSA+PSAwKSAmJiAoY2FyZC5sdWhuID09PSBmYWxzZSB8fCBfbHVobkNoZWNrKG51bSkpO1xuXG4gICAgICByZXR1cm4gcmV0O1xuICB9XG5cbiAgX3ZhbGlkYXRvcnNbJ2V4cGlyeSddID0gZnVuY3Rpb24odmFsKXtcbiAgICAvLyB2YWxpZCBpZiBlbXB0eSAtIGxldCBuZy1yZXF1aXJlZCBoYW5kbGUgZW1wdHlcbiAgICBpZih2YWwgPT0gbnVsbCB8fCB2YWwubGVuZ3RoID09IDApIHJldHVybiB0cnVlO1xuXG4gICAgb2JqID0gQ29tbW9uLnBhcnNlRXhwaXJ5KHZhbCk7XG5cbiAgICBtb250aCA9IG9iai5tb250aDtcbiAgICB5ZWFyID0gb2JqLnllYXI7XG5cbiAgICB2YXIgY3VycmVudFRpbWUsIGV4cGlyeSwgcHJlZml4O1xuXG4gICAgaWYgKCEobW9udGggJiYgeWVhcikpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAoIS9eXFxkKyQvLnRlc3QobW9udGgpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKCEvXlxcZCskLy50ZXN0KHllYXIpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKCEocGFyc2VJbnQobW9udGgsIDEwKSA8PSAxMikpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAoeWVhci5sZW5ndGggPT09IDIpIHtcbiAgICAgIHByZWZpeCA9IChuZXcgRGF0ZSkuZ2V0RnVsbFllYXIoKTtcbiAgICAgIHByZWZpeCA9IHByZWZpeC50b1N0cmluZygpLnNsaWNlKDAsIDIpO1xuICAgICAgeWVhciA9IHByZWZpeCArIHllYXI7XG4gICAgfVxuXG4gICAgZXhwaXJ5ID0gbmV3IERhdGUoeWVhciwgbW9udGgpO1xuICAgIGN1cnJlbnRUaW1lID0gbmV3IERhdGU7XG4gICAgZXhwaXJ5LnNldE1vbnRoKGV4cGlyeS5nZXRNb250aCgpIC0gMSk7XG4gICAgZXhwaXJ5LnNldE1vbnRoKGV4cGlyeS5nZXRNb250aCgpICsgMSwgMSk7XG5cbiAgICByZXR1cm4gZXhwaXJ5ID4gY3VycmVudFRpbWU7XG4gIH1cblxuICByZXR1cm4gZnVuY3Rpb24odHlwZSwgdmFsLCBjdHJsLCBzY29wZSwgYXR0cil7XG4gICAgaWYoIV92YWxpZGF0b3JzW3R5cGVdKXtcblxuICAgICAgdHlwZXMgPSBPYmplY3Qua2V5cyhfdmFsaWRhdG9ycyk7XG5cbiAgICAgIGVycnN0ciAgPSAnVW5rbm93biB0eXBlIGZvciB2YWxpZGF0aW9uOiBcIicrdHlwZSsnXCIuICc7XG4gICAgICBlcnJzdHIgKz0gJ1Nob3VsZCBiZSBvbmUgb2Y6IFwiJyt0eXBlcy5qb2luKCdcIiwgXCInKSsnXCInO1xuXG4gICAgICB0aHJvdyBlcnJzdHI7XG4gICAgfVxuICAgIHJldHVybiBfdmFsaWRhdG9yc1t0eXBlXSh2YWwsIGN0cmwsIHNjb3BlLCBhdHRyKTtcbiAgfVxufV0pXG5cblxuLmZhY3RvcnkoJ19WYWxpZGF0ZVdhdGNoJywgWydfVmFsaWRhdGUnLCBmdW5jdGlvbihfVmFsaWRhdGUpe1xuXG4gICAgdmFyIF92YWxpZGF0b3JXYXRjaGVzID0ge31cblxuICAgIF92YWxpZGF0b3JXYXRjaGVzWydjdmMnXSA9IGZ1bmN0aW9uKHR5cGUsIGN0cmwsIHNjb3BlLCBhdHRyKXtcbiAgICAgICAgaWYoYXR0ci5wYXltZW50c1R5cGVNb2RlbCkge1xuICAgICAgICAgICAgc2NvcGUuJHdhdGNoKGF0dHIucGF5bWVudHNUeXBlTW9kZWwsIGZ1bmN0aW9uKG5ld1ZhbCwgb2xkVmFsKSB7XG4gICAgICAgICAgICAgICAgaWYobmV3VmFsICE9IG9sZFZhbCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdmFsaWQgPSBfVmFsaWRhdGUodHlwZSwgY3RybC4kbW9kZWxWYWx1ZSwgY3RybCwgc2NvcGUsIGF0dHIpO1xuICAgICAgICAgICAgICAgICAgICBjdHJsLiRzZXRWYWxpZGl0eSh0eXBlLCB2YWxpZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZnVuY3Rpb24odHlwZSwgY3RybCwgc2NvcGUsIGF0dHIpe1xuICAgICAgICBpZihfdmFsaWRhdG9yV2F0Y2hlc1t0eXBlXSl7XG4gICAgICAgICAgICByZXR1cm4gX3ZhbGlkYXRvcldhdGNoZXNbdHlwZV0odHlwZSwgY3RybCwgc2NvcGUsIGF0dHIpO1xuICAgICAgICB9XG4gICAgfVxufV0pXG5cbi5kaXJlY3RpdmUoJ3BheW1lbnRzVmFsaWRhdGUnLCBbJyR3aW5kb3cnLCAnX1ZhbGlkYXRlJywgJ19WYWxpZGF0ZVdhdGNoJywgZnVuY3Rpb24oJHdpbmRvdywgX1ZhbGlkYXRlLCBfVmFsaWRhdGVXYXRjaCl7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdBJyxcbiAgICByZXF1aXJlOiAnbmdNb2RlbCcsXG4gICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW0sIGF0dHIsIGN0cmwpe1xuXG4gICAgICB2YXIgdHlwZSA9IGF0dHIucGF5bWVudHNWYWxpZGF0ZTtcblxuICAgICAgX1ZhbGlkYXRlV2F0Y2godHlwZSwgY3RybCwgc2NvcGUsIGF0dHIpO1xuXG4gICAgICB2YXIgdmFsaWRhdGVGbiA9IGZ1bmN0aW9uKHZhbCkge1xuICAgICAgICAgIHZhciB2YWxpZCA9IF9WYWxpZGF0ZSh0eXBlLCB2YWwsIGN0cmwsIHNjb3BlLCBhdHRyKTtcbiAgICAgICAgICBjdHJsLiRzZXRWYWxpZGl0eSh0eXBlLCB2YWxpZCk7XG4gICAgICAgICAgcmV0dXJuIHZhbGlkID8gdmFsIDogdW5kZWZpbmVkO1xuICAgICAgfTtcblxuICAgICAgY3RybC4kZm9ybWF0dGVycy5wdXNoKHZhbGlkYXRlRm4pO1xuICAgICAgY3RybC4kcGFyc2Vycy5wdXNoKHZhbGlkYXRlRm4pO1xuICAgIH1cbiAgfVxufV0pXG47YW5ndWxhci5tb2R1bGUoJ2FuZ3VsYXJQYXltZW50cycpXG5cbi5kaXJlY3RpdmUoJ3N0cmlwZUZvcm0nLCBbJyR3aW5kb3cnLCAnJHBhcnNlJywgJ0NvbW1vbicsIGZ1bmN0aW9uKCR3aW5kb3csICRwYXJzZSwgQ29tbW9uKSB7XG4gICAgXG4gIC8vIGRpcmVjdGl2ZSBpbnRlcmNlcHRzIGZvcm0tc3VibWlzc2lvbiwgb2J0YWlucyBTdHJpcGUncyBjYXJkVG9rZW4gdXNpbmcgc3RyaXBlLmpzXG4gIC8vIGFuZCB0aGVuIHBhc3NlcyB0aGF0IHRvIGNhbGxiYWNrIHByb3ZpZGVkIGluIHN0cmlwZUZvcm0sIGF0dHJpYnV0ZS5cblxuICAvLyBkYXRhIHRoYXQgaXMgc2VudCB0byBzdHJpcGUgaXMgZmlsdGVyZWQgZnJvbSBzY29wZSwgbG9va2luZyBmb3IgdmFsaWQgdmFsdWVzIHRvXG4gIC8vIHNlbmQgYW5kIGNvbnZlcnRpbmcgY2FtZWxDYXNlIHRvIHNuYWtlX2Nhc2UsIGUuZyBleHBNb250aCAtPiBleHBfbW9udGhcblxuXG4gIC8vIGZpbHRlciB2YWxpZCBzdHJpcGUtdmFsdWVzIGZyb20gc2NvcGUgYW5kIGNvbnZlcnQgdGhlbSBmcm9tIGNhbWVsQ2FzZSB0byBzbmFrZV9jYXNlXG4gIF9nZXREYXRhVG9TZW5kID0gZnVuY3Rpb24oZGF0YSl7XG4gICAgICAgICAgIFxuICAgIHZhciBwb3NzaWJsZUtleXMgPSBbJ251bWJlcicsICdleHBNb250aCcsICdleHBZZWFyJywgXG4gICAgICAgICAgICAgICAgICAgICdjdmMnLCAnbmFtZScsJ2FkZHJlc3NMaW5lMScsIFxuICAgICAgICAgICAgICAgICAgICAnYWRkcmVzc0xpbmUyJywgJ2FkZHJlc3NDaXR5JyxcbiAgICAgICAgICAgICAgICAgICAgJ2FkZHJlc3NTdGF0ZScsICdhZGRyZXNzWmlwJyxcbiAgICAgICAgICAgICAgICAgICAgJ2FkZHJlc3NDb3VudHJ5J11cbiAgICBcbiAgICB2YXIgY2FtZWxUb1NuYWtlID0gZnVuY3Rpb24oc3RyKXtcbiAgICAgIHJldHVybiBzdHIucmVwbGFjZSgvKFtBLVpdKS9nLCBmdW5jdGlvbihtKXtcbiAgICAgICAgcmV0dXJuIFwiX1wiK20udG9Mb3dlckNhc2UoKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHZhciByZXQgPSB7fTtcblxuICAgIGZvcihpIGluIHBvc3NpYmxlS2V5cyl7XG4gICAgICAgIGlmKGRhdGEuaGFzT3duUHJvcGVydHkocG9zc2libGVLZXlzW2ldKSl7XG4gICAgICAgICAgICByZXRbY2FtZWxUb1NuYWtlKHBvc3NpYmxlS2V5c1tpXSldID0gYW5ndWxhci5jb3B5KGRhdGFbcG9zc2libGVLZXlzW2ldXSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXRbJ251bWJlciddID0gKHJldFsnbnVtYmVyJ10gfHwgJycpLnJlcGxhY2UoLyAvZywnJyk7XG5cbiAgICByZXR1cm4gcmV0O1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0EnLFxuICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtLCBhdHRyKSB7XG5cbiAgICAgIGlmKCEkd2luZG93LlN0cmlwZSl7XG4gICAgICAgICAgdGhyb3cgJ3N0cmlwZUZvcm0gcmVxdWlyZXMgdGhhdCB5b3UgaGF2ZSBzdHJpcGUuanMgaW5zdGFsbGVkLiBJbmNsdWRlIGh0dHBzOi8vanMuc3RyaXBlLmNvbS92Mi8gaW50byB5b3VyIGh0bWwuJztcbiAgICAgIH1cblxuICAgICAgdmFyIGZvcm0gPSBhbmd1bGFyLmVsZW1lbnQoZWxlbSk7XG5cbiAgICAgIGZvcm0uYmluZCgnc3VibWl0JywgZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgZXhwTW9udGhVc2VkID0gc2NvcGUuZXhwTW9udGggPyB0cnVlIDogZmFsc2U7XG4gICAgICAgIGV4cFllYXJVc2VkID0gc2NvcGUuZXhwWWVhciA/IHRydWUgOiBmYWxzZTtcblxuICAgICAgICBpZighKGV4cE1vbnRoVXNlZCAmJiBleHBZZWFyVXNlZCkpe1xuICAgICAgICAgIGV4cCA9IENvbW1vbi5wYXJzZUV4cGlyeShzY29wZS5leHBpcnkpXG4gICAgICAgICAgc2NvcGUuZXhwTW9udGggPSBleHAubW9udGhcbiAgICAgICAgICBzY29wZS5leHBZZWFyID0gZXhwLnllYXJcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBidXR0b24gPSBmb3JtLmZpbmQoJ2J1dHRvbicpO1xuICAgICAgICBidXR0b24ucHJvcCgnZGlzYWJsZWQnLCB0cnVlKTtcblxuICAgICAgICBpZihmb3JtLmhhc0NsYXNzKCduZy12YWxpZCcpKSB7XG4gICAgICAgICAgXG5cbiAgICAgICAgICAkd2luZG93LlN0cmlwZS5jcmVhdGVUb2tlbihfZ2V0RGF0YVRvU2VuZChzY29wZSksIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgICAgICAgICBzY29wZS4kYXBwbHkoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHNjb3BlW2F0dHIuc3RyaXBlRm9ybV0uYXBwbHkoc2NvcGUsIGFyZ3MpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBidXR0b24ucHJvcCgnZGlzYWJsZWQnLCBmYWxzZSk7XG5cbiAgICAgICAgICB9KTtcblxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNjb3BlLiRhcHBseShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHNjb3BlW2F0dHIuc3RyaXBlRm9ybV0uYXBwbHkoc2NvcGUsIFs0MDAsIHtlcnJvcjogJ0ludmFsaWQgZm9ybSBzdWJtaXR0ZWQuJ31dKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBidXR0b24ucHJvcCgnZGlzYWJsZWQnLCBmYWxzZSk7XG4gICAgICAgIH1cblxuICAgICAgICBzY29wZS5leHBNb250aCA9IG51bGw7XG4gICAgICAgIHNjb3BlLmV4cFllYXIgID0gbnVsbDtcblxuICAgICAgfSk7XG4gICAgfVxuICB9XG59XSk7XG4iLCIvKiohXG4gKiBBbmd1bGFySlMgaW1hZ2UgY29tcHJlc3MgZGlyZWN0aXZlXG4gKiBAYXV0aG9yICBPdWthbiAgPGVvdWthbkBnbWFpbC5jb20+XG4gKiBAdmVyc2lvbiAwLjEuNVxuICovXG4ndXNlIHN0cmljdCc7XG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuIGFkYXB0ZWQgb2ZmIG9mIHNhbW15Y2hsL25nLWltYWdlLWNvbXByZXNzIGFuZCBKSUMgZnJvbSBnaXRodWJcbiBodHRwczovL2dpdGh1Yi5jb20vc2FtbXljaGwvbmctaW1hZ2UtY29tcHJlc3NcbiBodHRwczovL2dpdGh1Yi5jb20vYnJ1bm9iYXI3OS9KLUktQ1xuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuKGZ1bmN0aW9uKHdpbmRvdywgYW5ndWxhciwgdW5kZWZpbmVkKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ25nSW1hZ2VDb21wcmVzcycsIFtdKVxuXG4gICAgLmRpcmVjdGl2ZSgnbmdJbWFnZUNvbXByZXNzJywgWyckcScsXG4gICAgICAgIGZ1bmN0aW9uKCRxKSB7XG5cblxuICAgICAgICAgICAgdmFyIFVSTCA9IHdpbmRvdy5VUkwgfHwgd2luZG93LndlYmtpdFVSTDtcblxuICAgICAgICAgICAgdmFyIGdldFJlc2l6ZUFyZWEgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB2YXIgcmVzaXplQXJlYUlkID0gJ2ZpbGV1cGxvYWQtcmVzaXplLWFyZWEnO1xuXG4gICAgICAgICAgICAgICAgdmFyIHJlc2l6ZUFyZWEgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChyZXNpemVBcmVhSWQpO1xuXG4gICAgICAgICAgICAgICAgaWYgKCFyZXNpemVBcmVhKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc2l6ZUFyZWEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICAgICAgICAgICAgICAgICAgcmVzaXplQXJlYS5pZCA9IHJlc2l6ZUFyZWFJZDtcbiAgICAgICAgICAgICAgICAgICAgcmVzaXplQXJlYS5zdHlsZS52aXNpYmlsaXR5ID0gJ2hpZGRlbic7XG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQocmVzaXplQXJlYSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc2l6ZUFyZWE7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFJlY2VpdmVzIGFuIEltYWdlIE9iamVjdCAoY2FuIGJlIEpQRyBPUiBQTkcpIGFuZCByZXR1cm5zIGEgbmV3IEltYWdlIE9iamVjdCBjb21wcmVzc2VkXG4gICAgICAgICAgICAgKiBAcGFyYW0ge0ltYWdlfSBzb3VyY2VJbWdPYmogVGhlIHNvdXJjZSBJbWFnZSBPYmplY3RcbiAgICAgICAgICAgICAqIEBwYXJhbSB7SW50ZWdlcn0gcXVhbGl0eSBUaGUgb3V0cHV0IHF1YWxpdHkgb2YgSW1hZ2UgT2JqZWN0XG4gICAgICAgICAgICAgKiBAcmV0dXJuIHtJbWFnZX0gcmVzdWx0X2ltYWdlX29iaiBUaGUgY29tcHJlc3NlZCBJbWFnZSBPYmplY3RcbiAgICAgICAgICAgICAqL1xuXG4gICAgICAgICAgICB2YXIgamljQ29tcHJlc3MgPSBmdW5jdGlvbihzb3VyY2VJbWdPYmosIG9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICB2YXIgb3V0cHV0Rm9ybWF0ID0gb3B0aW9ucy5yZXNpemVUeXBlO1xuICAgICAgICAgICAgICAgIHZhciBxdWFsaXR5ID0gb3B0aW9ucy5yZXNpemVRdWFsaXR5ICogMTAwIHx8IDcwO1xuICAgICAgICAgICAgICAgIHZhciBtaW1lVHlwZSA9ICdpbWFnZS9qcGVnJztcbiAgICAgICAgICAgICAgICBpZiAob3V0cHV0Rm9ybWF0ICE9PSB1bmRlZmluZWQgJiYgb3V0cHV0Rm9ybWF0ID09PSAncG5nJykge1xuICAgICAgICAgICAgICAgICAgICBtaW1lVHlwZSA9ICdpbWFnZS9wbmcnO1xuICAgICAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICAgICAgdmFyIG1heEhlaWdodCA9IG9wdGlvbnMucmVzaXplTWF4SGVpZ2h0IHx8IDMwMDtcbiAgICAgICAgICAgICAgICB2YXIgbWF4V2lkdGggPSBvcHRpb25zLnJlc2l6ZU1heFdpZHRoIHx8IDI1MDtcblxuICAgICAgICAgICAgICAgIHZhciBoZWlnaHQgPSBzb3VyY2VJbWdPYmouaGVpZ2h0O1xuICAgICAgICAgICAgICAgIHZhciB3aWR0aCA9IHNvdXJjZUltZ09iai53aWR0aDtcblxuICAgICAgICAgICAgICAgIC8vIGNhbGN1bGF0ZSB0aGUgd2lkdGggYW5kIGhlaWdodCwgY29uc3RyYWluaW5nIHRoZSBwcm9wb3J0aW9uc1xuICAgICAgICAgICAgICAgIGlmICh3aWR0aCA+IGhlaWdodCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAod2lkdGggPiBtYXhXaWR0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0ID0gTWF0aC5yb3VuZChoZWlnaHQgKj0gbWF4V2lkdGggLyB3aWR0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aWR0aCA9IG1heFdpZHRoO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGhlaWdodCA+IG1heEhlaWdodCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGggPSBNYXRoLnJvdW5kKHdpZHRoICo9IG1heEhlaWdodCAvIGhlaWdodCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQgPSBtYXhIZWlnaHQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgY3ZzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgICAgICAgICAgICAgY3ZzLndpZHRoID0gd2lkdGg7IC8vc291cmNlSW1nT2JqLm5hdHVyYWxXaWR0aDtcbiAgICAgICAgICAgICAgICBjdnMuaGVpZ2h0ID0gaGVpZ2h0OyAvL3NvdXJjZUltZ09iai5uYXR1cmFsSGVpZ2h0O1xuICAgICAgICAgICAgICAgIHZhciBjdHggPSBjdnMuZ2V0Q29udGV4dCgnMmQnKS5kcmF3SW1hZ2Uoc291cmNlSW1nT2JqLCAwLCAwLCB3aWR0aCwgaGVpZ2h0KTtcbiAgICAgICAgICAgICAgICB2YXIgbmV3SW1hZ2VEYXRhID0gY3ZzLnRvRGF0YVVSTChtaW1lVHlwZSwgcXVhbGl0eSAvIDEwMCk7XG4gICAgICAgICAgICAgICAgdmFyIHJlc3VsdEltYWdlT2JqID0gbmV3IEltYWdlKCk7XG4gICAgICAgICAgICAgICAgcmVzdWx0SW1hZ2VPYmouc3JjID0gbmV3SW1hZ2VEYXRhO1xuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHRJbWFnZU9iai5zcmM7XG5cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHZhciByZXNpemVJbWFnZSA9IGZ1bmN0aW9uKG9yaWdJbWFnZSwgb3B0aW9ucykge1xuICAgICAgICAgICAgICAgIHZhciBtYXhIZWlnaHQgPSBvcHRpb25zLnJlc2l6ZU1heEhlaWdodCB8fCAzMDA7XG4gICAgICAgICAgICAgICAgdmFyIG1heFdpZHRoID0gb3B0aW9ucy5yZXNpemVNYXhXaWR0aCB8fCAyNTA7XG4gICAgICAgICAgICAgICAgdmFyIHF1YWxpdHkgPSBvcHRpb25zLnJlc2l6ZVF1YWxpdHkgfHwgMC43O1xuICAgICAgICAgICAgICAgIHZhciB0eXBlID0gb3B0aW9ucy5yZXNpemVUeXBlIHx8ICdpbWFnZS9qcGcnO1xuXG4gICAgICAgICAgICAgICAgdmFyIGNhbnZhcyA9IGdldFJlc2l6ZUFyZWEoKTtcblxuICAgICAgICAgICAgICAgIHZhciBoZWlnaHQgPSBvcmlnSW1hZ2UuaGVpZ2h0O1xuICAgICAgICAgICAgICAgIHZhciB3aWR0aCA9IG9yaWdJbWFnZS53aWR0aDtcblxuICAgICAgICAgICAgICAgIC8vIGNhbGN1bGF0ZSB0aGUgd2lkdGggYW5kIGhlaWdodCwgY29uc3RyYWluaW5nIHRoZSBwcm9wb3J0aW9uc1xuICAgICAgICAgICAgICAgIGlmICh3aWR0aCA+IGhlaWdodCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAod2lkdGggPiBtYXhXaWR0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0ID0gTWF0aC5yb3VuZChoZWlnaHQgKj0gbWF4V2lkdGggLyB3aWR0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aWR0aCA9IG1heFdpZHRoO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGhlaWdodCA+IG1heEhlaWdodCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGggPSBNYXRoLnJvdW5kKHdpZHRoICo9IG1heEhlaWdodCAvIGhlaWdodCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQgPSBtYXhIZWlnaHQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjYW52YXMud2lkdGggPSB3aWR0aDtcbiAgICAgICAgICAgICAgICBjYW52YXMuaGVpZ2h0ID0gaGVpZ2h0O1xuXG4gICAgICAgICAgICAgICAgLy9kcmF3IGltYWdlIG9uIGNhbnZhc1xuICAgICAgICAgICAgICAgIHZhciBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICAgICAgICAgICAgICBjdHguZHJhd0ltYWdlKG9yaWdJbWFnZSwgMCwgMCwgd2lkdGgsIGhlaWdodCk7XG5cbiAgICAgICAgICAgICAgICAvLyBnZXQgdGhlIGRhdGEgZnJvbSBjYW52YXMgYXMgNzAlIGpwZyAob3Igc3BlY2lmaWVkIHR5cGUpLlxuICAgICAgICAgICAgICAgIHJldHVybiBjYW52YXMudG9EYXRhVVJMKHR5cGUsIHF1YWxpdHkpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdmFyIGNyZWF0ZUltYWdlID0gZnVuY3Rpb24odXJsLCBjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgIHZhciBpbWFnZSA9IG5ldyBJbWFnZSgpO1xuICAgICAgICAgICAgICAgIGltYWdlLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhpbWFnZSk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBpbWFnZS5zcmMgPSB1cmw7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB2YXIgZmlsZVRvRGF0YVVSTCA9IGZ1bmN0aW9uKGZpbGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuICAgICAgICAgICAgICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuICAgICAgICAgICAgICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoZS50YXJnZXQucmVzdWx0KTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGZpbGUpO1xuICAgICAgICAgICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICAgICAgICAgICAgfTtcblxuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICAgICAgICAgICAgc2NvcGU6IHtcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2U6ICc9JyxcbiAgICAgICAgICAgICAgICAgICAgcmVzaXplTWF4SGVpZ2h0OiAnQD8nLFxuICAgICAgICAgICAgICAgICAgICByZXNpemVNYXhXaWR0aDogJ0A/JyxcbiAgICAgICAgICAgICAgICAgICAgcmVzaXplUXVhbGl0eTogJ0A/JyxcbiAgICAgICAgICAgICAgICAgICAgcmVzaXplVHlwZTogJ0A/J1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgbGluazogZnVuY3Rpb24gcG9zdExpbmsoc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGRvUmVzaXppbmcgPSBmdW5jdGlvbihpbWFnZVJlc3VsdCwgY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNyZWF0ZUltYWdlKGltYWdlUmVzdWx0LnVybCwgZnVuY3Rpb24oaW1hZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3ZhciBkYXRhVVJMID0gcmVzaXplSW1hZ2UoaW1hZ2UsIHNjb3BlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YVVSTGNvbXByZXNzZWQgPSBqaWNDb21wcmVzcyhpbWFnZSwgc2NvcGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGltYWdlUmVzdWx0LnJlc2l6ZWQgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHRkYXRhVVJMOiBkYXRhVVJMLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx0dHlwZTogZGF0YVVSTC5tYXRjaCgvOiguK1xcLy4rKTsvKVsxXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2VSZXN1bHQuY29tcHJlc3NlZCA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVVSTDogZGF0YVVSTGNvbXByZXNzZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IGRhdGFVUkxjb21wcmVzc2VkLm1hdGNoKC86KC4rXFwvLispOy8pWzFdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhpbWFnZVJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgYXBwbHlTY29wZSA9IGZ1bmN0aW9uKGltYWdlUmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzY29wZS4kYXBwbHkoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGF0dHJzLm11bHRpcGxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlLmltYWdlLnB1c2goaW1hZ2VSZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlLmltYWdlID0gaW1hZ2VSZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH07XG5cblxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmJpbmQoJ2NoYW5nZScsIGZ1bmN0aW9uKGV2dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy93aGVuIG11bHRpcGxlIGFsd2F5cyByZXR1cm4gYW4gYXJyYXkgb2YgaW1hZ2VzXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXR0cnMubXVsdGlwbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY29wZS5pbWFnZSA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZmlsZXMgPSBldnQudGFyZ2V0LmZpbGVzO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBmaWxlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vY3JlYXRlIGEgcmVzdWx0IG9iamVjdCBmb3IgZWFjaCBmaWxlIGluIGZpbGVzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGltYWdlUmVzdWx0ID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlOiBmaWxlc1tpXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiBVUkwuY3JlYXRlT2JqZWN0VVJMKGZpbGVzW2ldKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlVG9EYXRhVVJMKGZpbGVzW2ldKS50aGVuKGZ1bmN0aW9uKGRhdGFVUkwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2VSZXN1bHQuZGF0YVVSTCA9IGRhdGFVUkw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2NvcGUucmVzaXplTWF4SGVpZ2h0IHx8IHNjb3BlLnJlc2l6ZU1heFdpZHRoKSB7IC8vcmVzaXplIGltYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvUmVzaXppbmcoaW1hZ2VSZXN1bHQsIGZ1bmN0aW9uKGltYWdlUmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHBseVNjb3BlKGltYWdlUmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsgLy9ubyByZXNpemluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHBseVNjb3BlKGltYWdlUmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICBdKTtcbn0pKHdpbmRvdywgd2luZG93LmFuZ3VsYXIpO1xuIl19
