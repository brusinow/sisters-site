angular.module("SistersCtrls").controller("BlogMasterCtrl",["$scope","$state","$http","$timeout","$location","$stateParams","Auth","Blog","HelperService","InstagramFactory","AllTagsService","TwitterFactory",function(t,e,a,o,l,n,s,i,r,g,d,c){t.loadedInsta=!1,t.loadedTwitter=!1,t.$emit("loadMainContainer","loaded"),g.then(function(e){t.photos=e.data,t.loadedInsta=!0,t.loadedTwitter&&(t.loaded=!0)}),c.then(function(e){console.log(e),t.tweetDate=e.allTweetData.created_at,t.twitterUser=e.allTweetData.user.name,t.twitterHandle=e.allTweetData.user.screen_name,t.tweetId=e.allTweetData.id_str,t.tweet=e.tweetBody,t.favorites=e.favorites,t.retweets=e.retweets,t.loadedTwitter=!0,t.loadedInsta&&(t.loaded=!0)}),t.enable=!0,t.auth=s,t.auth.$onAuthStateChanged(function(e){t.firebaseUser=e})}]).controller("BlogCtrl",["$scope","$state","$http","$timeout","$location","$stateParams","Auth","Blog","HelperService","InstagramFactory","AllTagsService",function(t,e,a,o,l,n,s,i,r,g,d){var c=document.getElementById("main");c.style.backgroundColor="",t.$emit("loadMainContainer","loaded"),t.allTags=d(),t.location=l.$$path,g.then(function(e){t.photos=e.data,t.loaded=!0}),t.enable=!0,t.parseTitle=r.titleToURL,t.allPosts=i,t.page=n.page||0,t.pageUp="/blog/"+(parseInt(t.page)+1),t.pageDown="/blog/"+r.pageDown(t.page),t.length=i.length,t.first=r.findFirst(t.length,t.page),t.last=t.length-4*t.page,t.posts=i.slice(t.first,t.last),t.editPost=function(t){l.url("/blog/edit/"+t)}}]).controller("BlogArchiveCtrl",["$scope","$state","$timeout","$stateParams","$location","Blog","Archive","Auth","HelperService","AllTagsService",function(t,e,a,o,l,n,s,i,r,g){t.$emit("loadMainContainer","notLoaded"),t.location=l.$$path,t.allTags=g(),t.enable=!0,t.fullBlog=n;for(var d=[],c=0;c<s.length;c++)for(var p=s[c].$id,u=0;u<n.length;u++){var h=n[u].$id;p===h&&d.push(n[u])}t.allPosts=d,t.params=o,t.parseTitle=r.titleToURL,t.auth=i,t.auth.$onAuthStateChanged(function(e){t.firebaseUser=e}),t.page=o.page||0,t.pageUp="/blog/archives/"+o.year+"/"+o.month+"/"+(parseInt(t.page)+1),t.pageDown="/blog/archives/"+o.year+"/"+o.month+"/"+r.pageDown(t.page),t.length=t.allPosts.length,t.first=r.findFirst(t.length,t.page),t.last=t.length-4*t.page,t.posts=t.allPosts.slice(t.first,t.last),a(function(){t.$emit("loadMainContainer","loaded"),t.loaded=!0}),t.editPost=function(t){var e=r.titleToURL(t.postTitle);l.url("/blog/edit/"+e)}}]).controller("BlogTagsCtrl",["$scope","$state","$stateParams","$location","$timeout","Blog","TagsShow","Auth","HelperService","AllTagsService",function(t,e,a,o,l,n,s,i,r,g){t.$emit("loadMainContainer","notLoaded"),t.location=o.$$path,t.allTags=g(),t.enable=!0,t.tagName=s[0].name;for(var d=s[0].$id,c=[],p=0;p<n.length;p++){var u=n[p].tags;u[d]&&c.push(n[p])}t.auth=i,t.auth.$onAuthStateChanged(function(e){t.firebaseUser=e}),t.page=a.page||0,t.pageUp="/blog/tags/"+a.tagName+"/"+(parseInt(t.page)+1),t.pageDown="/blog/tags/"+a.tagName+"/"+r.pageDown(t.page),t.length=length,t.first=r.findFirst(t.length,t.page),t.last=t.length-4*t.page,console.log("Last: ",t.last),t.posts=c.slice(t.first,t.last),console.log(t.posts),l(function(){t.$emit("loadMainContainer","loaded"),t.loaded=!0}),t.editPost=function(t){var e=r.titleToURL(t.postTitle);o.url("/blog/edit/"+e)}}]).controller("BlogShowCtrl",["$scope","$state","$stateParams","$location","$timeout","thisPost","Blog","AllTagsService",function(t,e,a,o,l,n,s,i){t.$emit("loadMainContainer","notLoaded"),t.location=o.$$path,t.allTags=i(),t.enable=!1,t.recentPosts=s,console.log(t.recentPosts),t.posts=n,t.allPosts=n,l(function(){t.$emit("loadMainContainer","loaded"),t.loaded=!0})}]).controller("BlogSidebarCtrl",["$scope","$state","$stateParams","$timeout","ArchiveService","AllTagsService","BlogPosts","HelperService","$uibModal","$log",function(t,e,a,o,l,n,s,i,r,g){t.recentPosts=s(),t.parseTitle=i.titleToURL,t.years=l.years(),t.years.$loaded().then(function(){}),t.allTags=n(),t.newBlogPost=function(){e.go("blog-new")},t.editTag=function(t){var e=r.open({animation:!0,backdrop:!0,templateUrl:"/views/blog/editTagsModal.html",controller:"EditBlogTagsCtrl",size:"lg",resolve:{Blog:["BlogPosts",function(t){return t().$loaded()}],tag:t}});e.result.then(function(){console.log("submitted modal")},function(){g.info("Modal dismissed at: "+new Date)})}}]);