"use strict";angular.module("ngCart",["ngCart.directives"]).config([function(){}]).provider("$ngCart",function(){this.$get=function(){}}).run(["$rootScope","ngCart","ngCartItem","store",function(t,e,r,n){t.$on("ngCart:change",function(){e.$save()}),angular.isObject(n.get("cart"))?e.$restore(n.get("cart")):e.init()}]).service("ngCart",["$rootScope","$location","$window","ngCartItem","store",function(t,e,r,n,a){this.init=function(){this.$cart={shipping:null,taxRate:null,tax:null,items:[]}},this.addItem=function(e,r,a,i,o,s,l){var u=this.getItemById(e);if("object"==typeof u)u.setQuantity(o,!1),t.$broadcast("ngCart:itemUpdated",u);else{var c=new n(e,r,a,i,o,s,l);this.$cart.items.push(c),t.$broadcast("ngCart:itemAdded",c)}t.$broadcast("ngCart:change",{})},this.addItemBtn=function(r,a,i,o,s,l){var u=l.skus;if(1===u.length){var c=this.getItemById(r);if("object"==typeof c)c.setQuantity(s,!1),t.$broadcast("ngCart:itemUpdated",c);else{var p=new n(r,a,i,o,s,l);this.$cart.items.push(p),t.$broadcast("ngCart:itemAdded",p)}t.$broadcast("ngCart:change",{})}else e.url("/store/"+l.id)},this.changeQuantity=function(e,r){var n=this.getItemById(e);"object"==typeof n?(n.setQuantity(r,!0),t.$broadcast("ngCart:itemUpdated",n)):console.log("nothing there"),t.$broadcast("ngCart:change",{})},this.getItemById=function(t){var e=this.getCart().items,r=!1;return angular.forEach(e,function(e){e.getId()===t&&(r=e)}),r},this.setShipping=function(e){return this.$cart.shipping=e,t.$broadcast("ngCart:change",{}),this.getShipping()},this.getShipping=function(){return 0==this.getCart().items.length?0:this.getCart().shipping},this.setTaxRate=function(e){return this.$cart.taxRate=+parseFloat(e).toFixed(2),t.$broadcast("ngCart:change",{}),this.getTaxRate()},this.getTaxRate=function(){return this.$cart.taxRate},this.getTax=function(){return Math.round(this.getSubTotal()/100*this.getCart().taxRate)},this.setCart=function(t){return this.$cart=t,this.getCart()},this.getCart=function(){return this.$cart},this.getItems=function(){return this.getCart().items},this.getTotalItems=function(){var t=0,e=this.getItems();return angular.forEach(e,function(e){t+=e.getQuantity()}),t},this.getTotalUniqueItems=function(){return this.getCart().items.length},this.getSubTotal=function(){var t=0;return angular.forEach(this.getCart().items,function(e){t+=e.getTotal()}),+parseFloat(t).toFixed(2)},this.totalCost=function(){return+parseFloat(this.getSubTotal()+this.getShipping()+this.getTax()).toFixed(2)},this.removeItem=function(e){var r=this.$cart.items.splice(e,1)[0]||{};t.$broadcast("ngCart:itemRemoved",r),t.$broadcast("ngCart:change",{})},this.removeItemById=function(e){var r,n=this.getCart();angular.forEach(n.items,function(t,r){t.getId()===e&&(t=n.items.splice(r,1)[0]||{})}),this.setCart(n),t.$broadcast("ngCart:itemRemoved",r),t.$broadcast("ngCart:change",{})},this.empty=function(){t.$broadcast("ngCart:change",{}),this.$cart.items=[],r.localStorage.removeItem("cart")},this.isEmpty=function(){return!(this.$cart.items.length>0)},this.toObject=function(){if(0===this.getItems().length)return!1;var t=[];return angular.forEach(this.getItems(),function(e){t.push(e.toObject())}),{shipping:this.getShipping(),tax:this.getTax(),taxRate:this.getTaxRate(),subTotal:this.getSubTotal(),totalCost:this.totalCost(),items:t}},this.$restore=function(t){var e=this;e.init(),e.$cart.shipping=t.shipping,e.$cart.taxRate=t.taxRate,e.$cart.tax=t.tax,angular.forEach(t.items,function(t){e.$cart.items.push(new n(t.parent,t.sku,t.description,t.amount,t.quantity,t._data,t.attr))}),this.$save()},this.$save=function(){return a.set("cart",JSON.stringify(this.getCart()))}}]).factory("ngCartItem",["$rootScope","$log",function(t,e){var r=function(t,e,r,n,a,i,o){this.setId(t),this.setSku(e),this.setName(r),this.setPrice(n),this.setQuantity(a),this.setData(i),this.setAttr(o)};return r.prototype.setId=function(t){t?this.parent=t:e.error("An ID must be provided")},r.prototype.setSku=function(t){t?this.sku=t:e.error("A sku must be provided")},r.prototype.getId=function(){return this.parent},r.prototype.getSku=function(){return this.sku},r.prototype.setName=function(t){t?this.description=t:e.error("A name must be provided")},r.prototype.getName=function(){return this.description},r.prototype.setPrice=function(t){var r=parseFloat(t);r?r<=0?e.error("A price must be over 0"):this.amount=r:e.error("A price must be provided")},r.prototype.getPrice=function(){return this.amount},r.prototype.setQuantity=function(t,r){var n=parseInt(t);n%1===0?(r===!0?this.quantity+=n:this.quantity=n,this.quantity<1&&(this.quantity=1)):(this.quantity=1,e.info("Quantity must be an integer and was defaulted to 1"))},r.prototype.getQuantity=function(){return this.quantity},r.prototype.setData=function(t){t&&(this._data=t)},r.prototype.getData=function(){return this._data?this._data:void e.info("This item has no data")},r.prototype.setAttr=function(t){t&&(this.attr=t)},r.prototype.getAttr=function(){if(this.attr){if(this.attr.size)return this.attr.size;if(this.attr.color)return this.attr.size}},r.prototype.getTotal=function(){return+parseFloat(this.getQuantity()*this.getPrice()).toFixed(2)},r.prototype.toObject=function(){return{id:this.getId(),name:this.getName(),price:this.getPrice(),quantity:this.getQuantity(),data:this.getData(),total:this.getTotal()}},r}]).service("store",["$window",function(t){return{get:function(e){if(t.localStorage.getItem(e)){var r=angular.fromJson(t.localStorage.getItem(e));return JSON.parse(r)}return!1},set:function(e,r){return void 0===r?t.localStorage.removeItem(e):t.localStorage.setItem(e,angular.toJson(r)),t.localStorage.getItem(e)}}}]).controller("CartController",["$scope","$rootScope","ngCart","$timeout",function(t,e,r,n){t.loaded=!1,t.toggleCart=!1,t.ngCart=r,n(function(){t.loaded=!0});var a=r.getItems(),i=[];angular.forEach(a,function(t){"shippable"===t._data.product_type&&i.push(t)}),i.length>0?(t.shipBool=!0,t.$emit("setShippable",!0)):(t.shipBool=!1,t.$emit("setShippable",!1))}]).controller("CartBtnController",["$scope","ngCart","$timeout",function(t,e,r){t.loaded=!1,t.toggleCart=!1,t.ngCart=e,r(function(){t.loaded=!0})}]).value("version","1.0.0"),angular.module("ngCart.directives",["ngCart.fulfilment"]).controller("CartController",["$scope","ngCart",function(t,e){t.ngCart=e}]).directive("ngcartAddBtn",["ngCart",function(t){return{restrict:"E",controller:"CartBtnController",scope:{id:"@",sku:"@",name:"@",quantity:"@",quantityMax:"@",price:"@",data:"="},transclude:!0,templateUrl:function(t,e){return"undefined"==typeof e.templateUrl?"views/ngCart/addtocartBtn.html":e.templateUrl},link:function(e,r,n){e.attrs=n,e.inCart=function(){return t.getItemById(n.id)},e.inCart()?e.q=t.getItemById(n.id).getQuantity():e.q=parseInt(e.quantity),e.qtyOpt=[];for(var a=1;a<=e.quantityMax;a++)e.qtyOpt.push(a)}}}]).directive("ngcartAddtocart",["ngCart",function(t){return{restrict:"E",controller:"CartController",scope:{id:"@",sku:"@",name:"@",quantity:"@",quantityMax:"@",price:"@",data:"="},transclude:!0,templateUrl:function(t,e){return"undefined"==typeof e.templateUrl?"views/ngCart/addtocart.html":e.templateUrl},link:function(e,r,n){e.attrs=n,e.inCart=function(){return t.getItemById(n.id)},e.inCart()?e.q=t.getItemById(n.id).getQuantity():e.q=parseInt(e.quantity),e.qtyOpt=[];var a,i=firebase.database().ref("tickets/"+e.id+"/totalTickets");i.once("value").then(function(t){if(e.totalTix=t.val(),a=e.quantityMax<e.totalTix?e.quantityMax:e.totalTix,a>0)for(var r=1;r<=a;r++)e.qtyOpt.push(r)})}}}]).directive("ngcartCart",[function(){return{restrict:"E",controller:"CartController",scope:{},templateUrl:function(t,e){return"undefined"==typeof e.templateUrl?"views/ngCart/cart.html":e.templateUrl},link:function(t,e,r){}}}]).directive("ngcartSummary",[function(){return{restrict:"E",controller:"CartController",scope:{},transclude:!0,templateUrl:function(t,e){return"undefined"==typeof e.templateUrl?"views/ngCart/summary.html":e.templateUrl}}}]).directive("ngcartCartConfirm",[function(){return{restrict:"E",controller:"CartController",scope:{},templateUrl:function(t,e){return"undefined"==typeof e.templateUrl?"views/ngCart/cart-confirm.html":e.templateUrl},link:function(t,e,r){}}}]).directive("ngcartSmallCart",[function(){return{restrict:"E",controller:"CartController",scope:{},templateUrl:function(t,e){return"undefined"==typeof e.templateUrl?"views/ngCart/small-cart.html":e.templateUrl},link:function(t,e,r){}}}]).directive("ngcartSmallCartCollapse",[function(){return{restrict:"E",controller:"CartController",scope:{},templateUrl:function(t,e){return"undefined"==typeof e.templateUrl?"views/ngCart/small-cart-collapse.html":e.templateUrl},link:function(t,e,r){}}}]).directive("ngcartCheckout",[function(){return{restrict:"E",controller:["$rootScope","$scope","ngCart","fulfilmentProvider",function(t,e,r,n){e.ngCart=r,e.checkout=function(){n.setService(e.service),n.setSettings(e.settings),n.checkout().success(function(e,r,n,a){t.$broadcast("ngCart:checkout_succeeded",e)}).error(function(e,r,n,a){t.$broadcast("ngCart:checkout_failed",{statusCode:r,error:e})})}}],scope:{service:"@",settings:"="},transclude:!0,templateUrl:function(t,e){return"undefined"==typeof e.templateUrl?"template/ngCart/checkout.html":e.templateUrl}}}]),angular.module("ngCart.fulfilment",[]).service("fulfilmentProvider",["$injector",function(t){this._obj={service:void 0,settings:void 0},this.setService=function(t){this._obj.service=t},this.setSettings=function(t){this._obj.settings=t},this.checkout=function(){var e=t.get("ngCart.fulfilment."+this._obj.service);return e.checkout(this._obj.settings)}}]).service("ngCart.fulfilment.log",["$q","$log","ngCart",function(t,e,r){this.checkout=function(){var n=t.defer();return e.info(r.toObject()),n.resolve({cart:r.toObject()}),n.promise}}]).service("ngCart.fulfilment.http",["$http","ngCart",function(t,e){this.checkout=function(r){return t.post(r.url,{data:e.toObject(),options:r.options})}}]).service("ngCart.fulfilment.paypal",["$http","ngCart",function(t,e){}]),angular.module("angular-parallax",[]).directive("parallax",["$window",function(t){return{restrict:"A",scope:{parallaxRatio:"@",parallaxVerticalOffset:"@",parallaxHorizontalOffset:"@"},link:function(e,r,n){var a=function(){e.parallaxHorizontalOffset||(e.parallaxHorizontalOffset="0");var n=t.pageYOffset*(e.parallaxRatio?e.parallaxRatio:1.1);if(n<=t.innerHeight){var a=n<e.parallaxVerticalOffset?e.parallaxVerticalOffset:n,i=e.parallaxHorizontalOffset.indexOf("%")===-1?e.parallaxHorizontalOffset+"px":e.parallaxHorizontalOffset;r.css("transform","translate("+i+", "+a+"px)")}};a(),angular.element(t).bind("scroll",a),angular.element(t).bind("touchmove",a)}}}]).directive("parallaxBackground",["$window",function(t){return{restrict:"A",transclude:!0,template:"<div ng-transclude></div>",scope:{parallaxRatio:"@",parallaxVerticalOffset:"@",parallaxStartPoint:"@"},link:function(e,r,n){var a=function(){var n=e.parallaxVerticalOffset/100*r[0].offsetHeight,a=(r.prop("offsetTop")-t.pageYOffset)*(e.parallaxRatio?e.parallaxRatio:1.1)-(n||0);a>=e.parallaxStartPoint&&(a=e.parallaxStartPoint),r.css("background-position","50% "+a+"px")};angular.element(t).bind("load",function(t){a(),e.$apply()}),angular.element(t).bind("scroll",a),angular.element(t).bind("touchmove",a)}}}]),function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var r=e();for(var n in r)("object"==typeof exports?exports:t)[n]=r[n]}}(this,function(){return function(t){function e(n){if(r[n])return r[n].exports;var a=r[n]={exports:{},id:n,loaded:!1};return t[n].call(a.exports,a,a.exports,e),a.loaded=!0,a.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){t.exports="ngFileSaver",angular.module("ngFileSaver",[]).factory("FileSaver",["Blob","SaveAs","FileSaverUtils",r(1)]).factory("FileSaverUtils",[r(2)]).factory("Blob",["$window",r(3)]).factory("SaveAs",[r(5)])},function(t,e){t.exports=function(t,e,r){function n(t,n,a){try{e(t,n,a)}catch(t){r.handleErrors(t.message)}}return{saveAs:function(t,e,a){return r.isBlobInstance(t)||r.handleErrors("Data argument should be a blob instance"),r.isString(e)||r.handleErrors("Filename argument should be a string"),n(t,e,a)}}}},function(t,e){t.exports=function(){return{handleErrors:function(t){throw new Error(t)},isString:function(t){return"string"==typeof t||t instanceof String},isUndefined:function(t){return"undefined"==typeof t},isBlobInstance:function(t){return t instanceof Blob}}}},function(t,e,r){r(4),t.exports=function(t){return t.Blob}},function(t,e){!function(t){if(t.URL=t.URL||t.webkitURL,t.Blob&&t.URL)try{return void new Blob}catch(t){}var e=t.BlobBuilder||t.WebKitBlobBuilder||t.MozBlobBuilder||function(t){var e=function(t){return Object.prototype.toString.call(t).match(/^\[object\s(.*)\]$/)[1]},r=function(){this.data=[]},n=function(t,e,r){this.data=t,this.size=t.length,this.type=e,this.encoding=r},a=r.prototype,i=n.prototype,o=t.FileReaderSync,s=function(t){this.code=this[this.name=t]},l="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),u=l.length,c=t.URL||t.webkitURL||t,p=c.createObjectURL,f=c.revokeObjectURL,d=c,g=t.btoa,h=t.atob,m=t.ArrayBuffer,v=t.Uint8Array,y=/^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/;for(n.fake=i.fake=!0;u--;)s.prototype[l[u]]=u+1;return c.createObjectURL||(d=t.URL=function(t){var e,r=document.createElementNS("http://www.w3.org/1999/xhtml","a");return r.href=t,"origin"in r||("data:"===r.protocol.toLowerCase()?r.origin=null:(e=t.match(y),r.origin=e&&e[1])),r}),d.createObjectURL=function(t){var e,r=t.type;return null===r&&(r="application/octet-stream"),t instanceof n?(e="data:"+r,"base64"===t.encoding?e+";base64,"+t.data:"URI"===t.encoding?e+","+decodeURIComponent(t.data):g?e+";base64,"+g(t.data):e+","+encodeURIComponent(t.data)):p?p.call(c,t):void 0},d.revokeObjectURL=function(t){"data:"!==t.substring(0,5)&&f&&f.call(c,t)},a.append=function(t){var r=this.data;if(v&&(t instanceof m||t instanceof v)){for(var a="",i=new v(t),l=0,u=i.length;l<u;l++)a+=String.fromCharCode(i[l]);r.push(a)}else if("Blob"===e(t)||"File"===e(t)){if(!o)throw new s("NOT_READABLE_ERR");var c=new o;r.push(c.readAsBinaryString(t))}else t instanceof n?"base64"===t.encoding&&h?r.push(h(t.data)):"URI"===t.encoding?r.push(decodeURIComponent(t.data)):"raw"===t.encoding&&r.push(t.data):("string"!=typeof t&&(t+=""),r.push(unescape(encodeURIComponent(t))))},a.getBlob=function(t){return arguments.length||(t=null),new n(this.data.join(""),t,"raw")},a.toString=function(){return"[object BlobBuilder]"},i.slice=function(t,e,r){var a=arguments.length;return a<3&&(r=null),new n(this.data.slice(t,a>1?e:this.data.length),r,this.encoding)},i.toString=function(){return"[object Blob]"},i.close=function(){this.size=0,delete this.data},r}(t);t.Blob=function(t,r){var n=r?r.type||"":"",a=new e;if(t)for(var i=0,o=t.length;i<o;i++)Uint8Array&&t[i]instanceof Uint8Array?a.append(t[i].buffer):a.append(t[i]);var s=a.getBlob(n);return!s.slice&&s.webkitSlice&&(s.slice=s.webkitSlice),s};var r=Object.getPrototypeOf||function(t){return t.__proto__};t.Blob.prototype=r(new t.Blob)}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content||this)},function(t,e,r){t.exports=function(){return r(6).saveAs||function(){}}},function(t,e,r){var n,a,i=i||function(t){if(!("undefined"==typeof t||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var e=t.document,r=function(){return t.URL||t.webkitURL||t},n=e.createElementNS("http://www.w3.org/1999/xhtml","a"),a="download"in n,i=function(t){var e=new MouseEvent("click");t.dispatchEvent(e)},o=/constructor/i.test(t.HTMLElement),s=/CriOS\/[\d]+/.test(navigator.userAgent),l=function(e){(t.setImmediate||t.setTimeout)(function(){throw e},0)},u="application/octet-stream",c=4e4,p=function(t){var e=function(){"string"==typeof t?r().revokeObjectURL(t):t.remove()};setTimeout(e,c)},f=function(t,e,r){e=[].concat(e);for(var n=e.length;n--;){var a=t["on"+e[n]];if("function"==typeof a)try{a.call(t,r||t)}catch(t){l(t)}}},d=function(t){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob([String.fromCharCode(65279),t],{type:t.type}):t},g=function(e,l,c){c||(e=d(e));var g,h=this,m=e.type,v=m===u,y=function(){f(h,"writestart progress write writeend".split(" "))},b=function(){if((s||v&&o)&&t.FileReader){var n=new FileReader;return n.onloadend=function(){var e=s?n.result:n.result.replace(/^data:[^;]*;/,"data:attachment/file;"),r=t.open(e,"_blank");r||(t.location.href=e),e=void 0,h.readyState=h.DONE,y()},n.readAsDataURL(e),void(h.readyState=h.INIT)}if(g||(g=r().createObjectURL(e)),v)t.location.href=g;else{var a=t.open(g,"_blank");a||(t.location.href=g)}h.readyState=h.DONE,y(),p(g)};return h.readyState=h.INIT,a?(g=r().createObjectURL(e),void setTimeout(function(){n.href=g,n.download=l,i(n),y(),p(g),h.readyState=h.DONE})):void b()},h=g.prototype,m=function(t,e,r){return new g(t,e||t.name||"download",r)};return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(t,e,r){return e=e||t.name||"download",r||(t=d(t)),navigator.msSaveOrOpenBlob(t,e)}:(h.abort=function(){},h.readyState=h.INIT=0,h.WRITING=1,h.DONE=2,h.error=h.onwritestart=h.onprogress=h.onwrite=h.onabort=h.onerror=h.onwriteend=null,m)}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);"undefined"!=typeof t&&t.exports?t.exports.saveAs=i:null!==r(7)&&null!==r(8)&&(n=[],a=function(){return i}.apply(e,n),!(void 0!==a&&(t.exports=a)))},function(t,e){t.exports=function(){throw new Error("define cannot be used indirect")}},function(t,e){(function(e){t.exports=e}).call(e,{})}])});var uiroutermetatags;!function(t){function e(t,e,r,n){function a(t,e,r,a,i){n.prerenderReady=!1}function i(e,n){n.metaTags||t.debug('MetaTags - route: "'+n.name+'" does not contain any metatags'),r.update(n.metaTags)}function o(t,e,a,i,o,s){r.prerender.statusCode=500,n.prerenderReady=!0}function s(t,e,a){r.prerender.statusCode=404,n.prerenderReady=!0}e.MetaTags=r,e.$on("$stateChangeStart",a),e.$on("$stateChangeSuccess",i),e.$on("$stateChangeError",o),e.$on("$stateNotFound",s)}e.$inject=["$log","$rootScope","MetaTags","$window"];var r=angular.module("ui.router.metatags",["ui.router"]),n=function(){function t(){this.prefix="",this.suffix="",this.defaultTitle="",this.defaultDescription="",this.defaultKeywords="",this.defaultRobots="",this.staticProperties={},this.enableOGURL=!1}return t.prototype.setTitlePrefix=function(t){return this.prefix=t,this},t.prototype.setTitleSuffix=function(t){return this.suffix=t,this},t.prototype.setDefaultTitle=function(t){return this.defaultTitle=t,this},t.prototype.setDefaultDescription=function(t){return this.defaultDescription=t,this},t.prototype.setDefaultKeywords=function(t){return this.defaultKeywords=t,this},t.prototype.setDefaultRobots=function(t){return this.defaultRobots=t,this},t.prototype.setStaticProperties=function(t){return this.staticProperties=t,this},t.prototype.setOGURL=function(t){return this.enableOGURL=t,this},t.prototype.$get=function(){return{prefix:this.prefix,suffix:this.suffix,defaultTitle:this.defaultTitle,defaultDescription:this.defaultDescription,defaultKeywords:this.defaultKeywords,defaultRobots:this.defaultRobots,staticProperties:this.staticProperties,enableOGURL:this.enableOGURL}},t}();r.provider("UIRouterMetatags",n);var a=function(){function t(t,e,r,n,a,i,o){this.$log=t,this.UIRouterMetatags=e,this.$interpolate=r,this.$injector=n,this.$state=a,this.$location=i,this.$window=o,this.prerender={}}return t.$inject=["$log","UIRouterMetatags","$interpolate","$injector","$state","$location","$window"],t.prototype.update=function(t){var e=this;try{this.properties=angular.extend({},this.UIRouterMetatags.staticProperties),this.UIRouterMetatags.enableOGURL&&(this.properties["og:url"]=this.$location.absUrl()),t?(this.title=t.title?this.UIRouterMetatags.prefix+(this.getValue("title",t.title)||"")+this.UIRouterMetatags.suffix:this.UIRouterMetatags.defaultTitle,this.description=t.description?this.getValue("description",t.description):this.UIRouterMetatags.defaultDescription,this.keywords=t.keywords?this.getValue("keywords",t.keywords):this.UIRouterMetatags.defaultKeywords,this.robots=t.robots?this.getValue("robots",t.robots):this.UIRouterMetatags.defaultRobots,angular.forEach(t.properties,function(t,r){var n=e.getValue(r,t);n&&(e.properties[r]=n)})):(this.title=this.UIRouterMetatags.defaultTitle,this.description=this.UIRouterMetatags.defaultDescription,this.keywords=this.UIRouterMetatags.defaultKeywords,this.robots=this.UIRouterMetatags.defaultRobots),t&&t.prerender?(this.prerender.statusCode=t.prerender.statusCode?this.getValue("prerender.statusCode",t.prerender.statusCode):200,this.prerender.header=t.prerender.header?this.getValue("rerender.header",t.prerender.header):null):(this.prerender.statusCode=200,this.prerender.header=null),this.$window.prerenderReady=!0}catch(t){this.$log.error("error occured when extracting metatags:",t)}},t.prototype.getValue=function(t,e){try{return e?"number"==typeof e?e:"string"==typeof e&&0===e.trim().length?null:angular.isFunction(e)||Array.isArray(e)?this.$injector.invoke(e,this,this.$state.$current.locals.globals):this.$interpolate(e)(this.$state.$current.locals.globals):null}catch(e){return this.$log.error("error occured when trying to get the value of tag:",t,e),null}},t}();r.service("MetaTags",a),r.run(e)}(uiroutermetatags||(uiroutermetatags={}));var tableSortModule=angular.module("tableSort",[]);tableSortModule.provider("tableSortConfig",function(){this.filterTemplate="",this.filterFunction=void 0,this.paginationTemplate="",this.perPageOptions=[10,25,50,100],this.perPageDefault=this.perPageOptions[0],this.itemNameSingular="item",this.itemNamePlural=this.itemNameSingular+"s",this.noDataText="No "+this.itemNamePlural,this.wrappingElementClass="",isNaN(this.perPageDefault)||this.perPageOptions.indexOf(this.perPageDefault)!==-1||this.perPageOptions.push(this.perPageDefault),this.perPageOptions.sort(function(t,e){return t-e}),this.$get=function(){return this}}),tableSortModule.directive("tsWrapper",["$parse","$compile",function(t,e){function r(t,e){console.log("what is templateString? ",e);var r=e.replace(/FILTER_STRING/g,"filtering.filterString").replace(/CURRENT_PAGE_RANGE/g,"pagination.getPageRangeString(TOTAL_COUNT)").replace(/TOTAL_COUNT/g,t.itemsArrayExpression+".length").replace(/PER_PAGE_OPTIONS/g,"pagination.perPageOptions").replace(/ITEMS_PER_PAGE/g,"pagination.perPage").replace(/ITEM_NAME_SINGULAR/g,"itemNameSingular").replace(/ITEM_NAME_PLURAL/g,"itemNamePlural").replace(/FILTERED_COUNT/g,"filtering.filteredCount").replace(/CURRENT_PAGE_NUMBER/g,"pagination.currentPage");return console.log("newString: ",r),r}function n(){function t(t,e){return t>e?1:t<e?-1:0}var e=t,r=t;"object"==typeof Intl?e=new Intl.Collator((void 0),{sensitivity:"case"}).compare:"function"==typeof String.prototype.localeCompare&&(e=function(t,e){return(t+"").localeCompare(e,void 0,{sensitivity:"case"})});var n=function(t,n){return"number"==typeof t&&"number"==typeof n?r(t,n):t instanceof Date&&n instanceof Date?r(t.getTime(),n.getTime()):e(t,n)};return n}var a=n();return{scope:!0,controller:["$scope","tableSortConfig",function(e,r){e.pagination={template:r.paginationTemplate,perPageOptions:r.perPageOptions.concat(),perPage:r.perPageDefault,currentPage:1,getPageRangeString:function(t){var r=t!==e.filtering.filteredCount?e.filtering.filteredCount:t,n=Math.max((e.pagination.currentPage-1)*e.pagination.perPage+1,1),a=Math.min(e.pagination.currentPage*e.pagination.perPage,r);return 0===e.filtering.filteredCount?"":(a===r&&1===n?"":n+"-")+a}},console.log("what is pagination: ",e.pagination),e.filtering={template:r.filterTemplate,filterString:"",filterFunction:r.filterFunction,filteredCount:0,filterFields:[]},console.log("what is filtering: ",e.filtering),e.itemsArrayExpression="",e.itemNameSingular=r.itemNameSingular,e.itemNamePlural=r.itemNamePlural,e.noDataText=r.noDataText,e.wrappingElementClass=r.wrappingElementClass,e.sortExpression=[],e.headings=[];var n=function(e,r){return[t(e),null,!1,r?r:e]};this.setSortField=function(t,r,a,i){var o,s=n(t,a);if(s.push(i),1===e.sortExpression.length&&e.sortExpression[0][0]===s[0])e.sortExpression[0][2]?(r.removeClass("tablesort-desc"),r.addClass("tablesort-asc"),e.sortExpression[0][2]=!1):(r.removeClass("tablesort-asc"),r.addClass("tablesort-desc"),e.sortExpression[0][2]=!0),e.$emit("tablesort:sortOrder",[{name:e.sortExpression[0][3],order:e.sortExpression[0][2]}]);else{for(o=0;o<e.headings.length;o+=1)e.headings[o].removeClass("tablesort-desc").removeClass("tablesort-asc");r.addClass("tablesort-asc"),e.sortExpression=[s],e.$emit("tablesort:sortOrder",[{name:s[3],order:s[2]}])}},this.addSortField=function(t,r,a,i){var o,s=!1,l=n(t,a);for(l.push(i),o=0;o<e.sortExpression.length;o+=1)e.sortExpression[o][0]===l[0]&&(e.sortExpression[o][2]?(r.removeClass("tablesort-desc"),r.addClass("tablesort-asc"),e.sortExpression[o][2]=!1):(r.removeClass("tablesort-asc"),r.addClass("tablesort-desc"),e.sortExpression[o][2]=!0),s=!0);s||(r.addClass("tablesort-asc"),e.sortExpression.push(l)),e.$emit("tablesort:sortOrder",e.sortExpression.map(function(t){return{name:t[3],order:t[2]}}))},this.setTrackBy=function(t){e.trackBy=t},this.registerHeading=function(t){e.headings.push(t)},this.addFilterField=function(t,r){var a=n(t);e.filtering.filterFields.push(a)},this.setArrayExpr=function(t){e.itemsArrayExpression=t}}],link:function(n,i,o,s){if(o.tsItemName){var l="No "+n.itemNamePlural;n.itemNameSingular=o.tsItemName,o.tsItemNamePlural?n.itemNamePlural=o.tsItemNamePlural:n.itemNamePlural=o.tsItemName+"s",o.tsNoDataText||n.noDataText!==l||(n.noDataText="No "+n.itemNamePlural)}if(o.tsNoDataText&&(n.noDataText=o.tsNoDataText),o.tsWrappingElementClass&&(n.wrappingElementClass=o.tsWrappingElementClass),o.tsPerPageOptions&&(n.pagination.perPageOptions=n.$eval(o.tsPerPageOptions)),o.tsPerPageDefault){var u=n.$eval(o.tsPerPageDefault);isNaN(u)||(n.pagination.perPage=u,n.pagination.perPageOptions.indexOf(n.pagination.perPage)===-1&&(n.pagination.perPageOptions.push(n.pagination.perPage),n.pagination.perPageOptions.sort(function(t,e){return t-e})))}if(o.tsFilterFields)for(var c=o.tsFilterFields.split(",").filter(function(t){return t&&""!==t.trim()}),p=0;p<c.length;p+=1)s.addFilterField(c[p]);var f;if("false"!==o.tsDisplayFiltering&&""!==n.filtering.template&&n.filtering.filterFields.length>0){var d=r(n,n.filtering.template);f=e(d)(n),i.parent()[0].insertBefore(f[0],i[0])}o.tsFilterFunction&&(n.filtering.filterFunction=n.$eval(o.tsFilterFunction)),angular.isFunction(n.filtering.filterFunction)||(0===n.filtering.filterFields.length?n.filtering.filterFunction=function(t){return!0}:n.filtering.filterFunction=function(t){for(var e=!1,r=0;r<n.filtering.filterFields.length;r+=1)if(!e){var a=(n.filtering.filterFields[r][0](t)||"").toString().toLowerCase();e=a.indexOf(n.filtering.filterString.toLowerCase())>-1}return e}),n.filterLimitFun=function(t){if(!o.tsFilterFunction&&""===n.filtering.filterString)return n.filtering.filteredCount=t.length,t;var e=t.filter(n.filtering.filterFunction);return n.filtering.filteredCount=e.length,e},n.sortFun=function(t,e){var r,i,o,s,l,u;for(r=0;r<n.sortExpression.length;r+=1){if(i=n.sortExpression[r][0](t),o=n.sortExpression[r][0](e),l=e[n.sortExpression[r][1]],l&&(i=l(i),o=l(o)),void 0!==i&&null!==i||(i=""),void 0!==o&&null!==o||(o=""),s=n.sortExpression[r][2],u=(n.sortExpression[r][4]||a)(i,o),1===u)return s?-1:1;if(u===-1)return s?1:-1}if(n.trackBy){if(i=t[n.trackBy],o=e[n.trackBy],void 0!==i&&null!==i||(i=""),void 0!==o&&null!==o||(o=""),u=a(i,o),1===u)return s?-1:1;if(u===-1)return s?1:-1}return 0},n.pageLimitFun=function(t){if("false"===o.tsDisplayPagination||""===n.pagination.template)return t;for(var e=(n.pagination.currentPage-1)*n.pagination.perPage,r=n.pagination.currentPage*n.pagination.perPage,a=[],i=0;i<t.length;i++)i>=e&&i<r&&a.push(t[i]);return a};var g;if("false"!==o.tsDisplayPagination&&""!==n.pagination.template){var h=r(n,n.pagination.template);g=e(h)(n),i.after(g)}var m;if(n.wrappingElementClass&&""!==n.wrappingElementClass&&(m=i.wrap("<div class='"+n.wrappingElementClass+"' />")),o.tsGetTableDataFunction){var v=t(o.tsGetTableDataFunction),y=v.assign,b=function(e,r,a){var i=t(n.itemsArrayExpression)(n);return e&&(i=i.sort(n.sortFun)),r&&(i=n.filterLimitFun(i)),a&&(i=n.pageLimitFun(i)),i};y(n.$parent,b)}n.$on("$destroy",function(){f&&f.remove(),g&&g.remove(),m&&m.replaceWith(i)})}}}]),tableSortModule.directive("tsCriteria",function(){return{require:"^tsWrapper",scope:{tsOrderBy:"="},link:function(t,e,r,n){var a=function(a){t.$apply(function(){a.shiftKey?n.addSortField(r.tsCriteria,e,r.tsName,t.tsOrderBy):n.setSortField(r.tsCriteria,e,r.tsName,t.tsOrderBy)})};e.bind("click",a),e.addClass("tablesort-sortable"),"tsDefault"in r&&"0"!==r.tsDefault&&(n.addSortField(r.tsCriteria,e,r.tsName,t.tsOrderBy),"descending"===r.tsDefault&&n.addSortField(r.tsCriteria,e,r.tsName,t.tsOrderBy)),"tsFilter"in r&&n.addFilterField(r.tsCriteria,e),n.registerHeading(e)}}}),tableSortModule.directive("tsRepeat",["$compile","$interpolate",function(t,e){return{terminal:!0,multiElement:!0,require:"^tsWrapper",priority:1e6,link:function(r,n,a,i){for(var o=["ng-repeat","data-ng-repeat","ng-repeat-start","data-ng-repeat-start"],s=o[0],l="ts-repeat",u=0;u<o.length;u++)if(angular.isDefined(n.attr(o[u]))){s=o[u],l=s.replace(/^(data-)?ng/,"$1ts");break}var c="tablesortOrderBy:sortFun | tablesortLimit:filterLimitFun | tablesortLimit:pageLimitFun",p=n.attr(s),f=/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(\s+track\s+by\s+[\s\S]+?)?\s*$/,d=p.match(/\s+track\s+by\s+\S+?\.(\S+)/),g=p.match(f);if(d&&i.setTrackBy(d[1]),p.search(/tablesort/)!==-1?(p=p.replace(/tablesort/,c),d&&(p=p.replace(d[0],"")+d[0])):p=p.replace(f,"$1 in $2 | "+c+"$3"),angular.isUndefined(a.tsHideNoData)){var h=e.startSymbol(),m=e.endSymbol(),v=angular.element(n[0]).clone();v.removeAttr(s),v.removeAttr(l),v.addClass("showIfLast"),v.children().remove(),v.append('<td colspan="'+n[0].childElementCount+'">'+h+"noDataText"+m+"</td>"),v=t(v)(r),n.parent().prepend(v)}i.setArrayExpr(g[2]),angular.element(n[0]).attr(s,p),t(n,null,1e6)(r)}}}]),tableSortModule.filter("tablesortLimit",function(){return function(t,e){if(t)return e(t)}}),tableSortModule.filter("tablesortOrderBy",function(){return function(t,e){if(t){var r=t.concat();return r.sort(e)}}}),tableSortModule.filter("parseInt",function(){return function(t){return parseInt(t)||null}}),tableSortModule.filter("parseFloat",function(){return function(t){return parseFloat(t)||null}}),tableSortModule.filter("parseDate",function(){return function(t){var e=Date.parse(t);return isNaN(e)?null:e}}),angular.module("picardy.fontawesome",[]).directive("fa",function(){return{restrict:"E",template:'<span class="fa" aria-hidden="true"></span>',replace:!0,link:function(t,e,r){function n(t,n){var a;r.$observe(t,function(){n=n||"fa-"+t,e.removeClass(i[t]),r[t]&&(a=[n,r[t]].join("-"),e.addClass(a),i[t]=a)})}function a(t,n){var a;r.$observe(t,function(){n=n||"fa-"+t,a=t in r&&"false"!==r[t]&&r[t]!==!1,e.toggleClass(n,a)})}var i={};n("name","fa"),n("rotate"),n("flip"),n("stack"),r.$observe("size",function(){var t;e.removeClass(i.size),"large"===r.size?t="fa-lg":isNaN(parseInt(r.size,10))||(t="fa-"+r.size+"x"),e.addClass(t),i.size=t}),r.$observe("stack",function(){var t;e.removeClass(i.stack),"large"===r.stack?t="fa-stack-lg":isNaN(parseInt(r.stack,10))||(t="fa-stack-"+r.stack+"x"),e.addClass(t),i.stack=t}),a("border"),a("fw"),a("inverse"),a("spin"),e.toggleClass("fa-li",e.parent()&&"LI"===e.parent().prop("tagName")&&e.parent().parent()&&e.parent().parent().hasClass("fa-ul")&&e.parent().children()[0]===e[0]&&"false"!==r.list&&r.list!==!1),r.$observe("alt",function(){var t=r.alt,n=e.next(),a="fa-alt-text";
t?(e.removeAttr("alt"),n&&n.hasClass(a)||(e.after('<span class="sr-only fa-alt-text"></span>'),n=e.next()),n.text(t)):n&&n.hasClass(a)&&n.remove()})}}}).directive("faStack",function(){return{restrict:"E",transclude:!0,template:'<span ng-transclude class="fa-stack fa-lg"></span>',replace:!0,link:function(t,e,r){function n(t,n){var i;r.$observe(t,function(){n=n||"fa-"+t,e.removeClass(a[t]),r[t]&&(i=[n,r[t]].join("-"),e.addClass(i),a[t]=i)})}var a={};n("size"),r.$observe("size",function(){var t;e.removeClass(a.size),"large"===r.size?t="fa-lg":isNaN(parseInt(r.size,10))||(t="fa-"+r.size+"x"),e.addClass(t),a.size=t})}}}),function(t,e,r,n){function a(e,r){this.options=t.extend({},o,r),this._defaults=o,this._name=i,this.$element=t(e),this.init()}var i="menuButton",o={propertyName:"value"};a.prototype={constructor:a,init:function(){this.toggle()},toggle:function(t,e){"show"===this.$element.data("dropdown")?this.hideMenu():this.showMenu()},showMenu:function(){this.$element.data("dropdown","show"),this.$element.find("ul").show()},hideMenu:function(){this.$element.data("dropdown","hide"),this.$element.find("ul").hide()}},t.fn[i]=function(e){return this.each(function(){t.data(this,"plugin_"+i)?t.data(this,"plugin_"+i).toggle():t.data(this,"plugin_"+i,new a(this,e))})},t(r).on("click",function(e){t.each(t("[data-buttons=dropdown]"),function(r,n){t(e.target.offsetParent)[0]!=t(this)[0]&&t.data(this,"plugin_"+i)&&(t.data(this,"plugin_"+i).hideMenu(),t(this).find("ul").hide())})}),t(r).on("click","[data-buttons=dropdown]",function(e){var r=t(e.currentTarget);r.menuButton()}),t(r).on("click","[data-buttons=dropdown] > a",function(t){t.preventDefault()})}(jQuery,window,document),angular.module("angularPayments",[]),angular.module("angularPayments").factory("Common",[function(){var t={};return t.parseExpiry=function(t){var e,r,n,a;return t=t||"",t=t.replace(/\s/g,""),a=t.split("/",2),e=a[0],n=a[1],2===(null!=n?n.length:void 0)&&/^\d+$/.test(n)&&(r=(new Date).getFullYear(),r=r.toString().slice(0,2),n=r+n),e=parseInt(e,10),n=parseInt(n,10),{month:e,year:n}},t}]),angular.module("angularPayments").factory("Cards",[function(){var t=/(\d{1,4})/g,e=/(?:^|\s)(\d{4})$/,r=[{type:"maestro",pattern:/^(5018|5020|5038|6304|6759|676[1-3])/,format:t,inputFormat:e,length:[12,13,14,15,16,17,18,19],cvcLength:[3],luhn:!0},{type:"dinersclub",pattern:/^(36|38|30[0-5])/,format:t,inputFormat:e,length:[14],cvcLength:[3],luhn:!0},{type:"laser",pattern:/^(6706|6771|6709)/,format:t,inputFormat:e,length:[16,17,18,19],cvcLength:[3],luhn:!0},{type:"jcb",pattern:/^35/,format:t,inputFormat:e,length:[16],cvcLength:[3],luhn:!0},{type:"unionpay",pattern:/^62/,format:t,inputFormat:e,length:[16,17,18,19],cvcLength:[3],luhn:!1},{type:"discover",pattern:/^(6011|65|64[4-9]|622)/,format:t,inputFormat:e,length:[16],cvcLength:[3],luhn:!0},{type:"mastercard",pattern:/^5[1-5]/,format:t,inputFormat:e,length:[16],cvcLength:[3],luhn:!0},{type:"amex",pattern:/^3[47]/,format:/(\d{1,4})(\d{1,6})?(\d{1,5})?/,inputFormat:/^(\d{4}|\d{4}\s\d{6})$/,length:[15],cvcLength:[3,4],luhn:!0},{type:"visa",pattern:/^4/,format:t,inputFormat:e,length:[13,14,15,16],cvcLength:[3],luhn:!0}],n=function(t){var e,n,a;for(t=(t+"").replace(/\D/g,""),n=0,a=r.length;n<a;n++)if(e=r[n],e.pattern.test(t))return e},a=function(t){var e,n,a;for(n=0,a=r.length;n<a;n++)if(e=r[n],e.type===t)return e};return{fromNumber:function(t){return n(t)},fromType:function(t){return a(t)},defaultFormat:function(){return t},defaultInputFormat:function(){return e}}}]),angular.module("angularPayments").factory("_Format",["Cards","Common","$filter",function(t,e,r){var n={},a=function(t){var e;return null!=t.prop("selectionStart")&&t.prop("selectionStart")!==t.prop("selectionEnd")||!("undefined"==typeof document||null===document||null==(e=document.selection)||"function"!=typeof e.createRange||!e.createRange().text)},i=function(e){var r,n,a,i,o,s,l;if(a=String.fromCharCode(e.which),r=angular.element(e.currentTarget),l=r.val(),n=t.fromNumber(l+a),i=(l.replace(/\D/g,"")+a).length,s=16,n&&(s=n.length[n.length.length-1]),!(i>=s)){if(!/^\d+$/.test(a)&&!e.meta&&e.keyCode>=46)return void e.preventDefault();if(null==r.prop("selectionStart")||r.prop("selectionStart")===l.length)return o=t.defaultInputFormat(),n&&(o=n.inputFormat),o.test(l)?(e.preventDefault(),r.val(l+" "+a)):o.test(l+a)?(e.preventDefault(),r.val(l+a+" ")):void 0}},o=function(e){var r,n,i,o;r=angular.element(e.currentTarget),i=String.fromCharCode(e.which),/^\d+$/.test(i)&&(a(r)||(o=(r.val()+i).replace(/\D/g,""),n=t.fromNumber(o),n?o.length<=n.length[n.length.length-1]||e.preventDefault():o.length<=16||e.preventDefault()))},s=function(t){var e,r;if(e=angular.element(t.currentTarget),r=e.val(),!t.meta&&8===t.which&&(null==e.prop("selectionStart")||e.prop("selectionStart")===r.length))return/\d\s$/.test(r)&&!t.meta&&t.keyCode>=46?(t.preventDefault(),e.val(r.replace(/\d\s$/,""))):/\s\d?$/.test(r)?(t.preventDefault(),e.val(r.replace(/\s\d?$/,""))):void 0},l=function(e){var r,n,a,i;return(r=t.fromNumber(e))?(a=r.length[r.length.length-1],e=e.replace(/\D/g,""),e=e.slice(0,+a+1||9e9),r.format.global?null!=(i=e.match(r.format))?i.join(" "):void 0:(n=r.format.exec(e),null!=n&&n.shift(),null!=n?n.join(" "):void 0)):e},u=function(t){return setTimeout(function(){var e,r;return e=angular.element(t.target),r=e.val(),r=l(r),e.val(r)})},c=function(t){return null!=t?t.replace(/\s/g,""):t};n.card=function(t,e){t.bind("keypress",o),t.bind("keypress",i),t.bind("keydown",s),t.bind("paste",u),e.$parsers.push(c),e.$formatters.push(l)},_formatCVC=function(t){return $target=angular.element(t.currentTarget),digit=String.fromCharCode(t.which),!/^\d+$/.test(digit)&&!t.meta&&t.keyCode>=46?void t.preventDefault():(val=$target.val()+digit,val.length<=4?void 0:void t.preventDefault())},n.cvc=function(t){t.bind("keypress",_formatCVC)},_restrictExpiry=function(t){var e,r,n;return e=angular.element(t.currentTarget),r=String.fromCharCode(t.which),!/^\d+$/.test(r)&&!t.meta&&t.keyCode>=46?void t.preventDefault():a(e)?void 0:(n=e.val()+r,n=n.replace(/\D/g,""),n.length>6?void t.preventDefault():void 0)},_formatExpiry=function(t){var e,r,n;return r=String.fromCharCode(t.which),!/^\d+$/.test(r)&&!t.meta&&t.keyCode>=46?void t.preventDefault():(e=angular.element(t.currentTarget),n=e.val()+r,/^\d$/.test(n)&&"0"!==n&&"1"!==n?(t.preventDefault(),e.val("0"+n+" / ")):/^\d\d$/.test(n)?(t.preventDefault(),e.val(""+n+" / ")):void 0)},_formatForwardExpiry=function(t){var e,r,n;if(r=String.fromCharCode(t.which),/^\d+$/.test(r)||t.meta||!(t.keyCode>=46))return e=angular.element(t.currentTarget),n=e.val(),/^\d\d$/.test(n)?e.val(""+n+" / "):void 0},_formatForwardSlash=function(t){var e,r,n;if(r=String.fromCharCode(t.which),"/"===r)return e=angular.element(t.currentTarget),n=e.val(),/^\d$/.test(n)&&"0"!==n?e.val("0"+n+" / "):void 0},_formatBackExpiry=function(t){var e,r;if(!t.meta&&(e=angular.element(t.currentTarget),r=e.val(),8===t.which&&(null==e.prop("selectionStart")||e.prop("selectionStart")===r.length)))return/\d(\s|\/)+$/.test(r)?(t.preventDefault(),e.val(r.replace(/\d(\s|\/)*$/,""))):/\s\/\s?\d?$/.test(r)?(t.preventDefault(),e.val(r.replace(/\s\/\s?\d?$/,""))):void 0};var p=function(t){if(null!=t){var n=e.parseExpiry(t),a=new Date(n.year,n.month-1);return r("date")(a,"MM/yyyy")}return null},f=function(t){if(null!=t){var n=e.parseExpiry(t),a=new Date(n.year,n.month-1);return r("date")(a,"MM / yyyy")}return null};return n.expiry=function(t,e){t.bind("keypress",_restrictExpiry),t.bind("keypress",_formatExpiry),t.bind("keypress",_formatForwardSlash),t.bind("keypress",_formatForwardExpiry),t.bind("keydown",_formatBackExpiry),e.$parsers.push(p),e.$formatters.push(f)},function(t,e,r){if(!n[t])throw types=Object.keys(n),errstr='Unknown type for formatting: "'+t+'". ',errstr+='Should be one of: "'+types.join('", "')+'"',errstr;return n[t](e,r)}}]).directive("paymentsFormat",["$window","_Format",function(t,e){return{restrict:"A",require:"ngModel",link:function(t,r,n,a){e(n.paymentsFormat,r,a)}}}]),angular.module("angularPayments").factory("_Validate",["Cards","Common","$parse",function(t,e,r){var n=[].indexOf||function(t){for(var e=0,r=this.length;e<r;e++)if(e in this&&this[e]===t)return e;return-1},a=function(t){var e,r,n,a,i,o;for(n=!0,a=0,r=(t+"").split("").reverse(),i=0,o=r.length;i<o;i++)e=r[i],e=parseInt(e,10),(n=!n)&&(e*=2),e>9&&(e-=9),a+=e;return a%10===0},i={};return i.cvc=function(e,a,i,o){var s,l;if(null==e||0==e.length)return!0;if(!/^\d+$/.test(e))return!1;var u;if(o.paymentsTypeModel){var c=r(o.paymentsTypeModel);u=c(i)}return u?(s=e.length,n.call(null!=(l=t.fromType(u))?l.cvcLength:void 0,s)>=0):e.length>=3&&e.length<=4},i.card=function(e,i,o,s){var l,u,c;s.paymentsTypeModel&&(c=r(s.paymentsTypeModel));var p=function(){c&&c.assign(o,null),i.$card=null};return null==e||0==e.length?(p(),!0):(e=(e+"").replace(/\s+|-/g,""),/^\d+$/.test(e)&&(l=t.fromNumber(e))?(i.$card=angular.copy(l),c&&c.assign(o,l.type),ret=(u=e.length,n.call(l.length,u)>=0&&(l.luhn===!1||a(e))),ret):(p(),!1))},i.expiry=function(t){if(null==t||0==t.length)return!0;obj=e.parseExpiry(t),month=obj.month,year=obj.year;var r,n,a;return!(!month||!year)&&(!!/^\d+$/.test(month)&&(!!/^\d+$/.test(year)&&(parseInt(month,10)<=12&&(2===year.length&&(a=(new Date).getFullYear(),a=a.toString().slice(0,2),year=a+year),n=new Date(year,month),r=new Date,n.setMonth(n.getMonth()-1),n.setMonth(n.getMonth()+1,1),n>r))))},function(t,e,r,n,a){if(!i[t])throw types=Object.keys(i),errstr='Unknown type for validation: "'+t+'". ',errstr+='Should be one of: "'+types.join('", "')+'"',errstr;return i[t](e,r,n,a)}}]).factory("_ValidateWatch",["_Validate",function(t){var e={};return e.cvc=function(e,r,n,a){a.paymentsTypeModel&&n.$watch(a.paymentsTypeModel,function(i,o){if(i!=o){var s=t(e,r.$modelValue,r,n,a);r.$setValidity(e,s)}})},function(t,r,n,a){if(e[t])return e[t](t,r,n,a)}}]).directive("paymentsValidate",["$window","_Validate","_ValidateWatch",function(t,e,r){return{restrict:"A",require:"ngModel",link:function(t,n,a,i){var o=a.paymentsValidate;r(o,i,t,a);var s=function(r){var n=e(o,r,i,t,a);return i.$setValidity(o,n),n?r:void 0};i.$formatters.push(s),i.$parsers.push(s)}}}]),angular.module("angularPayments").directive("stripeForm",["$window","$parse","Common",function(t,e,r){return _getDataToSend=function(t){var e=["number","expMonth","expYear","cvc","name","addressLine1","addressLine2","addressCity","addressState","addressZip","addressCountry"],r=function(t){return t.replace(/([A-Z])/g,function(t){return"_"+t.toLowerCase()})},n={};for(i in e)t.hasOwnProperty(e[i])&&(n[r(e[i])]=angular.copy(t[e[i]]));return n.number=(n.number||"").replace(/ /g,""),n},{restrict:"A",link:function(e,n,a){if(!t.Stripe)throw"stripeForm requires that you have stripe.js installed. Include https://js.stripe.com/v2/ into your html.";var i=angular.element(n);i.bind("submit",function(){expMonthUsed=!!e.expMonth,expYearUsed=!!e.expYear,expMonthUsed&&expYearUsed||(exp=r.parseExpiry(e.expiry),e.expMonth=exp.month,e.expYear=exp.year);var n=i.find("button");n.prop("disabled",!0),i.hasClass("ng-valid")?t.Stripe.createToken(_getDataToSend(e),function(){var t=arguments;e.$apply(function(){e[a.stripeForm].apply(e,t)}),n.prop("disabled",!1)}):(e.$apply(function(){e[a.stripeForm].apply(e,[400,{error:"Invalid form submitted."}])}),n.prop("disabled",!1)),e.expMonth=null,e.expYear=null})}}}]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5nQ2FydC5qcyIsImFuZ3VsYXItcGFyYWxsYXguanMiLCJhbmd1bGFyLWZpbGUtc2F2ZXIuYnVuZGxlLmpzIiwidWktcm91dGVyLW1ldGF0YWdzLmpzIiwiYW5ndWxhci10YWJsZXNvcnQuanMiLCJhbmd1bGFyLWZvbnRhd2Vzb21lLmpzIiwiYnV0dG9ucy5qcyIsImFuZ3VsYXItcGF5bWVudHMuanMiXSwibmFtZXMiOlsiYW5ndWxhciIsIm1vZHVsZSIsImNvbmZpZyIsInByb3ZpZGVyIiwidGhpcyIsIiRnZXQiLCJydW4iLCIkcm9vdFNjb3BlIiwibmdDYXJ0IiwibmdDYXJ0SXRlbSIsInN0b3JlIiwiJG9uIiwiJHNhdmUiLCJpc09iamVjdCIsImdldCIsIiRyZXN0b3JlIiwiaW5pdCIsInNlcnZpY2UiLCIkbG9jYXRpb24iLCIkd2luZG93IiwiJGNhcnQiLCJzaGlwcGluZyIsInRheFJhdGUiLCJ0YXgiLCJpdGVtcyIsImFkZEl0ZW0iLCJpZCIsInNrdSIsIm5hbWUiLCJwcmljZSIsInF1YW50aXR5IiwiZGF0YSIsImF0dHIiLCJpbkNhcnQiLCJnZXRJdGVtQnlJZCIsInNldFF1YW50aXR5IiwiJGJyb2FkY2FzdCIsIm5ld0l0ZW0iLCJwdXNoIiwiYWRkSXRlbUJ0biIsInNrdXMiLCJsZW5ndGgiLCJ1cmwiLCJjaGFuZ2VRdWFudGl0eSIsImNvbnNvbGUiLCJsb2ciLCJpdGVtSWQiLCJnZXRDYXJ0IiwiYnVpbGQiLCJmb3JFYWNoIiwiaXRlbSIsImdldElkIiwic2V0U2hpcHBpbmciLCJnZXRTaGlwcGluZyIsInNldFRheFJhdGUiLCJwYXJzZUZsb2F0IiwidG9GaXhlZCIsImdldFRheFJhdGUiLCJnZXRUYXgiLCJNYXRoIiwicm91bmQiLCJnZXRTdWJUb3RhbCIsInNldENhcnQiLCJjYXJ0IiwiZ2V0SXRlbXMiLCJnZXRUb3RhbEl0ZW1zIiwiY291bnQiLCJnZXRRdWFudGl0eSIsImdldFRvdGFsVW5pcXVlSXRlbXMiLCJ0b3RhbCIsImdldFRvdGFsIiwidG90YWxDb3N0IiwicmVtb3ZlSXRlbSIsImluZGV4Iiwic3BsaWNlIiwicmVtb3ZlSXRlbUJ5SWQiLCJlbXB0eSIsImxvY2FsU3RvcmFnZSIsImlzRW1wdHkiLCJ0b09iamVjdCIsInN1YlRvdGFsIiwic3RvcmVkQ2FydCIsIl9zZWxmIiwicGFyZW50IiwiZGVzY3JpcHRpb24iLCJhbW91bnQiLCJfZGF0YSIsInNldCIsIkpTT04iLCJzdHJpbmdpZnkiLCJmYWN0b3J5IiwiJGxvZyIsInNldElkIiwic2V0U2t1Iiwic2V0TmFtZSIsInNldFByaWNlIiwic2V0RGF0YSIsInNldEF0dHIiLCJwcm90b3R5cGUiLCJlcnJvciIsImdldFNrdSIsImdldE5hbWUiLCJwcmljZUZsb2F0IiwiZ2V0UHJpY2UiLCJyZWxhdGl2ZSIsInF1YW50aXR5SW50IiwicGFyc2VJbnQiLCJpbmZvIiwiZ2V0RGF0YSIsImF0dHJpYnV0ZXMiLCJnZXRBdHRyIiwia2V5IiwiZ2V0SXRlbSIsImZyb21Kc29uIiwicGFyc2UiLCJ2YWwiLCJ1bmRlZmluZWQiLCJzZXRJdGVtIiwidG9Kc29uIiwiY29udHJvbGxlciIsIiRzY29wZSIsIiR0aW1lb3V0IiwibG9hZGVkIiwidG9nZ2xlQ2FydCIsImZpbHRlcmVkIiwicHJvZHVjdF90eXBlIiwic2hpcEJvb2wiLCIkZW1pdCIsInZhbHVlIiwiZGlyZWN0aXZlIiwicmVzdHJpY3QiLCJzY29wZSIsInF1YW50aXR5TWF4IiwidHJhbnNjbHVkZSIsInRlbXBsYXRlVXJsIiwiZWxlbWVudCIsImF0dHJzIiwibGluayIsInEiLCJxdHlPcHQiLCJpIiwidGhpc01heCIsInNob3dDb3VudFJlZiIsImZpcmViYXNlIiwiZGF0YWJhc2UiLCJyZWYiLCJvbmNlIiwidGhlbiIsInNuYXBzaG90IiwidG90YWxUaXgiLCJmdWxmaWxtZW50UHJvdmlkZXIiLCJjaGVja291dCIsInNldFNlcnZpY2UiLCJzZXRTZXR0aW5ncyIsInNldHRpbmdzIiwic3VjY2VzcyIsInN0YXR1cyIsImhlYWRlcnMiLCJzdGF0dXNDb2RlIiwiJGluamVjdG9yIiwiX29iaiIsIiRxIiwiZGVmZXJyZWQiLCJkZWZlciIsInJlc29sdmUiLCJwcm9taXNlIiwiJGh0dHAiLCJwb3N0Iiwib3B0aW9ucyIsInBhcmFsbGF4UmF0aW8iLCJwYXJhbGxheFZlcnRpY2FsT2Zmc2V0IiwicGFyYWxsYXhIb3Jpem9udGFsT2Zmc2V0IiwiZWxlbSIsInNldFBvc2l0aW9uIiwiY2FsY1ZhbFkiLCJwYWdlWU9mZnNldCIsImlubmVySGVpZ2h0IiwidG9wVmFsIiwiaG96VmFsIiwiaW5kZXhPZiIsImNzcyIsImJpbmQiLCJ0ZW1wbGF0ZSIsInBhcmFsbGF4U3RhcnRQb2ludCIsIm9mZnNldCIsIm9mZnNldEhlaWdodCIsInByb3AiLCJlIiwiJGFwcGx5Iiwicm9vdCIsImV4cG9ydHMiLCJkZWZpbmUiLCJhbWQiLCJhIiwibW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImluc3RhbGxlZE1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJwIiwiQmxvYiIsIlNhdmVBcyIsIkZpbGVTYXZlclV0aWxzIiwic2F2ZSIsImJsb2IiLCJmaWxlbmFtZSIsImRpc2FibGVBdXRvQk9NIiwiZXJyIiwiaGFuZGxlRXJyb3JzIiwibWVzc2FnZSIsInNhdmVBcyIsImlzQmxvYkluc3RhbmNlIiwiaXNTdHJpbmciLCJtc2ciLCJFcnJvciIsIm9iaiIsIlN0cmluZyIsImlzVW5kZWZpbmVkIiwidmlldyIsIlVSTCIsIndlYmtpdFVSTCIsIkJsb2JCdWlsZGVyIiwiV2ViS2l0QmxvYkJ1aWxkZXIiLCJNb3pCbG9iQnVpbGRlciIsImdldF9jbGFzcyIsIm9iamVjdCIsIk9iamVjdCIsInRvU3RyaW5nIiwibWF0Y2giLCJGYWtlQmxvYkJ1aWxkZXIiLCJGYWtlQmxvYiIsInR5cGUiLCJlbmNvZGluZyIsInNpemUiLCJGQkJfcHJvdG8iLCJGQl9wcm90byIsIkZpbGVSZWFkZXJTeW5jIiwiRmlsZUV4Y2VwdGlvbiIsImNvZGUiLCJmaWxlX2V4X2NvZGVzIiwic3BsaXQiLCJmaWxlX2V4X2NvZGUiLCJyZWFsX1VSTCIsInJlYWxfY3JlYXRlX29iamVjdF9VUkwiLCJjcmVhdGVPYmplY3RVUkwiLCJyZWFsX3Jldm9rZV9vYmplY3RfVVJMIiwicmV2b2tlT2JqZWN0VVJMIiwiYnRvYSIsImF0b2IiLCJBcnJheUJ1ZmZlciIsIlVpbnQ4QXJyYXkiLCJvcmlnaW4iLCJmYWtlIiwidXJpIiwidXJpX29yaWdpbiIsInVyaV9pbmZvIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50TlMiLCJocmVmIiwicHJvdG9jb2wiLCJ0b0xvd2VyQ2FzZSIsImRhdGFfVVJJX2hlYWRlciIsImRlY29kZVVSSUNvbXBvbmVudCIsImVuY29kZVVSSUNvbXBvbmVudCIsIm9iamVjdF9VUkwiLCJzdWJzdHJpbmciLCJhcHBlbmQiLCJiYiIsInN0ciIsImJ1ZiIsImJ1Zl9sZW4iLCJmcm9tQ2hhckNvZGUiLCJmciIsInJlYWRBc0JpbmFyeVN0cmluZyIsInVuZXNjYXBlIiwiZ2V0QmxvYiIsImFyZ3VtZW50cyIsImpvaW4iLCJzbGljZSIsInN0YXJ0IiwiZW5kIiwiYXJncyIsImNsb3NlIiwiYmxvYlBhcnRzIiwiYnVpbGRlciIsImxlbiIsImJ1ZmZlciIsIndlYmtpdFNsaWNlIiwiZ2V0UHJvdG90eXBlT2YiLCJfX3Byb3RvX18iLCJzZWxmIiwid2luZG93IiwiY29udGVudCIsIl9fV0VCUEFDS19BTURfREVGSU5FX0FSUkFZX18iLCJfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXyIsIm5hdmlnYXRvciIsInRlc3QiLCJ1c2VyQWdlbnQiLCJkb2MiLCJnZXRfVVJMIiwic2F2ZV9saW5rIiwiY2FuX3VzZV9zYXZlX2xpbmsiLCJjbGljayIsIm5vZGUiLCJldmVudCIsIk1vdXNlRXZlbnQiLCJkaXNwYXRjaEV2ZW50IiwiaXNfc2FmYXJpIiwiSFRNTEVsZW1lbnQiLCJpc19jaHJvbWVfaW9zIiwidGhyb3dfb3V0c2lkZSIsImV4Iiwic2V0SW1tZWRpYXRlIiwic2V0VGltZW91dCIsImZvcmNlX3NhdmVhYmxlX3R5cGUiLCJhcmJpdHJhcnlfcmV2b2tlX3RpbWVvdXQiLCJyZXZva2UiLCJmaWxlIiwicmV2b2tlciIsInJlbW92ZSIsImRpc3BhdGNoIiwiZmlsZXNhdmVyIiwiZXZlbnRfdHlwZXMiLCJjb25jYXQiLCJsaXN0ZW5lciIsImF1dG9fYm9tIiwiRmlsZVNhdmVyIiwibm9fYXV0b19ib20iLCJvYmplY3RfdXJsIiwiZm9yY2UiLCJkaXNwYXRjaF9hbGwiLCJmc19lcnJvciIsIkZpbGVSZWFkZXIiLCJyZWFkZXIiLCJvbmxvYWRlbmQiLCJyZXN1bHQiLCJyZXBsYWNlIiwicG9wdXAiLCJvcGVuIiwibG9jYXRpb24iLCJyZWFkeVN0YXRlIiwiRE9ORSIsInJlYWRBc0RhdGFVUkwiLCJJTklUIiwib3BlbmVkIiwiZG93bmxvYWQiLCJGU19wcm90byIsIm1zU2F2ZU9yT3BlbkJsb2IiLCJhYm9ydCIsIldSSVRJTkciLCJvbndyaXRlc3RhcnQiLCJvbnByb2dyZXNzIiwib253cml0ZSIsIm9uYWJvcnQiLCJvbmVycm9yIiwib253cml0ZWVuZCIsImFwcGx5IiwiX193ZWJwYWNrX2FtZF9vcHRpb25zX18iLCJ1aXJvdXRlcm1ldGF0YWdzIiwicnVuQmxvY2siLCJNZXRhVGFncyIsInN0YXRlQ2hhbmdlU3RhcnQiLCJ0b1N0YXRlIiwidG9QYXJhbXMiLCJmcm9tIiwiZnJvbVBhcmFtcyIsInByZXJlbmRlclJlYWR5Iiwic3RhdGVDaGFuZ2VTdWNjZXNzIiwibWV0YVRhZ3MiLCJkZWJ1ZyIsInVwZGF0ZSIsInN0YXRlQ2hhbmdlRXJyb3IiLCJmcm9tU3RhdGUiLCJwcmVyZW5kZXIiLCJzdGF0ZU5vdEZvdW5kIiwidW5mb3VuZFN0YXRlIiwiJGluamVjdCIsImFwcE1vZHVsZSIsIlVJUm91dGVyTWV0YXRhZ3MiLCJwcmVmaXgiLCJzdWZmaXgiLCJkZWZhdWx0VGl0bGUiLCJkZWZhdWx0RGVzY3JpcHRpb24iLCJkZWZhdWx0S2V5d29yZHMiLCJkZWZhdWx0Um9ib3RzIiwic3RhdGljUHJvcGVydGllcyIsImVuYWJsZU9HVVJMIiwic2V0VGl0bGVQcmVmaXgiLCJzZXRUaXRsZVN1ZmZpeCIsInNldERlZmF1bHRUaXRsZSIsInRpdGxlIiwic2V0RGVmYXVsdERlc2NyaXB0aW9uIiwic2V0RGVmYXVsdEtleXdvcmRzIiwia2V5d29yZHMiLCJzZXREZWZhdWx0Um9ib3RzIiwicm9ib3RzIiwic2V0U3RhdGljUHJvcGVydGllcyIsInByb3BlcnRpZXMiLCJzZXRPR1VSTCIsImVuYWJsZWQiLCIkaW50ZXJwb2xhdGUiLCIkc3RhdGUiLCJ0YWdzIiwiX3RoaXMiLCJleHRlbmQiLCJhYnNVcmwiLCJnZXRWYWx1ZSIsInYiLCJoZWFkZXIiLCJ0YWdUeXBlIiwidGFnIiwidHJpbSIsImlzRnVuY3Rpb24iLCJBcnJheSIsImlzQXJyYXkiLCJpbnZva2UiLCIkY3VycmVudCIsImxvY2FscyIsImdsb2JhbHMiLCJ0YWJsZVNvcnRNb2R1bGUiLCJmaWx0ZXJUZW1wbGF0ZSIsImZpbHRlckZ1bmN0aW9uIiwicGFnaW5hdGlvblRlbXBsYXRlIiwicGVyUGFnZU9wdGlvbnMiLCJwZXJQYWdlRGVmYXVsdCIsIml0ZW1OYW1lU2luZ3VsYXIiLCJpdGVtTmFtZVBsdXJhbCIsIm5vRGF0YVRleHQiLCJ3cmFwcGluZ0VsZW1lbnRDbGFzcyIsImlzTmFOIiwic29ydCIsImIiLCIkcGFyc2UiLCIkY29tcGlsZSIsInJlcGxhY2VUZW1wbGF0ZVRva2VucyIsInRlbXBsYXRlU3RyaW5nIiwibmV3U3RyaW5nIiwiaXRlbXNBcnJheUV4cHJlc3Npb24iLCJjcmVhdGVEZWZhdWx0Q29tcGFyZXIiLCJfZGVmYXVsdENvbXBhcmVyIiwic3RyaW5nQ29tcGFyZXIiLCJudW1lcmljQ29tcGFyZXIiLCJJbnRsIiwiQ29sbGF0b3IiLCJzZW5zaXRpdml0eSIsImNvbXBhcmUiLCJsb2NhbGVDb21wYXJlIiwiY29tcGFyZXJGbiIsIkRhdGUiLCJnZXRUaW1lIiwiZGVmYXVsdENvbXBhcmVyIiwidGFibGVTb3J0Q29uZmlnIiwicGFnaW5hdGlvbiIsInBlclBhZ2UiLCJjdXJyZW50UGFnZSIsImdldFBhZ2VSYW5nZVN0cmluZyIsIm1heE9uUGFnZSIsImZpbHRlcmluZyIsImZpbHRlcmVkQ291bnQiLCJzdGFydFBhZ2UiLCJtYXgiLCJlbmRQYWdlIiwibWluIiwiZmlsdGVyU3RyaW5nIiwiZmlsdGVyRmllbGRzIiwic29ydEV4cHJlc3Npb24iLCJoZWFkaW5ncyIsInBhcnNlX3NvcnRleHByIiwiZXhwciIsInNldFNvcnRGaWVsZCIsInNvcnRleHByIiwic29ydEJ5IiwicmVtb3ZlQ2xhc3MiLCJhZGRDbGFzcyIsIm9yZGVyIiwiYWRkU29ydEZpZWxkIiwidG9nZ2xlX29yZGVyIiwibWFwIiwic2V0VHJhY2tCeSIsInRyYWNrQnkiLCJyZWdpc3RlckhlYWRpbmciLCJoZWFkaW5nZWxlbWVudCIsImFkZEZpbHRlckZpZWxkIiwic2V0QXJyYXlFeHByIiwiZGF0YUFycmF5RXhwIiwiJGVsZW1lbnQiLCIkYXR0cnMiLCJ0c1dyYXBwZXJDdHJsIiwidHNJdGVtTmFtZSIsIm9yaWdpbmFsTm9EYXRhVGV4dCIsInRzSXRlbU5hbWVQbHVyYWwiLCJ0c05vRGF0YVRleHQiLCJ0c1dyYXBwaW5nRWxlbWVudENsYXNzIiwidHNQZXJQYWdlT3B0aW9ucyIsIiRldmFsIiwidHNQZXJQYWdlRGVmYXVsdCIsImRlZmF1bHRQZXJQYWdlIiwidHNGaWx0ZXJGaWVsZHMiLCJmaWx0ZXIiLCIkZmlsdGVySHRtbCIsInRzRGlzcGxheUZpbHRlcmluZyIsImluc2VydEJlZm9yZSIsInRzRmlsdGVyRnVuY3Rpb24iLCJzaG91bGRJbmNsdWRlIiwiZmlsdGVyTGltaXRGdW4iLCJhcnJheSIsImZpbHRlcmVkQXJyIiwic29ydEZ1biIsImF2YWwiLCJidmFsIiwiZGVzY2VuZGluZyIsImZpbHRlckZ1biIsImNvbXBSZXN1bHQiLCJwYWdlTGltaXRGdW4iLCJ0c0Rpc3BsYXlQYWdpbmF0aW9uIiwiYmVnaW4iLCJmaW5hbCIsIiRwYWdpbmF0aW9uSHRtbCIsInBhZ2VyU3RyaW5nIiwiYWZ0ZXIiLCIkd3JhcHBpbmdFbGVtZW50Iiwid3JhcCIsInRzR2V0VGFibGVEYXRhRnVuY3Rpb24iLCJnZXR0ZXIiLCJzZXR0ZXIiLCJhc3NpZ24iLCJmbiIsInNob3VsZEFwcGx5U29ydGluZyIsInNob3VsZEFwcGx5RmlsdGVyaW5nIiwibGltaXRUb0N1cnJlbnRQYWdlT25seSIsImFyciIsIiRwYXJlbnQiLCJyZXBsYWNlV2l0aCIsInJlcXVpcmUiLCJ0c09yZGVyQnkiLCJjbGlja2luZ0NhbGxiYWNrIiwic2hpZnRLZXkiLCJ0c0NyaXRlcmlhIiwidHNOYW1lIiwidHNEZWZhdWx0IiwidGVybWluYWwiLCJtdWx0aUVsZW1lbnQiLCJwcmlvcml0eSIsInJlcGVhdEF0dHJzIiwibmdSZXBlYXREaXJlY3RpdmUiLCJ0c1JlcGVhdERpcmVjdGl2ZSIsImlzRGVmaW5lZCIsInRzRXhwciIsInJlcGVhdEV4cHIiLCJyZXBlYXRFeHByUmVnZXgiLCJ0cmFja0J5TWF0Y2giLCJyZXBlYXRJbk1hdGNoIiwic2VhcmNoIiwidHNIaWRlTm9EYXRhIiwic3RhcnRTeW0iLCJzdGFydFN5bWJvbCIsImVuZFN5bSIsImVuZFN5bWJvbCIsIm5vRGF0YVJvdyIsImNsb25lIiwicmVtb3ZlQXR0ciIsImNoaWxkcmVuIiwiY2hpbGRFbGVtZW50Q291bnQiLCJwcmVwZW5kIiwibGltaXRGdW4iLCJzb3J0ZnVuIiwiYXJyYXlDb3B5IiwiaW5wdXQiLCJ0aW1lc3RhbXAiLCJfb2JzZXJ2ZVN0cmluZ0F0dHIiLCJiYXNlQ2xhc3MiLCJjbGFzc05hbWUiLCIkb2JzZXJ2ZSIsImN1cnJlbnRDbGFzc2VzIiwiX29ic2VydmVCb29sZWFuQXR0ciIsInRvZ2dsZUNsYXNzIiwic3RhY2siLCJoYXNDbGFzcyIsImxpc3QiLCJhbHRUZXh0IiwiYWx0IiwiYWx0RWxlbSIsIm5leHQiLCJhbHRFbGVtQ2xhc3MiLCJ0ZXh0IiwiJCIsIlBsdWdpbiIsImRlZmF1bHRzIiwiX2RlZmF1bHRzIiwiX25hbWUiLCJwbHVnaW5OYW1lIiwicHJvcGVydHlOYW1lIiwiY29uc3RydWN0b3IiLCJ0b2dnbGUiLCJlbCIsImhpZGVNZW51Iiwic2hvd01lbnUiLCJmaW5kIiwic2hvdyIsImhpZGUiLCJlYWNoIiwib24iLCJ0YXJnZXQiLCJvZmZzZXRQYXJlbnQiLCIkZHJvcGRvd24iLCJjdXJyZW50VGFyZ2V0IiwibWVudUJ1dHRvbiIsInByZXZlbnREZWZhdWx0IiwialF1ZXJ5IiwicmV0IiwibW9udGgiLCJ5ZWFyIiwiX3JlZiIsImdldEZ1bGxZZWFyIiwiZGVmYXVsdEZvcm1hdCIsImRlZmF1bHRJbnB1dEZvcm1hdCIsImNhcmRzIiwicGF0dGVybiIsImZvcm1hdCIsImlucHV0Rm9ybWF0IiwiY3ZjTGVuZ3RoIiwibHVobiIsIl9mcm9tTnVtYmVyIiwibnVtIiwiY2FyZCIsIl9mcm9tVHlwZSIsImZyb21OdW1iZXIiLCJmcm9tVHlwZSIsIkNhcmRzIiwiQ29tbW9uIiwiJGZpbHRlciIsIl9mb3JtYXRzIiwiX2hhc1RleHRTZWxlY3RlZCIsIiR0YXJnZXQiLCJzZWxlY3Rpb24iLCJjcmVhdGVSYW5nZSIsIl9mb3JtYXRDYXJkTnVtYmVyIiwiZGlnaXQiLCJyZSIsInVwcGVyTGVuZ3RoIiwid2hpY2giLCJtZXRhIiwia2V5Q29kZSIsIl9yZXN0cmljdENhcmROdW1iZXIiLCJfZm9ybWF0QmFja0NhcmROdW1iZXIiLCJfZ2V0Rm9ybWF0dGVkQ2FyZE51bWJlciIsImdyb3VwcyIsImdsb2JhbCIsImV4ZWMiLCJzaGlmdCIsIl9yZUZvcm1hdENhcmROdW1iZXIiLCJfcGFyc2VDYXJkTnVtYmVyIiwiY3RybCIsIiRwYXJzZXJzIiwiJGZvcm1hdHRlcnMiLCJfZm9ybWF0Q1ZDIiwiX3Jlc3RyaWN0RXhwaXJ5IiwiX2Zvcm1hdEV4cGlyeSIsIl9mb3JtYXRGb3J3YXJkRXhwaXJ5IiwiX2Zvcm1hdEZvcndhcmRTbGFzaCIsInNsYXNoIiwiX2Zvcm1hdEJhY2tFeHBpcnkiLCJfcGFyc2VFeHBpcnkiLCJwYXJzZUV4cGlyeSIsImV4cGlyeSIsIl9nZXRGb3JtYXR0ZWRFeHBpcnkiLCJ0eXBlcyIsImtleXMiLCJlcnJzdHIiLCJfRm9ybWF0IiwicGF5bWVudHNGb3JtYXQiLCJfX2luZGV4T2YiLCJsIiwiX2x1aG5DaGVjayIsImRpZ2l0cyIsIm9kZCIsInN1bSIsInJldmVyc2UiLCJfdmFsaWRhdG9ycyIsImN2YyIsInJlZjEiLCJwYXltZW50c1R5cGVNb2RlbCIsInR5cGVNb2RlbCIsImNsZWFyQ2FyZCIsIiRjYXJkIiwiY29weSIsImN1cnJlbnRUaW1lIiwic2V0TW9udGgiLCJnZXRNb250aCIsIl9WYWxpZGF0ZSIsIl92YWxpZGF0b3JXYXRjaGVzIiwiJHdhdGNoIiwibmV3VmFsIiwib2xkVmFsIiwidmFsaWQiLCIkbW9kZWxWYWx1ZSIsIiRzZXRWYWxpZGl0eSIsIl9WYWxpZGF0ZVdhdGNoIiwicGF5bWVudHNWYWxpZGF0ZSIsInZhbGlkYXRlRm4iLCJfZ2V0RGF0YVRvU2VuZCIsInBvc3NpYmxlS2V5cyIsImNhbWVsVG9TbmFrZSIsImhhc093blByb3BlcnR5IiwiU3RyaXBlIiwiZm9ybSIsImV4cE1vbnRoVXNlZCIsImV4cE1vbnRoIiwiZXhwWWVhclVzZWQiLCJleHBZZWFyIiwiZXhwIiwiYnV0dG9uIiwiY3JlYXRlVG9rZW4iLCJzdHJpcGVGb3JtIl0sIm1hcHBpbmdzIjoiQUFBQSxZQUdBQSxTQUFBQyxPQUFBLFVBQUEsc0JBRUFDLFFBQUEsZUFJQUMsU0FBQSxVQUFBLFdBQ0FDLEtBQUFDLEtBQUEsZUFJQUMsS0FBQSxhQUFBLFNBQUEsYUFBQSxRQUFBLFNBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEdBRUFILEVBQUFJLElBQUEsZ0JBQUEsV0FDQUgsRUFBQUksVUFHQVosUUFBQWEsU0FBQUgsRUFBQUksSUFBQSxTQUNBTixFQUFBTyxTQUFBTCxFQUFBSSxJQUFBLFNBR0FOLEVBQUFRLFVBS0FDLFFBQUEsVUFBQSxhQUFBLFlBQUEsVUFBQSxhQUFBLFFBQUEsU0FBQVYsRUFBQVcsRUFBQUMsRUFBQVYsRUFBQUMsR0FFQU4sS0FBQVksS0FBQSxX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QW1qQixHQUNBaHFCLEVBQUFrcUIsZUFBQUYsRUFBQW5qQixNQUNBdWQsRUFBQTZGLEVBQUFELEVBQUFuakIsS0FBQTVJLFFBQUErcUIsS0FBQWhwQixFQUFBZ3FCLEVBQUFuakIsS0FNQSxPQUZBdWQsR0FBQSxRQUFBQSxFQUFBLFFBQUEsSUFBQWpSLFFBQUEsS0FBQSxJQUVBaVIsSUFJQWplLFNBQUEsSUFDQU8sS0FBQSxTQUFBTixFQUFBeUMsRUFBQTVJLEdBRUEsSUFBQWIsRUFBQStxQixPQUNBLEtBQUEsMEdBR0EsSUFBQUMsR0FBQW5zQixRQUFBdUksUUFBQXFDLEVBRUF1aEIsR0FBQTlnQixLQUFBLFNBQUEsV0FFQStnQixlQUFBamtCLEVBQUFra0IsU0FDQUMsY0FBQW5rQixFQUFBb2tCLFFBRUFILGNBQUFFLGNBQ0FFLElBQUFqRixFQUFBa0MsWUFBQXRoQixFQUFBdWhCLFFBQ0F2aEIsRUFBQWtrQixTQUFBRyxJQUFBcEcsTUFDQWplLEVBQUFva0IsUUFBQUMsSUFBQW5HLEtBR0EsSUFBQW9HLEdBQUFOLEVBQUE1RyxLQUFBLFNBQ0FrSCxHQUFBL2dCLEtBQUEsWUFBQSxHQUVBeWdCLEVBQUFoSSxTQUFBLFlBR0FoakIsRUFBQStxQixPQUFBUSxZQUFBWixlQUFBM2pCLEdBQUEsV0FDQSxHQUFBd0osR0FBQUwsU0FDQW5KLEdBQUF5RCxPQUFBLFdBQ0F6RCxFQUFBbkcsRUFBQTJxQixZQUFBclcsTUFBQW5PLEVBQUF3SixLQUVBOGEsRUFBQS9nQixLQUFBLFlBQUEsTUFLQXZELEVBQUF5RCxPQUFBLFdBQ0F6RCxFQUFBbkcsRUFBQTJxQixZQUFBclcsTUFBQW5PLEdBQUEsS0FBQWhDLE1BQUEsK0JBRUFzbUIsRUFBQS9nQixLQUFBLFlBQUEsSUFHQXZELEVBQUFra0IsU0FBQSxLQUNBbGtCLEVBQUFva0IsUUFBQSIsImZpbGUiOiJsaWJzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xyXG5cclxuXHJcbmFuZ3VsYXIubW9kdWxlKCduZ0NhcnQnLCBbJ25nQ2FydC5kaXJlY3RpdmVzJ10pXHJcblxyXG4gICAgLmNvbmZpZyhbZnVuY3Rpb24gKCkge1xyXG5cclxuICAgIH1dKVxyXG5cclxuICAgIC5wcm92aWRlcignJG5nQ2FydCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLiRnZXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgfTtcclxuICAgIH0pXHJcblxyXG4gICAgLnJ1bihbJyRyb290U2NvcGUnLCAnbmdDYXJ0JywnbmdDYXJ0SXRlbScsICdzdG9yZScsIGZ1bmN0aW9uICgkcm9vdFNjb3BlLCBuZ0NhcnQsIG5nQ2FydEl0ZW0sIHN0b3JlKSB7XHJcblxyXG4gICAgICAgICRyb290U2NvcGUuJG9uKCduZ0NhcnQ6Y2hhbmdlJywgZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgbmdDYXJ0LiRzYXZlKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmIChhbmd1bGFyLmlzT2JqZWN0KHN0b3JlLmdldCgnY2FydCcpKSkge1xyXG4gICAgICAgICAgICBuZ0NhcnQuJHJlc3RvcmUoc3RvcmUuZ2V0KCdjYXJ0JykpO1xyXG5cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBuZ0NhcnQuaW5pdCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XSlcclxuXHJcbiAgICAuc2VydmljZSgnbmdDYXJ0JywgWyckcm9vdFNjb3BlJywgJyRsb2NhdGlvbicsICckd2luZG93JywgJ25nQ2FydEl0ZW0nLCAnc3RvcmUnLCBmdW5jdGlvbiAoJHJvb3RTY29wZSwgJGxvY2F0aW9uLCAkd2luZG93LCBuZ0NhcnRJdGVtLCBzdG9yZSkge1xyXG5cclxuICAgICAgICB0aGlzLmluaXQgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICB0aGlzLiRjYXJ0ID0ge1xyXG4gICAgICAgICAgICAgICAgc2hpcHBpbmcgOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgdGF4UmF0ZSA6IG51bGwsXHJcbiAgICAgICAgICAgICAgICB0YXggOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgaXRlbXMgOiBbXVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMuYWRkSXRlbSA9IGZ1bmN0aW9uIChpZCwgc2t1LCBuYW1lLCBwcmljZSwgcXVhbnRpdHksIGRhdGEsIGF0dHIpIHtcclxuICAgICAgICAgICAgdmFyIGluQ2FydCA9IHRoaXMuZ2V0SXRlbUJ5SWQoaWQpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBpbkNhcnQgPT09ICdvYmplY3QnKXtcclxuICAgICAgICAgICAgICAgIC8vVXBkYXRlIHF1YW50aXR5IG9mIGFuIGl0ZW0gaWYgaXQncyBhbHJlYWR5IGluIHRoZSBjYXJ0XHJcbiAgICAgICAgICAgICAgICBpbkNhcnQuc2V0UXVhbnRpdHkocXVhbnRpdHksIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgnbmdDYXJ0Oml0ZW1VcGRhdGVkJywgaW5DYXJ0KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHZhciBuZXdJdGVtID0gbmV3IG5nQ2FydEl0ZW0oaWQsIHNrdSwgbmFtZSwgcHJpY2UsIHF1YW50aXR5LCBkYXRhLCBhdHRyKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuJGNhcnQuaXRlbXMucHVzaChuZXdJdGVtKTtcclxuICAgICAgICAgICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgnbmdDYXJ0Oml0ZW1BZGRlZCcsIG5ld0l0ZW0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ25nQ2FydDpjaGFuZ2UnLCB7fSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy5hZGRJdGVtQnRuID0gZnVuY3Rpb24gKGlkLCBza3UsIG5hbWUsIHByaWNlLCBxdWFudGl0eSwgZGF0YSkge1xyXG4gICAgICAgICAgICB2YXIgc2t1cyA9IGRhdGEuc2t1cztcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAoc2t1cy5sZW5ndGggPT09IDEpe1xyXG4gICAgICAgICAgICB2YXIgaW5DYXJ0ID0gdGhpcy5nZXRJdGVtQnlJZChpZCk7XHJcblxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIGluQ2FydCA9PT0gJ29iamVjdCcpe1xyXG4gICAgICAgICAgICAgICAgLy9VcGRhdGUgcXVhbnRpdHkgb2YgYW4gaXRlbSBpZiBpdCdzIGFscmVhZHkgaW4gdGhlIGNhcnRcclxuICAgICAgICAgICAgICAgIGluQ2FydC5zZXRRdWFudGl0eShxdWFudGl0eSwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCduZ0NhcnQ6aXRlbVVwZGF0ZWQnLCBpbkNhcnQpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdmFyIG5ld0l0ZW0gPSBuZXcgbmdDYXJ0SXRlbShpZCwgc2t1LCBuYW1lLCBwcmljZSwgcXVhbnRpdHksIGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy4kY2FydC5pdGVtcy5wdXNoKG5ld0l0ZW0pO1xyXG4gICAgICAgICAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCduZ0NhcnQ6aXRlbUFkZGVkJywgbmV3SXRlbSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgnbmdDYXJ0OmNoYW5nZScsIHt9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICRsb2NhdGlvbi51cmwoJy9zdG9yZS8nKyBkYXRhLmlkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG5cclxuICAgICAgICB0aGlzLmNoYW5nZVF1YW50aXR5ID0gZnVuY3Rpb24gKGlkLCBxdWFudGl0eSl7XHJcbiAgICAgICAgICAgIHZhciBpbkNhcnQgPSB0aGlzLmdldEl0ZW1CeUlkKGlkKTtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBpbkNhcnQgPT09ICdvYmplY3QnKXtcclxuICAgICAgICAgICAgaW5DYXJ0LnNldFF1YW50aXR5KHF1YW50aXR5LCB0cnVlKTtcclxuICAgICAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCduZ0NhcnQ6aXRlbVVwZGF0ZWQnLCBpbkNhcnQpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJub3RoaW5nIHRoZXJlXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgnbmdDYXJ0OmNoYW5nZScsIHt9KTtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICB0aGlzLmdldEl0ZW1CeUlkID0gZnVuY3Rpb24gKGl0ZW1JZCkge1xyXG4gICAgICAgICAgICB2YXIgaXRlbXMgPSB0aGlzLmdldENhcnQoKS5pdGVtcztcclxuICAgICAgICAgICAgdmFyIGJ1aWxkID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICBhbmd1bGFyLmZvckVhY2goaXRlbXMsIGZ1bmN0aW9uIChpdGVtKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAgKGl0ZW0uZ2V0SWQoKSA9PT0gaXRlbUlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnVpbGQgPSBpdGVtO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIGJ1aWxkO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMuc2V0U2hpcHBpbmcgPSBmdW5jdGlvbihzaGlwcGluZyl7XHJcbiAgICAgICAgICAgIHRoaXMuJGNhcnQuc2hpcHBpbmcgPSBzaGlwcGluZztcclxuICAgICAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCduZ0NhcnQ6Y2hhbmdlJywge30pO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRTaGlwcGluZygpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMuZ2V0U2hpcHBpbmcgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICBpZiAodGhpcy5nZXRDYXJ0KCkuaXRlbXMubGVuZ3RoID09IDApIHJldHVybiAwO1xyXG4gICAgICAgICAgICByZXR1cm4gIHRoaXMuZ2V0Q2FydCgpLnNoaXBwaW5nO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMuc2V0VGF4UmF0ZSA9IGZ1bmN0aW9uKHRheFJhdGUpe1xyXG4gICAgICAgICAgICB0aGlzLiRjYXJ0LnRheFJhdGUgPSArcGFyc2VGbG9hdCh0YXhSYXRlKS50b0ZpeGVkKDIpO1xyXG4gICAgICAgICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ25nQ2FydDpjaGFuZ2UnLCB7fSk7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFRheFJhdGUoKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLmdldFRheFJhdGUgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy4kY2FydC50YXhSYXRlXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy5nZXRUYXggPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICByZXR1cm4gTWF0aC5yb3VuZCgoKHRoaXMuZ2V0U3ViVG90YWwoKS8xMDApICogdGhpcy5nZXRDYXJ0KCkudGF4UmF0ZSApKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLnNldENhcnQgPSBmdW5jdGlvbiAoY2FydCkge1xyXG4gICAgICAgICAgICB0aGlzLiRjYXJ0ID0gY2FydDtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Q2FydCgpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMuZ2V0Q2FydCA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLiRjYXJ0O1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMuZ2V0SXRlbXMgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRDYXJ0KCkuaXRlbXM7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy5nZXRUb3RhbEl0ZW1zID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgY291bnQgPSAwO1xyXG4gICAgICAgICAgICB2YXIgaXRlbXMgPSB0aGlzLmdldEl0ZW1zKCk7XHJcbiAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaChpdGVtcywgZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgICAgICAgICAgIGNvdW50ICs9IGl0ZW0uZ2V0UXVhbnRpdHkoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiBjb3VudDtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLmdldFRvdGFsVW5pcXVlSXRlbXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldENhcnQoKS5pdGVtcy5sZW5ndGg7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy5nZXRTdWJUb3RhbCA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIHZhciB0b3RhbCA9IDA7XHJcbiAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaCh0aGlzLmdldENhcnQoKS5pdGVtcywgZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgICAgICAgICAgIHRvdGFsICs9IGl0ZW0uZ2V0VG90YWwoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiArcGFyc2VGbG9hdCh0b3RhbCkudG9GaXhlZCgyKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLnRvdGFsQ29zdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuICtwYXJzZUZsb2F0KHRoaXMuZ2V0U3ViVG90YWwoKSArIHRoaXMuZ2V0U2hpcHBpbmcoKSArIHRoaXMuZ2V0VGF4KCkpLnRvRml4ZWQoMik7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy5yZW1vdmVJdGVtID0gZnVuY3Rpb24gKGluZGV4KSB7XHJcbiAgICAgICAgICAgIHZhciBpdGVtID0gdGhpcy4kY2FydC5pdGVtcy5zcGxpY2UoaW5kZXgsIDEpWzBdIHx8IHt9O1xyXG4gICAgICAgICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ25nQ2FydDppdGVtUmVtb3ZlZCcsIGl0ZW0pO1xyXG4gICAgICAgICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ25nQ2FydDpjaGFuZ2UnLCB7fSk7XHJcblxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMucmVtb3ZlSXRlbUJ5SWQgPSBmdW5jdGlvbiAoaWQpIHtcclxuICAgICAgICAgICAgdmFyIGl0ZW07XHJcbiAgICAgICAgICAgIHZhciBjYXJ0ID0gdGhpcy5nZXRDYXJ0KCk7XHJcbiAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaChjYXJ0Lml0ZW1zLCBmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHtcclxuICAgICAgICAgICAgICAgIGlmKGl0ZW0uZ2V0SWQoKSA9PT0gaWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpdGVtID0gY2FydC5pdGVtcy5zcGxpY2UoaW5kZXgsIDEpWzBdIHx8IHt9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5zZXRDYXJ0KGNhcnQpO1xyXG4gICAgICAgICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ25nQ2FydDppdGVtUmVtb3ZlZCcsIGl0ZW0pO1xyXG4gICAgICAgICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ25nQ2FydDpjaGFuZ2UnLCB7fSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy5lbXB0eSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgnbmdDYXJ0OmNoYW5nZScsIHt9KTtcclxuICAgICAgICAgICAgdGhpcy4kY2FydC5pdGVtcyA9IFtdO1xyXG4gICAgICAgICAgICAkd2luZG93LmxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdjYXJ0Jyk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLmlzRW1wdHkgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICByZXR1cm4gKHRoaXMuJGNhcnQuaXRlbXMubGVuZ3RoID4gMCA/IGZhbHNlIDogdHJ1ZSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMudG9PYmplY3QgPSBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmdldEl0ZW1zKCkubGVuZ3RoID09PSAwKSByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICB2YXIgaXRlbXMgPSBbXTtcclxuICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKHRoaXMuZ2V0SXRlbXMoKSwgZnVuY3Rpb24oaXRlbSl7XHJcbiAgICAgICAgICAgICAgICBpdGVtcy5wdXNoIChpdGVtLnRvT2JqZWN0KCkpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBzaGlwcGluZzogdGhpcy5nZXRTaGlwcGluZygpLFxyXG4gICAgICAgICAgICAgICAgdGF4OiB0aGlzLmdldFRheCgpLFxyXG4gICAgICAgICAgICAgICAgdGF4UmF0ZTogdGhpcy5nZXRUYXhSYXRlKCksXHJcbiAgICAgICAgICAgICAgICBzdWJUb3RhbDogdGhpcy5nZXRTdWJUb3RhbCgpLFxyXG4gICAgICAgICAgICAgICAgdG90YWxDb3N0OiB0aGlzLnRvdGFsQ29zdCgpLFxyXG4gICAgICAgICAgICAgICAgaXRlbXM6aXRlbXNcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG5cclxuICAgICAgICB0aGlzLiRyZXN0b3JlID0gZnVuY3Rpb24oc3RvcmVkQ2FydCl7XHJcbiAgICAgICAgICAgIHZhciBfc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgICAgIF9zZWxmLmluaXQoKTtcclxuICAgICAgICAgICAgX3NlbGYuJGNhcnQuc2hpcHBpbmcgPSBzdG9yZWRDYXJ0LnNoaXBwaW5nO1xyXG4gICAgICAgICAgICBfc2VsZi4kY2FydC50YXhSYXRlID0gc3RvcmVkQ2FydC50YXhSYXRlO1xyXG4gICAgICAgICAgICBfc2VsZi4kY2FydC50YXggPSBzdG9yZWRDYXJ0LnRheDtcclxuXHJcbiAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaChzdG9yZWRDYXJ0Lml0ZW1zLCBmdW5jdGlvbiAoaXRlbSkge1xyXG4gICAgICAgICAgICAgICAgX3NlbGYuJGNhcnQuaXRlbXMucHVzaChuZXcgbmdDYXJ0SXRlbShpdGVtLnBhcmVudCwgaXRlbS5za3UsIGl0ZW0uZGVzY3JpcHRpb24sIGl0ZW0uYW1vdW50LCBpdGVtLnF1YW50aXR5LCBpdGVtLl9kYXRhLCBpdGVtLmF0dHIpKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMuJHNhdmUoKTtcclxuICAgICAgICB9O1xyXG5cclxuXHJcblxyXG4gICAgICAgIHRoaXMuJHNhdmUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzdG9yZS5zZXQoJ2NhcnQnLCBKU09OLnN0cmluZ2lmeSh0aGlzLmdldENhcnQoKSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XSlcclxuXHJcbiAgICAuZmFjdG9yeSgnbmdDYXJ0SXRlbScsIFsnJHJvb3RTY29wZScsICckbG9nJywgZnVuY3Rpb24gKCRyb290U2NvcGUsICRsb2cpIHtcclxuXHJcbiAgICAgICAgdmFyIGl0ZW0gPSBmdW5jdGlvbiAoaWQsIHNrdSwgbmFtZSwgcHJpY2UsIHF1YW50aXR5LCBkYXRhLCBhdHRyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0SWQoaWQpO1xyXG4gICAgICAgICAgICB0aGlzLnNldFNrdShza3UpO1xyXG4gICAgICAgICAgICB0aGlzLnNldE5hbWUobmFtZSk7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0UHJpY2UocHJpY2UpO1xyXG4gICAgICAgICAgICB0aGlzLnNldFF1YW50aXR5KHF1YW50aXR5KTtcclxuICAgICAgICAgICAgdGhpcy5zZXREYXRhKGRhdGEpO1xyXG4gICAgICAgICAgICB0aGlzLnNldEF0dHIoYXR0cik7XHJcbiAgICAgICAgfTtcclxuXHJcblxyXG4gICAgICAgIGl0ZW0ucHJvdG90eXBlLnNldElkID0gZnVuY3Rpb24oaWQpe1xyXG4gICAgICAgICAgICBpZiAoaWQpICB0aGlzLnBhcmVudCA9IGlkO1xyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICRsb2cuZXJyb3IoJ0FuIElEIG11c3QgYmUgcHJvdmlkZWQnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGl0ZW0ucHJvdG90eXBlLnNldFNrdSA9IGZ1bmN0aW9uKHNrdSl7XHJcbiAgICAgICAgICAgIGlmIChza3UpICB0aGlzLnNrdSA9IHNrdTtcclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkbG9nLmVycm9yKCdBIHNrdSBtdXN0IGJlIHByb3ZpZGVkJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBpdGVtLnByb3RvdHlwZS5nZXRJZCA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcmVudDtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBpdGVtLnByb3RvdHlwZS5nZXRTa3UgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5za3U7XHJcbiAgICAgICAgfTtcclxuXHJcblxyXG4gICAgICAgIGl0ZW0ucHJvdG90eXBlLnNldE5hbWUgPSBmdW5jdGlvbihuYW1lKXtcclxuICAgICAgICAgICAgaWYgKG5hbWUpICB0aGlzLmRlc2NyaXB0aW9uID0gbmFtZTtcclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkbG9nLmVycm9yKCdBIG5hbWUgbXVzdCBiZSBwcm92aWRlZCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICBpdGVtLnByb3RvdHlwZS5nZXROYW1lID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVzY3JpcHRpb247XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgaXRlbS5wcm90b3R5cGUuc2V0UHJpY2UgPSBmdW5jdGlvbihwcmljZSl7XHJcbiAgICAgICAgICAgIHZhciBwcmljZUZsb2F0ID0gcGFyc2VGbG9hdChwcmljZSk7XHJcbiAgICAgICAgICAgIGlmIChwcmljZUZsb2F0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocHJpY2VGbG9hdCA8PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJGxvZy5lcnJvcignQSBwcmljZSBtdXN0IGJlIG92ZXIgMCcpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFtb3VudCA9IChwcmljZUZsb2F0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICRsb2cuZXJyb3IoJ0EgcHJpY2UgbXVzdCBiZSBwcm92aWRlZCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICBpdGVtLnByb3RvdHlwZS5nZXRQcmljZSA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmFtb3VudDtcclxuICAgICAgICB9O1xyXG5cclxuICAgIFxyXG4gICAgICAgIGl0ZW0ucHJvdG90eXBlLnNldFF1YW50aXR5ID0gZnVuY3Rpb24ocXVhbnRpdHksIHJlbGF0aXZlKXtcclxuXHJcblxyXG4gICAgICAgICAgICB2YXIgcXVhbnRpdHlJbnQgPSBwYXJzZUludChxdWFudGl0eSk7XHJcbiAgICAgICAgICAgIGlmIChxdWFudGl0eUludCAlIDEgPT09IDApe1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlbGF0aXZlID09PSB0cnVlKXtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnF1YW50aXR5ICArPSBxdWFudGl0eUludDtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5xdWFudGl0eSA9IHF1YW50aXR5SW50O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucXVhbnRpdHkgPCAxKSB0aGlzLnF1YW50aXR5ID0gMTtcclxuXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnF1YW50aXR5ID0gMTtcclxuICAgICAgICAgICAgICAgICRsb2cuaW5mbygnUXVhbnRpdHkgbXVzdCBiZSBhbiBpbnRlZ2VyIGFuZCB3YXMgZGVmYXVsdGVkIHRvIDEnKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgaXRlbS5wcm90b3R5cGUuZ2V0UXVhbnRpdHkgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5xdWFudGl0eTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBpdGVtLnByb3RvdHlwZS5zZXREYXRhID0gZnVuY3Rpb24oZGF0YSl7XHJcbiAgICAgICAgICAgIGlmIChkYXRhKSB0aGlzLl9kYXRhID0gZGF0YTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBpdGVtLnByb3RvdHlwZS5nZXREYXRhID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2RhdGEpIHJldHVybiB0aGlzLl9kYXRhO1xyXG4gICAgICAgICAgICBlbHNlICRsb2cuaW5mbygnVGhpcyBpdGVtIGhhcyBubyBkYXRhJyk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgaXRlbS5wcm90b3R5cGUuc2V0QXR0ciA9IGZ1bmN0aW9uKGF0dHJpYnV0ZXMpe1xyXG4gICAgICAgICAgICBpZiAoYXR0cmlidXRlcykgdGhpcy5hdHRyID0gYXR0cmlidXRlcztcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBpdGVtLnByb3RvdHlwZS5nZXRBdHRyID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgaWYgKHRoaXMuYXR0cil7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5hdHRyW1wic2l6ZVwiXSl7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuYXR0cltcInNpemVcIl1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5hdHRyW1wiY29sb3JcIl0pIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5hdHRyW1wic2l6ZVwiXVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfSBcclxuICAgICAgICAgICAgZWxzZSB7fTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIFxyXG5cclxuXHJcblxyXG4gICAgICAgIGl0ZW0ucHJvdG90eXBlLmdldFRvdGFsID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgcmV0dXJuICtwYXJzZUZsb2F0KHRoaXMuZ2V0UXVhbnRpdHkoKSAqIHRoaXMuZ2V0UHJpY2UoKSkudG9GaXhlZCgyKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBpdGVtLnByb3RvdHlwZS50b09iamVjdCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgaWQ6IHRoaXMuZ2V0SWQoKSxcclxuICAgICAgICAgICAgICAgIG5hbWU6IHRoaXMuZ2V0TmFtZSgpLFxyXG4gICAgICAgICAgICAgICAgcHJpY2U6IHRoaXMuZ2V0UHJpY2UoKSxcclxuICAgICAgICAgICAgICAgIHF1YW50aXR5OiB0aGlzLmdldFF1YW50aXR5KCksXHJcbiAgICAgICAgICAgICAgICBkYXRhOiB0aGlzLmdldERhdGEoKSxcclxuICAgICAgICAgICAgICAgIHRvdGFsOiB0aGlzLmdldFRvdGFsKClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHJldHVybiBpdGVtO1xyXG5cclxuICAgIH1dKVxyXG5cclxuICAgIC5zZXJ2aWNlKCdzdG9yZScsIFsnJHdpbmRvdycsIGZ1bmN0aW9uICgkd2luZG93KSB7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcblxyXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICAgICAgICAgIGlmICggJHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShrZXkpICkgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY2FydCA9IGFuZ3VsYXIuZnJvbUpzb24oICR3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oa2V5KSApIDtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShjYXJ0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIH0sXHJcblxyXG5cclxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAoa2V5LCB2YWwpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodmFsID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAkd2luZG93LmxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGtleSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICR3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oIGtleSwgYW5ndWxhci50b0pzb24odmFsKSApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuICR3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oa2V5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1dKVxyXG5cclxuICAgIC5jb250cm9sbGVyKCdDYXJ0Q29udHJvbGxlcicsWyckc2NvcGUnLCckcm9vdFNjb3BlJywgJ25nQ2FydCcsJyR0aW1lb3V0JywgZnVuY3Rpb24oJHNjb3BlLCAkcm9vdFNjb3BlLCBuZ0NhcnQsICR0aW1lb3V0KSB7XHJcbiAgICAgICAgJHNjb3BlLmxvYWRlZCA9IGZhbHNlO1xyXG4gICAgICAgICRzY29wZS50b2dnbGVDYXJ0ID0gZmFsc2U7XHJcbiAgICAgICAgJHNjb3BlLm5nQ2FydCA9IG5nQ2FydDtcclxuICAgICAgICAkdGltZW91dChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAkc2NvcGUubG9hZGVkID0gdHJ1ZTtcclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICAgIHZhciBpdGVtcyA9IG5nQ2FydC5nZXRJdGVtcygpO1xyXG4gICAgICAgICAgICAvLyBsb29wIHRvIGRldGVybWluZSBpZiBhbnkgaXRlbXMgYXJlIHNoaXBwYWJsZVxyXG4gIFxyXG4gICAgICAgICAgICB2YXIgZmlsdGVyZWQgPSBbXTtcclxuICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKGl0ZW1zLCBmdW5jdGlvbihpdGVtKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS5fZGF0YS5wcm9kdWN0X3R5cGUgPT09IFwic2hpcHBhYmxlXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICBmaWx0ZXJlZC5wdXNoKGl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgaWYgKGZpbHRlcmVkLmxlbmd0aCA+IDApe1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnNoaXBCb29sID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICRzY29wZS4kZW1pdCgnc2V0U2hpcHBhYmxlJywgdHJ1ZSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2hpcEJvb2wgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICRzY29wZS4kZW1pdCgnc2V0U2hpcHBhYmxlJywgZmFsc2UpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIFxyXG5cclxuICAgIH1dKVxyXG5cclxuICAgIC5jb250cm9sbGVyKCdDYXJ0QnRuQ29udHJvbGxlcicsWyckc2NvcGUnLCAnbmdDYXJ0JywnJHRpbWVvdXQnLCBmdW5jdGlvbigkc2NvcGUsIG5nQ2FydCwgJHRpbWVvdXQpIHtcclxuICAgICAgICBcclxuICAgICAgICAkc2NvcGUubG9hZGVkID0gZmFsc2U7XHJcbiAgICAgICAgJHNjb3BlLnRvZ2dsZUNhcnQgPSBmYWxzZTtcclxuICAgICAgICAkc2NvcGUubmdDYXJ0ID0gbmdDYXJ0O1xyXG4gICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICRzY29wZS5sb2FkZWQgPSB0cnVlO1xyXG4gICAgICAgIH0pXHJcblxyXG4gICAgfV0pXHJcblxyXG4gICAgLnZhbHVlKCd2ZXJzaW9uJywgJzEuMC4wJyk7XHJcbjsndXNlIHN0cmljdCc7XHJcblxyXG5cclxuYW5ndWxhci5tb2R1bGUoJ25nQ2FydC5kaXJlY3RpdmVzJywgWyduZ0NhcnQuZnVsZmlsbWVudCddKVxyXG5cclxuICAgIC5jb250cm9sbGVyKCdDYXJ0Q29udHJvbGxlcicsWyckc2NvcGUnLCAnbmdDYXJ0JywgZnVuY3Rpb24oJHNjb3BlLCBuZ0NhcnQpIHtcclxuICAgICAgICBcclxuICAgICAgICAkc2NvcGUubmdDYXJ0ID0gbmdDYXJ0O1xyXG5cclxuICAgICAgICBcclxuICAgICAgICBcclxuICAgIH1dKVxyXG5cclxuICAgICAgICAgIC5kaXJlY3RpdmUoJ25nY2FydEFkZEJ0bicsIFsnbmdDYXJ0JywgZnVuY3Rpb24obmdDYXJ0KXtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICByZXN0cmljdCA6ICdFJyxcclxuICAgICAgICAgICAgY29udHJvbGxlciA6ICdDYXJ0QnRuQ29udHJvbGxlcicsXHJcbiAgICAgICAgICAgIHNjb3BlOiB7XHJcbiAgICAgICAgICAgICAgICBpZDonQCcsXHJcbiAgICAgICAgICAgICAgICBza3U6ICdAJyxcclxuICAgICAgICAgICAgICAgIG5hbWU6J0AnLFxyXG4gICAgICAgICAgICAgICAgcXVhbnRpdHk6J0AnLFxyXG4gICAgICAgICAgICAgICAgcXVhbnRpdHlNYXg6J0AnLFxyXG4gICAgICAgICAgICAgICAgcHJpY2U6J0AnLFxyXG4gICAgICAgICAgICAgICAgZGF0YTonPSdcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgdHJhbnNjbHVkZTogdHJ1ZSxcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6IGZ1bmN0aW9uKGVsZW1lbnQsIGF0dHJzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIHR5cGVvZiBhdHRycy50ZW1wbGF0ZVVybCA9PSAndW5kZWZpbmVkJyApIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ3ZpZXdzL25nQ2FydC9hZGR0b2NhcnRCdG4uaHRtbCc7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhdHRycy50ZW1wbGF0ZVVybDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbGluazpmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMpe1xyXG4gICAgICAgICAgICAgICAgc2NvcGUuYXR0cnMgPSBhdHRycztcclxuICAgICAgICAgICAgICAgIHNjb3BlLmluQ2FydCA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICBuZ0NhcnQuZ2V0SXRlbUJ5SWQoYXR0cnMuaWQpO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoc2NvcGUuaW5DYXJ0KCkpe1xyXG4gICAgICAgICAgICAgICAgICAgIHNjb3BlLnEgPSBuZ0NhcnQuZ2V0SXRlbUJ5SWQoYXR0cnMuaWQpLmdldFF1YW50aXR5KCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHNjb3BlLnEgPSBwYXJzZUludChzY29wZS5xdWFudGl0eSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgc2NvcGUucXR5T3B0ID0gIFtdO1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPD0gc2NvcGUucXVhbnRpdHlNYXg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHNjb3BlLnF0eU9wdC5wdXNoKGkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9O1xyXG4gICAgfV0pXHJcblxyXG4gICAgLmRpcmVjdGl2ZSgnbmdjYXJ0QWRkdG9jYXJ0JywgWyduZ0NhcnQnLCBmdW5jdGlvbihuZ0NhcnQpe1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHJlc3RyaWN0IDogJ0UnLFxyXG4gICAgICAgICAgICBjb250cm9sbGVyIDogJ0NhcnRDb250cm9sbGVyJyxcclxuICAgICAgICAgICAgc2NvcGU6IHtcclxuICAgICAgICAgICAgICAgIGlkOidAJyxcclxuICAgICAgICAgICAgICAgIHNrdTogJ0AnLFxyXG4gICAgICAgICAgICAgICAgbmFtZTonQCcsXHJcbiAgICAgICAgICAgICAgICBxdWFudGl0eTonQCcsXHJcbiAgICAgICAgICAgICAgICBxdWFudGl0eU1heDonQCcsXHJcbiAgICAgICAgICAgICAgICBwcmljZTonQCcsXHJcbiAgICAgICAgICAgICAgICBkYXRhOic9J1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB0cmFuc2NsdWRlOiB0cnVlLFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogZnVuY3Rpb24oZWxlbWVudCwgYXR0cnMpIHtcclxuICAgICAgICAgICAgICAgIGlmICggdHlwZW9mIGF0dHJzLnRlbXBsYXRlVXJsID09ICd1bmRlZmluZWQnICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAndmlld3MvbmdDYXJ0L2FkZHRvY2FydC5odG1sJztcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGF0dHJzLnRlbXBsYXRlVXJsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBsaW5rOmZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycyl7XHJcbiAgICAgICAgICAgICAgICBzY29wZS5hdHRycyA9IGF0dHJzO1xyXG4gICAgICAgICAgICAgICAgc2NvcGUuaW5DYXJ0ID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gIG5nQ2FydC5nZXRJdGVtQnlJZChhdHRycy5pZCk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChzY29wZS5pbkNhcnQoKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUucSA9IG5nQ2FydC5nZXRJdGVtQnlJZChhdHRycy5pZCkuZ2V0UXVhbnRpdHkoKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUucSA9IHBhcnNlSW50KHNjb3BlLnF1YW50aXR5KTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBzY29wZS5xdHlPcHQgPSAgW107XHJcbiAgICAgICAgICAgICAgICB2YXIgdGhpc01heDtcclxuICAgICAgICAgICAgICAgIHZhciBzaG93Q291bnRSZWYgPSBmaXJlYmFzZS5kYXRhYmFzZSgpLnJlZigndGlja2V0cy8nKyBzY29wZS5pZCArICcvdG90YWxUaWNrZXRzJyk7XHJcbiAgICAgICAgICAgICAgICBzaG93Q291bnRSZWYub25jZSgndmFsdWUnKS50aGVuKGZ1bmN0aW9uKHNuYXBzaG90KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUudG90YWxUaXggPSBzbmFwc2hvdC52YWwoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc2NvcGUucXVhbnRpdHlNYXggPCBzY29wZS50b3RhbFRpeCl7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpc01heCA9IHNjb3BlLnF1YW50aXR5TWF4O1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpc01heCA9IHNjb3BlLnRvdGFsVGl4O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpc01heCA+IDApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8PSB0aGlzTWF4OyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGUucXR5T3B0LnB1c2goaSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgIFxyXG5cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9O1xyXG4gICAgfV0pXHJcblxyXG5cclxuXHJcbiAgICAuZGlyZWN0aXZlKCduZ2NhcnRDYXJ0JywgW2Z1bmN0aW9uKCl7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgcmVzdHJpY3QgOiAnRScsXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXIgOiAnQ2FydENvbnRyb2xsZXInLFxyXG4gICAgICAgICAgICBzY29wZToge30sXHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBmdW5jdGlvbihlbGVtZW50LCBhdHRycykge1xyXG4gICAgICAgICAgICAgICAgaWYgKCB0eXBlb2YgYXR0cnMudGVtcGxhdGVVcmwgPT0gJ3VuZGVmaW5lZCcgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICd2aWV3cy9uZ0NhcnQvY2FydC5odG1sJztcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGF0dHJzLnRlbXBsYXRlVXJsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBsaW5rOmZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycyl7XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH1dKVxyXG5cclxuICAgIC5kaXJlY3RpdmUoJ25nY2FydFN1bW1hcnknLCBbZnVuY3Rpb24oKXtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICByZXN0cmljdCA6ICdFJyxcclxuICAgICAgICAgICAgY29udHJvbGxlciA6ICdDYXJ0Q29udHJvbGxlcicsXHJcbiAgICAgICAgICAgIHNjb3BlOiB7fSxcclxuICAgICAgICAgICAgdHJhbnNjbHVkZTogdHJ1ZSxcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6IGZ1bmN0aW9uKGVsZW1lbnQsIGF0dHJzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIHR5cGVvZiBhdHRycy50ZW1wbGF0ZVVybCA9PSAndW5kZWZpbmVkJyApIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ3ZpZXdzL25nQ2FydC9zdW1tYXJ5Lmh0bWwnO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXR0cnMudGVtcGxhdGVVcmw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfV0pXHJcblxyXG4gICAgIC5kaXJlY3RpdmUoJ25nY2FydENhcnRDb25maXJtJywgW2Z1bmN0aW9uKCl7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgcmVzdHJpY3QgOiAnRScsXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXIgOiAnQ2FydENvbnRyb2xsZXInLFxyXG4gICAgICAgICAgICBzY29wZToge30sXHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBmdW5jdGlvbihlbGVtZW50LCBhdHRycykge1xyXG4gICAgICAgICAgICAgICAgaWYgKCB0eXBlb2YgYXR0cnMudGVtcGxhdGVVcmwgPT0gJ3VuZGVmaW5lZCcgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICd2aWV3cy9uZ0NhcnQvY2FydC1jb25maXJtLmh0bWwnO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXR0cnMudGVtcGxhdGVVcmw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGxpbms6ZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzKXtcclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfV0pXHJcblxyXG4gICAgLmRpcmVjdGl2ZSgnbmdjYXJ0U21hbGxDYXJ0JywgW2Z1bmN0aW9uKCl7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgcmVzdHJpY3QgOiAnRScsXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXIgOiAnQ2FydENvbnRyb2xsZXInLFxyXG4gICAgICAgICAgICBzY29wZToge30sXHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBmdW5jdGlvbihlbGVtZW50LCBhdHRycykge1xyXG4gICAgICAgICAgICAgICAgaWYgKCB0eXBlb2YgYXR0cnMudGVtcGxhdGVVcmwgPT0gJ3VuZGVmaW5lZCcgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICd2aWV3cy9uZ0NhcnQvc21hbGwtY2FydC5odG1sJztcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGF0dHJzLnRlbXBsYXRlVXJsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBsaW5rOmZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycyl7XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH1dKVxyXG5cclxuICAgIC5kaXJlY3RpdmUoJ25nY2FydFNtYWxsQ2FydENvbGxhcHNlJywgW2Z1bmN0aW9uKCl7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgcmVzdHJpY3QgOiAnRScsXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXIgOiAnQ2FydENvbnRyb2xsZXInLFxyXG4gICAgICAgICAgICBzY29wZToge30sXHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBmdW5jdGlvbihlbGVtZW50LCBhdHRycykge1xyXG4gICAgICAgICAgICAgICAgaWYgKCB0eXBlb2YgYXR0cnMudGVtcGxhdGVVcmwgPT0gJ3VuZGVmaW5lZCcgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICd2aWV3cy9uZ0NhcnQvc21hbGwtY2FydC1jb2xsYXBzZS5odG1sJztcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGF0dHJzLnRlbXBsYXRlVXJsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBsaW5rOmZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycyl7XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH1dKVxyXG5cclxuICAgIC5kaXJlY3RpdmUoJ25nY2FydENoZWNrb3V0JywgW2Z1bmN0aW9uKCl7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgcmVzdHJpY3QgOiAnRScsXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXIgOiAoJ0NhcnRDb250cm9sbGVyJywgWyckcm9vdFNjb3BlJywgJyRzY29wZScsICduZ0NhcnQnLCAnZnVsZmlsbWVudFByb3ZpZGVyJywgZnVuY3Rpb24oJHJvb3RTY29wZSwgJHNjb3BlLCBuZ0NhcnQsIGZ1bGZpbG1lbnRQcm92aWRlcikge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLm5nQ2FydCA9IG5nQ2FydDtcclxuXHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuY2hlY2tvdXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZnVsZmlsbWVudFByb3ZpZGVyLnNldFNlcnZpY2UoJHNjb3BlLnNlcnZpY2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZ1bGZpbG1lbnRQcm92aWRlci5zZXRTZXR0aW5ncygkc2NvcGUuc2V0dGluZ3MpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZ1bGZpbG1lbnRQcm92aWRlci5jaGVja291dCgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhLCBzdGF0dXMsIGhlYWRlcnMsIGNvbmZpZykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCduZ0NhcnQ6Y2hlY2tvdXRfc3VjY2VlZGVkJywgZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAoZGF0YSwgc3RhdHVzLCBoZWFkZXJzLCBjb25maWcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgnbmdDYXJ0OmNoZWNrb3V0X2ZhaWxlZCcsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXNDb2RlOiBzdGF0dXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGRhdGFcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfV0pLFxyXG4gICAgICAgICAgICBzY29wZToge1xyXG4gICAgICAgICAgICAgICAgc2VydmljZTonQCcsXHJcbiAgICAgICAgICAgICAgICBzZXR0aW5nczonPSdcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgdHJhbnNjbHVkZTogdHJ1ZSxcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6IGZ1bmN0aW9uKGVsZW1lbnQsIGF0dHJzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIHR5cGVvZiBhdHRycy50ZW1wbGF0ZVVybCA9PSAndW5kZWZpbmVkJyApIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ3RlbXBsYXRlL25nQ2FydC9jaGVja291dC5odG1sJztcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGF0dHJzLnRlbXBsYXRlVXJsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH1dKTtcclxuO1xyXG5hbmd1bGFyLm1vZHVsZSgnbmdDYXJ0LmZ1bGZpbG1lbnQnLCBbXSlcclxuICAgIC5zZXJ2aWNlKCdmdWxmaWxtZW50UHJvdmlkZXInLCBbJyRpbmplY3RvcicsIGZ1bmN0aW9uKCRpbmplY3Rvcil7XHJcblxyXG4gICAgICAgIHRoaXMuX29iaiA9IHtcclxuICAgICAgICAgICAgc2VydmljZSA6IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgc2V0dGluZ3MgOiB1bmRlZmluZWRcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLnNldFNlcnZpY2UgPSBmdW5jdGlvbihzZXJ2aWNlKXtcclxuICAgICAgICAgICAgdGhpcy5fb2JqLnNlcnZpY2UgPSBzZXJ2aWNlO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMuc2V0U2V0dGluZ3MgPSBmdW5jdGlvbihzZXR0aW5ncyl7XHJcbiAgICAgICAgICAgIHRoaXMuX29iai5zZXR0aW5ncyA9IHNldHRpbmdzO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMuY2hlY2tvdXQgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICB2YXIgcHJvdmlkZXIgPSAkaW5qZWN0b3IuZ2V0KCduZ0NhcnQuZnVsZmlsbWVudC4nICsgdGhpcy5fb2JqLnNlcnZpY2UpO1xyXG4gICAgICAgICAgICAgIHJldHVybiBwcm92aWRlci5jaGVja291dCh0aGlzLl9vYmouc2V0dGluZ3MpO1xyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgfV0pXHJcblxyXG5cclxuLnNlcnZpY2UoJ25nQ2FydC5mdWxmaWxtZW50LmxvZycsIFsnJHEnLCAnJGxvZycsICduZ0NhcnQnLCBmdW5jdGlvbigkcSwgJGxvZywgbmdDYXJ0KXtcclxuXHJcbiAgICAgICAgdGhpcy5jaGVja291dCA9IGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xyXG5cclxuICAgICAgICAgICAgJGxvZy5pbmZvKG5nQ2FydC50b09iamVjdCgpKTtcclxuICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSh7XHJcbiAgICAgICAgICAgICAgICBjYXJ0Om5nQ2FydC50b09iamVjdCgpXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiB9XSlcclxuXHJcbi5zZXJ2aWNlKCduZ0NhcnQuZnVsZmlsbWVudC5odHRwJywgWyckaHR0cCcsICduZ0NhcnQnLCBmdW5jdGlvbigkaHR0cCwgbmdDYXJ0KXtcclxuXHJcbiAgICAgICAgdGhpcy5jaGVja291dCA9IGZ1bmN0aW9uKHNldHRpbmdzKXtcclxuICAgICAgICAgICAgcmV0dXJuICRodHRwLnBvc3Qoc2V0dGluZ3MudXJsLFxyXG4gICAgICAgICAgICAgICAgeyBkYXRhOiBuZ0NhcnQudG9PYmplY3QoKSwgb3B0aW9uczogc2V0dGluZ3Mub3B0aW9uc30pO1xyXG4gICAgICAgIH1cclxuIH1dKVxyXG5cclxuXHJcbi5zZXJ2aWNlKCduZ0NhcnQuZnVsZmlsbWVudC5wYXlwYWwnLCBbJyRodHRwJywgJ25nQ2FydCcsIGZ1bmN0aW9uKCRodHRwLCBuZ0NhcnQpe1xyXG5cclxuXHJcbn1dKTtcclxuIiwiJ3VzZSBzdHJpY3QnO1xuXG5hbmd1bGFyLm1vZHVsZSgnYW5ndWxhci1wYXJhbGxheCcsIFtcbl0pLmRpcmVjdGl2ZSgncGFyYWxsYXgnLCBbJyR3aW5kb3cnLCBmdW5jdGlvbigkd2luZG93KSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdBJyxcbiAgICBzY29wZToge1xuICAgICAgcGFyYWxsYXhSYXRpbzogJ0AnLFxuICAgICAgcGFyYWxsYXhWZXJ0aWNhbE9mZnNldDogJ0AnLFxuICAgICAgcGFyYWxsYXhIb3Jpem9udGFsT2Zmc2V0OiAnQCcsXG4gICAgfSxcbiAgICBsaW5rOiBmdW5jdGlvbigkc2NvcGUsIGVsZW0sIGF0dHJzKSB7XG4gICAgICB2YXIgc2V0UG9zaXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmKCEkc2NvcGUucGFyYWxsYXhIb3Jpem9udGFsT2Zmc2V0KSAkc2NvcGUucGFyYWxsYXhIb3Jpem9udGFsT2Zmc2V0ID0gJzAnO1xuICAgICAgICB2YXIgY2FsY1ZhbFkgPSAkd2luZG93LnBhZ2VZT2Zmc2V0ICogKCRzY29wZS5wYXJhbGxheFJhdGlvID8gJHNjb3BlLnBhcmFsbGF4UmF0aW8gOiAxLjEgKTtcbiAgICAgICAgaWYgKGNhbGNWYWxZIDw9ICR3aW5kb3cuaW5uZXJIZWlnaHQpIHtcbiAgICAgICAgICB2YXIgdG9wVmFsID0gKGNhbGNWYWxZIDwgJHNjb3BlLnBhcmFsbGF4VmVydGljYWxPZmZzZXQgPyAkc2NvcGUucGFyYWxsYXhWZXJ0aWNhbE9mZnNldCA6IGNhbGNWYWxZKTtcbiAgICAgICAgICB2YXIgaG96VmFsID0gKCRzY29wZS5wYXJhbGxheEhvcml6b250YWxPZmZzZXQuaW5kZXhPZihcIiVcIikgPT09IC0xID8gJHNjb3BlLnBhcmFsbGF4SG9yaXpvbnRhbE9mZnNldCArICdweCcgOiAkc2NvcGUucGFyYWxsYXhIb3Jpem9udGFsT2Zmc2V0KTtcbiAgICAgICAgICBlbGVtLmNzcygndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgnICsgaG96VmFsICsgJywgJyArIHRvcFZhbCArICdweCknKTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgc2V0UG9zaXRpb24oKTtcblxuICAgICAgYW5ndWxhci5lbGVtZW50KCR3aW5kb3cpLmJpbmQoXCJzY3JvbGxcIiwgc2V0UG9zaXRpb24pO1xuICAgICAgYW5ndWxhci5lbGVtZW50KCR3aW5kb3cpLmJpbmQoXCJ0b3VjaG1vdmVcIiwgc2V0UG9zaXRpb24pO1xuICAgIH0gIC8vIGxpbmsgZnVuY3Rpb25cbiAgfTtcbn1dKS5kaXJlY3RpdmUoJ3BhcmFsbGF4QmFja2dyb3VuZCcsIFsnJHdpbmRvdycsIGZ1bmN0aW9uKCR3aW5kb3cpIHtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0EnLFxuICAgIHRyYW5zY2x1ZGU6IHRydWUsXG4gICAgdGVtcGxhdGU6ICc8ZGl2IG5nLXRyYW5zY2x1ZGU+PC9kaXY+JyxcbiAgICBzY29wZToge1xuICAgICAgcGFyYWxsYXhSYXRpbzogJ0AnLFxuICAgICAgcGFyYWxsYXhWZXJ0aWNhbE9mZnNldDogJ0AnLFxuICAgICAgcGFyYWxsYXhTdGFydFBvaW50OiAnQCdcbiAgICB9LFxuICAgIGxpbms6IGZ1bmN0aW9uKCRzY29wZSwgZWxlbSwgYXR0cnMpIHtcbiAgICAgIHZhciBzZXRQb3NpdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIG9mZnNldCA9ICgkc2NvcGUucGFyYWxsYXhWZXJ0aWNhbE9mZnNldC8xMDApICogZWxlbVswXS5vZmZzZXRIZWlnaHQ7IFxuICAgICAgICB2YXIgY2FsY1ZhbFkgPSAoZWxlbS5wcm9wKCdvZmZzZXRUb3AnKSAtICR3aW5kb3cucGFnZVlPZmZzZXQpICogKCRzY29wZS5wYXJhbGxheFJhdGlvID8gJHNjb3BlLnBhcmFsbGF4UmF0aW8gOiAxLjEpIC0gKG9mZnNldCB8fCAwKTtcbiAgICAgICAgLy8gaG9yaXpvbnRhbCBwb3NpdGlvbmluZ1xuICAgICAgICBpZiAoY2FsY1ZhbFkgPj0gJHNjb3BlLnBhcmFsbGF4U3RhcnRQb2ludCl7XG4gICAgICAgICAgY2FsY1ZhbFkgPSAkc2NvcGUucGFyYWxsYXhTdGFydFBvaW50O1xuICAgICAgICB9XG4gICAgICAgIGVsZW0uY3NzKCdiYWNrZ3JvdW5kLXBvc2l0aW9uJywgXCI1MCUgXCIgKyBjYWxjVmFsWSArIFwicHhcIik7XG4gICAgICB9O1xuXG4gICAgICAvLyBzZXQgb3VyIGluaXRpYWwgcG9zaXRpb24gLSBmaXhlcyB3ZWJraXQgYmFja2dyb3VuZCByZW5kZXIgYnVnXG4gICAgICBhbmd1bGFyLmVsZW1lbnQoJHdpbmRvdykuYmluZCgnbG9hZCcsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgc2V0UG9zaXRpb24oKTtcbiAgICAgICAgJHNjb3BlLiRhcHBseSgpO1xuICAgICAgfSk7XG5cbiAgICAgIGFuZ3VsYXIuZWxlbWVudCgkd2luZG93KS5iaW5kKFwic2Nyb2xsXCIsIHNldFBvc2l0aW9uKTtcbiAgICAgIGFuZ3VsYXIuZWxlbWVudCgkd2luZG93KS5iaW5kKFwidG91Y2htb3ZlXCIsIHNldFBvc2l0aW9uKTtcbiAgICB9ICAvLyBsaW5rIGZ1bmN0aW9uXG4gIH07XG59XSk7XG4iLCIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShbXSwgZmFjdG9yeSk7XG5cdGVsc2Uge1xuXHRcdHZhciBhID0gZmFjdG9yeSgpO1xuXHRcdGZvcih2YXIgaSBpbiBhKSAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnID8gZXhwb3J0cyA6IHJvb3QpW2ldID0gYVtpXTtcblx0fVxufSkodGhpcywgZnVuY3Rpb24oKSB7XG5yZXR1cm4gLyoqKioqKi8gKGZ1bmN0aW9uKG1vZHVsZXMpIHsgLy8gd2VicGFja0Jvb3RzdHJhcFxuLyoqKioqKi8gXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbi8qKioqKiovIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbi8qKioqKiovIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4vKioqKioqLyBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4vKioqKioqLyBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pXG4vKioqKioqLyBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcblxuLyoqKioqKi8gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4vKioqKioqLyBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuLyoqKioqKi8gXHRcdFx0ZXhwb3J0czoge30sXG4vKioqKioqLyBcdFx0XHRpZDogbW9kdWxlSWQsXG4vKioqKioqLyBcdFx0XHRsb2FkZWQ6IGZhbHNlXG4vKioqKioqLyBcdFx0fTtcblxuLyoqKioqKi8gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuLyoqKioqKi8gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4vKioqKioqLyBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuLyoqKioqKi8gXHRcdG1vZHVsZS5sb2FkZWQgPSB0cnVlO1xuXG4vKioqKioqLyBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbi8qKioqKiovIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4vKioqKioqLyBcdH1cblxuXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuLyoqKioqKi8gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG4vKioqKioqLyBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLyoqKioqKi8gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcbi8qKioqKiovIH0pXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKioqKi8gKFtcbi8qIDAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0Lypcblx0KlxuXHQqIEEgQW5ndWxhckpTIG1vZHVsZSB0aGF0IGltcGxlbWVudHMgdGhlIEhUTUw1IFczQyBzYXZlQXMoKSBpbiBicm93c2VycyB0aGF0XG5cdCogZG8gbm90IG5hdGl2ZWx5IHN1cHBvcnQgaXRcblx0KlxuXHQqIChjKSAyMDE1IFBoaWxpcHAgQWxmZXJvdlxuXHQqIExpY2Vuc2U6IE1JVFxuXHQqXG5cdCovXG5cblx0bW9kdWxlLmV4cG9ydHMgPSAnbmdGaWxlU2F2ZXInO1xuXG5cdGFuZ3VsYXIubW9kdWxlKCduZ0ZpbGVTYXZlcicsIFtdKVxuXHQgIC5mYWN0b3J5KCdGaWxlU2F2ZXInLCBbJ0Jsb2InLCAnU2F2ZUFzJywgJ0ZpbGVTYXZlclV0aWxzJywgX193ZWJwYWNrX3JlcXVpcmVfXygxKV0pXG5cdCAgLmZhY3RvcnkoJ0ZpbGVTYXZlclV0aWxzJywgW19fd2VicGFja19yZXF1aXJlX18oMildKVxuXHQgIC5mYWN0b3J5KCdCbG9iJywgWyckd2luZG93JywgX193ZWJwYWNrX3JlcXVpcmVfXygzKV0pXG5cdCAgLmZhY3RvcnkoJ1NhdmVBcycsIFtfX3dlYnBhY2tfcmVxdWlyZV9fKDUpXSk7XG5cblxuLyoqKi8gfSxcbi8qIDEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdCd1c2Ugc3RyaWN0JztcblxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIEZpbGVTYXZlcihCbG9iLCBTYXZlQXMsIEZpbGVTYXZlclV0aWxzKSB7XG5cblx0ICBmdW5jdGlvbiBzYXZlKGJsb2IsIGZpbGVuYW1lLCBkaXNhYmxlQXV0b0JPTSkge1xuXHQgICAgdHJ5IHtcblx0ICAgICAgU2F2ZUFzKGJsb2IsIGZpbGVuYW1lLCBkaXNhYmxlQXV0b0JPTSk7XG5cdCAgICB9IGNhdGNoKGVycikge1xuXHQgICAgICBGaWxlU2F2ZXJVdGlscy5oYW5kbGVFcnJvcnMoZXJyLm1lc3NhZ2UpO1xuXHQgICAgfVxuXHQgIH1cblxuXHQgIHJldHVybiB7XG5cblx0ICAgIC8qKlxuXHQgICAgKiBzYXZlQXNcblx0ICAgICogSW1tZWRpYXRlbHkgc3RhcnRzIHNhdmluZyBhIGZpbGUsIHJldHVybnMgdW5kZWZpbmVkLlxuXHQgICAgKlxuXHQgICAgKiBAbmFtZSBzYXZlQXNcblx0ICAgICogQGZ1bmN0aW9uXG5cdCAgICAqIEBwYXJhbSB7QmxvYn0gZGF0YSBBIEJsb2IgaW5zdGFuY2Vcblx0ICAgICogQHBhcmFtIHtPYmplY3R9IGZpbGVuYW1lIEN1c3RvbSBmaWxlbmFtZSAoZXh0ZW5zaW9uIGlzIG9wdGlvbmFsKVxuXHQgICAgKiBAcGFyYW0ge0Jvb2xlYW59IGRpc2FibGVBdXRvQk9NIERpc2FibGUgYXV0b21hdGljYWxseSBwcm92aWRlZCBVbmljb2RlXG5cdCAgICAqIHRleHQgZW5jb2RpbmcgaGludHNcblx0ICAgICpcblx0ICAgICogQHJldHVybiB7VW5kZWZpbmVkfVxuXHQgICAgKi9cblxuXHQgICAgc2F2ZUFzOiBmdW5jdGlvbihkYXRhLCBmaWxlbmFtZSwgZGlzYWJsZUF1dG9CT00pIHtcblxuXHQgICAgICBpZiAoIUZpbGVTYXZlclV0aWxzLmlzQmxvYkluc3RhbmNlKGRhdGEpKSB7XG5cdCAgICAgICAgRmlsZVNhdmVyVXRpbHMuaGFuZGxlRXJyb3JzKCdEYXRhIGFyZ3VtZW50IHNob3VsZCBiZSBhIGJsb2IgaW5zdGFuY2UnKTtcblx0ICAgICAgfVxuXG5cdCAgICAgIGlmICghRmlsZVNhdmVyVXRpbHMuaXNTdHJpbmcoZmlsZW5hbWUpKSB7XG5cdCAgICAgICAgRmlsZVNhdmVyVXRpbHMuaGFuZGxlRXJyb3JzKCdGaWxlbmFtZSBhcmd1bWVudCBzaG91bGQgYmUgYSBzdHJpbmcnKTtcblx0ICAgICAgfVxuXG5cdCAgICAgIHJldHVybiBzYXZlKGRhdGEsIGZpbGVuYW1lLCBkaXNhYmxlQXV0b0JPTSk7XG5cdCAgICB9XG5cdCAgfTtcblx0fTtcblxuXG4vKioqLyB9LFxuLyogMiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gRmlsZVNhdmVyVXRpbHMoKSB7XG5cdCAgcmV0dXJuIHtcblx0ICAgIGhhbmRsZUVycm9yczogZnVuY3Rpb24obXNnKSB7XG5cdCAgICAgIHRocm93IG5ldyBFcnJvcihtc2cpO1xuXHQgICAgfSxcblx0ICAgIGlzU3RyaW5nOiBmdW5jdGlvbihvYmopIHtcblx0ICAgICAgcmV0dXJuIHR5cGVvZiBvYmogPT09ICdzdHJpbmcnIHx8IG9iaiBpbnN0YW5jZW9mIFN0cmluZztcblx0ICAgIH0sXG5cdCAgICBpc1VuZGVmaW5lZDogZnVuY3Rpb24ob2JqKSB7XG5cdCAgICAgIHJldHVybiB0eXBlb2Ygb2JqID09PSAndW5kZWZpbmVkJztcblx0ICAgIH0sXG5cdCAgICBpc0Jsb2JJbnN0YW5jZTogZnVuY3Rpb24ob2JqKSB7XG5cdCAgICAgIHJldHVybiBvYmogaW5zdGFuY2VvZiBCbG9iO1xuXHQgICAgfVxuXHQgIH07XG5cdH07XG5cblxuLyoqKi8gfSxcbi8qIDMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0JztcblxuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gQmxvYigkd2luZG93KSB7XG5cdCAgcmV0dXJuICR3aW5kb3cuQmxvYjtcblx0fTtcblxuXG4vKioqLyB9LFxuLyogNCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyogQmxvYi5qc1xuXHQgKiBBIEJsb2IgaW1wbGVtZW50YXRpb24uXG5cdCAqIDIwMTQtMDctMjRcblx0ICpcblx0ICogQnkgRWxpIEdyZXksIGh0dHA6Ly9lbGlncmV5LmNvbVxuXHQgKiBCeSBEZXZpbiBTYW1hcmluLCBodHRwczovL2dpdGh1Yi5jb20vZHNhbWFyaW5cblx0ICogTGljZW5zZTogWDExL01JVFxuXHQgKiAgIFNlZSBodHRwczovL2dpdGh1Yi5jb20vZWxpZ3JleS9CbG9iLmpzL2Jsb2IvbWFzdGVyL0xJQ0VOU0UubWRcblx0ICovXG5cblx0LypnbG9iYWwgc2VsZiwgdW5lc2NhcGUgKi9cblx0Lypqc2xpbnQgYml0d2lzZTogdHJ1ZSwgcmVnZXhwOiB0cnVlLCBjb25mdXNpb246IHRydWUsIGVzNTogdHJ1ZSwgdmFyczogdHJ1ZSwgd2hpdGU6IHRydWUsXG5cdCAgcGx1c3BsdXM6IHRydWUgKi9cblxuXHQvKiEgQHNvdXJjZSBodHRwOi8vcHVybC5lbGlncmV5LmNvbS9naXRodWIvQmxvYi5qcy9ibG9iL21hc3Rlci9CbG9iLmpzICovXG5cblx0KGZ1bmN0aW9uICh2aWV3KSB7XG5cdFx0XCJ1c2Ugc3RyaWN0XCI7XG5cblx0XHR2aWV3LlVSTCA9IHZpZXcuVVJMIHx8IHZpZXcud2Via2l0VVJMO1xuXG5cdFx0aWYgKHZpZXcuQmxvYiAmJiB2aWV3LlVSTCkge1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0bmV3IEJsb2I7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH0gY2F0Y2ggKGUpIHt9XG5cdFx0fVxuXG5cdFx0Ly8gSW50ZXJuYWxseSB3ZSB1c2UgYSBCbG9iQnVpbGRlciBpbXBsZW1lbnRhdGlvbiB0byBiYXNlIEJsb2Igb2ZmIG9mXG5cdFx0Ly8gaW4gb3JkZXIgdG8gc3VwcG9ydCBvbGRlciBicm93c2VycyB0aGF0IG9ubHkgaGF2ZSBCbG9iQnVpbGRlclxuXHRcdHZhciBCbG9iQnVpbGRlciA9IHZpZXcuQmxvYkJ1aWxkZXIgfHwgdmlldy5XZWJLaXRCbG9iQnVpbGRlciB8fCB2aWV3Lk1vekJsb2JCdWlsZGVyIHx8IChmdW5jdGlvbih2aWV3KSB7XG5cdFx0XHR2YXJcblx0XHRcdFx0ICBnZXRfY2xhc3MgPSBmdW5jdGlvbihvYmplY3QpIHtcblx0XHRcdFx0XHRyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG9iamVjdCkubWF0Y2goL15cXFtvYmplY3RcXHMoLiopXFxdJC8pWzFdO1xuXHRcdFx0XHR9XG5cdFx0XHRcdCwgRmFrZUJsb2JCdWlsZGVyID0gZnVuY3Rpb24gQmxvYkJ1aWxkZXIoKSB7XG5cdFx0XHRcdFx0dGhpcy5kYXRhID0gW107XG5cdFx0XHRcdH1cblx0XHRcdFx0LCBGYWtlQmxvYiA9IGZ1bmN0aW9uIEJsb2IoZGF0YSwgdHlwZSwgZW5jb2RpbmcpIHtcblx0XHRcdFx0XHR0aGlzLmRhdGEgPSBkYXRhO1xuXHRcdFx0XHRcdHRoaXMuc2l6ZSA9IGRhdGEubGVuZ3RoO1xuXHRcdFx0XHRcdHRoaXMudHlwZSA9IHR5cGU7XG5cdFx0XHRcdFx0dGhpcy5lbmNvZGluZyA9IGVuY29kaW5nO1xuXHRcdFx0XHR9XG5cdFx0XHRcdCwgRkJCX3Byb3RvID0gRmFrZUJsb2JCdWlsZGVyLnByb3RvdHlwZVxuXHRcdFx0XHQsIEZCX3Byb3RvID0gRmFrZUJsb2IucHJvdG90eXBlXG5cdFx0XHRcdCwgRmlsZVJlYWRlclN5bmMgPSB2aWV3LkZpbGVSZWFkZXJTeW5jXG5cdFx0XHRcdCwgRmlsZUV4Y2VwdGlvbiA9IGZ1bmN0aW9uKHR5cGUpIHtcblx0XHRcdFx0XHR0aGlzLmNvZGUgPSB0aGlzW3RoaXMubmFtZSA9IHR5cGVdO1xuXHRcdFx0XHR9XG5cdFx0XHRcdCwgZmlsZV9leF9jb2RlcyA9IChcblx0XHRcdFx0XHQgIFwiTk9UX0ZPVU5EX0VSUiBTRUNVUklUWV9FUlIgQUJPUlRfRVJSIE5PVF9SRUFEQUJMRV9FUlIgRU5DT0RJTkdfRVJSIFwiXG5cdFx0XHRcdFx0KyBcIk5PX01PRElGSUNBVElPTl9BTExPV0VEX0VSUiBJTlZBTElEX1NUQVRFX0VSUiBTWU5UQVhfRVJSXCJcblx0XHRcdFx0KS5zcGxpdChcIiBcIilcblx0XHRcdFx0LCBmaWxlX2V4X2NvZGUgPSBmaWxlX2V4X2NvZGVzLmxlbmd0aFxuXHRcdFx0XHQsIHJlYWxfVVJMID0gdmlldy5VUkwgfHwgdmlldy53ZWJraXRVUkwgfHwgdmlld1xuXHRcdFx0XHQsIHJlYWxfY3JlYXRlX29iamVjdF9VUkwgPSByZWFsX1VSTC5jcmVhdGVPYmplY3RVUkxcblx0XHRcdFx0LCByZWFsX3Jldm9rZV9vYmplY3RfVVJMID0gcmVhbF9VUkwucmV2b2tlT2JqZWN0VVJMXG5cdFx0XHRcdCwgVVJMID0gcmVhbF9VUkxcblx0XHRcdFx0LCBidG9hID0gdmlldy5idG9hXG5cdFx0XHRcdCwgYXRvYiA9IHZpZXcuYXRvYlxuXG5cdFx0XHRcdCwgQXJyYXlCdWZmZXIgPSB2aWV3LkFycmF5QnVmZmVyXG5cdFx0XHRcdCwgVWludDhBcnJheSA9IHZpZXcuVWludDhBcnJheVxuXG5cdFx0XHRcdCwgb3JpZ2luID0gL15bXFx3LV0rOlxcLypcXFs/W1xcd1xcLjotXStcXF0/KD86OlswLTldKyk/L1xuXHRcdFx0O1xuXHRcdFx0RmFrZUJsb2IuZmFrZSA9IEZCX3Byb3RvLmZha2UgPSB0cnVlO1xuXHRcdFx0d2hpbGUgKGZpbGVfZXhfY29kZS0tKSB7XG5cdFx0XHRcdEZpbGVFeGNlcHRpb24ucHJvdG90eXBlW2ZpbGVfZXhfY29kZXNbZmlsZV9leF9jb2RlXV0gPSBmaWxlX2V4X2NvZGUgKyAxO1xuXHRcdFx0fVxuXHRcdFx0Ly8gUG9seWZpbGwgVVJMXG5cdFx0XHRpZiAoIXJlYWxfVVJMLmNyZWF0ZU9iamVjdFVSTCkge1xuXHRcdFx0XHRVUkwgPSB2aWV3LlVSTCA9IGZ1bmN0aW9uKHVyaSkge1xuXHRcdFx0XHRcdHZhclxuXHRcdFx0XHRcdFx0ICB1cmlfaW5mbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWxcIiwgXCJhXCIpXG5cdFx0XHRcdFx0XHQsIHVyaV9vcmlnaW5cblx0XHRcdFx0XHQ7XG5cdFx0XHRcdFx0dXJpX2luZm8uaHJlZiA9IHVyaTtcblx0XHRcdFx0XHRpZiAoIShcIm9yaWdpblwiIGluIHVyaV9pbmZvKSkge1xuXHRcdFx0XHRcdFx0aWYgKHVyaV9pbmZvLnByb3RvY29sLnRvTG93ZXJDYXNlKCkgPT09IFwiZGF0YTpcIikge1xuXHRcdFx0XHRcdFx0XHR1cmlfaW5mby5vcmlnaW4gPSBudWxsO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0dXJpX29yaWdpbiA9IHVyaS5tYXRjaChvcmlnaW4pO1xuXHRcdFx0XHRcdFx0XHR1cmlfaW5mby5vcmlnaW4gPSB1cmlfb3JpZ2luICYmIHVyaV9vcmlnaW5bMV07XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiB1cmlfaW5mbztcblx0XHRcdFx0fTtcblx0XHRcdH1cblx0XHRcdFVSTC5jcmVhdGVPYmplY3RVUkwgPSBmdW5jdGlvbihibG9iKSB7XG5cdFx0XHRcdHZhclxuXHRcdFx0XHRcdCAgdHlwZSA9IGJsb2IudHlwZVxuXHRcdFx0XHRcdCwgZGF0YV9VUklfaGVhZGVyXG5cdFx0XHRcdDtcblx0XHRcdFx0aWYgKHR5cGUgPT09IG51bGwpIHtcblx0XHRcdFx0XHR0eXBlID0gXCJhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW1cIjtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAoYmxvYiBpbnN0YW5jZW9mIEZha2VCbG9iKSB7XG5cdFx0XHRcdFx0ZGF0YV9VUklfaGVhZGVyID0gXCJkYXRhOlwiICsgdHlwZTtcblx0XHRcdFx0XHRpZiAoYmxvYi5lbmNvZGluZyA9PT0gXCJiYXNlNjRcIikge1xuXHRcdFx0XHRcdFx0cmV0dXJuIGRhdGFfVVJJX2hlYWRlciArIFwiO2Jhc2U2NCxcIiArIGJsb2IuZGF0YTtcblx0XHRcdFx0XHR9IGVsc2UgaWYgKGJsb2IuZW5jb2RpbmcgPT09IFwiVVJJXCIpIHtcblx0XHRcdFx0XHRcdHJldHVybiBkYXRhX1VSSV9oZWFkZXIgKyBcIixcIiArIGRlY29kZVVSSUNvbXBvbmVudChibG9iLmRhdGEpO1xuXHRcdFx0XHRcdH0gaWYgKGJ0b2EpIHtcblx0XHRcdFx0XHRcdHJldHVybiBkYXRhX1VSSV9oZWFkZXIgKyBcIjtiYXNlNjQsXCIgKyBidG9hKGJsb2IuZGF0YSk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHJldHVybiBkYXRhX1VSSV9oZWFkZXIgKyBcIixcIiArIGVuY29kZVVSSUNvbXBvbmVudChibG9iLmRhdGEpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIGlmIChyZWFsX2NyZWF0ZV9vYmplY3RfVVJMKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHJlYWxfY3JlYXRlX29iamVjdF9VUkwuY2FsbChyZWFsX1VSTCwgYmxvYik7XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cdFx0XHRVUkwucmV2b2tlT2JqZWN0VVJMID0gZnVuY3Rpb24ob2JqZWN0X1VSTCkge1xuXHRcdFx0XHRpZiAob2JqZWN0X1VSTC5zdWJzdHJpbmcoMCwgNSkgIT09IFwiZGF0YTpcIiAmJiByZWFsX3Jldm9rZV9vYmplY3RfVVJMKSB7XG5cdFx0XHRcdFx0cmVhbF9yZXZva2Vfb2JqZWN0X1VSTC5jYWxsKHJlYWxfVVJMLCBvYmplY3RfVVJMKTtcblx0XHRcdFx0fVxuXHRcdFx0fTtcblx0XHRcdEZCQl9wcm90by5hcHBlbmQgPSBmdW5jdGlvbihkYXRhLyosIGVuZGluZ3MqLykge1xuXHRcdFx0XHR2YXIgYmIgPSB0aGlzLmRhdGE7XG5cdFx0XHRcdC8vIGRlY29kZSBkYXRhIHRvIGEgYmluYXJ5IHN0cmluZ1xuXHRcdFx0XHRpZiAoVWludDhBcnJheSAmJiAoZGF0YSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyIHx8IGRhdGEgaW5zdGFuY2VvZiBVaW50OEFycmF5KSkge1xuXHRcdFx0XHRcdHZhclxuXHRcdFx0XHRcdFx0ICBzdHIgPSBcIlwiXG5cdFx0XHRcdFx0XHQsIGJ1ZiA9IG5ldyBVaW50OEFycmF5KGRhdGEpXG5cdFx0XHRcdFx0XHQsIGkgPSAwXG5cdFx0XHRcdFx0XHQsIGJ1Zl9sZW4gPSBidWYubGVuZ3RoXG5cdFx0XHRcdFx0O1xuXHRcdFx0XHRcdGZvciAoOyBpIDwgYnVmX2xlbjsgaSsrKSB7XG5cdFx0XHRcdFx0XHRzdHIgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShidWZbaV0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRiYi5wdXNoKHN0cik7XG5cdFx0XHRcdH0gZWxzZSBpZiAoZ2V0X2NsYXNzKGRhdGEpID09PSBcIkJsb2JcIiB8fCBnZXRfY2xhc3MoZGF0YSkgPT09IFwiRmlsZVwiKSB7XG5cdFx0XHRcdFx0aWYgKEZpbGVSZWFkZXJTeW5jKSB7XG5cdFx0XHRcdFx0XHR2YXIgZnIgPSBuZXcgRmlsZVJlYWRlclN5bmM7XG5cdFx0XHRcdFx0XHRiYi5wdXNoKGZyLnJlYWRBc0JpbmFyeVN0cmluZyhkYXRhKSk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdC8vIGFzeW5jIEZpbGVSZWFkZXIgd29uJ3Qgd29yayBhcyBCbG9iQnVpbGRlciBpcyBzeW5jXG5cdFx0XHRcdFx0XHR0aHJvdyBuZXcgRmlsZUV4Y2VwdGlvbihcIk5PVF9SRUFEQUJMRV9FUlJcIik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2UgaWYgKGRhdGEgaW5zdGFuY2VvZiBGYWtlQmxvYikge1xuXHRcdFx0XHRcdGlmIChkYXRhLmVuY29kaW5nID09PSBcImJhc2U2NFwiICYmIGF0b2IpIHtcblx0XHRcdFx0XHRcdGJiLnB1c2goYXRvYihkYXRhLmRhdGEpKTtcblx0XHRcdFx0XHR9IGVsc2UgaWYgKGRhdGEuZW5jb2RpbmcgPT09IFwiVVJJXCIpIHtcblx0XHRcdFx0XHRcdGJiLnB1c2goZGVjb2RlVVJJQ29tcG9uZW50KGRhdGEuZGF0YSkpO1xuXHRcdFx0XHRcdH0gZWxzZSBpZiAoZGF0YS5lbmNvZGluZyA9PT0gXCJyYXdcIikge1xuXHRcdFx0XHRcdFx0YmIucHVzaChkYXRhLmRhdGEpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRpZiAodHlwZW9mIGRhdGEgIT09IFwic3RyaW5nXCIpIHtcblx0XHRcdFx0XHRcdGRhdGEgKz0gXCJcIjsgLy8gY29udmVydCB1bnN1cHBvcnRlZCB0eXBlcyB0byBzdHJpbmdzXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdC8vIGRlY29kZSBVVEYtMTYgdG8gYmluYXJ5IHN0cmluZ1xuXHRcdFx0XHRcdGJiLnB1c2godW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KGRhdGEpKSk7XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cdFx0XHRGQkJfcHJvdG8uZ2V0QmxvYiA9IGZ1bmN0aW9uKHR5cGUpIHtcblx0XHRcdFx0aWYgKCFhcmd1bWVudHMubGVuZ3RoKSB7XG5cdFx0XHRcdFx0dHlwZSA9IG51bGw7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIG5ldyBGYWtlQmxvYih0aGlzLmRhdGEuam9pbihcIlwiKSwgdHlwZSwgXCJyYXdcIik7XG5cdFx0XHR9O1xuXHRcdFx0RkJCX3Byb3RvLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHJldHVybiBcIltvYmplY3QgQmxvYkJ1aWxkZXJdXCI7XG5cdFx0XHR9O1xuXHRcdFx0RkJfcHJvdG8uc2xpY2UgPSBmdW5jdGlvbihzdGFydCwgZW5kLCB0eXBlKSB7XG5cdFx0XHRcdHZhciBhcmdzID0gYXJndW1lbnRzLmxlbmd0aDtcblx0XHRcdFx0aWYgKGFyZ3MgPCAzKSB7XG5cdFx0XHRcdFx0dHlwZSA9IG51bGw7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIG5ldyBGYWtlQmxvYihcblx0XHRcdFx0XHQgIHRoaXMuZGF0YS5zbGljZShzdGFydCwgYXJncyA+IDEgPyBlbmQgOiB0aGlzLmRhdGEubGVuZ3RoKVxuXHRcdFx0XHRcdCwgdHlwZVxuXHRcdFx0XHRcdCwgdGhpcy5lbmNvZGluZ1xuXHRcdFx0XHQpO1xuXHRcdFx0fTtcblx0XHRcdEZCX3Byb3RvLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHJldHVybiBcIltvYmplY3QgQmxvYl1cIjtcblx0XHRcdH07XG5cdFx0XHRGQl9wcm90by5jbG9zZSA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR0aGlzLnNpemUgPSAwO1xuXHRcdFx0XHRkZWxldGUgdGhpcy5kYXRhO1xuXHRcdFx0fTtcblx0XHRcdHJldHVybiBGYWtlQmxvYkJ1aWxkZXI7XG5cdFx0fSh2aWV3KSk7XG5cblx0XHR2aWV3LkJsb2IgPSBmdW5jdGlvbihibG9iUGFydHMsIG9wdGlvbnMpIHtcblx0XHRcdHZhciB0eXBlID0gb3B0aW9ucyA/IChvcHRpb25zLnR5cGUgfHwgXCJcIikgOiBcIlwiO1xuXHRcdFx0dmFyIGJ1aWxkZXIgPSBuZXcgQmxvYkJ1aWxkZXIoKTtcblx0XHRcdGlmIChibG9iUGFydHMpIHtcblx0XHRcdFx0Zm9yICh2YXIgaSA9IDAsIGxlbiA9IGJsb2JQYXJ0cy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuXHRcdFx0XHRcdGlmIChVaW50OEFycmF5ICYmIGJsb2JQYXJ0c1tpXSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpIHtcblx0XHRcdFx0XHRcdGJ1aWxkZXIuYXBwZW5kKGJsb2JQYXJ0c1tpXS5idWZmZXIpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHRcdGJ1aWxkZXIuYXBwZW5kKGJsb2JQYXJ0c1tpXSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHR2YXIgYmxvYiA9IGJ1aWxkZXIuZ2V0QmxvYih0eXBlKTtcblx0XHRcdGlmICghYmxvYi5zbGljZSAmJiBibG9iLndlYmtpdFNsaWNlKSB7XG5cdFx0XHRcdGJsb2Iuc2xpY2UgPSBibG9iLndlYmtpdFNsaWNlO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIGJsb2I7XG5cdFx0fTtcblxuXHRcdHZhciBnZXRQcm90b3R5cGVPZiA9IE9iamVjdC5nZXRQcm90b3R5cGVPZiB8fCBmdW5jdGlvbihvYmplY3QpIHtcblx0XHRcdHJldHVybiBvYmplY3QuX19wcm90b19fO1xuXHRcdH07XG5cdFx0dmlldy5CbG9iLnByb3RvdHlwZSA9IGdldFByb3RvdHlwZU9mKG5ldyB2aWV3LkJsb2IoKSk7XG5cdH0odHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIgJiYgc2VsZiB8fCB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiICYmIHdpbmRvdyB8fCB0aGlzLmNvbnRlbnQgfHwgdGhpcykpO1xuXG5cbi8qKiovIH0sXG4vKiA1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBTYXZlQXMoKSB7XG5cdCAgcmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oNikuc2F2ZUFzIHx8IGZ1bmN0aW9uKCkge307XG5cdH07XG5cblxuLyoqKi8gfSxcbi8qIDYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBfX1dFQlBBQ0tfQU1EX0RFRklORV9BUlJBWV9fLCBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXzsvKiBGaWxlU2F2ZXIuanNcblx0ICogQSBzYXZlQXMoKSBGaWxlU2F2ZXIgaW1wbGVtZW50YXRpb24uXG5cdCAqIDEuMy4yXG5cdCAqIDIwMTYtMDYtMTYgMTg6MjU6MTlcblx0ICpcblx0ICogQnkgRWxpIEdyZXksIGh0dHA6Ly9lbGlncmV5LmNvbVxuXHQgKiBMaWNlbnNlOiBNSVRcblx0ICogICBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2VsaWdyZXkvRmlsZVNhdmVyLmpzL2Jsb2IvbWFzdGVyL0xJQ0VOU0UubWRcblx0ICovXG5cblx0LypnbG9iYWwgc2VsZiAqL1xuXHQvKmpzbGludCBiaXR3aXNlOiB0cnVlLCBpbmRlbnQ6IDQsIGxheGJyZWFrOiB0cnVlLCBsYXhjb21tYTogdHJ1ZSwgc21hcnR0YWJzOiB0cnVlLCBwbHVzcGx1czogdHJ1ZSAqL1xuXG5cdC8qISBAc291cmNlIGh0dHA6Ly9wdXJsLmVsaWdyZXkuY29tL2dpdGh1Yi9GaWxlU2F2ZXIuanMvYmxvYi9tYXN0ZXIvRmlsZVNhdmVyLmpzICovXG5cblx0dmFyIHNhdmVBcyA9IHNhdmVBcyB8fCAoZnVuY3Rpb24odmlldykge1xuXHRcdFwidXNlIHN0cmljdFwiO1xuXHRcdC8vIElFIDwxMCBpcyBleHBsaWNpdGx5IHVuc3VwcG9ydGVkXG5cdFx0aWYgKHR5cGVvZiB2aWV3ID09PSBcInVuZGVmaW5lZFwiIHx8IHR5cGVvZiBuYXZpZ2F0b3IgIT09IFwidW5kZWZpbmVkXCIgJiYgL01TSUUgWzEtOV1cXC4vLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0dmFyXG5cdFx0XHQgIGRvYyA9IHZpZXcuZG9jdW1lbnRcblx0XHRcdCAgLy8gb25seSBnZXQgVVJMIHdoZW4gbmVjZXNzYXJ5IGluIGNhc2UgQmxvYi5qcyBoYXNuJ3Qgb3ZlcnJpZGRlbiBpdCB5ZXRcblx0XHRcdCwgZ2V0X1VSTCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRyZXR1cm4gdmlldy5VUkwgfHwgdmlldy53ZWJraXRVUkwgfHwgdmlldztcblx0XHRcdH1cblx0XHRcdCwgc2F2ZV9saW5rID0gZG9jLmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWxcIiwgXCJhXCIpXG5cdFx0XHQsIGNhbl91c2Vfc2F2ZV9saW5rID0gXCJkb3dubG9hZFwiIGluIHNhdmVfbGlua1xuXHRcdFx0LCBjbGljayA9IGZ1bmN0aW9uKG5vZGUpIHtcblx0XHRcdFx0dmFyIGV2ZW50ID0gbmV3IE1vdXNlRXZlbnQoXCJjbGlja1wiKTtcblx0XHRcdFx0bm9kZS5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcblx0XHRcdH1cblx0XHRcdCwgaXNfc2FmYXJpID0gL2NvbnN0cnVjdG9yL2kudGVzdCh2aWV3LkhUTUxFbGVtZW50KVxuXHRcdFx0LCBpc19jaHJvbWVfaW9zID0vQ3JpT1NcXC9bXFxkXSsvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudClcblx0XHRcdCwgdGhyb3dfb3V0c2lkZSA9IGZ1bmN0aW9uKGV4KSB7XG5cdFx0XHRcdCh2aWV3LnNldEltbWVkaWF0ZSB8fCB2aWV3LnNldFRpbWVvdXQpKGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdHRocm93IGV4O1xuXHRcdFx0XHR9LCAwKTtcblx0XHRcdH1cblx0XHRcdCwgZm9yY2Vfc2F2ZWFibGVfdHlwZSA9IFwiYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtXCJcblx0XHRcdC8vIHRoZSBCbG9iIEFQSSBpcyBmdW5kYW1lbnRhbGx5IGJyb2tlbiBhcyB0aGVyZSBpcyBubyBcImRvd25sb2FkZmluaXNoZWRcIiBldmVudCB0byBzdWJzY3JpYmUgdG9cblx0XHRcdCwgYXJiaXRyYXJ5X3Jldm9rZV90aW1lb3V0ID0gMTAwMCAqIDQwIC8vIGluIG1zXG5cdFx0XHQsIHJldm9rZSA9IGZ1bmN0aW9uKGZpbGUpIHtcblx0XHRcdFx0dmFyIHJldm9rZXIgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRpZiAodHlwZW9mIGZpbGUgPT09IFwic3RyaW5nXCIpIHsgLy8gZmlsZSBpcyBhbiBvYmplY3QgVVJMXG5cdFx0XHRcdFx0XHRnZXRfVVJMKCkucmV2b2tlT2JqZWN0VVJMKGZpbGUpO1xuXHRcdFx0XHRcdH0gZWxzZSB7IC8vIGZpbGUgaXMgYSBGaWxlXG5cdFx0XHRcdFx0XHRmaWxlLnJlbW92ZSgpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fTtcblx0XHRcdFx0c2V0VGltZW91dChyZXZva2VyLCBhcmJpdHJhcnlfcmV2b2tlX3RpbWVvdXQpO1xuXHRcdFx0fVxuXHRcdFx0LCBkaXNwYXRjaCA9IGZ1bmN0aW9uKGZpbGVzYXZlciwgZXZlbnRfdHlwZXMsIGV2ZW50KSB7XG5cdFx0XHRcdGV2ZW50X3R5cGVzID0gW10uY29uY2F0KGV2ZW50X3R5cGVzKTtcblx0XHRcdFx0dmFyIGkgPSBldmVudF90eXBlcy5sZW5ndGg7XG5cdFx0XHRcdHdoaWxlIChpLS0pIHtcblx0XHRcdFx0XHR2YXIgbGlzdGVuZXIgPSBmaWxlc2F2ZXJbXCJvblwiICsgZXZlbnRfdHlwZXNbaV1dO1xuXHRcdFx0XHRcdGlmICh0eXBlb2YgbGlzdGVuZXIgPT09IFwiZnVuY3Rpb25cIikge1xuXHRcdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdFx0bGlzdGVuZXIuY2FsbChmaWxlc2F2ZXIsIGV2ZW50IHx8IGZpbGVzYXZlcik7XG5cdFx0XHRcdFx0XHR9IGNhdGNoIChleCkge1xuXHRcdFx0XHRcdFx0XHR0aHJvd19vdXRzaWRlKGV4KTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdCwgYXV0b19ib20gPSBmdW5jdGlvbihibG9iKSB7XG5cdFx0XHRcdC8vIHByZXBlbmQgQk9NIGZvciBVVEYtOCBYTUwgYW5kIHRleHQvKiB0eXBlcyAoaW5jbHVkaW5nIEhUTUwpXG5cdFx0XHRcdC8vIG5vdGU6IHlvdXIgYnJvd3NlciB3aWxsIGF1dG9tYXRpY2FsbHkgY29udmVydCBVVEYtMTYgVStGRUZGIHRvIEVGIEJCIEJGXG5cdFx0XHRcdGlmICgvXlxccyooPzp0ZXh0XFwvXFxTKnxhcHBsaWNhdGlvblxcL3htbHxcXFMqXFwvXFxTKlxcK3htbClcXHMqOy4qY2hhcnNldFxccyo9XFxzKnV0Zi04L2kudGVzdChibG9iLnR5cGUpKSB7XG5cdFx0XHRcdFx0cmV0dXJuIG5ldyBCbG9iKFtTdHJpbmcuZnJvbUNoYXJDb2RlKDB4RkVGRiksIGJsb2JdLCB7dHlwZTogYmxvYi50eXBlfSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIGJsb2I7XG5cdFx0XHR9XG5cdFx0XHQsIEZpbGVTYXZlciA9IGZ1bmN0aW9uKGJsb2IsIG5hbWUsIG5vX2F1dG9fYm9tKSB7XG5cdFx0XHRcdGlmICghbm9fYXV0b19ib20pIHtcblx0XHRcdFx0XHRibG9iID0gYXV0b19ib20oYmxvYik7XG5cdFx0XHRcdH1cblx0XHRcdFx0Ly8gRmlyc3QgdHJ5IGEuZG93bmxvYWQsIHRoZW4gd2ViIGZpbGVzeXN0ZW0sIHRoZW4gb2JqZWN0IFVSTHNcblx0XHRcdFx0dmFyXG5cdFx0XHRcdFx0ICBmaWxlc2F2ZXIgPSB0aGlzXG5cdFx0XHRcdFx0LCB0eXBlID0gYmxvYi50eXBlXG5cdFx0XHRcdFx0LCBmb3JjZSA9IHR5cGUgPT09IGZvcmNlX3NhdmVhYmxlX3R5cGVcblx0XHRcdFx0XHQsIG9iamVjdF91cmxcblx0XHRcdFx0XHQsIGRpc3BhdGNoX2FsbCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0ZGlzcGF0Y2goZmlsZXNhdmVyLCBcIndyaXRlc3RhcnQgcHJvZ3Jlc3Mgd3JpdGUgd3JpdGVlbmRcIi5zcGxpdChcIiBcIikpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHQvLyBvbiBhbnkgZmlsZXN5cyBlcnJvcnMgcmV2ZXJ0IHRvIHNhdmluZyB3aXRoIG9iamVjdCBVUkxzXG5cdFx0XHRcdFx0LCBmc19lcnJvciA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0aWYgKChpc19jaHJvbWVfaW9zIHx8IChmb3JjZSAmJiBpc19zYWZhcmkpKSAmJiB2aWV3LkZpbGVSZWFkZXIpIHtcblx0XHRcdFx0XHRcdFx0Ly8gU2FmYXJpIGRvZXNuJ3QgYWxsb3cgZG93bmxvYWRpbmcgb2YgYmxvYiB1cmxzXG5cdFx0XHRcdFx0XHRcdHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuXHRcdFx0XHRcdFx0XHRyZWFkZXIub25sb2FkZW5kID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRcdFx0dmFyIHVybCA9IGlzX2Nocm9tZV9pb3MgPyByZWFkZXIucmVzdWx0IDogcmVhZGVyLnJlc3VsdC5yZXBsYWNlKC9eZGF0YTpbXjtdKjsvLCAnZGF0YTphdHRhY2htZW50L2ZpbGU7Jyk7XG5cdFx0XHRcdFx0XHRcdFx0dmFyIHBvcHVwID0gdmlldy5vcGVuKHVybCwgJ19ibGFuaycpO1xuXHRcdFx0XHRcdFx0XHRcdGlmKCFwb3B1cCkgdmlldy5sb2NhdGlvbi5ocmVmID0gdXJsO1xuXHRcdFx0XHRcdFx0XHRcdHVybD11bmRlZmluZWQ7IC8vIHJlbGVhc2UgcmVmZXJlbmNlIGJlZm9yZSBkaXNwYXRjaGluZ1xuXHRcdFx0XHRcdFx0XHRcdGZpbGVzYXZlci5yZWFkeVN0YXRlID0gZmlsZXNhdmVyLkRPTkU7XG5cdFx0XHRcdFx0XHRcdFx0ZGlzcGF0Y2hfYWxsKCk7XG5cdFx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHRcdHJlYWRlci5yZWFkQXNEYXRhVVJMKGJsb2IpO1xuXHRcdFx0XHRcdFx0XHRmaWxlc2F2ZXIucmVhZHlTdGF0ZSA9IGZpbGVzYXZlci5JTklUO1xuXHRcdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHQvLyBkb24ndCBjcmVhdGUgbW9yZSBvYmplY3QgVVJMcyB0aGFuIG5lZWRlZFxuXHRcdFx0XHRcdFx0aWYgKCFvYmplY3RfdXJsKSB7XG5cdFx0XHRcdFx0XHRcdG9iamVjdF91cmwgPSBnZXRfVVJMKCkuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0aWYgKGZvcmNlKSB7XG5cdFx0XHRcdFx0XHRcdHZpZXcubG9jYXRpb24uaHJlZiA9IG9iamVjdF91cmw7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHR2YXIgb3BlbmVkID0gdmlldy5vcGVuKG9iamVjdF91cmwsIFwiX2JsYW5rXCIpO1xuXHRcdFx0XHRcdFx0XHRpZiAoIW9wZW5lZCkge1xuXHRcdFx0XHRcdFx0XHRcdC8vIEFwcGxlIGRvZXMgbm90IGFsbG93IHdpbmRvdy5vcGVuLCBzZWUgaHR0cHM6Ly9kZXZlbG9wZXIuYXBwbGUuY29tL2xpYnJhcnkvc2FmYXJpL2RvY3VtZW50YXRpb24vVG9vbHMvQ29uY2VwdHVhbC9TYWZhcmlFeHRlbnNpb25HdWlkZS9Xb3JraW5nd2l0aFdpbmRvd3NhbmRUYWJzL1dvcmtpbmd3aXRoV2luZG93c2FuZFRhYnMuaHRtbFxuXHRcdFx0XHRcdFx0XHRcdHZpZXcubG9jYXRpb24uaHJlZiA9IG9iamVjdF91cmw7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGZpbGVzYXZlci5yZWFkeVN0YXRlID0gZmlsZXNhdmVyLkRPTkU7XG5cdFx0XHRcdFx0XHRkaXNwYXRjaF9hbGwoKTtcblx0XHRcdFx0XHRcdHJldm9rZShvYmplY3RfdXJsKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdDtcblx0XHRcdFx0ZmlsZXNhdmVyLnJlYWR5U3RhdGUgPSBmaWxlc2F2ZXIuSU5JVDtcblxuXHRcdFx0XHRpZiAoY2FuX3VzZV9zYXZlX2xpbmspIHtcblx0XHRcdFx0XHRvYmplY3RfdXJsID0gZ2V0X1VSTCgpLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcblx0XHRcdFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0c2F2ZV9saW5rLmhyZWYgPSBvYmplY3RfdXJsO1xuXHRcdFx0XHRcdFx0c2F2ZV9saW5rLmRvd25sb2FkID0gbmFtZTtcblx0XHRcdFx0XHRcdGNsaWNrKHNhdmVfbGluayk7XG5cdFx0XHRcdFx0XHRkaXNwYXRjaF9hbGwoKTtcblx0XHRcdFx0XHRcdHJldm9rZShvYmplY3RfdXJsKTtcblx0XHRcdFx0XHRcdGZpbGVzYXZlci5yZWFkeVN0YXRlID0gZmlsZXNhdmVyLkRPTkU7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0ZnNfZXJyb3IoKTtcblx0XHRcdH1cblx0XHRcdCwgRlNfcHJvdG8gPSBGaWxlU2F2ZXIucHJvdG90eXBlXG5cdFx0XHQsIHNhdmVBcyA9IGZ1bmN0aW9uKGJsb2IsIG5hbWUsIG5vX2F1dG9fYm9tKSB7XG5cdFx0XHRcdHJldHVybiBuZXcgRmlsZVNhdmVyKGJsb2IsIG5hbWUgfHwgYmxvYi5uYW1lIHx8IFwiZG93bmxvYWRcIiwgbm9fYXV0b19ib20pO1xuXHRcdFx0fVxuXHRcdDtcblx0XHQvLyBJRSAxMCsgKG5hdGl2ZSBzYXZlQXMpXG5cdFx0aWYgKHR5cGVvZiBuYXZpZ2F0b3IgIT09IFwidW5kZWZpbmVkXCIgJiYgbmF2aWdhdG9yLm1zU2F2ZU9yT3BlbkJsb2IpIHtcblx0XHRcdHJldHVybiBmdW5jdGlvbihibG9iLCBuYW1lLCBub19hdXRvX2JvbSkge1xuXHRcdFx0XHRuYW1lID0gbmFtZSB8fCBibG9iLm5hbWUgfHwgXCJkb3dubG9hZFwiO1xuXG5cdFx0XHRcdGlmICghbm9fYXV0b19ib20pIHtcblx0XHRcdFx0XHRibG9iID0gYXV0b19ib20oYmxvYik7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIG5hdmlnYXRvci5tc1NhdmVPck9wZW5CbG9iKGJsb2IsIG5hbWUpO1xuXHRcdFx0fTtcblx0XHR9XG5cblx0XHRGU19wcm90by5hYm9ydCA9IGZ1bmN0aW9uKCl7fTtcblx0XHRGU19wcm90by5yZWFkeVN0YXRlID0gRlNfcHJvdG8uSU5JVCA9IDA7XG5cdFx0RlNfcHJvdG8uV1JJVElORyA9IDE7XG5cdFx0RlNfcHJvdG8uRE9ORSA9IDI7XG5cblx0XHRGU19wcm90by5lcnJvciA9XG5cdFx0RlNfcHJvdG8ub253cml0ZXN0YXJ0ID1cblx0XHRGU19wcm90by5vbnByb2dyZXNzID1cblx0XHRGU19wcm90by5vbndyaXRlID1cblx0XHRGU19wcm90by5vbmFib3J0ID1cblx0XHRGU19wcm90by5vbmVycm9yID1cblx0XHRGU19wcm90by5vbndyaXRlZW5kID1cblx0XHRcdG51bGw7XG5cblx0XHRyZXR1cm4gc2F2ZUFzO1xuXHR9KFxuXHRcdCAgIHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiICYmIHNlbGZcblx0XHR8fCB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiICYmIHdpbmRvd1xuXHRcdHx8IHRoaXMuY29udGVudFxuXHQpKTtcblx0Ly8gYHNlbGZgIGlzIHVuZGVmaW5lZCBpbiBGaXJlZm94IGZvciBBbmRyb2lkIGNvbnRlbnQgc2NyaXB0IGNvbnRleHRcblx0Ly8gd2hpbGUgYHRoaXNgIGlzIG5zSUNvbnRlbnRGcmFtZU1lc3NhZ2VNYW5hZ2VyXG5cdC8vIHdpdGggYW4gYXR0cmlidXRlIGBjb250ZW50YCB0aGF0IGNvcnJlc3BvbmRzIHRvIHRoZSB3aW5kb3dcblxuXHRpZiAodHlwZW9mIG1vZHVsZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBtb2R1bGUuZXhwb3J0cykge1xuXHQgIG1vZHVsZS5leHBvcnRzLnNhdmVBcyA9IHNhdmVBcztcblx0fSBlbHNlIGlmICgoXCJmdW5jdGlvblwiICE9PSBcInVuZGVmaW5lZFwiICYmIF9fd2VicGFja19yZXF1aXJlX18oNykgIT09IG51bGwpICYmIChfX3dlYnBhY2tfcmVxdWlyZV9fKDgpICE9PSBudWxsKSkge1xuXHQgICEoX19XRUJQQUNLX0FNRF9ERUZJTkVfQVJSQVlfXyA9IFtdLCBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXyA9IGZ1bmN0aW9uKCkge1xuXHQgICAgcmV0dXJuIHNhdmVBcztcblx0ICB9LmFwcGx5KGV4cG9ydHMsIF9fV0VCUEFDS19BTURfREVGSU5FX0FSUkFZX18pLCBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXyAhPT0gdW5kZWZpbmVkICYmIChtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fKSk7XG5cdH1cblxuXG4vKioqLyB9LFxuLyogNyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHsgdGhyb3cgbmV3IEVycm9yKFwiZGVmaW5lIGNhbm5vdCBiZSB1c2VkIGluZGlyZWN0XCIpOyB9O1xyXG5cblxuLyoqKi8gfSxcbi8qIDggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihfX3dlYnBhY2tfYW1kX29wdGlvbnNfXykge21vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX2FtZF9vcHRpb25zX187XHJcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywge30pKVxuXG4vKioqLyB9XG4vKioqKioqLyBdKVxufSk7XG47IiwiLyoqXG4gKiBNZXRhdGFncyBmb3IgYW5ndWxhci11aS1yb3V0ZXJcbiAqL1xudmFyIHVpcm91dGVybWV0YXRhZ3M7XG4oZnVuY3Rpb24gKHVpcm91dGVybWV0YXRhZ3MpIHtcbiAgICBydW5CbG9jay4kaW5qZWN0ID0gW1wiJGxvZ1wiLCBcIiRyb290U2NvcGVcIiwgXCJNZXRhVGFnc1wiLCBcIiR3aW5kb3dcIl07XG4gICAgdmFyIGFwcE1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCd1aS5yb3V0ZXIubWV0YXRhZ3MnLCBbJ3VpLnJvdXRlciddKTtcbiAgICB2YXIgVUlSb3V0ZXJNZXRhdGFncyA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8qIEBuZ0luamVjdCAqL1xuICAgICAgICBmdW5jdGlvbiBVSVJvdXRlck1ldGF0YWdzKCkge1xuICAgICAgICAgICAgdGhpcy5wcmVmaXggPSAnJztcbiAgICAgICAgICAgIHRoaXMuc3VmZml4ID0gJyc7XG4gICAgICAgICAgICB0aGlzLmRlZmF1bHRUaXRsZSA9ICcnO1xuICAgICAgICAgICAgdGhpcy5kZWZhdWx0RGVzY3JpcHRpb24gPSAnJztcbiAgICAgICAgICAgIHRoaXMuZGVmYXVsdEtleXdvcmRzID0gJyc7XG4gICAgICAgICAgICB0aGlzLmRlZmF1bHRSb2JvdHMgPSAnJztcbiAgICAgICAgICAgIHRoaXMuc3RhdGljUHJvcGVydGllcyA9IHt9O1xuICAgICAgICAgICAgdGhpcy5lbmFibGVPR1VSTCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIFVJUm91dGVyTWV0YXRhZ3MucHJvdG90eXBlLnNldFRpdGxlUHJlZml4ID0gZnVuY3Rpb24gKHByZWZpeCkge1xuICAgICAgICAgICAgdGhpcy5wcmVmaXggPSBwcmVmaXg7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfTtcbiAgICAgICAgVUlSb3V0ZXJNZXRhdGFncy5wcm90b3R5cGUuc2V0VGl0bGVTdWZmaXggPSBmdW5jdGlvbiAoc3VmZml4KSB7XG4gICAgICAgICAgICB0aGlzLnN1ZmZpeCA9IHN1ZmZpeDtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9O1xuICAgICAgICBVSVJvdXRlck1ldGF0YWdzLnByb3RvdHlwZS5zZXREZWZhdWx0VGl0bGUgPSBmdW5jdGlvbiAodGl0bGUpIHtcbiAgICAgICAgICAgIHRoaXMuZGVmYXVsdFRpdGxlID0gdGl0bGU7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfTtcbiAgICAgICAgVUlSb3V0ZXJNZXRhdGFncy5wcm90b3R5cGUuc2V0RGVmYXVsdERlc2NyaXB0aW9uID0gZnVuY3Rpb24gKGRlc2NyaXB0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLmRlZmF1bHREZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH07XG4gICAgICAgIFVJUm91dGVyTWV0YXRhZ3MucHJvdG90eXBlLnNldERlZmF1bHRLZXl3b3JkcyA9IGZ1bmN0aW9uIChrZXl3b3Jkcykge1xuICAgICAgICAgICAgdGhpcy5kZWZhdWx0S2V5d29yZHMgPSBrZXl3b3JkcztcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9O1xuICAgICAgICBVSVJvdXRlck1ldGF0YWdzLnByb3RvdHlwZS5zZXREZWZhdWx0Um9ib3RzID0gZnVuY3Rpb24gKHJvYm90cykge1xuICAgICAgICAgICAgdGhpcy5kZWZhdWx0Um9ib3RzID0gcm9ib3RzO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH07XG4gICAgICAgIFVJUm91dGVyTWV0YXRhZ3MucHJvdG90eXBlLnNldFN0YXRpY1Byb3BlcnRpZXMgPSBmdW5jdGlvbiAocHJvcGVydGllcykge1xuICAgICAgICAgICAgdGhpcy5zdGF0aWNQcm9wZXJ0aWVzID0gcHJvcGVydGllcztcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9O1xuICAgICAgICBVSVJvdXRlck1ldGF0YWdzLnByb3RvdHlwZS5zZXRPR1VSTCA9IGZ1bmN0aW9uIChlbmFibGVkKSB7XG4gICAgICAgICAgICB0aGlzLmVuYWJsZU9HVVJMID0gZW5hYmxlZDtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9O1xuICAgICAgICBVSVJvdXRlck1ldGF0YWdzLnByb3RvdHlwZS4kZ2V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBwcmVmaXg6IHRoaXMucHJlZml4LFxuICAgICAgICAgICAgICAgIHN1ZmZpeDogdGhpcy5zdWZmaXgsXG4gICAgICAgICAgICAgICAgZGVmYXVsdFRpdGxlOiB0aGlzLmRlZmF1bHRUaXRsZSxcbiAgICAgICAgICAgICAgICBkZWZhdWx0RGVzY3JpcHRpb246IHRoaXMuZGVmYXVsdERlc2NyaXB0aW9uLFxuICAgICAgICAgICAgICAgIGRlZmF1bHRLZXl3b3JkczogdGhpcy5kZWZhdWx0S2V5d29yZHMsXG4gICAgICAgICAgICAgICAgZGVmYXVsdFJvYm90czogdGhpcy5kZWZhdWx0Um9ib3RzLFxuICAgICAgICAgICAgICAgIHN0YXRpY1Byb3BlcnRpZXM6IHRoaXMuc3RhdGljUHJvcGVydGllcyxcbiAgICAgICAgICAgICAgICBlbmFibGVPR1VSTDogdGhpcy5lbmFibGVPR1VSTFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFVJUm91dGVyTWV0YXRhZ3M7XG4gICAgfSkoKTtcbiAgICBhcHBNb2R1bGUucHJvdmlkZXIoJ1VJUm91dGVyTWV0YXRhZ3MnLCBVSVJvdXRlck1ldGF0YWdzKTtcbiAgICB2YXIgTWV0YVRhZ3MgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICAvKiBAbmdJbmplY3QgKi9cbiAgICAgICAgTWV0YVRhZ3MuJGluamVjdCA9IFtcIiRsb2dcIiwgXCJVSVJvdXRlck1ldGF0YWdzXCIsIFwiJGludGVycG9sYXRlXCIsIFwiJGluamVjdG9yXCIsIFwiJHN0YXRlXCIsIFwiJGxvY2F0aW9uXCIsIFwiJHdpbmRvd1wiXTtcbiAgICAgICAgZnVuY3Rpb24gTWV0YVRhZ3MoJGxvZywgVUlSb3V0ZXJNZXRhdGFncywgJGludGVycG9sYXRlLCAkaW5qZWN0b3IsICRzdGF0ZSwgJGxvY2F0aW9uLCAkd2luZG93KSB7XG4gICAgICAgICAgICB0aGlzLiRsb2cgPSAkbG9nO1xuICAgICAgICAgICAgdGhpcy5VSVJvdXRlck1ldGF0YWdzID0gVUlSb3V0ZXJNZXRhdGFncztcbiAgICAgICAgICAgIHRoaXMuJGludGVycG9sYXRlID0gJGludGVycG9sYXRlO1xuICAgICAgICAgICAgdGhpcy4kaW5qZWN0b3IgPSAkaW5qZWN0b3I7XG4gICAgICAgICAgICB0aGlzLiRzdGF0ZSA9ICRzdGF0ZTtcbiAgICAgICAgICAgIHRoaXMuJGxvY2F0aW9uID0gJGxvY2F0aW9uO1xuICAgICAgICAgICAgdGhpcy4kd2luZG93ID0gJHdpbmRvdztcbiAgICAgICAgICAgIHRoaXMucHJlcmVuZGVyID0ge307XG4gICAgICAgIH1cbiAgICAgICAgTWV0YVRhZ3MucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uICh0YWdzKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BlcnRpZXMgPSBhbmd1bGFyLmV4dGVuZCh7fSwgdGhpcy5VSVJvdXRlck1ldGF0YWdzLnN0YXRpY1Byb3BlcnRpZXMpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLlVJUm91dGVyTWV0YXRhZ3MuZW5hYmxlT0dVUkwpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wZXJ0aWVzWydvZzp1cmwnXSA9IHRoaXMuJGxvY2F0aW9uLmFic1VybCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodGFncykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRpdGxlID0gdGFncy50aXRsZSA/IHRoaXMuVUlSb3V0ZXJNZXRhdGFncy5wcmVmaXggKyAodGhpcy5nZXRWYWx1ZSgndGl0bGUnLCB0YWdzLnRpdGxlKSB8fCAnJykgKyB0aGlzLlVJUm91dGVyTWV0YXRhZ3Muc3VmZml4IDogdGhpcy5VSVJvdXRlck1ldGF0YWdzLmRlZmF1bHRUaXRsZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZXNjcmlwdGlvbiA9IHRhZ3MuZGVzY3JpcHRpb24gPyB0aGlzLmdldFZhbHVlKCdkZXNjcmlwdGlvbicsIHRhZ3MuZGVzY3JpcHRpb24pIDogdGhpcy5VSVJvdXRlck1ldGF0YWdzLmRlZmF1bHREZXNjcmlwdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5rZXl3b3JkcyA9IHRhZ3Mua2V5d29yZHMgPyB0aGlzLmdldFZhbHVlKCdrZXl3b3JkcycsIHRhZ3Mua2V5d29yZHMpIDogdGhpcy5VSVJvdXRlck1ldGF0YWdzLmRlZmF1bHRLZXl3b3JkcztcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yb2JvdHMgPSB0YWdzLnJvYm90cyA/IHRoaXMuZ2V0VmFsdWUoJ3JvYm90cycsIHRhZ3Mucm9ib3RzKSA6IHRoaXMuVUlSb3V0ZXJNZXRhdGFncy5kZWZhdWx0Um9ib3RzO1xuICAgICAgICAgICAgICAgICAgICBhbmd1bGFyLmZvckVhY2godGFncy5wcm9wZXJ0aWVzLCBmdW5jdGlvbiAodmFsdWUsIGtleSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHYgPSBfdGhpcy5nZXRWYWx1ZShrZXksIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucHJvcGVydGllc1trZXldID0gdjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRpdGxlID0gdGhpcy5VSVJvdXRlck1ldGF0YWdzLmRlZmF1bHRUaXRsZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZXNjcmlwdGlvbiA9IHRoaXMuVUlSb3V0ZXJNZXRhdGFncy5kZWZhdWx0RGVzY3JpcHRpb247XG4gICAgICAgICAgICAgICAgICAgIHRoaXMua2V5d29yZHMgPSB0aGlzLlVJUm91dGVyTWV0YXRhZ3MuZGVmYXVsdEtleXdvcmRzO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJvYm90cyA9IHRoaXMuVUlSb3V0ZXJNZXRhdGFncy5kZWZhdWx0Um9ib3RzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodGFncyAmJiB0YWdzLnByZXJlbmRlcikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByZXJlbmRlci5zdGF0dXNDb2RlID0gdGFncy5wcmVyZW5kZXIuc3RhdHVzQ29kZSA/IHRoaXMuZ2V0VmFsdWUoJ3ByZXJlbmRlci5zdGF0dXNDb2RlJywgdGFncy5wcmVyZW5kZXIuc3RhdHVzQ29kZSkgOiAyMDA7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJlcmVuZGVyLmhlYWRlciA9IHRhZ3MucHJlcmVuZGVyLmhlYWRlciA/IHRoaXMuZ2V0VmFsdWUoJ3JlcmVuZGVyLmhlYWRlcicsIHRhZ3MucHJlcmVuZGVyLmhlYWRlcikgOiBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcmVyZW5kZXIuc3RhdHVzQ29kZSA9IDIwMDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcmVyZW5kZXIuaGVhZGVyID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy4kd2luZG93LnByZXJlbmRlclJlYWR5ID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiRsb2cuZXJyb3IoJ2Vycm9yIG9jY3VyZWQgd2hlbiBleHRyYWN0aW5nIG1ldGF0YWdzOicsIGVycik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIE1ldGFUYWdzLnByb3RvdHlwZS5nZXRWYWx1ZSA9IGZ1bmN0aW9uICh0YWdUeXBlLCB0YWcpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaWYgKCF0YWcpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiB0YWcgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0YWc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiB0YWcgPT09ICdzdHJpbmcnICYmIHRhZy50cmltKCkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChhbmd1bGFyLmlzRnVuY3Rpb24odGFnKSB8fCBBcnJheS5pc0FycmF5KHRhZykpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuJGluamVjdG9yLmludm9rZSh0YWcsIHRoaXMsIHRoaXMuJHN0YXRlLiRjdXJyZW50LmxvY2Fscy5nbG9iYWxzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLiRpbnRlcnBvbGF0ZSh0YWcpKHRoaXMuJHN0YXRlLiRjdXJyZW50LmxvY2Fscy5nbG9iYWxzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4kbG9nLmVycm9yKCdlcnJvciBvY2N1cmVkIHdoZW4gdHJ5aW5nIHRvIGdldCB0aGUgdmFsdWUgb2YgdGFnOicsIHRhZ1R5cGUsIGVycik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBNZXRhVGFncztcbiAgICB9KSgpO1xuICAgIGFwcE1vZHVsZS5zZXJ2aWNlKCdNZXRhVGFncycsIE1ldGFUYWdzKTtcbiAgICAvKiBAbmdJbmplY3QgKi9cbiAgICBmdW5jdGlvbiBydW5CbG9jaygkbG9nLCAkcm9vdFNjb3BlLCBNZXRhVGFncywgJHdpbmRvdykge1xuICAgICAgICAkcm9vdFNjb3BlLk1ldGFUYWdzID0gTWV0YVRhZ3M7XG4gICAgICAgICRyb290U2NvcGUuJG9uKCckc3RhdGVDaGFuZ2VTdGFydCcsIHN0YXRlQ2hhbmdlU3RhcnQpO1xuICAgICAgICAkcm9vdFNjb3BlLiRvbignJHN0YXRlQ2hhbmdlU3VjY2VzcycsIHN0YXRlQ2hhbmdlU3VjY2Vzcyk7XG4gICAgICAgICRyb290U2NvcGUuJG9uKCckc3RhdGVDaGFuZ2VFcnJvcicsIHN0YXRlQ2hhbmdlRXJyb3IpO1xuICAgICAgICAkcm9vdFNjb3BlLiRvbignJHN0YXRlTm90Rm91bmQnLCBzdGF0ZU5vdEZvdW5kKTtcbiAgICAgICAgZnVuY3Rpb24gc3RhdGVDaGFuZ2VTdGFydChldmVudCwgdG9TdGF0ZSwgdG9QYXJhbXMsIGZyb20sIGZyb21QYXJhbXMpIHtcbiAgICAgICAgICAgICR3aW5kb3cucHJlcmVuZGVyUmVhZHkgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBzdGF0ZUNoYW5nZVN1Y2Nlc3MoZXZlbnQsIHRvU3RhdGUpIHtcbiAgICAgICAgICAgIGlmICghdG9TdGF0ZS5tZXRhVGFncykge1xuICAgICAgICAgICAgICAgICRsb2cuZGVidWcoXCJNZXRhVGFncyAtIHJvdXRlOiBcXFwiXCIgKyB0b1N0YXRlLm5hbWUgKyBcIlxcXCIgZG9lcyBub3QgY29udGFpbiBhbnkgbWV0YXRhZ3NcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBNZXRhVGFncy51cGRhdGUodG9TdGF0ZS5tZXRhVGFncyk7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gc3RhdGVDaGFuZ2VFcnJvcihldmVudCwgdG9TdGF0ZSwgdG9QYXJhbXMsIGZyb21TdGF0ZSwgZnJvbVBhcmFtcywgZXJyb3IpIHtcbiAgICAgICAgICAgIE1ldGFUYWdzLnByZXJlbmRlci5zdGF0dXNDb2RlID0gNTAwO1xuICAgICAgICAgICAgJHdpbmRvdy5wcmVyZW5kZXJSZWFkeSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gc3RhdGVOb3RGb3VuZChldmVudCwgdW5mb3VuZFN0YXRlLCBmcm9tU3RhdGUpIHtcbiAgICAgICAgICAgIE1ldGFUYWdzLnByZXJlbmRlci5zdGF0dXNDb2RlID0gNDA0O1xuICAgICAgICAgICAgJHdpbmRvdy5wcmVyZW5kZXJSZWFkeSA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXBwTW9kdWxlLnJ1bihydW5CbG9jayk7XG59KSh1aXJvdXRlcm1ldGF0YWdzIHx8ICh1aXJvdXRlcm1ldGF0YWdzID0ge30pKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dWktcm91dGVyLW1ldGF0YWdzLmpzLm1hcFxuIiwiLypcbmFuZ3VsYXItdGFibGVzb3J0IHYxLjQuMFxuKGMpIDIwMTMtMjAxNiBNYXR0aWFzIEhvbG1sdW5kLCBodHRwOi8vbWF0dGlhc2guZ2l0aHViLmlvL2FuZ3VsYXItdGFibGVzb3J0XG5MaWNlbnNlOiBNSVRcbiovXG5cbnZhciB0YWJsZVNvcnRNb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSggJ3RhYmxlU29ydCcsIFtdICk7XG5cbnRhYmxlU29ydE1vZHVsZS5wcm92aWRlciggJ3RhYmxlU29ydENvbmZpZycsIGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmZpbHRlclRlbXBsYXRlID0gJyc7ICAgICAgICAgICAgICAgICAgICAgICAgICAvL05vIGZpbHRlcmluZyBieSBkZWZhdWx0IHVubGVzcyBhIHRlbXBsYXRlIGlzIHByb3ZpZGVkXG4gICAgdGhpcy5maWx0ZXJGdW5jdGlvbiA9IHVuZGVmaW5lZDsgICAgICAgICAgICAgICAgICAgLy9FbXB0eSBieSBkZWZhdWx0IC0gdXNlIHRoZSBidWlsdCBpbiBmaWx0ZXIgZnVuY3Rpb24gd2hlbiBsZWZ0IGJsYW5rXG4gICAgdGhpcy5wYWdpbmF0aW9uVGVtcGxhdGUgPSAnJzsgICAgICAgICAgICAgICAgICAgICAgLy9ObyBwYWdpbmF0aW9uIGJ5IGRlZmF1bHQgdW5sZXNzIGEgdGVtcGxhdGUgaXMgcHJvdmlkZWRcblxuICAgIC8vVGhlIGJlbG93IG9wdGlvbnMgY2FuIGFsbCBiZSBvdmVycmlkZGVuIG9uIGEgcGVyLXRhYmxlIGJhc2lzXG4gICAgdGhpcy5wZXJQYWdlT3B0aW9ucyA9IFsxMCwgMjUsIDUwLCAxMDBdOyAgICAgICAgICAgLy9EZWZhdWx0IHBhZ2luYXRpb24gb3B0aW9uc1xuICAgIHRoaXMucGVyUGFnZURlZmF1bHQgPSB0aGlzLnBlclBhZ2VPcHRpb25zWzBdOyAgICAgIC8vU2VsZWN0IHRoZSBmaXJzdCBvcHRpb24gYnkgZGVmYXVsdFxuICAgIHRoaXMuaXRlbU5hbWVTaW5ndWxhciA9ICdpdGVtJzsgICAgICAgICAgICAgICAgICAgIC8vRGVmYXVsdCBuYW1lXG4gICAgdGhpcy5pdGVtTmFtZVBsdXJhbCA9IHRoaXMuaXRlbU5hbWVTaW5ndWxhciArICdzJzsgLy9EZWZhdWx0IHdheSB0byBtYWtlIGFuIGl0ZW0gcGx1cmFsIGZvciBFbmdsaXNoXG4gICAgdGhpcy5ub0RhdGFUZXh0ID0gJ05vICcgKyB0aGlzLml0ZW1OYW1lUGx1cmFsOyAgICAgLy9EZWZhdWx0IHRleHQgdG8gc2hvdyB0aGF0IHRoZXJlIGFyZSBubyBpdGVtc1xuICAgIHRoaXMud3JhcHBpbmdFbGVtZW50Q2xhc3MgPSBcIlwiOyAgICAgICAgICAgICAgICAgICAgLy9FbXB0eSBieSBkZWZhdWx0XG5cbiAgICBpZiggIWlzTmFOKHRoaXMucGVyUGFnZURlZmF1bHQpICYmIHRoaXMucGVyUGFnZU9wdGlvbnMuaW5kZXhPZih0aGlzLnBlclBhZ2VEZWZhdWx0KSA9PT0gLTEgKSB7XG4gICAgICAgIC8vSWYgYSBkZWZhdWx0IHBlci1wYWdlIG9wdGlvbiB3YXMgYWRkZWQgdGhhdCBpc24ndCBpbiB0aGUgYXJyYXksIGFkZCBpdCBhdCB0aGUgZW5kXG4gICAgICAgIHRoaXMucGVyUGFnZU9wdGlvbnMucHVzaCh0aGlzLnBlclBhZ2VEZWZhdWx0KTtcbiAgICB9XG5cbiAgICAvL1NvcnQgdGhlIHBlci1wYWdlIG9wdGlvbnMgYXJyYXlcbiAgICB0aGlzLnBlclBhZ2VPcHRpb25zLnNvcnQoZnVuY3Rpb24gKGEsYikge3JldHVybiBhIC0gYjt9KTtcblxuICAgIHRoaXMuJGdldCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxufSk7XG5cbnRhYmxlU29ydE1vZHVsZS5kaXJlY3RpdmUoICd0c1dyYXBwZXInLCBbJyRwYXJzZScsICckY29tcGlsZScsIGZ1bmN0aW9uKCAkcGFyc2UsICRjb21waWxlICkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGZ1bmN0aW9uIHJlcGxhY2VUZW1wbGF0ZVRva2Vucygkc2NvcGUsIHRlbXBsYXRlU3RyaW5nKSB7XG4gICAgICAgIC8vUmVwbGFjZSBzb21lIHN0cmluZ3Mgd2l0aCB0aGUgcHJvcGVyIGV4cHJlc3Npb25zIHRvIGJlIGNvbXBpbGVkXG4gICAgICAgIGNvbnNvbGUubG9nKFwid2hhdCBpcyB0ZW1wbGF0ZVN0cmluZz8gXCIsdGVtcGxhdGVTdHJpbmcpO1xuXG4gICAgICAgIHZhciBuZXdTdHJpbmcgPSB0ZW1wbGF0ZVN0cmluZ1xuICAgICAgICAgICAgLnJlcGxhY2UoL0ZJTFRFUl9TVFJJTkcvZywgJ2ZpbHRlcmluZy5maWx0ZXJTdHJpbmcnKVxuICAgICAgICAgICAgLnJlcGxhY2UoL0NVUlJFTlRfUEFHRV9SQU5HRS9nLCAncGFnaW5hdGlvbi5nZXRQYWdlUmFuZ2VTdHJpbmcoVE9UQUxfQ09VTlQpJylcbiAgICAgICAgICAgIC5yZXBsYWNlKC9UT1RBTF9DT1VOVC9nLCAkc2NvcGUuaXRlbXNBcnJheUV4cHJlc3Npb24gKyAnLmxlbmd0aCcpXG4gICAgICAgICAgICAucmVwbGFjZSgvUEVSX1BBR0VfT1BUSU9OUy9nLCAncGFnaW5hdGlvbi5wZXJQYWdlT3B0aW9ucycpXG4gICAgICAgICAgICAucmVwbGFjZSgvSVRFTVNfUEVSX1BBR0UvZywgJ3BhZ2luYXRpb24ucGVyUGFnZScpXG4gICAgICAgICAgICAucmVwbGFjZSgvSVRFTV9OQU1FX1NJTkdVTEFSL2csICdpdGVtTmFtZVNpbmd1bGFyJylcbiAgICAgICAgICAgIC5yZXBsYWNlKC9JVEVNX05BTUVfUExVUkFML2csICdpdGVtTmFtZVBsdXJhbCcpXG4gICAgICAgICAgICAucmVwbGFjZSgvRklMVEVSRURfQ09VTlQvZywgJ2ZpbHRlcmluZy5maWx0ZXJlZENvdW50JylcbiAgICAgICAgICAgIC5yZXBsYWNlKC9DVVJSRU5UX1BBR0VfTlVNQkVSL2csICdwYWdpbmF0aW9uLmN1cnJlbnRQYWdlJyk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIm5ld1N0cmluZzogXCIsbmV3U3RyaW5nKTtcbiAgICAgICAgICAgIHJldHVybiBuZXdTdHJpbmc7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY3JlYXRlRGVmYXVsdENvbXBhcmVyKCkge1xuXG4gICAgICAgIGZ1bmN0aW9uIF9kZWZhdWx0Q29tcGFyZXIoYSwgYikge1xuICAgICAgICAgICAgaWYgKGEgPiBiKSByZXR1cm4gMTtcbiAgICAgICAgICAgIGlmIChhIDwgYikgcmV0dXJuIC0xO1xuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIHN0cmluZ0NvbXBhcmVyID0gX2RlZmF1bHRDb21wYXJlcjtcbiAgICAgICAgdmFyIG51bWVyaWNDb21wYXJlciA9IF9kZWZhdWx0Q29tcGFyZXI7XG5cbiAgICAgICAgaWYodHlwZW9mIEludGwgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICBzdHJpbmdDb21wYXJlciA9IG5ldyBJbnRsLkNvbGxhdG9yKHVuZGVmaW5lZCwge3NlbnNpdGl2aXR5OiAnY2FzZSd9KS5jb21wYXJlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYodHlwZW9mIFN0cmluZy5wcm90b3R5cGUubG9jYWxlQ29tcGFyZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgc3RyaW5nQ29tcGFyZXIgPSBmdW5jdGlvbihhLCBiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIChhICsgJycpLmxvY2FsZUNvbXBhcmUoYiwgdW5kZWZpbmVkLCB7c2Vuc2l0aXZpdHk6ICdjYXNlJ30pO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBjb21wYXJlckZuID0gZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgYSA9PT0gJ251bWJlcicgJiYgdHlwZW9mIGIgPT09ICdudW1iZXInKVxuICAgICAgICAgICAgICAgIHJldHVybiBudW1lcmljQ29tcGFyZXIoYSwgYik7XG5cbiAgICAgICAgICAgIGlmIChhIGluc3RhbmNlb2YgRGF0ZSAmJiBiIGluc3RhbmNlb2YgRGF0ZSlcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVtZXJpY0NvbXBhcmVyKGEuZ2V0VGltZSgpLCBiLmdldFRpbWUoKSk7XG5cbiAgICAgICAgICAgIHJldHVybiBzdHJpbmdDb21wYXJlcihhLCBiKTtcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gY29tcGFyZXJGbjtcbiAgICB9XG5cbiAgICB2YXIgZGVmYXVsdENvbXBhcmVyID0gY3JlYXRlRGVmYXVsdENvbXBhcmVyKCk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBzY29wZTogdHJ1ZSxcbiAgICAgICAgY29udHJvbGxlcjogWyckc2NvcGUnLCAndGFibGVTb3J0Q29uZmlnJywgZnVuY3Rpb24oJHNjb3BlLCB0YWJsZVNvcnRDb25maWcgKSB7XG4gICAgICAgICAgICAvL2xvY2FsIHNjb3BlIHZhcnMgZm9yIHRoaXMgZGlyZWN0aXZlXG4gICAgICAgICAgICAkc2NvcGUucGFnaW5hdGlvbiA9IHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogdGFibGVTb3J0Q29uZmlnLnBhZ2luYXRpb25UZW1wbGF0ZSxcbiAgICAgICAgICAgICAgICBwZXJQYWdlT3B0aW9uczogdGFibGVTb3J0Q29uZmlnLnBlclBhZ2VPcHRpb25zLmNvbmNhdCgpLCAvL2NvcHkgdGhlIGFycmF5LCBub3QgYSByZWZlcmVuY2VcbiAgICAgICAgICAgICAgICBwZXJQYWdlOiB0YWJsZVNvcnRDb25maWcucGVyUGFnZURlZmF1bHQsXG4gICAgICAgICAgICAgICAgY3VycmVudFBhZ2U6IDEsXG4gICAgICAgICAgICAgICAgZ2V0UGFnZVJhbmdlU3RyaW5nOiBmdW5jdGlvbih0b3RhbCkge1xuICAgICAgICAgICAgICAgICAgICAvL1RPRE86IEZvcm1hdCB0aGVzZSBudW1iZXJzLCBwZXJoYXBzIG9wdGlvbmFsbHlcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1heE9uUGFnZSA9IHRvdGFsICE9PSAkc2NvcGUuZmlsdGVyaW5nLmZpbHRlcmVkQ291bnQgPyAkc2NvcGUuZmlsdGVyaW5nLmZpbHRlcmVkQ291bnQgOiB0b3RhbDtcbiAgICAgICAgICAgICAgICAgICAgLy9UaGlzIGtlZXBzIHRoZSBmaXJzdCBwYWdlIGxhYmVsZWQgYXMgMSwgbm90IDBcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN0YXJ0UGFnZSA9IE1hdGgubWF4KCgkc2NvcGUucGFnaW5hdGlvbi5jdXJyZW50UGFnZSAtIDEpICogJHNjb3BlLnBhZ2luYXRpb24ucGVyUGFnZSArIDEsIDEpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZW5kUGFnZSA9IE1hdGgubWluKCRzY29wZS5wYWdpbmF0aW9uLmN1cnJlbnRQYWdlICogJHNjb3BlLnBhZ2luYXRpb24ucGVyUGFnZSwgbWF4T25QYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgLy9UaGlzIHByZXZlbnRzIHRoZSByYW5nZSBmcm9tIHNob3dpbmcgd2hlbiB0aGUgdG90YWwgbnVtYmVyIG9mIGl0ZW1zIGNhbiBiZSBzaG93biBvbiBhIHNpbmdsZSBwYWdlXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkc2NvcGUuZmlsdGVyaW5nLmZpbHRlcmVkQ291bnQgPT09IDAgPyAnJyA6IChlbmRQYWdlID09PSBtYXhPblBhZ2UgJiYgc3RhcnRQYWdlID09PSAxID8gJycgOiBzdGFydFBhZ2UgKyAnLScpICsgZW5kUGFnZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJ3aGF0IGlzIHBhZ2luYXRpb246IFwiLCRzY29wZS5wYWdpbmF0aW9uKTtcblxuICAgICAgICAgICAgJHNjb3BlLmZpbHRlcmluZyA9IHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogdGFibGVTb3J0Q29uZmlnLmZpbHRlclRlbXBsYXRlLFxuICAgICAgICAgICAgICAgIGZpbHRlclN0cmluZzogJycsXG4gICAgICAgICAgICAgICAgZmlsdGVyRnVuY3Rpb246IHRhYmxlU29ydENvbmZpZy5maWx0ZXJGdW5jdGlvbixcbiAgICAgICAgICAgICAgICBmaWx0ZXJlZENvdW50OiAwLFxuICAgICAgICAgICAgICAgIGZpbHRlckZpZWxkczogW11cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwid2hhdCBpcyBmaWx0ZXJpbmc6IFwiLCRzY29wZS5maWx0ZXJpbmcpO1xuXG4gICAgICAgICAgICAkc2NvcGUuaXRlbXNBcnJheUV4cHJlc3Npb24gPSAnJzsgLy90aGlzIHdpbGwgY29udGFpbiB0aGUgc3RyaW5nIGV4cHJlc3Npb24gZm9yIHRoZSBhcnJheSBvZiBpdGVtcyBpbiB0aGUgdGFibGVcbiAgICAgICAgICAgICRzY29wZS5pdGVtTmFtZVNpbmd1bGFyID0gdGFibGVTb3J0Q29uZmlnLml0ZW1OYW1lU2luZ3VsYXI7XG4gICAgICAgICAgICAkc2NvcGUuaXRlbU5hbWVQbHVyYWwgPSB0YWJsZVNvcnRDb25maWcuaXRlbU5hbWVQbHVyYWw7XG4gICAgICAgICAgICAkc2NvcGUubm9EYXRhVGV4dCA9IHRhYmxlU29ydENvbmZpZy5ub0RhdGFUZXh0O1xuICAgICAgICAgICAgJHNjb3BlLndyYXBwaW5nRWxlbWVudENsYXNzID0gdGFibGVTb3J0Q29uZmlnLndyYXBwaW5nRWxlbWVudENsYXNzO1xuICAgICAgICAgICAgJHNjb3BlLnNvcnRFeHByZXNzaW9uID0gW107XG4gICAgICAgICAgICAkc2NvcGUuaGVhZGluZ3MgPSBbXTtcblxuICAgICAgICAgICAgdmFyIHBhcnNlX3NvcnRleHByID0gZnVuY3Rpb24oIGV4cHIsIG5hbWUgKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFskcGFyc2UoIGV4cHIgKSwgbnVsbCwgZmFsc2UsIG5hbWUgPyBuYW1lIDogZXhwcl07XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB0aGlzLnNldFNvcnRGaWVsZCA9IGZ1bmN0aW9uKCBzb3J0ZXhwciwgZWxlbWVudCwgbmFtZSwgc29ydEJ5ICkge1xuICAgICAgICAgICAgICAgIHZhciBpO1xuICAgICAgICAgICAgICAgIHZhciBleHByID0gcGFyc2Vfc29ydGV4cHIoIHNvcnRleHByLCBuYW1lICk7XG4gICAgICAgICAgICAgICAgZXhwci5wdXNoKHNvcnRCeSk7XG4gICAgICAgICAgICAgICAgaWYoICRzY29wZS5zb3J0RXhwcmVzc2lvbi5sZW5ndGggPT09IDEgJiYgJHNjb3BlLnNvcnRFeHByZXNzaW9uWzBdWzBdID09PSBleHByWzBdICkge1xuICAgICAgICAgICAgICAgICAgICBpZiggJHNjb3BlLnNvcnRFeHByZXNzaW9uWzBdWzJdICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5yZW1vdmVDbGFzcyggJ3RhYmxlc29ydC1kZXNjJyApO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5hZGRDbGFzcyggJ3RhYmxlc29ydC1hc2MnICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc29ydEV4cHJlc3Npb25bMF1bMl0gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQucmVtb3ZlQ2xhc3MoICd0YWJsZXNvcnQtYXNjJyApO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5hZGRDbGFzcyggJ3RhYmxlc29ydC1kZXNjJyApO1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNvcnRFeHByZXNzaW9uWzBdWzJdID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuJGVtaXQoICd0YWJsZXNvcnQ6c29ydE9yZGVyJywgW3tcbiAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAkc2NvcGUuc29ydEV4cHJlc3Npb25bMF1bM10sXG4gICAgICAgICAgICAgICAgICAgICAgb3JkZXI6ICRzY29wZS5zb3J0RXhwcmVzc2lvblswXVsyXVxuICAgICAgICAgICAgICAgICAgICB9XSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yKCBpPTA7IGk8JHNjb3BlLmhlYWRpbmdzLmxlbmd0aDsgaT1pKzEgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuaGVhZGluZ3NbaV1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVtb3ZlQ2xhc3MoICd0YWJsZXNvcnQtZGVzYycgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZW1vdmVDbGFzcyggJ3RhYmxlc29ydC1hc2MnICk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5hZGRDbGFzcyggJ3RhYmxlc29ydC1hc2MnICk7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5zb3J0RXhwcmVzc2lvbiA9IFtleHByXTtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLiRlbWl0KCAndGFibGVzb3J0OnNvcnRPcmRlcicsIFt7XG4gICAgICAgICAgICAgICAgICAgICAgbmFtZTogZXhwclszXSxcbiAgICAgICAgICAgICAgICAgICAgICBvcmRlcjogZXhwclsyXVxuICAgICAgICAgICAgICAgICAgICB9XSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdGhpcy5hZGRTb3J0RmllbGQgPSBmdW5jdGlvbiggc29ydGV4cHIsIGVsZW1lbnQsIG5hbWUsIHNvcnRCeSApIHtcbiAgICAgICAgICAgICAgICB2YXIgaTtcbiAgICAgICAgICAgICAgICB2YXIgdG9nZ2xlX29yZGVyID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdmFyIGV4cHIgPSBwYXJzZV9zb3J0ZXhwciggc29ydGV4cHIsIG5hbWUgKTtcbiAgICAgICAgICAgICAgICBleHByLnB1c2goc29ydEJ5KTtcbiAgICAgICAgICAgICAgICBmb3IoIGk9MDsgaTwkc2NvcGUuc29ydEV4cHJlc3Npb24ubGVuZ3RoOyBpPWkrMSApIHtcbiAgICAgICAgICAgICAgICAgICAgaWYoICRzY29wZS5zb3J0RXhwcmVzc2lvbltpXVswXSA9PT0gZXhwclswXSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCAkc2NvcGUuc29ydEV4cHJlc3Npb25baV1bMl0gKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5yZW1vdmVDbGFzcyggJ3RhYmxlc29ydC1kZXNjJyApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuYWRkQ2xhc3MoICd0YWJsZXNvcnQtYXNjJyApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5zb3J0RXhwcmVzc2lvbltpXVsyXSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnJlbW92ZUNsYXNzKCAndGFibGVzb3J0LWFzYycgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmFkZENsYXNzKCAndGFibGVzb3J0LWRlc2MnICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNvcnRFeHByZXNzaW9uW2ldWzJdID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRvZ2dsZV9vcmRlciA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYoICF0b2dnbGVfb3JkZXIgKSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuYWRkQ2xhc3MoICd0YWJsZXNvcnQtYXNjJyApO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc29ydEV4cHJlc3Npb24ucHVzaCggZXhwciApO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICRzY29wZS4kZW1pdCggJ3RhYmxlc29ydDpzb3J0T3JkZXInLCAkc2NvcGUuc29ydEV4cHJlc3Npb24ubWFwKGZ1bmN0aW9uIChhKSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBhWzNdLFxuICAgICAgICAgICAgICAgICAgICBvcmRlcjogYVsyXVxuICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHRoaXMuc2V0VHJhY2tCeSA9IGZ1bmN0aW9uKCB0cmFja0J5ICkge1xuICAgICAgICAgICAgICAgICRzY29wZS50cmFja0J5ID0gdHJhY2tCeTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHRoaXMucmVnaXN0ZXJIZWFkaW5nID0gZnVuY3Rpb24oIGhlYWRpbmdlbGVtZW50ICkge1xuICAgICAgICAgICAgICAgICRzY29wZS5oZWFkaW5ncy5wdXNoKCBoZWFkaW5nZWxlbWVudCApO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdGhpcy5hZGRGaWx0ZXJGaWVsZCA9IGZ1bmN0aW9uKCBzb3J0ZXhwciwgZWxlbWVudCApIHtcbiAgICAgICAgICAgICAgICB2YXIgZXhwciA9IHBhcnNlX3NvcnRleHByKCBzb3J0ZXhwciApO1xuICAgICAgICAgICAgICAgICRzY29wZS5maWx0ZXJpbmcuZmlsdGVyRmllbGRzLnB1c2goIGV4cHIgKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHRoaXMuc2V0QXJyYXlFeHByID0gZnVuY3Rpb24oIGRhdGFBcnJheUV4cCApIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuaXRlbXNBcnJheUV4cHJlc3Npb24gPSBkYXRhQXJyYXlFeHA7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XSxcbiAgICAgICAgbGluazogZnVuY3Rpb24oJHNjb3BlLCAkZWxlbWVudCwgJGF0dHJzLCB0c1dyYXBwZXJDdHJsKSB7XG5cbiAgICAgICAgICAgIGlmKCAkYXR0cnMudHNJdGVtTmFtZSApIHtcbiAgICAgICAgICAgICAgICB2YXIgb3JpZ2luYWxOb0RhdGFUZXh0ID0gJ05vICcgKyAkc2NvcGUuaXRlbU5hbWVQbHVyYWw7XG5cbiAgICAgICAgICAgICAgICAvL2lmIHRoZSB0YWJsZSBhdHRyaWJ1dGVzIGhhcyBhbiBpdGVtIG5hbWUgb24gaXQsIHRoaXMgdGFrZXMgcHJpb3JpdHlcbiAgICAgICAgICAgICAgICAkc2NvcGUuaXRlbU5hbWVTaW5ndWxhciA9ICRhdHRycy50c0l0ZW1OYW1lO1xuXG4gICAgICAgICAgICAgICAgaWYoICRhdHRycy50c0l0ZW1OYW1lUGx1cmFsICkge1xuICAgICAgICAgICAgICAgICAgICAvL2lmIGEgcGx1cmFsIG5hbWUgd2FzIHNwZWNpZmllZCwgdXNlIHRoYXRcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLml0ZW1OYW1lUGx1cmFsID0gJGF0dHJzLnRzSXRlbU5hbWVQbHVyYWw7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy9vdGhlcndpc2UganVzdCBhZGQgJ3MnIHRvIHRoZSBzaW5ndWxhciBuYW1lXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5pdGVtTmFtZVBsdXJhbCA9ICRhdHRycy50c0l0ZW1OYW1lICsgJ3MnO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmKCAhJGF0dHJzLnRzTm9EYXRhVGV4dCAmJiAkc2NvcGUubm9EYXRhVGV4dCA9PT0gb3JpZ2luYWxOb0RhdGFUZXh0ICkge1xuICAgICAgICAgICAgICAgICAgICAvL0lmIHRoZSBub0RhdGFUZXh0IHdhcyBOT1Qgc3BlY2lmaWVkIEFORCBpdCdzIGluIHRoZSBzYW1lICdObyBJVEVNUycgZm9ybWF0IGFzIHRoZSBkZWZhdWx0ICwgdXBkYXRlIGl0IHRvIGNvbnRhaW4gdGhlIG5ldyBpdGVtIG5hbWVcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm5vRGF0YVRleHQgPSAnTm8gJyArICRzY29wZS5pdGVtTmFtZVBsdXJhbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmKCAkYXR0cnMudHNOb0RhdGFUZXh0ICkge1xuICAgICAgICAgICAgICAgIC8vSWYgdGhlIG5vRGF0YVRleHQgd2FzIHNwZWNpZmllZCwgdXBkYXRlIGl0XG4gICAgICAgICAgICAgICAgJHNjb3BlLm5vRGF0YVRleHQgPSAkYXR0cnMudHNOb0RhdGFUZXh0O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiggJGF0dHJzLnRzV3JhcHBpbmdFbGVtZW50Q2xhc3MgKSB7XG4gICAgICAgICAgICAgICAgLy9JZiB0aGUgd3JhcHBpbmdFbGVtZW50Q2xhc3Mgd2FzIHNwZWNpZmllZCwgdXBkYXRlIGl0XG4gICAgICAgICAgICAgICAgJHNjb3BlLndyYXBwaW5nRWxlbWVudENsYXNzID0gJGF0dHJzLnRzV3JhcHBpbmdFbGVtZW50Q2xhc3M7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vbG9jYWwgYXR0cmlidXRlIHVzYWdlcyBvZiB0aGUgcGFnaW5hdGlvbi9maWx0ZXJpbmcgb3B0aW9ucyB3aWxsIG92ZXJyaWRlIHRoZSBnbG9iYWwgY29uZmlnXG4gICAgICAgICAgICBpZiggJGF0dHJzLnRzUGVyUGFnZU9wdGlvbnMgKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnBhZ2luYXRpb24ucGVyUGFnZU9wdGlvbnMgPSAkc2NvcGUuJGV2YWwoJGF0dHJzLnRzUGVyUGFnZU9wdGlvbnMpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiggJGF0dHJzLnRzUGVyUGFnZURlZmF1bHQgKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRlZmF1bHRQZXJQYWdlID0gJHNjb3BlLiRldmFsKCRhdHRycy50c1BlclBhZ2VEZWZhdWx0KTtcbiAgICAgICAgICAgICAgICBpZiggIWlzTmFOKGRlZmF1bHRQZXJQYWdlKSApIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnBhZ2luYXRpb24ucGVyUGFnZSA9IGRlZmF1bHRQZXJQYWdlO1xuICAgICAgICAgICAgICAgICAgICBpZiggJHNjb3BlLnBhZ2luYXRpb24ucGVyUGFnZU9wdGlvbnMuaW5kZXhPZigkc2NvcGUucGFnaW5hdGlvbi5wZXJQYWdlKSA9PT0gLTEgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL0lmIGEgZGVmYXVsdCBwZXItcGFnZSBvcHRpb24gd2FzIGFkZGVkIHRoYXQgaXNuJ3QgaW4gdGhlIGFycmF5LCBhZGQgaXQgYW5kIHNvcnQgdGhlIGFycmF5XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUucGFnaW5hdGlvbi5wZXJQYWdlT3B0aW9ucy5wdXNoKCRzY29wZS5wYWdpbmF0aW9uLnBlclBhZ2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnBhZ2luYXRpb24ucGVyUGFnZU9wdGlvbnMuc29ydChmdW5jdGlvbiAoYSxiKSB7cmV0dXJuIGEgLSBiO30pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiggJGF0dHJzLnRzRmlsdGVyRmllbGRzICkge1xuICAgICAgICAgICAgICAgIHZhciBmaWx0ZXJGaWVsZHMgPSAkYXR0cnMudHNGaWx0ZXJGaWVsZHMuc3BsaXQoJywnKVxuICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtICYmIGl0ZW0udHJpbSgpICE9PSAnJztcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZm9yKCB2YXIgaT0wOyBpPGZpbHRlckZpZWxkcy5sZW5ndGg7IGk9aSsxICkge1xuICAgICAgICAgICAgICAgICAgICB0c1dyYXBwZXJDdHJsLmFkZEZpbHRlckZpZWxkKGZpbHRlckZpZWxkc1tpXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgJGZpbHRlckh0bWw7XG4gICAgICAgICAgICBpZiggJGF0dHJzLnRzRGlzcGxheUZpbHRlcmluZyAhPT0gJ2ZhbHNlJyAmJiAkc2NvcGUuZmlsdGVyaW5nLnRlbXBsYXRlICE9PSAnJyAmJiAkc2NvcGUuZmlsdGVyaW5nLmZpbHRlckZpZWxkcy5sZW5ndGg+MCApIHtcbiAgICAgICAgICAgICAgICB2YXIgZmlsdGVyU3RyaW5nID0gcmVwbGFjZVRlbXBsYXRlVG9rZW5zKCRzY29wZSwgJHNjb3BlLmZpbHRlcmluZy50ZW1wbGF0ZSk7XG4gICAgICAgICAgICAgICAgJGZpbHRlckh0bWwgPSAkY29tcGlsZShmaWx0ZXJTdHJpbmcpKCRzY29wZSk7XG4gICAgICAgICAgICAgICAgLy9BZGQgZmlsdGVyaW5nIEhUTUwgQkVGT1JFIHRoZSB0YWJsZVxuICAgICAgICAgICAgICAgICRlbGVtZW50LnBhcmVudCgpWzBdLmluc2VydEJlZm9yZSgkZmlsdGVySHRtbFswXSwgJGVsZW1lbnRbMF0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiggJGF0dHJzLnRzRmlsdGVyRnVuY3Rpb24gKSB7XG4gICAgICAgICAgICAgICAgLy9pZiB0aGUgdGFibGUgYXR0cmlidXRlcyBoYXMgYSBmaWx0ZXIgZnVuY3Rpb24gb24gaXQsIHRoaXMgdGFrZXMgcHJpb3JpdHlcbiAgICAgICAgICAgICAgICAkc2NvcGUuZmlsdGVyaW5nLmZpbHRlckZ1bmN0aW9uID0gJHNjb3BlLiRldmFsKCRhdHRycy50c0ZpbHRlckZ1bmN0aW9uKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYoICFhbmd1bGFyLmlzRnVuY3Rpb24oJHNjb3BlLmZpbHRlcmluZy5maWx0ZXJGdW5jdGlvbikgKSB7XG4gICAgICAgICAgICAgICAgLy9ObyBjdXN0b20gZmlsdGVyIHdhcyBwcm92aWRlZC4uLlxuICAgICAgICAgICAgICAgIGlmKCAkc2NvcGUuZmlsdGVyaW5nLmZpbHRlckZpZWxkcy5sZW5ndGg9PT0wICkge1xuICAgICAgICAgICAgICAgICAgICAvL1RoZXJlIGFyZSBubyBmaWx0ZXIgZmllbGRzLCBzbyBhbHdheXMgcmV0dXJuIGV2ZXJ5dGhpbmdcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmZpbHRlcmluZy5maWx0ZXJGdW5jdGlvbiA9IGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vVGhpcyBpcyB0aGUgZGVmYXVsdCBmaWx0ZXIgZnVuY3Rpb24uIEl0IGRvZXMgYSBsb3dlcmNhc2Ugc3RyaW5nIG1hdGNoXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5maWx0ZXJpbmcuZmlsdGVyRnVuY3Rpb24gPSBmdW5jdGlvbihpdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2hvdWxkSW5jbHVkZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yKCB2YXIgaT0wOyBpPCRzY29wZS5maWx0ZXJpbmcuZmlsdGVyRmllbGRzLmxlbmd0aDsgaT1pKzEgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoICFzaG91bGRJbmNsdWRlICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3RyID0gKCRzY29wZS5maWx0ZXJpbmcuZmlsdGVyRmllbGRzW2ldWzBdKGl0ZW0pIHx8ICcnKS50b1N0cmluZygpLnRvTG93ZXJDYXNlKCk7IC8vcGFyc2UgdGhlIGl0ZW0ncyBwcm9wZXJ0eSB1c2luZyB0aGUgYHRzLWNyaXRlcmlhYCB2YWx1ZSAmIGZpbHRlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG91bGRJbmNsdWRlID0gc3RyLmluZGV4T2YoJHNjb3BlLmZpbHRlcmluZy5maWx0ZXJTdHJpbmcudG9Mb3dlckNhc2UoKSkgPiAtMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2hvdWxkSW5jbHVkZTtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICRzY29wZS5maWx0ZXJMaW1pdEZ1biA9IGZ1bmN0aW9uKGFycmF5KSB7XG4gICAgICAgICAgICAgICAgaWYoICEkYXR0cnMudHNGaWx0ZXJGdW5jdGlvbiAmJiAkc2NvcGUuZmlsdGVyaW5nLmZpbHRlclN0cmluZyA9PT0gJycgKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vUmV0dXJuIHVuZmlsdGVyZWQgd2hlbiBOT1QgdXNpbmcgYSBjdXN0b20gZmlsdGVyIGZ1bmN0aW9uIGFuZCB3aGVuIG5vdGhpbmcgaXMgYmVpbmcgc2VhcmNoZWRcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmZpbHRlcmluZy5maWx0ZXJlZENvdW50ID0gYXJyYXkubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXJyYXk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBmaWx0ZXJlZEFyciA9IGFycmF5LmZpbHRlcigkc2NvcGUuZmlsdGVyaW5nLmZpbHRlckZ1bmN0aW9uKTtcbiAgICAgICAgICAgICAgICAkc2NvcGUuZmlsdGVyaW5nLmZpbHRlcmVkQ291bnQgPSBmaWx0ZXJlZEFyci5sZW5ndGg7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZpbHRlcmVkQXJyO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgJHNjb3BlLnNvcnRGdW4gPSBmdW5jdGlvbiggYSwgYiApIHtcbiAgICAgICAgICAgICAgICB2YXIgaSwgYXZhbCwgYnZhbCwgZGVzY2VuZGluZywgZmlsdGVyRnVuLCBjb21wUmVzdWx0O1xuICAgICAgICAgICAgICAgIGZvciggaT0wOyBpPCRzY29wZS5zb3J0RXhwcmVzc2lvbi5sZW5ndGg7IGk9aSsxICkge1xuICAgICAgICAgICAgICAgICAgICBhdmFsID0gJHNjb3BlLnNvcnRFeHByZXNzaW9uW2ldWzBdKGEpO1xuICAgICAgICAgICAgICAgICAgICBidmFsID0gJHNjb3BlLnNvcnRFeHByZXNzaW9uW2ldWzBdKGIpO1xuICAgICAgICAgICAgICAgICAgICBmaWx0ZXJGdW4gPSBiWyRzY29wZS5zb3J0RXhwcmVzc2lvbltpXVsxXV07XG4gICAgICAgICAgICAgICAgICAgIGlmKCBmaWx0ZXJGdW4gKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhdmFsID0gZmlsdGVyRnVuKCBhdmFsICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBidmFsID0gZmlsdGVyRnVuKCBidmFsICk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYoIGF2YWwgPT09IHVuZGVmaW5lZCB8fCBhdmFsID09PSBudWxsICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXZhbCA9ICcnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmKCBidmFsID09PSB1bmRlZmluZWQgfHwgYnZhbCA9PT0gbnVsbCApIHtcbiAgICAgICAgICAgICAgICAgICAgYnZhbCA9ICcnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGRlc2NlbmRpbmcgPSAkc2NvcGUuc29ydEV4cHJlc3Npb25baV1bMl07XG4gICAgICAgICAgICAgICAgICAgIGNvbXBSZXN1bHQgPSAoJHNjb3BlLnNvcnRFeHByZXNzaW9uW2ldWzRdIHx8IGRlZmF1bHRDb21wYXJlcikoYXZhbCwgYnZhbCk7XG4gICAgICAgICAgICAgICAgICAgIGlmKCBjb21wUmVzdWx0ID09PSAxICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRlc2NlbmRpbmcgPyAtMSA6IDE7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiggY29tcFJlc3VsdCA9PT0gLTEgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGVzY2VuZGluZyA/IDEgOiAtMTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIEFsbCB0aGUgc29ydCBmaWVsZHMgd2VyZSBlcXVhbC4gSWYgdGhlcmUgaXMgYSAndHJhY2sgYnknJyBleHByZXNzaW9uLFxuICAgICAgICAgICAgICAgIC8vIHVzZSB0aGF0IGFzIGEgdGllYnJlYWtlciB0byBtYWtlIHRoZSBzb3J0IHJlc3VsdCBzdGFibGUuXG4gICAgICAgICAgICAgICAgaWYoICRzY29wZS50cmFja0J5ICkge1xuICAgICAgICAgICAgICAgICAgICBhdmFsID0gYVskc2NvcGUudHJhY2tCeV07XG4gICAgICAgICAgICAgICAgICAgIGJ2YWwgPSBiWyRzY29wZS50cmFja0J5XTtcbiAgICAgICAgICAgICAgICAgICAgaWYoIGF2YWwgPT09IHVuZGVmaW5lZCB8fCBhdmFsID09PSBudWxsICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXZhbCA9ICcnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmKCBidmFsID09PSB1bmRlZmluZWQgfHwgYnZhbCA9PT0gbnVsbCApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ2YWwgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb21wUmVzdWx0ID0gZGVmYXVsdENvbXBhcmVyKGF2YWwsIGJ2YWwpO1xuICAgICAgICAgICAgICAgICAgICBpZiggY29tcFJlc3VsdCA9PT0gMSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkZXNjZW5kaW5nID8gLTEgOiAxO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYoIGNvbXBSZXN1bHQgPT09IC0xICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRlc2NlbmRpbmcgPyAxIDogLTE7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAkc2NvcGUucGFnZUxpbWl0RnVuID0gZnVuY3Rpb24oYXJyYXkpIHtcbiAgICAgICAgICAgICAgICBpZiggJGF0dHJzLnRzRGlzcGxheVBhZ2luYXRpb24gPT09ICdmYWxzZScgfHwgJHNjb3BlLnBhZ2luYXRpb24udGVtcGxhdGUgPT09ICcnKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vcGFnaW5hdGlvbiBpcyBkaXNhYmxlZCBvbiB0aGlzIHRhYmxlIG9yIHRoZXJlIGlzIG5vIHRlbXBsYXRlLCBzbyByZXR1cm4gZXZlcnl0aGluZ1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXJyYXk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vT25seSByZXR1cm4gdGhlIGl0ZW1zIHRoYXQgYXJlIGluIHRoZSBjb3JyZWN0IGluZGV4IHJhbmdlIGZvciB0aGUgY3VycmVudGx5IHNlbGVjdGVkIHBhZ2VcbiAgICAgICAgICAgICAgICB2YXIgYmVnaW4gPSAoJHNjb3BlLnBhZ2luYXRpb24uY3VycmVudFBhZ2UgLSAxKSAqICRzY29wZS5wYWdpbmF0aW9uLnBlclBhZ2U7XG4gICAgICAgICAgICAgICAgdmFyIGVuZCA9ICRzY29wZS5wYWdpbmF0aW9uLmN1cnJlbnRQYWdlICogJHNjb3BlLnBhZ2luYXRpb24ucGVyUGFnZTtcbiAgICAgICAgICAgICAgICB2YXIgZmluYWw9W107XG4gICAgICAgICAgICAgICAgZm9yKCB2YXIgaT0wOyBpIDwgYXJyYXkubGVuZ3RoOyBpKysgKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmKCBpID49IGJlZ2luICYmIGkgPCBlbmQgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmaW5hbC5wdXNoKGFycmF5W2ldKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZmluYWw7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB2YXIgJHBhZ2luYXRpb25IdG1sO1xuICAgICAgICAgICAgaWYoICRhdHRycy50c0Rpc3BsYXlQYWdpbmF0aW9uICE9PSAnZmFsc2UnICYmICRzY29wZS5wYWdpbmF0aW9uLnRlbXBsYXRlICE9PSAnJyApIHtcbiAgICAgICAgICAgICAgICB2YXIgcGFnZXJTdHJpbmcgPSByZXBsYWNlVGVtcGxhdGVUb2tlbnMoJHNjb3BlLCAkc2NvcGUucGFnaW5hdGlvbi50ZW1wbGF0ZSk7XG4gICAgICAgICAgICAgICAgJHBhZ2luYXRpb25IdG1sID0gJGNvbXBpbGUocGFnZXJTdHJpbmcpKCRzY29wZSk7XG4gICAgICAgICAgICAgICAgLy9BZGQgcGFnaW5hdGlvbiBIVE1MIEFGVEVSIHRoZSB0YWJsZVxuICAgICAgICAgICAgICAgICRlbGVtZW50LmFmdGVyKCRwYWdpbmF0aW9uSHRtbCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICB2YXIgJHdyYXBwaW5nRWxlbWVudDtcbiAgICAgICAgICAgIGlmKCAkc2NvcGUud3JhcHBpbmdFbGVtZW50Q2xhc3MgJiYgJHNjb3BlLndyYXBwaW5nRWxlbWVudENsYXNzICE9PSBcIlwiICkge1xuICAgICAgICAgICAgICAgIC8vVGhpcyBzaG91bGQgaGFwcGVuIEFGVEVSIHRoZSBmaWx0ZXJpbmcgYW5kIHBhZ2luYXRpb24gSFRNTCBhcmUgc2V0XG4gICAgICAgICAgICAgICAgJHdyYXBwaW5nRWxlbWVudCA9ICRlbGVtZW50LndyYXAoXCI8ZGl2IGNsYXNzPSdcIisgJHNjb3BlLndyYXBwaW5nRWxlbWVudENsYXNzICtcIicgLz5cIik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmKCAkYXR0cnMudHNHZXRUYWJsZURhdGFGdW5jdGlvbiApIHtcbiAgICAgICAgICAgICAgICB2YXIgZ2V0dGVyID0gJHBhcnNlKCRhdHRycy50c0dldFRhYmxlRGF0YUZ1bmN0aW9uKTtcbiAgICAgICAgICAgICAgICB2YXIgc2V0dGVyID0gZ2V0dGVyLmFzc2lnbjtcblxuICAgICAgICAgICAgICAgIC8vSWYgdGhpcyBhdHRyaWJ1dGUgaGFzIGEgdmFsdWUsIHRoZW4gd2Ugd2FudCB0byB0dXJuIGl0IGludG8gYSBmdW5jdGlvbiBvbiB0aGUgcGFyZW50IHNjb3BlXG4gICAgICAgICAgICAgICAgLy9zbyB0aGF0IGl0IGNhbiBiZSBwYXNzZWQgaW50byBvdGhlciBmdW5jdGlvbnMgYW5kIHJ1biBvbiB0aGUgcGFyZW50IGNvbnRyb2xsZXJzIGFzIG5lZWRlZFxuICAgICAgICAgICAgICAgIHZhciBmbiAgPSBmdW5jdGlvbiggc2hvdWxkQXBwbHlTb3J0aW5nLCBzaG91bGRBcHBseUZpbHRlcmluZywgbGltaXRUb0N1cnJlbnRQYWdlT25seSApIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFyciA9ICRwYXJzZSgkc2NvcGUuaXRlbXNBcnJheUV4cHJlc3Npb24pKCRzY29wZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYoIHNob3VsZEFwcGx5U29ydGluZyApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyciA9IGFyci5zb3J0KCRzY29wZS5zb3J0RnVuKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmKCBzaG91bGRBcHBseUZpbHRlcmluZyApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyciA9ICRzY29wZS5maWx0ZXJMaW1pdEZ1bihhcnIpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYoIGxpbWl0VG9DdXJyZW50UGFnZU9ubHkgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcnIgPSAkc2NvcGUucGFnZUxpbWl0RnVuKGFycik7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXJyO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBzZXR0ZXIoJHNjb3BlLiRwYXJlbnQsIGZuKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgJHNjb3BlLiRvbiggJyRkZXN0cm95JywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgLy9XaGVuIHRoZSBkaXJlY3RpdmUgaXMgZGVzdHJveWVkLCBhbHNvIHJlbW92ZSB0aGUgZmlsdGVyICYgcGFnaW5hdGlvbiBIVE1MXG4gICAgICAgICAgICAgICAgaWYoICRmaWx0ZXJIdG1sICkge1xuICAgICAgICAgICAgICAgICAgICAkZmlsdGVySHRtbC5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYoICRwYWdpbmF0aW9uSHRtbCApIHtcbiAgICAgICAgICAgICAgICAgICAgJHBhZ2luYXRpb25IdG1sLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiggJHdyYXBwaW5nRWxlbWVudCApIHtcbiAgICAgICAgICAgICAgICAgICAgLy91bi13cmFwIHRoZSB0YWJsZSBmcm9tIHRoaXMgZWxlbWVudFxuICAgICAgICAgICAgICAgICAgICAkd3JhcHBpbmdFbGVtZW50LnJlcGxhY2VXaXRoKCRlbGVtZW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG59XSk7XG5cbnRhYmxlU29ydE1vZHVsZS5kaXJlY3RpdmUoICd0c0NyaXRlcmlhJywgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVxdWlyZTogXCJedHNXcmFwcGVyXCIsXG4gICAgICAgIHNjb3BlOiB7XG4gICAgICAgICAgdHNPcmRlckJ5OiAnPSdcbiAgICAgICAgfSxcbiAgICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCB0c1dyYXBwZXJDdHJsKSB7XG4gICAgICAgICAgICB2YXIgY2xpY2tpbmdDYWxsYmFjayA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgc2NvcGUuJGFwcGx5KCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYoIGV2ZW50LnNoaWZ0S2V5ICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHNXcmFwcGVyQ3RybC5hZGRTb3J0RmllbGQoYXR0cnMudHNDcml0ZXJpYSwgZWxlbWVudCwgYXR0cnMudHNOYW1lLCBzY29wZS50c09yZGVyQnkpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHNXcmFwcGVyQ3RybC5zZXRTb3J0RmllbGQoYXR0cnMudHNDcml0ZXJpYSwgZWxlbWVudCwgYXR0cnMudHNOYW1lLCBzY29wZS50c09yZGVyQnkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGVsZW1lbnQuYmluZCggJ2NsaWNrJywgY2xpY2tpbmdDYWxsYmFjayApO1xuICAgICAgICAgICAgZWxlbWVudC5hZGRDbGFzcyggJ3RhYmxlc29ydC1zb3J0YWJsZScgKTtcbiAgICAgICAgICAgIGlmKCAndHNEZWZhdWx0JyBpbiBhdHRycyAmJiBhdHRycy50c0RlZmF1bHQgIT09ICcwJyApIHtcbiAgICAgICAgICAgICAgICB0c1dyYXBwZXJDdHJsLmFkZFNvcnRGaWVsZCggYXR0cnMudHNDcml0ZXJpYSwgZWxlbWVudCwgYXR0cnMudHNOYW1lLCBzY29wZS50c09yZGVyQnkgKTtcbiAgICAgICAgICAgICAgICBpZiggYXR0cnMudHNEZWZhdWx0ID09PSAnZGVzY2VuZGluZycgKSB7XG4gICAgICAgICAgICAgICAgICAgIHRzV3JhcHBlckN0cmwuYWRkU29ydEZpZWxkKCBhdHRycy50c0NyaXRlcmlhLCBlbGVtZW50LCBhdHRycy50c05hbWUsIHNjb3BlLnRzT3JkZXJCeSApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKCAndHNGaWx0ZXInIGluIGF0dHJzKSB7XG4gICAgICAgICAgICAgICAgdHNXcmFwcGVyQ3RybC5hZGRGaWx0ZXJGaWVsZCggYXR0cnMudHNDcml0ZXJpYSwgZWxlbWVudCApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdHNXcmFwcGVyQ3RybC5yZWdpc3RlckhlYWRpbmcoIGVsZW1lbnQgKTtcbiAgICAgICAgfVxuICAgIH07XG59KTtcblxudGFibGVTb3J0TW9kdWxlLmRpcmVjdGl2ZSggJ3RzUmVwZWF0JywgWyckY29tcGlsZScsICckaW50ZXJwb2xhdGUnLCBmdW5jdGlvbigkY29tcGlsZSwgJGludGVycG9sYXRlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdGVybWluYWw6IHRydWUsXG4gICAgICAgIG11bHRpRWxlbWVudDogdHJ1ZSxcbiAgICAgICAgcmVxdWlyZTogJ150c1dyYXBwZXInLFxuICAgICAgICBwcmlvcml0eTogMTAwMDAwMCxcbiAgICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCB0c1dyYXBwZXJDdHJsKSB7XG4gICAgICAgICAgICB2YXIgcmVwZWF0QXR0cnMgPSBbJ25nLXJlcGVhdCcsICdkYXRhLW5nLXJlcGVhdCcsICduZy1yZXBlYXQtc3RhcnQnLCAnZGF0YS1uZy1yZXBlYXQtc3RhcnQnXTtcbiAgICAgICAgICAgIHZhciBuZ1JlcGVhdERpcmVjdGl2ZSA9IHJlcGVhdEF0dHJzWzBdO1xuICAgICAgICAgICAgdmFyIHRzUmVwZWF0RGlyZWN0aXZlID0gJ3RzLXJlcGVhdCc7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlcGVhdEF0dHJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGFuZ3VsYXIuaXNEZWZpbmVkKGVsZW1lbnQuYXR0cihyZXBlYXRBdHRyc1tpXSkpKSB7XG4gICAgICAgICAgICAgICAgICAgIG5nUmVwZWF0RGlyZWN0aXZlID0gcmVwZWF0QXR0cnNbaV07XG4gICAgICAgICAgICAgICAgICAgIHRzUmVwZWF0RGlyZWN0aXZlID0gbmdSZXBlYXREaXJlY3RpdmUucmVwbGFjZSgvXihkYXRhLSk/bmcvLCAnJDF0cycpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciB0c0V4cHIgPSAndGFibGVzb3J0T3JkZXJCeTpzb3J0RnVuIHwgdGFibGVzb3J0TGltaXQ6ZmlsdGVyTGltaXRGdW4gfCB0YWJsZXNvcnRMaW1pdDpwYWdlTGltaXRGdW4nO1xuICAgICAgICAgICAgdmFyIHJlcGVhdEV4cHIgPSBlbGVtZW50LmF0dHIobmdSZXBlYXREaXJlY3RpdmUpO1xuICAgICAgICAgICAgdmFyIHJlcGVhdEV4cHJSZWdleCA9IC9eXFxzKihbXFxzXFxTXSs/KVxccytpblxccysoW1xcc1xcU10rPykoXFxzK3RyYWNrXFxzK2J5XFxzK1tcXHNcXFNdKz8pP1xccyokLztcbiAgICAgICAgICAgIHZhciB0cmFja0J5TWF0Y2ggPSByZXBlYXRFeHByLm1hdGNoKC9cXHMrdHJhY2tcXHMrYnlcXHMrXFxTKz9cXC4oXFxTKykvKTtcbiAgICAgICAgICAgIHZhciByZXBlYXRJbk1hdGNoID0gcmVwZWF0RXhwci5tYXRjaChyZXBlYXRFeHByUmVnZXgpO1xuICAgICAgICAgICAgaWYgKHRyYWNrQnlNYXRjaCkge1xuICAgICAgICAgICAgICAgIHRzV3JhcHBlckN0cmwuc2V0VHJhY2tCeSh0cmFja0J5TWF0Y2hbMV0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvL0xpbWl0IFNvcnQgdGhlIHJlc3VsdHMsIHRoZW4gbGltaXQgdGhlbSB0byBvbmx5IGluY2x1ZGUgd2hhdCBtYXRjaGVzIHRoZSBmaWx0ZXIsIHRoZW4gb25seSB3aGF0J3Mgb24gdGhlIGN1cnJlbnQgcGFnZVxuICAgICAgICAgICAgaWYgKHJlcGVhdEV4cHIuc2VhcmNoKC90YWJsZXNvcnQvKSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICByZXBlYXRFeHByID0gcmVwZWF0RXhwci5yZXBsYWNlKC90YWJsZXNvcnQvLCB0c0V4cHIpO1xuICAgICAgICAgICAgICAgIGlmICh0cmFja0J5TWF0Y2gpIHtcbiAgICAgICAgICAgICAgICAgICAgLy9Nb3ZlIHRoZSAndHJhY2sgYnknJyBzdGF0ZW1lbnQgdG8gdGhlIGVuZFxuICAgICAgICAgICAgICAgICAgICByZXBlYXRFeHByID0gcmVwZWF0RXhwci5yZXBsYWNlKHRyYWNrQnlNYXRjaFswXSwgJycpICsgdHJhY2tCeU1hdGNoWzBdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVwZWF0RXhwciA9IHJlcGVhdEV4cHIucmVwbGFjZShyZXBlYXRFeHByUmVnZXgsICckMSBpbiAkMiB8ICcgKyB0c0V4cHIgKyAnJDMnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGFuZ3VsYXIuaXNVbmRlZmluZWQoYXR0cnMudHNIaWRlTm9EYXRhKSkge1xuICAgICAgICAgICAgICAgIHZhciBzdGFydFN5bSA9ICRpbnRlcnBvbGF0ZS5zdGFydFN5bWJvbCgpO1xuICAgICAgICAgICAgICAgIHZhciBlbmRTeW0gPSAkaW50ZXJwb2xhdGUuZW5kU3ltYm9sKCk7XG5cbiAgICAgICAgICAgICAgICB2YXIgbm9EYXRhUm93ID0gYW5ndWxhci5lbGVtZW50KGVsZW1lbnRbMF0pLmNsb25lKCk7XG4gICAgICAgICAgICAgICAgbm9EYXRhUm93LnJlbW92ZUF0dHIobmdSZXBlYXREaXJlY3RpdmUpO1xuICAgICAgICAgICAgICAgIG5vRGF0YVJvdy5yZW1vdmVBdHRyKHRzUmVwZWF0RGlyZWN0aXZlKTtcbiAgICAgICAgICAgICAgICBub0RhdGFSb3cuYWRkQ2xhc3MoICdzaG93SWZMYXN0JyApO1xuICAgICAgICAgICAgICAgIG5vRGF0YVJvdy5jaGlsZHJlbigpLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgIG5vRGF0YVJvdy5hcHBlbmQoICc8dGQgY29sc3Bhbj1cIicgKyBlbGVtZW50WzBdLmNoaWxkRWxlbWVudENvdW50ICsgJ1wiPicgKyBzdGFydFN5bSArICdub0RhdGFUZXh0JyArIGVuZFN5bSArICc8L3RkPicgKTtcbiAgICAgICAgICAgICAgICBub0RhdGFSb3cgPSAkY29tcGlsZShub0RhdGFSb3cpKHNjb3BlKTtcbiAgICAgICAgICAgICAgICBlbGVtZW50LnBhcmVudCgpLnByZXBlbmQobm9EYXRhUm93KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy9wYXNzIHRoZSBgaXRlbXNMaXN0YCBmcm9tIGBpdGVtIGluIGl0ZW1zTGlzdGAgdG8gdGhlIG1hc3RlciBkaXJlY3RpdmUgYXMgYSBzdHJpbmcgc28gaXQgY2FuIGJlIHVzZWQgaW4gZXhwcmVzc2lvbnNcbiAgICAgICAgICAgIHRzV3JhcHBlckN0cmwuc2V0QXJyYXlFeHByKHJlcGVhdEluTWF0Y2hbMl0pO1xuXG4gICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoZWxlbWVudFswXSkuYXR0cihuZ1JlcGVhdERpcmVjdGl2ZSwgcmVwZWF0RXhwcik7XG4gICAgICAgICAgICAkY29tcGlsZShlbGVtZW50LCBudWxsLCAxMDAwMDAwKShzY29wZSk7XG4gICAgICAgIH1cbiAgICB9O1xufV0pO1xuXG50YWJsZVNvcnRNb2R1bGUuZmlsdGVyKCAndGFibGVzb3J0TGltaXQnLCBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oYXJyYXksIGxpbWl0RnVuKSB7XG4gICAgaWYoIWFycmF5KSByZXR1cm47XG4gICAgcmV0dXJuIGxpbWl0RnVuKGFycmF5KTtcbiAgICB9O1xufSApO1xuXG50YWJsZVNvcnRNb2R1bGUuZmlsdGVyKCAndGFibGVzb3J0T3JkZXJCeScsIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBmdW5jdGlvbihhcnJheSwgc29ydGZ1biApIHtcbiAgICAgICAgaWYoIWFycmF5KSByZXR1cm47XG4gICAgICAgIHZhciBhcnJheUNvcHkgPSBhcnJheS5jb25jYXQoKTtcbiAgICAgICAgcmV0dXJuIGFycmF5Q29weS5zb3J0KCBzb3J0ZnVuICk7XG4gICAgfTtcbn0gKTtcblxudGFibGVTb3J0TW9kdWxlLmZpbHRlciggJ3BhcnNlSW50JywgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGlucHV0KSB7XG4gICAgICAgIHJldHVybiBwYXJzZUludCggaW5wdXQgKSB8fCBudWxsO1xuICAgIH07XG59ICk7XG5cbnRhYmxlU29ydE1vZHVsZS5maWx0ZXIoICdwYXJzZUZsb2F0JywgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGlucHV0KSB7XG4gICAgICAgIHJldHVybiBwYXJzZUZsb2F0KCBpbnB1dCApIHx8IG51bGw7XG4gICAgfTtcbn0gKTtcblxudGFibGVTb3J0TW9kdWxlLmZpbHRlciggJ3BhcnNlRGF0ZScsIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGlucHV0KSB7XG4gICAgICAgIHZhciB0aW1lc3RhbXAgPSBEYXRlLnBhcnNlKGlucHV0KTtcbiAgICAgICAgcmV0dXJuIGlzTmFOKHRpbWVzdGFtcCkgPyBudWxsIDogdGltZXN0YW1wO1xuICAgIH07XG59ICk7XG4iLCIndXNlIHN0cmljdCc7XG5cbmFuZ3VsYXIubW9kdWxlKCdwaWNhcmR5LmZvbnRhd2Vzb21lJywgW10pXG4gIC5kaXJlY3RpdmUoJ2ZhJywgZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB7XG4gICAgICByZXN0cmljdDogJ0UnLFxuICAgICAgdGVtcGxhdGU6ICc8c3BhbiBjbGFzcz1cImZhXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9zcGFuPicsXG4gICAgICByZXBsYWNlOiB0cnVlLFxuICAgICAgbGluazogZnVuY3Rpb24gKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xuXG4gICAgICAgIC8qKiogU1RSSU5HIEFUVFJTICoqKi9cbiAgICAgICAgLy8ga2VlcCBhIHN0YXRlIG9mIHRoZSBjdXJyZW50IGF0dHJzIHNvIHRoYXQgd2hlbiB0aGV5IGNoYW5nZSxcbiAgICAgICAgLy8gd2UgY2FuIHJlbW92ZSB0aGUgb2xkIGF0dHJzIGJlZm9yZSBhZGRpbmcgdGhlIG5ldyBvbmVzLlxuICAgICAgICB2YXIgY3VycmVudENsYXNzZXMgPSB7fTtcblxuICAgICAgICAvLyBnZW5lcmljIGZ1bmN0aW9uIHRvIGJpbmQgc3RyaW5nIGF0dHJzXG4gICAgICAgIGZ1bmN0aW9uIF9vYnNlcnZlU3RyaW5nQXR0ciAoYXR0ciwgYmFzZUNsYXNzKSB7XG4gICAgICAgICAgdmFyIGNsYXNzTmFtZTtcblxuICAgICAgICAgIGF0dHJzLiRvYnNlcnZlKGF0dHIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGJhc2VDbGFzcyA9IGJhc2VDbGFzcyB8fCAnZmEtJyArIGF0dHI7XG4gICAgICAgICAgICBlbGVtZW50LnJlbW92ZUNsYXNzKGN1cnJlbnRDbGFzc2VzW2F0dHJdKTtcbiAgICAgICAgICAgIGlmIChhdHRyc1thdHRyXSkge1xuICAgICAgICAgICAgICBjbGFzc05hbWUgPSBbYmFzZUNsYXNzLCBhdHRyc1thdHRyXV0uam9pbignLScpO1xuICAgICAgICAgICAgICBlbGVtZW50LmFkZENsYXNzKGNsYXNzTmFtZSk7XG4gICAgICAgICAgICAgIGN1cnJlbnRDbGFzc2VzW2F0dHJdID0gY2xhc3NOYW1lO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgX29ic2VydmVTdHJpbmdBdHRyKCduYW1lJywgJ2ZhJyk7XG4gICAgICAgIF9vYnNlcnZlU3RyaW5nQXR0cigncm90YXRlJyk7XG4gICAgICAgIF9vYnNlcnZlU3RyaW5nQXR0cignZmxpcCcpO1xuICAgICAgICBfb2JzZXJ2ZVN0cmluZ0F0dHIoJ3N0YWNrJyk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIHNpemUgY2FuIGJlIHBhc3NlZCBcImxhcmdlXCIgb3IgYW4gaW50ZWdlclxuICAgICAgICAgKi9cbiAgICAgICAgYXR0cnMuJG9ic2VydmUoJ3NpemUnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdmFyIGNsYXNzTmFtZTtcbiAgICAgICAgICBlbGVtZW50LnJlbW92ZUNsYXNzKGN1cnJlbnRDbGFzc2VzLnNpemUpO1xuXG4gICAgICAgICAgaWYgKGF0dHJzLnNpemUgPT09ICdsYXJnZScpIHtcbiAgICAgICAgICAgIGNsYXNzTmFtZSA9ICdmYS1sZyc7XG4gICAgICAgICAgfSBlbHNlIGlmICghaXNOYU4ocGFyc2VJbnQoYXR0cnMuc2l6ZSwgMTApKSkge1xuICAgICAgICAgICAgY2xhc3NOYW1lID0gJ2ZhLScgKyBhdHRycy5zaXplICsgJ3gnO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGVsZW1lbnQuYWRkQ2xhc3MoY2xhc3NOYW1lKTtcbiAgICAgICAgICBjdXJyZW50Q2xhc3Nlcy5zaXplID0gY2xhc3NOYW1lO1xuICAgICAgICB9KTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogc3RhY2sgY2FuIGJlIHBhc3NlZCBcImxhcmdlXCIgb3IgYW4gaW50ZWdlclxuICAgICAgICAgKi9cbiAgICAgICAgYXR0cnMuJG9ic2VydmUoJ3N0YWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHZhciBjbGFzc05hbWU7XG4gICAgICAgICAgZWxlbWVudC5yZW1vdmVDbGFzcyhjdXJyZW50Q2xhc3Nlcy5zdGFjayk7XG5cbiAgICAgICAgICBpZiAoYXR0cnMuc3RhY2sgPT09ICdsYXJnZScpIHtcbiAgICAgICAgICAgIGNsYXNzTmFtZSA9ICdmYS1zdGFjay1sZyc7XG4gICAgICAgICAgfSBlbHNlIGlmICghaXNOYU4ocGFyc2VJbnQoYXR0cnMuc3RhY2ssIDEwKSkpIHtcbiAgICAgICAgICAgIGNsYXNzTmFtZSA9ICdmYS1zdGFjay0nICsgYXR0cnMuc3RhY2sgKyAneCc7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZWxlbWVudC5hZGRDbGFzcyhjbGFzc05hbWUpO1xuICAgICAgICAgIGN1cnJlbnRDbGFzc2VzLnN0YWNrID0gY2xhc3NOYW1lO1xuICAgICAgICB9KTtcblxuICAgICAgICAvKioqIEJPT0xFQU4gQVRUUlMgKioqL1xuICAgICAgICAvLyBnZW5lcmljIGZ1bmN0aW9uIHRvIGJpbmQgYm9vbGVhbiBhdHRyc1xuICAgICAgICBmdW5jdGlvbiBfb2JzZXJ2ZUJvb2xlYW5BdHRyIChhdHRyLCBjbGFzc05hbWUpIHtcbiAgICAgICAgICB2YXIgdmFsdWU7XG5cbiAgICAgICAgICBhdHRycy4kb2JzZXJ2ZShhdHRyLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBjbGFzc05hbWUgPSBjbGFzc05hbWUgfHwgJ2ZhLScgKyBhdHRyO1xuICAgICAgICAgICAgdmFsdWUgPSBhdHRyIGluIGF0dHJzICYmIGF0dHJzW2F0dHJdICE9PSAnZmFsc2UnICYmIGF0dHJzW2F0dHJdICE9PSBmYWxzZTtcbiAgICAgICAgICAgIGVsZW1lbnQudG9nZ2xlQ2xhc3MoY2xhc3NOYW1lLCB2YWx1ZSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBfb2JzZXJ2ZUJvb2xlYW5BdHRyKCdib3JkZXInKTtcbiAgICAgICAgX29ic2VydmVCb29sZWFuQXR0cignZncnKTtcbiAgICAgICAgX29ic2VydmVCb29sZWFuQXR0cignaW52ZXJzZScpO1xuICAgICAgICBfb2JzZXJ2ZUJvb2xlYW5BdHRyKCdzcGluJyk7XG5cbiAgICAgICAgLyoqKiBDT05ESVRJT05BTCBBVFRSUyAqKiovXG4gICAgICAgICAgLy8gYXV0b21hdGljYWxseSBwb3B1bGF0ZSBmYS1saSBpZiBET00gc3RydWN0dXJlIGluZGljYXRlc1xuICAgICAgICBlbGVtZW50LnRvZ2dsZUNsYXNzKCdmYS1saScsXG4gICAgICAgICAgZWxlbWVudC5wYXJlbnQoKSAmJlxuICAgICAgICAgIGVsZW1lbnQucGFyZW50KCkucHJvcCgndGFnTmFtZScpID09PSAnTEknICYmXG4gICAgICAgICAgZWxlbWVudC5wYXJlbnQoKS5wYXJlbnQoKSAmJlxuICAgICAgICAgIGVsZW1lbnQucGFyZW50KCkucGFyZW50KCkuaGFzQ2xhc3MoJ2ZhLXVsJykgJiZcbiAgICAgICAgICBlbGVtZW50LnBhcmVudCgpLmNoaWxkcmVuKClbMF0gPT09IGVsZW1lbnRbMF0gJiZcbiAgICAgICAgICBhdHRycy5saXN0ICE9PSAnZmFsc2UnICYmXG4gICAgICAgICAgYXR0cnMubGlzdCAhPT0gZmFsc2VcbiAgICAgICAgKTtcblxuICAgICAgICBhdHRycy4kb2JzZXJ2ZSgnYWx0JywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHZhciBhbHRUZXh0ID0gYXR0cnMuYWx0LFxuICAgICAgICAgICAgICBhbHRFbGVtID0gZWxlbWVudC5uZXh0KCksXG4gICAgICAgICAgICAgIGFsdEVsZW1DbGFzcyA9ICdmYS1hbHQtdGV4dCc7XG5cbiAgICAgICAgICBpZiAoYWx0VGV4dCkge1xuICAgICAgICAgICAgZWxlbWVudC5yZW1vdmVBdHRyKCdhbHQnKTtcblxuICAgICAgICAgICAgLy8gY3JlYXRlIHRoZSBhbHQgZWxlbSBpZiBvbmUgZG9lcyBub3QgZXhpc3RcbiAgICAgICAgICAgIGlmICghYWx0RWxlbSB8fCAhYWx0RWxlbS5oYXNDbGFzcyhhbHRFbGVtQ2xhc3MpKSB7XG4gICAgICAgICAgICAgIGVsZW1lbnQuYWZ0ZXIoJzxzcGFuIGNsYXNzPVwic3Itb25seSBmYS1hbHQtdGV4dFwiPjwvc3Bhbj4nKTtcbiAgICAgICAgICAgICAgYWx0RWxlbSA9IGVsZW1lbnQubmV4dCgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBhbHRFbGVtLnRleHQoYWx0VGV4dCk7XG4gICAgICAgICAgfSBlbHNlIGlmIChhbHRFbGVtICYmIGFsdEVsZW0uaGFzQ2xhc3MoYWx0RWxlbUNsYXNzKSkge1xuICAgICAgICAgICAgLy8ga2lsbCB0aGUgYWx0IGVsZW0gaWYgd2UgdXNlZCB0byBoYXZlIGFsdCB0ZXh0LCBidXQgbm93IHdlIGRvbid0XG4gICAgICAgICAgICBhbHRFbGVtLnJlbW92ZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfTtcbiAgfSlcbiAgLmRpcmVjdGl2ZSgnZmFTdGFjaycsIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAgICAgIHRyYW5zY2x1ZGU6IHRydWUsXG4gICAgICB0ZW1wbGF0ZTogJzxzcGFuIG5nLXRyYW5zY2x1ZGUgY2xhc3M9XCJmYS1zdGFjayBmYS1sZ1wiPjwvc3Bhbj4nLFxuICAgICAgcmVwbGFjZTogdHJ1ZSxcbiAgICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSwgZWxlbWVudCwgYXR0cnMpIHtcblxuICAgICAgICAvKioqIFNUUklORyBBVFRSUyAqKiovXG4gICAgICAgIC8vIGtlZXAgYSBzdGF0ZSBvZiB0aGUgY3VycmVudCBhdHRycyBzbyB0aGF0IHdoZW4gdGhleSBjaGFuZ2UsXG4gICAgICAgIC8vIHdlIGNhbiByZW1vdmUgdGhlIG9sZCBhdHRycyBiZWZvcmUgYWRkaW5nIHRoZSBuZXcgb25lcy5cbiAgICAgICAgdmFyIGN1cnJlbnRDbGFzc2VzID0ge307XG5cbiAgICAgICAgLy8gZ2VuZXJpYyBmdW5jdGlvbiB0byBiaW5kIHN0cmluZyBhdHRyc1xuICAgICAgICBmdW5jdGlvbiBfb2JzZXJ2ZVN0cmluZ0F0dHIgKGF0dHIsIGJhc2VDbGFzcykge1xuICAgICAgICAgIHZhciBjbGFzc05hbWU7XG5cbiAgICAgICAgICBhdHRycy4kb2JzZXJ2ZShhdHRyLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBiYXNlQ2xhc3MgPSBiYXNlQ2xhc3MgfHwgJ2ZhLScgKyBhdHRyO1xuICAgICAgICAgICAgZWxlbWVudC5yZW1vdmVDbGFzcyhjdXJyZW50Q2xhc3Nlc1thdHRyXSk7XG4gICAgICAgICAgICBpZiAoYXR0cnNbYXR0cl0pIHtcbiAgICAgICAgICAgICAgY2xhc3NOYW1lID0gW2Jhc2VDbGFzcywgYXR0cnNbYXR0cl1dLmpvaW4oJy0nKTtcbiAgICAgICAgICAgICAgZWxlbWVudC5hZGRDbGFzcyhjbGFzc05hbWUpO1xuICAgICAgICAgICAgICBjdXJyZW50Q2xhc3Nlc1thdHRyXSA9IGNsYXNzTmFtZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIF9vYnNlcnZlU3RyaW5nQXR0cignc2l6ZScpO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBzaXplIGNhbiBiZSBwYXNzZWQgXCJsYXJnZVwiIG9yIGFuIGludGVnZXJcbiAgICAgICAgICovXG4gICAgICAgIGF0dHJzLiRvYnNlcnZlKCdzaXplJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHZhciBjbGFzc05hbWU7XG5cbiAgICAgICAgICBlbGVtZW50LnJlbW92ZUNsYXNzKGN1cnJlbnRDbGFzc2VzLnNpemUpO1xuXG4gICAgICAgICAgaWYgKGF0dHJzLnNpemUgPT09ICdsYXJnZScpIHtcbiAgICAgICAgICAgIGNsYXNzTmFtZSA9ICdmYS1sZyc7XG4gICAgICAgICAgfSBlbHNlIGlmICghaXNOYU4ocGFyc2VJbnQoYXR0cnMuc2l6ZSwgMTApKSkge1xuICAgICAgICAgICAgY2xhc3NOYW1lID0gJ2ZhLScgKyBhdHRycy5zaXplICsgJ3gnO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGVsZW1lbnQuYWRkQ2xhc3MoY2xhc3NOYW1lKTtcbiAgICAgICAgICBjdXJyZW50Q2xhc3Nlcy5zaXplID0gY2xhc3NOYW1lO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9O1xuICB9KTsiLCIvKiEgQGxpY2Vuc2VcbiAqICBQcm9qZWN0OiBCdXR0b25zXG4gKiAgRGVzY3JpcHRpb246IEEgaGlnaGx5IGN1c3RvbWl6YWJsZSBDU1MgYnV0dG9uIGxpYnJhcnkgYnVpbHQgd2l0aCBTYXNzIGFuZCBDb21wYXNzXG4gKiAgQXV0aG9yOiBBbGV4IFdvbGZlXG4gKiAgTGljZW5zZTogQXBhY2hlIExpY2Vuc2UgdjIuMFxuICovXG5cbi8vIHRoZSBzZW1pLWNvbG9uIGJlZm9yZSBmdW5jdGlvbiBpbnZvY2F0aW9uIGlzIGEgc2FmZXR5IG5ldCBhZ2FpbnN0IGNvbmNhdGVuYXRlZFxuLy8gc2NyaXB0cyBhbmQvb3Igb3RoZXIgcGx1Z2lucyB3aGljaCBtYXkgbm90IGJlIGNsb3NlZCBwcm9wZXJseS5cbjsoZnVuY3Rpb24gKCAkLCB3aW5kb3csIGRvY3VtZW50LCB1bmRlZmluZWQgKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgLy8gdW5kZWZpbmVkIGlzIHVzZWQgaGVyZSBhcyB0aGUgdW5kZWZpbmVkIGdsb2JhbCB2YXJpYWJsZSBpbiBFQ01BU2NyaXB0IDMgaXNcbiAgICAvLyBtdXRhYmxlIChpZS4gaXQgY2FuIGJlIGNoYW5nZWQgYnkgc29tZW9uZSBlbHNlKS4gdW5kZWZpbmVkIGlzbid0IHJlYWxseSBiZWluZ1xuICAgIC8vIHBhc3NlZCBpbiBzbyB3ZSBjYW4gZW5zdXJlIHRoZSB2YWx1ZSBvZiBpdCBpcyB0cnVseSB1bmRlZmluZWQuIEluIEVTNSwgdW5kZWZpbmVkXG4gICAgLy8gY2FuIG5vIGxvbmdlciBiZSBtb2RpZmllZC5cblxuICAgIC8vIHdpbmRvdyBhbmQgZG9jdW1lbnQgYXJlIHBhc3NlZCB0aHJvdWdoIGFzIGxvY2FsIHZhcmlhYmxlIHJhdGhlciB0aGFuIGdsb2JhbFxuICAgIC8vIGFzIHRoaXMgKHNsaWdodGx5KSBxdWlja2VucyB0aGUgcmVzb2x1dGlvbiBwcm9jZXNzIGFuZCBjYW4gYmUgbW9yZSBlZmZpY2llbnRseVxuICAgIC8vIG1pbmlmaWVkIChlc3BlY2lhbGx5IHdoZW4gYm90aCBhcmUgcmVndWxhcmx5IHJlZmVyZW5jZWQgaW4geW91ciBwbHVnaW4pLlxuXG4gICAgLy8gQ3JlYXRlIHRoZSBkZWZhdWx0cyBvbmNlXG4gICAgdmFyIHBsdWdpbk5hbWUgPSBcIm1lbnVCdXR0b25cIjtcbiAgICB2YXIgbWVudUNsYXNzID0gXCIuYnV0dG9uLWRyb3Bkb3duXCI7XG4gICAgdmFyIGRlZmF1bHRzID0ge1xuICAgICAgICBwcm9wZXJ0eU5hbWU6IFwidmFsdWVcIlxuICAgIH07XG5cbiAgICAvLyBUaGUgYWN0dWFsIHBsdWdpbiBjb25zdHJ1Y3RvclxuICAgIGZ1bmN0aW9uIFBsdWdpbiggZWxlbWVudCwgb3B0aW9ucyApIHtcblxuICAgICAgICAvL1NFVCBPUFRJT05TXG4gICAgICAgIHRoaXMub3B0aW9ucyA9ICQuZXh0ZW5kKCB7fSwgZGVmYXVsdHMsIG9wdGlvbnMgKTtcbiAgICAgICAgdGhpcy5fZGVmYXVsdHMgPSBkZWZhdWx0cztcbiAgICAgICAgdGhpcy5fbmFtZSA9IHBsdWdpbk5hbWU7XG5cbiAgICAgICAgLy9SRUdJU1RFUiBFTEVNRU5UXG4gICAgICAgIHRoaXMuJGVsZW1lbnQgPSAkKGVsZW1lbnQpO1xuXG4gICAgICAgIC8vSU5JVElBTElaRVxuICAgICAgICB0aGlzLmluaXQoKTtcbiAgICB9XG5cbiAgICBQbHVnaW4ucHJvdG90eXBlID0ge1xuICAgICAgICBjb25zdHJ1Y3RvcjogUGx1Z2luLFxuXG4gICAgICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgLy8gV0UgRE9OJ1QgU1RPUCBQUk9QR0FUSU9OIFNPIENMSUNLUyBXSUxMIEFVVE9NQVRJQ0FMTFlcbiAgICAgICAgICAgIC8vIFRPR0dMRSBBTkQgUkVNT1ZFIFRIRSBEUk9QRE9XTlxuICAgICAgICAgICAgdGhpcy50b2dnbGUoKTtcbiAgICAgICAgfSxcblxuICAgICAgICB0b2dnbGU6IGZ1bmN0aW9uKGVsLCBvcHRpb25zKSB7XG4gICAgICAgICAgICBpZih0aGlzLiRlbGVtZW50LmRhdGEoJ2Ryb3Bkb3duJykgPT09ICdzaG93Jykge1xuICAgICAgICAgICAgICAgIHRoaXMuaGlkZU1lbnUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuc2hvd01lbnUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBzaG93TWVudTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB0aGlzLiRlbGVtZW50LmRhdGEoJ2Ryb3Bkb3duJywgJ3Nob3cnKTtcbiAgICAgICAgICAgIHRoaXMuJGVsZW1lbnQuZmluZCgndWwnKS5zaG93KCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgaGlkZU1lbnU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdGhpcy4kZWxlbWVudC5kYXRhKCdkcm9wZG93bicsICdoaWRlJyk7XG4gICAgICAgICAgICB0aGlzLiRlbGVtZW50LmZpbmQoJ3VsJykuaGlkZSgpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8vIEEgcmVhbGx5IGxpZ2h0d2VpZ2h0IHBsdWdpbiB3cmFwcGVyIGFyb3VuZCB0aGUgY29uc3RydWN0b3IsXG4gICAgLy8gcHJldmVudGluZyBhZ2FpbnN0IG11bHRpcGxlIGluc3RhbnRpYXRpb25zXG4gICAgJC5mbltwbHVnaW5OYW1lXSA9IGZ1bmN0aW9uICggb3B0aW9ucyApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIC8vIFRPR0dMRSBCVVRUT04gSUYgSVQgRVhJU1RTXG4gICAgICAgICAgICBpZiAoJC5kYXRhKHRoaXMsIFwicGx1Z2luX1wiICsgcGx1Z2luTmFtZSkpIHtcbiAgICAgICAgICAgICAgICAkLmRhdGEodGhpcywgXCJwbHVnaW5fXCIgKyBwbHVnaW5OYW1lKS50b2dnbGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIE9USEVSV0lTRSBDUkVBVEUgQSBORVcgSU5TVEFOQ0VcbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICQuZGF0YSh0aGlzLCBcInBsdWdpbl9cIiArIHBsdWdpbk5hbWUsIG5ldyBQbHVnaW4oIHRoaXMsIG9wdGlvbnMgKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAvL0NMT1NFIE9QRU4gRFJPUERPV04gTUVOVVMgSUYgQ0xJQ0tFRCBTT01FV0hFUkUgRUxTRVxuICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgJC5lYWNoKCQoJ1tkYXRhLWJ1dHRvbnM9ZHJvcGRvd25dJyksIGZ1bmN0aW9uKGksIHZhbHVlKSB7XG4gICAgICAgICAgICBpZiAoJChlLnRhcmdldC5vZmZzZXRQYXJlbnQpWzBdICE9ICQodGhpcylbMF0pIHtcbiAgICAgICAgICAgICAgICBpZiAoJC5kYXRhKHRoaXMsIFwicGx1Z2luX1wiICsgcGx1Z2luTmFtZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgJC5kYXRhKHRoaXMsIFwicGx1Z2luX1wiICsgcGx1Z2luTmFtZSkuaGlkZU1lbnUoKTtcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCd1bCcpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLy9ERUxFR0FURSBDTElDSyBFVkVOVCBGT1IgRFJPUERPV04gTUVOVVNcbiAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnW2RhdGEtYnV0dG9ucz1kcm9wZG93bl0nLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIHZhciAkZHJvcGRvd24gPSAkKGUuY3VycmVudFRhcmdldCk7XG4gICAgICAgICRkcm9wZG93bi5tZW51QnV0dG9uKCk7XG4gICAgfSk7XG5cbiAgICAvL0lHTk9SRSBDTElDSyBFVkVOVFMgRlJPTSBESVNQTEFZIEJVVFRPTiBJTiBEUk9QRE9XTlxuICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICdbZGF0YS1idXR0b25zPWRyb3Bkb3duXSA+IGEnLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9KTtcblxufSkoIGpRdWVyeSwgd2luZG93LCBkb2N1bWVudCk7IiwiYW5ndWxhci5tb2R1bGUoJ2FuZ3VsYXJQYXltZW50cycsIFtdKTthbmd1bGFyLm1vZHVsZSgnYW5ndWxhclBheW1lbnRzJylcblxuLmZhY3RvcnkoJ0NvbW1vbicsIFtmdW5jdGlvbigpe1xuXG4gIHZhciByZXQgPSB7fTtcblxuXG4gIC8vIGV4cGlyeSBpcyBhIHN0cmluZyBcIm1tIC8geXlbeXldXCJcbiAgcmV0WydwYXJzZUV4cGlyeSddID0gZnVuY3Rpb24odmFsdWUpe1xuICAgIHZhciBtb250aCwgcHJlZml4LCB5ZWFyLCBfcmVmO1xuXG4gICAgdmFsdWUgPSB2YWx1ZSB8fCAnJ1xuXG4gICAgdmFsdWUgPSB2YWx1ZS5yZXBsYWNlKC9cXHMvZywgJycpO1xuICAgIF9yZWYgPSB2YWx1ZS5zcGxpdCgnLycsIDIpLCBtb250aCA9IF9yZWZbMF0sIHllYXIgPSBfcmVmWzFdO1xuXG4gICAgaWYgKCh5ZWFyICE9IG51bGwgPyB5ZWFyLmxlbmd0aCA6IHZvaWQgMCkgPT09IDIgJiYgL15cXGQrJC8udGVzdCh5ZWFyKSkge1xuICAgICAgcHJlZml4ID0gKG5ldyBEYXRlKS5nZXRGdWxsWWVhcigpO1xuICAgICAgcHJlZml4ID0gcHJlZml4LnRvU3RyaW5nKCkuc2xpY2UoMCwgMik7XG4gICAgICB5ZWFyID0gcHJlZml4ICsgeWVhcjtcbiAgICB9XG5cbiAgICBtb250aCA9IHBhcnNlSW50KG1vbnRoLCAxMCk7XG4gICAgeWVhciA9IHBhcnNlSW50KHllYXIsIDEwKTtcbiAgICBcbiAgICByZXR1cm4ge1xuICAgICAgbW9udGg6IG1vbnRoLFxuICAgICAgeWVhcjogeWVhclxuICAgIH07XG4gIH1cblxuICByZXR1cm4gcmV0O1xuXG59XSk7YW5ndWxhci5tb2R1bGUoJ2FuZ3VsYXJQYXltZW50cycpXG5cbi5mYWN0b3J5KCdDYXJkcycsIFtmdW5jdGlvbigpe1xuXG4gIHZhciBkZWZhdWx0Rm9ybWF0ID0gLyhcXGR7MSw0fSkvZztcbiAgdmFyIGRlZmF1bHRJbnB1dEZvcm1hdCA9ICAvKD86XnxcXHMpKFxcZHs0fSkkLztcblxuICAgICAgICB2YXIgY2FyZHMgPSBbXG4gICAge1xuICAgICAgdHlwZTogJ21hZXN0cm8nLFxuICAgICAgcGF0dGVybjogL14oNTAxOHw1MDIwfDUwMzh8NjMwNHw2NzU5fDY3NlsxLTNdKS8sXG4gICAgICBmb3JtYXQ6IGRlZmF1bHRGb3JtYXQsXG4gICAgICBpbnB1dEZvcm1hdDogZGVmYXVsdElucHV0Rm9ybWF0LFxuICAgICAgbGVuZ3RoOiBbMTIsIDEzLCAxNCwgMTUsIDE2LCAxNywgMTgsIDE5XSxcbiAgICAgIGN2Y0xlbmd0aDogWzNdLFxuICAgICAgbHVobjogdHJ1ZVxuICAgIH0sIHtcbiAgICAgIHR5cGU6ICdkaW5lcnNjbHViJyxcbiAgICAgIHBhdHRlcm46IC9eKDM2fDM4fDMwWzAtNV0pLyxcbiAgICAgIGZvcm1hdDogZGVmYXVsdEZvcm1hdCxcbiAgICAgIGlucHV0Rm9ybWF0OiBkZWZhdWx0SW5wdXRGb3JtYXQsXG4gICAgICBsZW5ndGg6IFsxNF0sXG4gICAgICBjdmNMZW5ndGg6IFszXSxcbiAgICAgIGx1aG46IHRydWVcbiAgICB9LCB7XG4gICAgICB0eXBlOiAnbGFzZXInLFxuICAgICAgcGF0dGVybjogL14oNjcwNnw2NzcxfDY3MDkpLyxcbiAgICAgIGZvcm1hdDogZGVmYXVsdEZvcm1hdCxcbiAgICAgIGlucHV0Rm9ybWF0OiBkZWZhdWx0SW5wdXRGb3JtYXQsXG4gICAgICBsZW5ndGg6IFsxNiwgMTcsIDE4LCAxOV0sXG4gICAgICBjdmNMZW5ndGg6IFszXSxcbiAgICAgIGx1aG46IHRydWVcbiAgICB9LCB7XG4gICAgICB0eXBlOiAnamNiJyxcbiAgICAgIHBhdHRlcm46IC9eMzUvLFxuICAgICAgZm9ybWF0OiBkZWZhdWx0Rm9ybWF0LFxuICAgICAgaW5wdXRGb3JtYXQ6IGRlZmF1bHRJbnB1dEZvcm1hdCxcbiAgICAgIGxlbmd0aDogWzE2XSxcbiAgICAgIGN2Y0xlbmd0aDogWzNdLFxuICAgICAgbHVobjogdHJ1ZVxuICAgIH0sIHtcbiAgICAgIHR5cGU6ICd1bmlvbnBheScsXG4gICAgICBwYXR0ZXJuOiAvXjYyLyxcbiAgICAgIGZvcm1hdDogZGVmYXVsdEZvcm1hdCxcbiAgICAgIGlucHV0Rm9ybWF0OiBkZWZhdWx0SW5wdXRGb3JtYXQsXG4gICAgICBsZW5ndGg6IFsxNiwgMTcsIDE4LCAxOV0sXG4gICAgICBjdmNMZW5ndGg6IFszXSxcbiAgICAgIGx1aG46IGZhbHNlXG4gICAgfSwge1xuICAgICAgdHlwZTogJ2Rpc2NvdmVyJyxcbiAgICAgIHBhdHRlcm46IC9eKDYwMTF8NjV8NjRbNC05XXw2MjIpLyxcbiAgICAgIGZvcm1hdDogZGVmYXVsdEZvcm1hdCxcbiAgICAgIGlucHV0Rm9ybWF0OiBkZWZhdWx0SW5wdXRGb3JtYXQsXG4gICAgICBsZW5ndGg6IFsxNl0sXG4gICAgICBjdmNMZW5ndGg6IFszXSxcbiAgICAgIGx1aG46IHRydWVcbiAgICB9LCB7XG4gICAgICB0eXBlOiAnbWFzdGVyY2FyZCcsXG4gICAgICBwYXR0ZXJuOiAvXjVbMS01XS8sXG4gICAgICBmb3JtYXQ6IGRlZmF1bHRGb3JtYXQsXG4gICAgICBpbnB1dEZvcm1hdDogZGVmYXVsdElucHV0Rm9ybWF0LFxuICAgICAgbGVuZ3RoOiBbMTZdLFxuICAgICAgY3ZjTGVuZ3RoOiBbM10sXG4gICAgICBsdWhuOiB0cnVlXG4gICAgfSwge1xuICAgICAgdHlwZTogJ2FtZXgnLFxuICAgICAgcGF0dGVybjogL14zWzQ3XS8sXG4gICAgICBmb3JtYXQ6IC8oXFxkezEsNH0pKFxcZHsxLDZ9KT8oXFxkezEsNX0pPy8sXG4gICAgICBpbnB1dEZvcm1hdDogL14oXFxkezR9fFxcZHs0fVxcc1xcZHs2fSkkLyxcbiAgICAgIGxlbmd0aDogWzE1XSxcbiAgICAgIGN2Y0xlbmd0aDogWzMsIDRdLFxuICAgICAgbHVobjogdHJ1ZVxuICAgIH0sIHtcbiAgICAgIHR5cGU6ICd2aXNhJyxcbiAgICAgIHBhdHRlcm46IC9eNC8sXG4gICAgICBmb3JtYXQ6IGRlZmF1bHRGb3JtYXQsXG4gICAgICBpbnB1dEZvcm1hdDogZGVmYXVsdElucHV0Rm9ybWF0LFxuICAgICAgbGVuZ3RoOiBbMTMsIDE0LCAxNSwgMTZdLFxuICAgICAgY3ZjTGVuZ3RoOiBbM10sXG4gICAgICBsdWhuOiB0cnVlXG4gICAgfVxuICBdO1xuXG5cbiAgdmFyIF9mcm9tTnVtYmVyID0gZnVuY3Rpb24obnVtKXtcbiAgICAgIHZhciBjYXJkLCBpLCBsZW47XG5cbiAgICAgIG51bSA9IChudW0gKyAnJykucmVwbGFjZSgvXFxEL2csICcnKTtcblxuICAgICAgZm9yIChpID0gMCwgbGVuID0gY2FyZHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcblxuICAgICAgICBjYXJkID0gY2FyZHNbaV07XG5cbiAgICAgICAgaWYgKGNhcmQucGF0dGVybi50ZXN0KG51bSkpIHtcbiAgICAgICAgICByZXR1cm4gY2FyZDtcbiAgICAgICAgfVxuXG4gICAgICB9XG4gIH1cblxuICB2YXIgX2Zyb21UeXBlID0gZnVuY3Rpb24odHlwZSkge1xuICAgICAgdmFyIGNhcmQsIGksIGxlbjtcblxuICAgICAgZm9yIChpID0gMCwgbGVuID0gY2FyZHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcblxuICAgICAgICBjYXJkID0gY2FyZHNbaV07XG4gICAgICAgIFxuICAgICAgICBpZiAoY2FyZC50eXBlID09PSB0eXBlKSB7XG4gICAgICAgICAgcmV0dXJuIGNhcmQ7XG4gICAgICAgIH1cblxuICAgICAgfVxuICB9O1xuXG4gIHJldHVybiB7XG4gICAgICBmcm9tTnVtYmVyOiBmdW5jdGlvbih2YWwpIHsgcmV0dXJuIF9mcm9tTnVtYmVyKHZhbCkgfSxcbiAgICAgIGZyb21UeXBlOiBmdW5jdGlvbih2YWwpIHsgcmV0dXJuIF9mcm9tVHlwZSh2YWwpIH0sXG4gICAgICBkZWZhdWx0Rm9ybWF0OiBmdW5jdGlvbigpIHsgcmV0dXJuIGRlZmF1bHRGb3JtYXQ7fSxcbiAgICAgIGRlZmF1bHRJbnB1dEZvcm1hdDogZnVuY3Rpb24oKSB7IHJldHVybiBkZWZhdWx0SW5wdXRGb3JtYXQ7fVxuICB9XG5cbn1dKTthbmd1bGFyLm1vZHVsZSgnYW5ndWxhclBheW1lbnRzJylcblxuXG4uZmFjdG9yeSgnX0Zvcm1hdCcsWydDYXJkcycsICdDb21tb24nLCAnJGZpbHRlcicsIGZ1bmN0aW9uKENhcmRzLCBDb21tb24sICRmaWx0ZXIpe1xuXG4gIHZhciBfZm9ybWF0cyA9IHt9XG5cbiAgdmFyIF9oYXNUZXh0U2VsZWN0ZWQgPSBmdW5jdGlvbigkdGFyZ2V0KSB7XG4gICAgICB2YXIgcmVmO1xuICAgICAgXG4gICAgICBpZiAoKCR0YXJnZXQucHJvcCgnc2VsZWN0aW9uU3RhcnQnKSAhPSBudWxsKSAmJiAkdGFyZ2V0LnByb3AoJ3NlbGVjdGlvblN0YXJ0JykgIT09ICR0YXJnZXQucHJvcCgnc2VsZWN0aW9uRW5kJykpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKHR5cGVvZiBkb2N1bWVudCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBkb2N1bWVudCAhPT0gbnVsbCA/IChyZWYgPSBkb2N1bWVudC5zZWxlY3Rpb24pICE9IG51bGwgPyB0eXBlb2YgcmVmLmNyZWF0ZVJhbmdlID09PSBcImZ1bmN0aW9uXCIgPyByZWYuY3JlYXRlUmFuZ2UoKS50ZXh0IDogdm9pZCAwIDogdm9pZCAwIDogdm9pZCAwKSB7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgICBcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuXG4gIC8vIGNhcmQgZm9ybWF0dGluZ1xuXG4gIHZhciBfZm9ybWF0Q2FyZE51bWJlciA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgIHZhciAkdGFyZ2V0LCBjYXJkLCBkaWdpdCwgbGVuZ3RoLCByZSwgdXBwZXJMZW5ndGgsIHZhbHVlO1xuICAgICAgXG4gICAgICBkaWdpdCA9IFN0cmluZy5mcm9tQ2hhckNvZGUoZS53aGljaCk7XG4gICAgICAkdGFyZ2V0ID0gYW5ndWxhci5lbGVtZW50KGUuY3VycmVudFRhcmdldCk7XG4gICAgICB2YWx1ZSA9ICR0YXJnZXQudmFsKCk7XG4gICAgICBjYXJkID0gQ2FyZHMuZnJvbU51bWJlcih2YWx1ZSArIGRpZ2l0KTtcbiAgICAgIGxlbmd0aCA9ICh2YWx1ZS5yZXBsYWNlKC9cXEQvZywgJycpICsgZGlnaXQpLmxlbmd0aDtcbiAgICAgIFxuICAgICAgdXBwZXJMZW5ndGggPSAxNjtcbiAgICAgIFxuICAgICAgaWYgKGNhcmQpIHtcbiAgICAgICAgdXBwZXJMZW5ndGggPSBjYXJkLmxlbmd0aFtjYXJkLmxlbmd0aC5sZW5ndGggLSAxXTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKGxlbmd0aCA+PSB1cHBlckxlbmd0aCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmICghL15cXGQrJC8udGVzdChkaWdpdCkgJiYgIWUubWV0YSAmJiBlLmtleUNvZGUgPj0gNDYpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmICgoJHRhcmdldC5wcm9wKCdzZWxlY3Rpb25TdGFydCcpICE9IG51bGwpICYmICR0YXJnZXQucHJvcCgnc2VsZWN0aW9uU3RhcnQnKSAhPT0gdmFsdWUubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgcmUgPSBDYXJkcy5kZWZhdWx0SW5wdXRGb3JtYXQoKTtcbiAgICAgIGlmIChjYXJkKSB7XG4gICAgICAgICAgcmUgPSBjYXJkLmlucHV0Rm9ybWF0O1xuICAgICAgfVxuXG4gICAgICBpZiAocmUudGVzdCh2YWx1ZSkpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICByZXR1cm4gJHRhcmdldC52YWwodmFsdWUgKyAnICcgKyBkaWdpdCk7XG5cbiAgICAgIH0gZWxzZSBpZiAocmUudGVzdCh2YWx1ZSArIGRpZ2l0KSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHJldHVybiAkdGFyZ2V0LnZhbCh2YWx1ZSArIGRpZ2l0ICsgJyAnKTtcblxuICAgICAgfVxuICB9O1xuXG4gIHZhciBfcmVzdHJpY3RDYXJkTnVtYmVyID0gZnVuY3Rpb24oZSkge1xuICAgICAgdmFyICR0YXJnZXQsIGNhcmQsIGRpZ2l0LCB2YWx1ZTtcbiAgICAgIFxuICAgICAgJHRhcmdldCA9IGFuZ3VsYXIuZWxlbWVudChlLmN1cnJlbnRUYXJnZXQpO1xuICAgICAgZGlnaXQgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGUud2hpY2gpO1xuICAgICAgXG4gICAgICBpZighL15cXGQrJC8udGVzdChkaWdpdCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgXG4gICAgICBpZihfaGFzVGV4dFNlbGVjdGVkKCR0YXJnZXQpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgdmFsdWUgPSAoJHRhcmdldC52YWwoKSArIGRpZ2l0KS5yZXBsYWNlKC9cXEQvZywgJycpO1xuICAgICAgY2FyZCA9IENhcmRzLmZyb21OdW1iZXIodmFsdWUpO1xuICAgICAgXG4gICAgICBpZihjYXJkKSB7XG4gICAgICAgIGlmKCEodmFsdWUubGVuZ3RoIDw9IGNhcmQubGVuZ3RoW2NhcmQubGVuZ3RoLmxlbmd0aCAtIDFdKSl7XG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZighKHZhbHVlLmxlbmd0aCA8PSAxNikpe1xuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICB9O1xuXG4gIHZhciBfZm9ybWF0QmFja0NhcmROdW1iZXIgPSBmdW5jdGlvbihlKSB7XG4gICAgICB2YXIgJHRhcmdldCwgdmFsdWU7XG4gICAgICBcbiAgICAgICR0YXJnZXQgPSBhbmd1bGFyLmVsZW1lbnQoZS5jdXJyZW50VGFyZ2V0KTtcbiAgICAgIHZhbHVlID0gJHRhcmdldC52YWwoKTtcbiAgICAgIFxuICAgICAgaWYoZS5tZXRhKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYoZS53aGljaCAhPT0gOCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmKCgkdGFyZ2V0LnByb3AoJ3NlbGVjdGlvblN0YXJ0JykgIT0gbnVsbCkgJiYgJHRhcmdldC5wcm9wKCdzZWxlY3Rpb25TdGFydCcpICE9PSB2YWx1ZS5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgXG4gICAgICBpZigvXFxkXFxzJC8udGVzdCh2YWx1ZSkgJiYgIWUubWV0YSAmJiBlLmtleUNvZGUgPj0gNDYpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICByZXR1cm4gJHRhcmdldC52YWwodmFsdWUucmVwbGFjZSgvXFxkXFxzJC8sICcnKSk7XG4gICAgICB9IGVsc2UgaWYgKC9cXHNcXGQ/JC8udGVzdCh2YWx1ZSkpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICByZXR1cm4gJHRhcmdldC52YWwodmFsdWUucmVwbGFjZSgvXFxzXFxkPyQvLCAnJykpO1xuICAgICAgfVxuICAgIH07XG5cbiAgdmFyIF9nZXRGb3JtYXR0ZWRDYXJkTnVtYmVyID0gZnVuY3Rpb24obnVtKSB7XG4gICAgICB2YXIgY2FyZCwgZ3JvdXBzLCB1cHBlckxlbmd0aCwgcmVmO1xuICAgICAgXG4gICAgICBjYXJkID0gQ2FyZHMuZnJvbU51bWJlcihudW0pO1xuICAgICAgXG4gICAgICBpZiAoIWNhcmQpIHtcbiAgICAgICAgcmV0dXJuIG51bTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgdXBwZXJMZW5ndGggPSBjYXJkLmxlbmd0aFtjYXJkLmxlbmd0aC5sZW5ndGggLSAxXTtcbiAgICAgIG51bSA9IG51bS5yZXBsYWNlKC9cXEQvZywgJycpO1xuICAgICAgbnVtID0gbnVtLnNsaWNlKDAsICt1cHBlckxlbmd0aCArIDEgfHwgOWU5KTtcbiAgICAgIFxuICAgICAgaWYoY2FyZC5mb3JtYXQuZ2xvYmFsKSB7XG4gICAgICAgIHJldHVybiAocmVmID0gbnVtLm1hdGNoKGNhcmQuZm9ybWF0KSkgIT0gbnVsbCA/IHJlZi5qb2luKCcgJykgOiB2b2lkIDA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBncm91cHMgPSBjYXJkLmZvcm1hdC5leGVjKG51bSk7XG4gICAgICAgICAgXG4gICAgICAgIGlmIChncm91cHMgIT0gbnVsbCkge1xuICAgICAgICAgIGdyb3Vwcy5zaGlmdCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGdyb3VwcyAhPSBudWxsID8gZ3JvdXBzLmpvaW4oJyAnKSA6IHZvaWQgMDtcbiAgICAgIH1cbiAgICB9O1xuXG4gIHZhciBfcmVGb3JtYXRDYXJkTnVtYmVyID0gZnVuY3Rpb24oZSkge1xuICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgdmFyICR0YXJnZXQsIHZhbHVlO1xuICAgICAgJHRhcmdldCA9IGFuZ3VsYXIuZWxlbWVudChlLnRhcmdldCk7XG4gICAgXG4gICAgICB2YWx1ZSA9ICR0YXJnZXQudmFsKCk7XG4gICAgICB2YWx1ZSA9IF9nZXRGb3JtYXR0ZWRDYXJkTnVtYmVyKHZhbHVlKTtcbiAgICAgIHJldHVybiAkdGFyZ2V0LnZhbCh2YWx1ZSk7XG4gICAgfSk7XG4gIH07XG5cbiAgdmFyIF9wYXJzZUNhcmROdW1iZXIgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZSAhPSBudWxsID8gdmFsdWUucmVwbGFjZSgvXFxzL2csICcnKSA6IHZhbHVlO1xuICB9O1xuXG4gIF9mb3JtYXRzWydjYXJkJ10gPSBmdW5jdGlvbihlbGVtLCBjdHJsKXtcbiAgICBlbGVtLmJpbmQoJ2tleXByZXNzJywgX3Jlc3RyaWN0Q2FyZE51bWJlcik7XG4gICAgZWxlbS5iaW5kKCdrZXlwcmVzcycsIF9mb3JtYXRDYXJkTnVtYmVyKTtcbiAgICBlbGVtLmJpbmQoJ2tleWRvd24nLCBfZm9ybWF0QmFja0NhcmROdW1iZXIpO1xuICAgIGVsZW0uYmluZCgncGFzdGUnLCBfcmVGb3JtYXRDYXJkTnVtYmVyKTtcblxuICAgIGN0cmwuJHBhcnNlcnMucHVzaChfcGFyc2VDYXJkTnVtYmVyKTtcbiAgICBjdHJsLiRmb3JtYXR0ZXJzLnB1c2goX2dldEZvcm1hdHRlZENhcmROdW1iZXIpO1xuICB9XG5cblxuICAvLyBjdmNcblxuICBfZm9ybWF0Q1ZDID0gZnVuY3Rpb24oZSl7XG4gICAgJHRhcmdldCA9IGFuZ3VsYXIuZWxlbWVudChlLmN1cnJlbnRUYXJnZXQpO1xuICAgIGRpZ2l0ID0gU3RyaW5nLmZyb21DaGFyQ29kZShlLndoaWNoKTtcbiAgICBcbiAgICBpZiAoIS9eXFxkKyQvLnRlc3QoZGlnaXQpICYmICFlLm1ldGEgJiYgZS5rZXlDb2RlID49IDQ2KSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFsID0gJHRhcmdldC52YWwoKSArIGRpZ2l0O1xuICAgIFxuICAgIGlmKHZhbC5sZW5ndGggPD0gNCl7XG4gICAgICByZXR1cm47XG4gICAgfSBlbHNlIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH1cblxuICBfZm9ybWF0c1snY3ZjJ10gPSBmdW5jdGlvbihlbGVtKXtcbiAgICBlbGVtLmJpbmQoJ2tleXByZXNzJywgX2Zvcm1hdENWQylcbiAgfVxuXG4gIC8vIGV4cGlyeVxuXG4gIF9yZXN0cmljdEV4cGlyeSA9IGZ1bmN0aW9uKGUpIHtcbiAgICB2YXIgJHRhcmdldCwgZGlnaXQsIHZhbHVlO1xuICAgIFxuICAgICR0YXJnZXQgPSBhbmd1bGFyLmVsZW1lbnQoZS5jdXJyZW50VGFyZ2V0KTtcbiAgICBkaWdpdCA9IFN0cmluZy5mcm9tQ2hhckNvZGUoZS53aGljaCk7XG4gICAgXG4gICAgaWYgKCEvXlxcZCskLy50ZXN0KGRpZ2l0KSAmJiAhZS5tZXRhICYmIGUua2V5Q29kZSA+PSA0Nikge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBcbiAgICBpZihfaGFzVGV4dFNlbGVjdGVkKCR0YXJnZXQpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIFxuICAgIHZhbHVlID0gJHRhcmdldC52YWwoKSArIGRpZ2l0O1xuICAgIHZhbHVlID0gdmFsdWUucmVwbGFjZSgvXFxEL2csICcnKTtcbiAgICBcbiAgICBpZiAodmFsdWUubGVuZ3RoID4gNikge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICByZXR1cm47XG4gICAgfVxuICB9O1xuXG4gIF9mb3JtYXRFeHBpcnkgPSBmdW5jdGlvbihlKSB7XG4gICAgdmFyICR0YXJnZXQsIGRpZ2l0LCB2YWw7XG4gICAgXG4gICAgZGlnaXQgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGUud2hpY2gpO1xuICAgIFxuICAgIGlmICghL15cXGQrJC8udGVzdChkaWdpdCkgJiYgIWUubWV0YSAmJiBlLmtleUNvZGUgPj0gNDYpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgXG4gICAgJHRhcmdldCA9IGFuZ3VsYXIuZWxlbWVudChlLmN1cnJlbnRUYXJnZXQpO1xuICAgIHZhbCA9ICR0YXJnZXQudmFsKCkgKyBkaWdpdDtcbiAgICBcbiAgICBpZiAoL15cXGQkLy50ZXN0KHZhbCkgJiYgKHZhbCAhPT0gJzAnICYmIHZhbCAhPT0gJzEnKSkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgcmV0dXJuICR0YXJnZXQudmFsKFwiMFwiICsgdmFsICsgXCIgLyBcIik7XG5cbiAgICB9IGVsc2UgaWYgKC9eXFxkXFxkJC8udGVzdCh2YWwpKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICByZXR1cm4gJHRhcmdldC52YWwoXCJcIiArIHZhbCArIFwiIC8gXCIpO1xuXG4gICAgfVxuICB9O1xuXG4gIF9mb3JtYXRGb3J3YXJkRXhwaXJ5ID0gZnVuY3Rpb24oZSkge1xuICAgIHZhciAkdGFyZ2V0LCBkaWdpdCwgdmFsO1xuICAgIFxuICAgIGRpZ2l0ID0gU3RyaW5nLmZyb21DaGFyQ29kZShlLndoaWNoKTtcbiAgICBcbiAgICBpZiAoIS9eXFxkKyQvLnRlc3QoZGlnaXQpICYmICFlLm1ldGEgJiYgZS5rZXlDb2RlID49IDQ2KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIFxuICAgICR0YXJnZXQgPSBhbmd1bGFyLmVsZW1lbnQoZS5jdXJyZW50VGFyZ2V0KTtcbiAgICB2YWwgPSAkdGFyZ2V0LnZhbCgpO1xuICAgIFxuICAgIGlmICgvXlxcZFxcZCQvLnRlc3QodmFsKSkge1xuICAgICAgcmV0dXJuICR0YXJnZXQudmFsKFwiXCIgKyB2YWwgKyBcIiAvIFwiKTtcbiAgICB9XG4gIH07XG5cbiAgX2Zvcm1hdEZvcndhcmRTbGFzaCA9IGZ1bmN0aW9uKGUpIHtcbiAgICB2YXIgJHRhcmdldCwgc2xhc2gsIHZhbDtcbiAgICBcbiAgICBzbGFzaCA9IFN0cmluZy5mcm9tQ2hhckNvZGUoZS53aGljaCk7XG4gICAgXG4gICAgaWYgKHNsYXNoICE9PSAnLycpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgXG4gICAgJHRhcmdldCA9IGFuZ3VsYXIuZWxlbWVudChlLmN1cnJlbnRUYXJnZXQpO1xuICAgIHZhbCA9ICR0YXJnZXQudmFsKCk7XG4gICAgXG4gICAgaWYgKC9eXFxkJC8udGVzdCh2YWwpICYmIHZhbCAhPT0gJzAnKSB7XG4gICAgICByZXR1cm4gJHRhcmdldC52YWwoXCIwXCIgKyB2YWwgKyBcIiAvIFwiKTtcbiAgICB9XG4gIH07XG5cbiAgX2Zvcm1hdEJhY2tFeHBpcnkgPSBmdW5jdGlvbihlKSB7XG4gICAgdmFyICR0YXJnZXQsIHZhbHVlO1xuICAgIFxuICAgIGlmIChlLm1ldGEpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgXG4gICAgJHRhcmdldCA9IGFuZ3VsYXIuZWxlbWVudChlLmN1cnJlbnRUYXJnZXQpO1xuICAgIHZhbHVlID0gJHRhcmdldC52YWwoKTtcbiAgICBcbiAgICBpZiAoZS53aGljaCAhPT0gOCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBcbiAgICBpZiAoKCR0YXJnZXQucHJvcCgnc2VsZWN0aW9uU3RhcnQnKSAhPSBudWxsKSAmJiAkdGFyZ2V0LnByb3AoJ3NlbGVjdGlvblN0YXJ0JykgIT09IHZhbHVlLmxlbmd0aCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBcbiAgICBpZiAoL1xcZChcXHN8XFwvKSskLy50ZXN0KHZhbHVlKSkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgcmV0dXJuICR0YXJnZXQudmFsKHZhbHVlLnJlcGxhY2UoL1xcZChcXHN8XFwvKSokLywgJycpKTtcblxuICAgIH0gZWxzZSBpZiAoL1xcc1xcL1xccz9cXGQ/JC8udGVzdCh2YWx1ZSkpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHJldHVybiAkdGFyZ2V0LnZhbCh2YWx1ZS5yZXBsYWNlKC9cXHNcXC9cXHM/XFxkPyQvLCAnJykpO1xuXG4gICAgfVxuICB9O1xuXG4gIHZhciBfcGFyc2VFeHBpcnkgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgIGlmKHZhbHVlICE9IG51bGwpIHtcbiAgICAgIHZhciBvYmogPSBDb21tb24ucGFyc2VFeHBpcnkodmFsdWUpO1xuICAgICAgdmFyIGV4cGlyeSA9IG5ldyBEYXRlKG9iai55ZWFyLCBvYmoubW9udGgtMSk7XG4gICAgICByZXR1cm4gJGZpbHRlcignZGF0ZScpKGV4cGlyeSwgJ01NL3l5eXknKTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH07XG5cbiAgdmFyIF9nZXRGb3JtYXR0ZWRFeHBpcnkgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgIGlmKHZhbHVlICE9IG51bGwpIHtcbiAgICAgIHZhciBvYmogPSBDb21tb24ucGFyc2VFeHBpcnkodmFsdWUpO1xuICAgICAgdmFyIGV4cGlyeSA9IG5ldyBEYXRlKG9iai55ZWFyLCBvYmoubW9udGgtMSk7XG4gICAgICByZXR1cm4gJGZpbHRlcignZGF0ZScpKGV4cGlyeSwgJ01NIC8geXl5eScpO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfTtcblxuXG4gIF9mb3JtYXRzWydleHBpcnknXSA9IGZ1bmN0aW9uKGVsZW0sIGN0cmwpe1xuICAgIGVsZW0uYmluZCgna2V5cHJlc3MnLCBfcmVzdHJpY3RFeHBpcnkpO1xuICAgIGVsZW0uYmluZCgna2V5cHJlc3MnLCBfZm9ybWF0RXhwaXJ5KTtcbiAgICBlbGVtLmJpbmQoJ2tleXByZXNzJywgX2Zvcm1hdEZvcndhcmRTbGFzaCk7XG4gICAgZWxlbS5iaW5kKCdrZXlwcmVzcycsIF9mb3JtYXRGb3J3YXJkRXhwaXJ5KTtcbiAgICBlbGVtLmJpbmQoJ2tleWRvd24nLCBfZm9ybWF0QmFja0V4cGlyeSk7XG5cbiAgICBjdHJsLiRwYXJzZXJzLnB1c2goX3BhcnNlRXhwaXJ5KTtcbiAgICBjdHJsLiRmb3JtYXR0ZXJzLnB1c2goX2dldEZvcm1hdHRlZEV4cGlyeSk7XG4gIH1cblxuICByZXR1cm4gZnVuY3Rpb24odHlwZSwgZWxlbSwgY3RybCl7XG4gICAgaWYoIV9mb3JtYXRzW3R5cGVdKXtcblxuICAgICAgdHlwZXMgPSBPYmplY3Qua2V5cyhfZm9ybWF0cyk7XG5cbiAgICAgIGVycnN0ciAgPSAnVW5rbm93biB0eXBlIGZvciBmb3JtYXR0aW5nOiBcIicrdHlwZSsnXCIuICc7XG4gICAgICBlcnJzdHIgKz0gJ1Nob3VsZCBiZSBvbmUgb2Y6IFwiJyt0eXBlcy5qb2luKCdcIiwgXCInKSsnXCInO1xuXG4gICAgICB0aHJvdyBlcnJzdHI7XG4gICAgfVxuICAgIHJldHVybiBfZm9ybWF0c1t0eXBlXShlbGVtLCBjdHJsKTtcbiAgfVxuXG59XSlcblxuLmRpcmVjdGl2ZSgncGF5bWVudHNGb3JtYXQnLCBbJyR3aW5kb3cnLCAnX0Zvcm1hdCcsIGZ1bmN0aW9uKCR3aW5kb3csIF9Gb3JtYXQpe1xuICAgIHJldHVybiB7XG4gICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgcmVxdWlyZTogJ25nTW9kZWwnLFxuICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW0sIGF0dHIsIGN0cmwpe1xuICAgICAgICBfRm9ybWF0KGF0dHIucGF5bWVudHNGb3JtYXQsIGVsZW0sIGN0cmwpO1xuICAgICAgfVxuICAgIH1cbn1dKTthbmd1bGFyLm1vZHVsZSgnYW5ndWxhclBheW1lbnRzJylcblxuXG5cbi5mYWN0b3J5KCdfVmFsaWRhdGUnLCBbJ0NhcmRzJywgJ0NvbW1vbicsICckcGFyc2UnLCBmdW5jdGlvbihDYXJkcywgQ29tbW9uLCAkcGFyc2Upe1xuXG4gIHZhciBfX2luZGV4T2YgPSBbXS5pbmRleE9mIHx8IGZ1bmN0aW9uKGl0ZW0pIHsgZm9yICh2YXIgaSA9IDAsIGwgPSB0aGlzLmxlbmd0aDsgaSA8IGw7IGkrKykgeyBpZiAoaSBpbiB0aGlzICYmIHRoaXNbaV0gPT09IGl0ZW0pIHJldHVybiBpOyB9IHJldHVybiAtMTsgfVxuXG4gIHZhciBfbHVobkNoZWNrID0gZnVuY3Rpb24obnVtKSB7XG4gICAgdmFyIGRpZ2l0LCBkaWdpdHMsIG9kZCwgc3VtLCBpLCBsZW47XG5cbiAgICBvZGQgPSB0cnVlO1xuICAgIHN1bSA9IDA7XG4gICAgZGlnaXRzID0gKG51bSArICcnKS5zcGxpdCgnJykucmV2ZXJzZSgpO1xuXG4gICAgZm9yIChpID0gMCwgbGVuID0gZGlnaXRzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG5cbiAgICAgIGRpZ2l0ID0gZGlnaXRzW2ldO1xuICAgICAgZGlnaXQgPSBwYXJzZUludChkaWdpdCwgMTApO1xuXG4gICAgICBpZiAoKG9kZCA9ICFvZGQpKSB7XG4gICAgICAgIGRpZ2l0ICo9IDI7XG4gICAgICB9XG5cbiAgICAgIGlmIChkaWdpdCA+IDkpIHtcbiAgICAgICAgZGlnaXQgLT0gOTtcbiAgICAgIH1cblxuICAgICAgc3VtICs9IGRpZ2l0O1xuXG4gICAgfVxuXG4gICAgcmV0dXJuIHN1bSAlIDEwID09PSAwO1xuICB9O1xuXG4gIHZhciBfdmFsaWRhdG9ycyA9IHt9XG5cbiAgX3ZhbGlkYXRvcnNbJ2N2YyddID0gZnVuY3Rpb24oY3ZjLCBjdHJsLCBzY29wZSwgYXR0cil7XG4gICAgICB2YXIgcmVmLCByZWYxO1xuXG4gICAgICAvLyB2YWxpZCBpZiBlbXB0eSAtIGxldCBuZy1yZXF1aXJlZCBoYW5kbGUgZW1wdHlcbiAgICAgIGlmKGN2YyA9PSBudWxsIHx8IGN2Yy5sZW5ndGggPT0gMCkgcmV0dXJuIHRydWU7XG5cbiAgICAgIGlmICghL15cXGQrJC8udGVzdChjdmMpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgdmFyIHR5cGU7XG4gICAgICBpZihhdHRyLnBheW1lbnRzVHlwZU1vZGVsKSB7XG4gICAgICAgICAgdmFyIHR5cGVNb2RlbCA9ICRwYXJzZShhdHRyLnBheW1lbnRzVHlwZU1vZGVsKTtcbiAgICAgICAgICB0eXBlID0gdHlwZU1vZGVsKHNjb3BlKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHR5cGUpIHtcbiAgICAgICAgcmV0dXJuIHJlZiA9IGN2Yy5sZW5ndGgsIF9faW5kZXhPZi5jYWxsKChyZWYxID0gQ2FyZHMuZnJvbVR5cGUodHlwZSkpICE9IG51bGwgPyByZWYxLmN2Y0xlbmd0aCA6IHZvaWQgMCwgcmVmKSA+PSAwO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGN2Yy5sZW5ndGggPj0gMyAmJiBjdmMubGVuZ3RoIDw9IDQ7XG4gICAgICB9XG4gIH1cblxuICBfdmFsaWRhdG9yc1snY2FyZCddID0gZnVuY3Rpb24obnVtLCBjdHJsLCBzY29wZSwgYXR0cil7XG4gICAgICB2YXIgY2FyZCwgcmVmLCB0eXBlTW9kZWw7XG5cbiAgICAgIGlmKGF0dHIucGF5bWVudHNUeXBlTW9kZWwpIHtcbiAgICAgICAgICB0eXBlTW9kZWwgPSAkcGFyc2UoYXR0ci5wYXltZW50c1R5cGVNb2RlbCk7XG4gICAgICB9XG5cbiAgICAgIHZhciBjbGVhckNhcmQgPSBmdW5jdGlvbigpe1xuICAgICAgICAgIGlmKHR5cGVNb2RlbCkge1xuICAgICAgICAgICAgICB0eXBlTW9kZWwuYXNzaWduKHNjb3BlLCBudWxsKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY3RybC4kY2FyZCA9IG51bGw7XG4gICAgICB9O1xuXG4gICAgICAvLyB2YWxpZCBpZiBlbXB0eSAtIGxldCBuZy1yZXF1aXJlZCBoYW5kbGUgZW1wdHlcbiAgICAgIGlmKG51bSA9PSBudWxsIHx8IG51bS5sZW5ndGggPT0gMCl7XG4gICAgICAgIGNsZWFyQ2FyZCgpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgbnVtID0gKG51bSArICcnKS5yZXBsYWNlKC9cXHMrfC0vZywgJycpO1xuXG4gICAgICBpZiAoIS9eXFxkKyQvLnRlc3QobnVtKSkge1xuICAgICAgICBjbGVhckNhcmQoKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICBjYXJkID0gQ2FyZHMuZnJvbU51bWJlcihudW0pO1xuXG4gICAgICBpZighY2FyZCkge1xuICAgICAgICBjbGVhckNhcmQoKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICBjdHJsLiRjYXJkID0gYW5ndWxhci5jb3B5KGNhcmQpO1xuXG4gICAgICBpZih0eXBlTW9kZWwpIHtcbiAgICAgICAgICB0eXBlTW9kZWwuYXNzaWduKHNjb3BlLCBjYXJkLnR5cGUpO1xuICAgICAgfVxuXG4gICAgICByZXQgPSAocmVmID0gbnVtLmxlbmd0aCwgX19pbmRleE9mLmNhbGwoY2FyZC5sZW5ndGgsIHJlZikgPj0gMCkgJiYgKGNhcmQubHVobiA9PT0gZmFsc2UgfHwgX2x1aG5DaGVjayhudW0pKTtcblxuICAgICAgcmV0dXJuIHJldDtcbiAgfVxuXG4gIF92YWxpZGF0b3JzWydleHBpcnknXSA9IGZ1bmN0aW9uKHZhbCl7XG4gICAgLy8gdmFsaWQgaWYgZW1wdHkgLSBsZXQgbmctcmVxdWlyZWQgaGFuZGxlIGVtcHR5XG4gICAgaWYodmFsID09IG51bGwgfHwgdmFsLmxlbmd0aCA9PSAwKSByZXR1cm4gdHJ1ZTtcblxuICAgIG9iaiA9IENvbW1vbi5wYXJzZUV4cGlyeSh2YWwpO1xuXG4gICAgbW9udGggPSBvYmoubW9udGg7XG4gICAgeWVhciA9IG9iai55ZWFyO1xuXG4gICAgdmFyIGN1cnJlbnRUaW1lLCBleHBpcnksIHByZWZpeDtcblxuICAgIGlmICghKG1vbnRoICYmIHllYXIpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKCEvXlxcZCskLy50ZXN0KG1vbnRoKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGlmICghL15cXGQrJC8udGVzdCh5ZWFyKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGlmICghKHBhcnNlSW50KG1vbnRoLCAxMCkgPD0gMTIpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKHllYXIubGVuZ3RoID09PSAyKSB7XG4gICAgICBwcmVmaXggPSAobmV3IERhdGUpLmdldEZ1bGxZZWFyKCk7XG4gICAgICBwcmVmaXggPSBwcmVmaXgudG9TdHJpbmcoKS5zbGljZSgwLCAyKTtcbiAgICAgIHllYXIgPSBwcmVmaXggKyB5ZWFyO1xuICAgIH1cblxuICAgIGV4cGlyeSA9IG5ldyBEYXRlKHllYXIsIG1vbnRoKTtcbiAgICBjdXJyZW50VGltZSA9IG5ldyBEYXRlO1xuICAgIGV4cGlyeS5zZXRNb250aChleHBpcnkuZ2V0TW9udGgoKSAtIDEpO1xuICAgIGV4cGlyeS5zZXRNb250aChleHBpcnkuZ2V0TW9udGgoKSArIDEsIDEpO1xuXG4gICAgcmV0dXJuIGV4cGlyeSA+IGN1cnJlbnRUaW1lO1xuICB9XG5cbiAgcmV0dXJuIGZ1bmN0aW9uKHR5cGUsIHZhbCwgY3RybCwgc2NvcGUsIGF0dHIpe1xuICAgIGlmKCFfdmFsaWRhdG9yc1t0eXBlXSl7XG5cbiAgICAgIHR5cGVzID0gT2JqZWN0LmtleXMoX3ZhbGlkYXRvcnMpO1xuXG4gICAgICBlcnJzdHIgID0gJ1Vua25vd24gdHlwZSBmb3IgdmFsaWRhdGlvbjogXCInK3R5cGUrJ1wiLiAnO1xuICAgICAgZXJyc3RyICs9ICdTaG91bGQgYmUgb25lIG9mOiBcIicrdHlwZXMuam9pbignXCIsIFwiJykrJ1wiJztcblxuICAgICAgdGhyb3cgZXJyc3RyO1xuICAgIH1cbiAgICByZXR1cm4gX3ZhbGlkYXRvcnNbdHlwZV0odmFsLCBjdHJsLCBzY29wZSwgYXR0cik7XG4gIH1cbn1dKVxuXG5cbi5mYWN0b3J5KCdfVmFsaWRhdGVXYXRjaCcsIFsnX1ZhbGlkYXRlJywgZnVuY3Rpb24oX1ZhbGlkYXRlKXtcblxuICAgIHZhciBfdmFsaWRhdG9yV2F0Y2hlcyA9IHt9XG5cbiAgICBfdmFsaWRhdG9yV2F0Y2hlc1snY3ZjJ10gPSBmdW5jdGlvbih0eXBlLCBjdHJsLCBzY29wZSwgYXR0cil7XG4gICAgICAgIGlmKGF0dHIucGF5bWVudHNUeXBlTW9kZWwpIHtcbiAgICAgICAgICAgIHNjb3BlLiR3YXRjaChhdHRyLnBheW1lbnRzVHlwZU1vZGVsLCBmdW5jdGlvbihuZXdWYWwsIG9sZFZhbCkge1xuICAgICAgICAgICAgICAgIGlmKG5ld1ZhbCAhPSBvbGRWYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHZhbGlkID0gX1ZhbGlkYXRlKHR5cGUsIGN0cmwuJG1vZGVsVmFsdWUsIGN0cmwsIHNjb3BlLCBhdHRyKTtcbiAgICAgICAgICAgICAgICAgICAgY3RybC4kc2V0VmFsaWRpdHkodHlwZSwgdmFsaWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGZ1bmN0aW9uKHR5cGUsIGN0cmwsIHNjb3BlLCBhdHRyKXtcbiAgICAgICAgaWYoX3ZhbGlkYXRvcldhdGNoZXNbdHlwZV0pe1xuICAgICAgICAgICAgcmV0dXJuIF92YWxpZGF0b3JXYXRjaGVzW3R5cGVdKHR5cGUsIGN0cmwsIHNjb3BlLCBhdHRyKTtcbiAgICAgICAgfVxuICAgIH1cbn1dKVxuXG4uZGlyZWN0aXZlKCdwYXltZW50c1ZhbGlkYXRlJywgWyckd2luZG93JywgJ19WYWxpZGF0ZScsICdfVmFsaWRhdGVXYXRjaCcsIGZ1bmN0aW9uKCR3aW5kb3csIF9WYWxpZGF0ZSwgX1ZhbGlkYXRlV2F0Y2gpe1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnQScsXG4gICAgcmVxdWlyZTogJ25nTW9kZWwnLFxuICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtLCBhdHRyLCBjdHJsKXtcblxuICAgICAgdmFyIHR5cGUgPSBhdHRyLnBheW1lbnRzVmFsaWRhdGU7XG5cbiAgICAgIF9WYWxpZGF0ZVdhdGNoKHR5cGUsIGN0cmwsIHNjb3BlLCBhdHRyKTtcblxuICAgICAgdmFyIHZhbGlkYXRlRm4gPSBmdW5jdGlvbih2YWwpIHtcbiAgICAgICAgICB2YXIgdmFsaWQgPSBfVmFsaWRhdGUodHlwZSwgdmFsLCBjdHJsLCBzY29wZSwgYXR0cik7XG4gICAgICAgICAgY3RybC4kc2V0VmFsaWRpdHkodHlwZSwgdmFsaWQpO1xuICAgICAgICAgIHJldHVybiB2YWxpZCA/IHZhbCA6IHVuZGVmaW5lZDtcbiAgICAgIH07XG5cbiAgICAgIGN0cmwuJGZvcm1hdHRlcnMucHVzaCh2YWxpZGF0ZUZuKTtcbiAgICAgIGN0cmwuJHBhcnNlcnMucHVzaCh2YWxpZGF0ZUZuKTtcbiAgICB9XG4gIH1cbn1dKVxuO2FuZ3VsYXIubW9kdWxlKCdhbmd1bGFyUGF5bWVudHMnKVxuXG4uZGlyZWN0aXZlKCdzdHJpcGVGb3JtJywgWyckd2luZG93JywgJyRwYXJzZScsICdDb21tb24nLCBmdW5jdGlvbigkd2luZG93LCAkcGFyc2UsIENvbW1vbikge1xuICAgIFxuICAvLyBkaXJlY3RpdmUgaW50ZXJjZXB0cyBmb3JtLXN1Ym1pc3Npb24sIG9idGFpbnMgU3RyaXBlJ3MgY2FyZFRva2VuIHVzaW5nIHN0cmlwZS5qc1xuICAvLyBhbmQgdGhlbiBwYXNzZXMgdGhhdCB0byBjYWxsYmFjayBwcm92aWRlZCBpbiBzdHJpcGVGb3JtLCBhdHRyaWJ1dGUuXG5cbiAgLy8gZGF0YSB0aGF0IGlzIHNlbnQgdG8gc3RyaXBlIGlzIGZpbHRlcmVkIGZyb20gc2NvcGUsIGxvb2tpbmcgZm9yIHZhbGlkIHZhbHVlcyB0b1xuICAvLyBzZW5kIGFuZCBjb252ZXJ0aW5nIGNhbWVsQ2FzZSB0byBzbmFrZV9jYXNlLCBlLmcgZXhwTW9udGggLT4gZXhwX21vbnRoXG5cblxuICAvLyBmaWx0ZXIgdmFsaWQgc3RyaXBlLXZhbHVlcyBmcm9tIHNjb3BlIGFuZCBjb252ZXJ0IHRoZW0gZnJvbSBjYW1lbENhc2UgdG8gc25ha2VfY2FzZVxuICBfZ2V0RGF0YVRvU2VuZCA9IGZ1bmN0aW9uKGRhdGEpe1xuICAgICAgICAgICBcbiAgICB2YXIgcG9zc2libGVLZXlzID0gWydudW1iZXInLCAnZXhwTW9udGgnLCAnZXhwWWVhcicsIFxuICAgICAgICAgICAgICAgICAgICAnY3ZjJywgJ25hbWUnLCdhZGRyZXNzTGluZTEnLCBcbiAgICAgICAgICAgICAgICAgICAgJ2FkZHJlc3NMaW5lMicsICdhZGRyZXNzQ2l0eScsXG4gICAgICAgICAgICAgICAgICAgICdhZGRyZXNzU3RhdGUnLCAnYWRkcmVzc1ppcCcsXG4gICAgICAgICAgICAgICAgICAgICdhZGRyZXNzQ291bnRyeSddXG4gICAgXG4gICAgdmFyIGNhbWVsVG9TbmFrZSA9IGZ1bmN0aW9uKHN0cil7XG4gICAgICByZXR1cm4gc3RyLnJlcGxhY2UoLyhbQS1aXSkvZywgZnVuY3Rpb24obSl7XG4gICAgICAgIHJldHVybiBcIl9cIittLnRvTG93ZXJDYXNlKCk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICB2YXIgcmV0ID0ge307XG5cbiAgICBmb3IoaSBpbiBwb3NzaWJsZUtleXMpe1xuICAgICAgICBpZihkYXRhLmhhc093blByb3BlcnR5KHBvc3NpYmxlS2V5c1tpXSkpe1xuICAgICAgICAgICAgcmV0W2NhbWVsVG9TbmFrZShwb3NzaWJsZUtleXNbaV0pXSA9IGFuZ3VsYXIuY29weShkYXRhW3Bvc3NpYmxlS2V5c1tpXV0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0WydudW1iZXInXSA9IChyZXRbJ251bWJlciddIHx8ICcnKS5yZXBsYWNlKC8gL2csJycpO1xuXG4gICAgcmV0dXJuIHJldDtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdBJyxcbiAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbSwgYXR0cikge1xuXG4gICAgICBpZighJHdpbmRvdy5TdHJpcGUpe1xuICAgICAgICAgIHRocm93ICdzdHJpcGVGb3JtIHJlcXVpcmVzIHRoYXQgeW91IGhhdmUgc3RyaXBlLmpzIGluc3RhbGxlZC4gSW5jbHVkZSBodHRwczovL2pzLnN0cmlwZS5jb20vdjIvIGludG8geW91ciBodG1sLic7XG4gICAgICB9XG5cbiAgICAgIHZhciBmb3JtID0gYW5ndWxhci5lbGVtZW50KGVsZW0pO1xuXG4gICAgICBmb3JtLmJpbmQoJ3N1Ym1pdCcsIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgIGV4cE1vbnRoVXNlZCA9IHNjb3BlLmV4cE1vbnRoID8gdHJ1ZSA6IGZhbHNlO1xuICAgICAgICBleHBZZWFyVXNlZCA9IHNjb3BlLmV4cFllYXIgPyB0cnVlIDogZmFsc2U7XG5cbiAgICAgICAgaWYoIShleHBNb250aFVzZWQgJiYgZXhwWWVhclVzZWQpKXtcbiAgICAgICAgICBleHAgPSBDb21tb24ucGFyc2VFeHBpcnkoc2NvcGUuZXhwaXJ5KVxuICAgICAgICAgIHNjb3BlLmV4cE1vbnRoID0gZXhwLm1vbnRoXG4gICAgICAgICAgc2NvcGUuZXhwWWVhciA9IGV4cC55ZWFyXG4gICAgICAgIH1cblxuICAgICAgICB2YXIgYnV0dG9uID0gZm9ybS5maW5kKCdidXR0b24nKTtcbiAgICAgICAgYnV0dG9uLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSk7XG5cbiAgICAgICAgaWYoZm9ybS5oYXNDbGFzcygnbmctdmFsaWQnKSkge1xuICAgICAgICAgIFxuXG4gICAgICAgICAgJHdpbmRvdy5TdHJpcGUuY3JlYXRlVG9rZW4oX2dldERhdGFUb1NlbmQoc2NvcGUpLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xuICAgICAgICAgICAgc2NvcGUuJGFwcGx5KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICBzY29wZVthdHRyLnN0cmlwZUZvcm1dLmFwcGx5KHNjb3BlLCBhcmdzKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYnV0dG9uLnByb3AoJ2Rpc2FibGVkJywgZmFsc2UpO1xuXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzY29wZS4kYXBwbHkoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzY29wZVthdHRyLnN0cmlwZUZvcm1dLmFwcGx5KHNjb3BlLCBbNDAwLCB7ZXJyb3I6ICdJbnZhbGlkIGZvcm0gc3VibWl0dGVkLid9XSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgYnV0dG9uLnByb3AoJ2Rpc2FibGVkJywgZmFsc2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgc2NvcGUuZXhwTW9udGggPSBudWxsO1xuICAgICAgICBzY29wZS5leHBZZWFyICA9IG51bGw7XG5cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufV0pO1xuIl19
